import{A as Sn,a as Y,b as ve,c as Av,d as V,e as WD,f as KD,g as Of,h as QD,i as YD,j as ZD,k as Pv,l as XD,m as Au,n as Ov,o as Rf,p as JD,q as eM,r as Rv,s as ht,t as rs,u as Sr,v as Nf,w as Pu,x as tM,y as nM,z as Ki}from"./chunk-S7MIF4KJ.js";function rM(n,e){return Object.is(n,e)}var Bt=null,kf=!1,Ff=1,oi=Symbol("SIGNAL");function Fe(n){let e=Bt;return Bt=n,e}function iM(){return Bt}var Ru={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Fv(n){if(kf)throw new Error("");if(Bt===null)return;Bt.consumerOnSignalRead(n);let e=Bt.nextProducerIndex++;if(Bf(Bt),e<Bt.producerNode.length&&Bt.producerNode[e]!==n&&Ou(Bt)){let t=Bt.producerNode[e];jf(t,Bt.producerIndexOfThis[e])}Bt.producerNode[e]!==n&&(Bt.producerNode[e]=n,Bt.producerIndexOfThis[e]=Ou(Bt)?cM(n,Bt,e):0),Bt.producerLastReadVersion[e]=n.version}function HL(){Ff++}function oM(n){if(!(Ou(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Ff)){if(!n.producerMustRecompute(n)&&!Lv(n)){n.dirty=!1,n.lastCleanEpoch=Ff;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Ff}}function sM(n){if(n.liveConsumerNode===void 0)return;let e=kf;kf=!0;try{for(let t of n.liveConsumerNode)t.dirty||GL(t)}finally{kf=e}}function aM(){return Bt?.consumerAllowSignalWrites!==!1}function GL(n){n.dirty=!0,sM(n),n.consumerMarkedDirty?.(n)}function Lf(n){return n&&(n.nextProducerIndex=0),Fe(n)}function Vv(n,e){if(Fe(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Ou(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)jf(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Lv(n){Bf(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(oM(t),r!==t.version))return!0}return!1}function jv(n){if(Bf(n),Ou(n))for(let e=0;e<n.producerNode.length;e++)jf(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function cM(n,e,t){if(uM(n),n.liveConsumerNode.length===0&&lM(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=cM(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function jf(n,e){if(uM(n),n.liveConsumerNode.length===1&&lM(n))for(let r=0;r<n.producerNode.length;r++)jf(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Bf(i),i.producerIndexOfThis[r]=e}}function Ou(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Bf(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function uM(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function lM(n){return n.producerNode!==void 0}function dM(n){let e=Object.create(WL);e.computation=n;let t=()=>{if(oM(e),Fv(e),e.value===Vf)throw e.error;return e.value};return t[oi]=e,t}var Nv=Symbol("UNSET"),kv=Symbol("COMPUTING"),Vf=Symbol("ERRORED"),WL=ve(Y({},Ru),{value:Nv,dirty:!0,error:null,equal:rM,producerMustRecompute(n){return n.value===Nv||n.value===kv},producerRecomputeValue(n){if(n.value===kv)throw new Error("Detected cycle in computations.");let e=n.value;n.value=kv;let t=Lf(n),r;try{r=n.computation()}catch(i){r=Vf,n.error=i}finally{Vv(n,t)}if(e!==Nv&&e!==Vf&&r!==Vf&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function KL(){throw new Error}var fM=KL;function hM(){fM()}function pM(n){fM=n}var QL=null;function mM(n){let e=Object.create(yM);e.value=n;let t=()=>(Fv(e),e.value);return t[oi]=e,t}function Bv(n,e){aM()||hM(),n.equal(n.value,e)||(n.value=e,YL(n))}function gM(n,e){aM()||hM(),Bv(n,e(n.value))}var yM=ve(Y({},Ru),{equal:rM,value:void 0});function YL(n){n.version++,HL(),sM(n),QL?.()}function me(n){return typeof n=="function"}function pa(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Uf=pa(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function is(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var vt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(me(r))try{r()}catch(o){e=o instanceof Uf?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{vM(o)}catch(s){e=e??[],s instanceof Uf?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Uf(e)}}add(e){var t;if(e&&e!==this)if(this.closed)vM(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&is(t,e)}remove(e){let{_finalizers:t}=this;t&&is(t,e),e instanceof n&&e._removeParent(this)}};vt.EMPTY=(()=>{let n=new vt;return n.closed=!0,n})();var Uv=vt.EMPTY;function $f(n){return n instanceof vt||n&&"closed"in n&&me(n.remove)&&me(n.add)&&me(n.unsubscribe)}function vM(n){me(n)?n():n.unsubscribe()}var hr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ma={setTimeout(n,e,...t){let{delegate:r}=ma;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ma;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function zf(n){ma.setTimeout(()=>{let{onUnhandledError:e}=hr;if(e)e(n);else throw n})}function Nu(){}var _M=$v("C",void 0,void 0);function wM(n){return $v("E",void 0,n)}function CM(n){return $v("N",n,void 0)}function $v(n,e,t){return{kind:n,value:e,error:t}}var os=null;function ga(n){if(hr.useDeprecatedSynchronousErrorHandling){let e=!os;if(e&&(os={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=os;if(os=null,t)throw r}}else n()}function bM(n){hr.useDeprecatedSynchronousErrorHandling&&os&&(os.errorThrown=!0,os.error=n)}var ss=class extends vt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,$f(e)&&e.add(this)):this.destination=JL}static create(e,t,r){return new si(e,t,r)}next(e){this.isStopped?qv(CM(e),this):this._next(e)}error(e){this.isStopped?qv(wM(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?qv(_M,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},ZL=Function.prototype.bind;function zv(n,e){return ZL.call(n,e)}var Hv=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){qf(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){qf(r)}else qf(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){qf(t)}}},si=class extends ss{constructor(e,t,r){super();let i;if(me(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&hr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&zv(e.next,o),error:e.error&&zv(e.error,o),complete:e.complete&&zv(e.complete,o)}):i=e}this.destination=new Hv(i)}};function qf(n){hr.useDeprecatedSynchronousErrorHandling?bM(n):zf(n)}function XL(n){throw n}function qv(n,e){let{onStoppedNotification:t}=hr;t&&ma.setTimeout(()=>t(n,e))}var JL={closed:!0,next:Nu,error:XL,complete:Nu};var ya=typeof Symbol=="function"&&Symbol.observable||"@@observable";function yn(n){return n}function Gv(...n){return Wv(n)}function Wv(n){return n.length===0?yn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Ie=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=tj(t)?t:new si(t,r,i);return ga(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=EM(r),new r((i,o)=>{let s=new si({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[ya](){return this}pipe(...t){return Wv(t)(this)}toPromise(t){return t=EM(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function EM(n){var e;return(e=n??hr.Promise)!==null&&e!==void 0?e:Promise}function ej(n){return n&&me(n.next)&&me(n.error)&&me(n.complete)}function tj(n){return n&&n instanceof ss||ej(n)&&$f(n)}function Kv(n){return me(n?.lift)}function xe(n){return e=>{if(Kv(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function De(n,e,t,r,i){return new Qv(n,e,t,r,i)}var Qv=class extends ss{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function va(){return xe((n,e)=>{let t=null;n._refCount++;let r=De(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var _a=class extends Ie{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Kv(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new vt;let t=this.getSubject();e.add(this.source.subscribe(De(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=vt.EMPTY)}return e}refCount(){return va()(this)}};var IM=pa(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ke=(()=>{class n extends Ie{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Hf(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new IM}next(t){ga(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){ga(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ga(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Uv:(this.currentObservers=null,o.push(t),new vt(()=>{this.currentObservers=null,is(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Ie;return t.source=this,t}}return n.create=(e,t)=>new Hf(e,t),n})(),Hf=class extends Ke{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Uv}};var xt=class extends Ke{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ku={now(){return(ku.delegate||Date).now()},delegate:void 0};var Gf=class extends Ke{constructor(e=1/0,t=1/0,r=ku){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var Wf=class extends vt{constructor(e,t){super()}schedule(e,t=0){return this}};var Fu={setInterval(n,e,...t){let{delegate:r}=Fu;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Fu;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var wa=class extends Wf{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Fu.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Fu.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,is(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Ca=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Ca.now=ku.now;var ba=class extends Ca{constructor(e,t=Ca.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Vu=new ba(wa);var Kf=class extends wa{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Qf=class extends ba{};var Yv=new Qf(Kf);var vn=new Ie(n=>n.complete());function xM(n){return n&&me(n.schedule)}function Zv(n){return n[n.length-1]}function Yf(n){return me(Zv(n))?n.pop():void 0}function Ar(n){return xM(Zv(n))?n.pop():void 0}function DM(n,e){return typeof Zv(n)=="number"?n.pop():e}var Zf=n=>n&&typeof n.length=="number"&&typeof n!="function";function Xf(n){return me(n?.then)}function Jf(n){return me(n[ya])}function eh(n){return Symbol.asyncIterator&&me(n?.[Symbol.asyncIterator])}function th(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function nj(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var nh=nj();function rh(n){return me(n?.[nh])}function ih(n){return QD(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Of(t.read());if(i)return yield Of(void 0);yield yield Of(r)}}finally{t.releaseLock()}})}function oh(n){return me(n?.getReader)}function it(n){if(n instanceof Ie)return n;if(n!=null){if(Jf(n))return rj(n);if(Zf(n))return ij(n);if(Xf(n))return oj(n);if(eh(n))return MM(n);if(rh(n))return sj(n);if(oh(n))return aj(n)}throw th(n)}function rj(n){return new Ie(e=>{let t=n[ya]();if(me(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function ij(n){return new Ie(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function oj(n){return new Ie(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,zf)})}function sj(n){return new Ie(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function MM(n){return new Ie(e=>{cj(n,e).catch(t=>e.error(t))})}function aj(n){return MM(ih(n))}function cj(n,e){var t,r,i,o;return KD(this,void 0,void 0,function*(){try{for(t=YD(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function An(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Kn(n,e=0){return xe((t,r)=>{t.subscribe(De(r,i=>An(r,n,()=>r.next(i),e),()=>An(r,n,()=>r.complete(),e),i=>An(r,n,()=>r.error(i),e)))})}function pr(n,e=0){return xe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function TM(n,e){return it(n).pipe(pr(e),Kn(e))}function SM(n,e){return it(n).pipe(pr(e),Kn(e))}function AM(n,e){return new Ie(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function PM(n,e){return new Ie(t=>{let r;return An(t,e,()=>{r=n[nh](),An(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>me(r?.return)&&r.return()})}function sh(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ie(t=>{An(t,e,()=>{let r=n[Symbol.asyncIterator]();An(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function OM(n,e){return sh(ih(n),e)}function RM(n,e){if(n!=null){if(Jf(n))return TM(n,e);if(Zf(n))return AM(n,e);if(Xf(n))return SM(n,e);if(eh(n))return sh(n,e);if(rh(n))return PM(n,e);if(oh(n))return OM(n,e)}throw th(n)}function Me(n,e){return e?RM(n,e):it(n)}function ue(...n){let e=Ar(n);return Me(n,e)}function Ea(n,e){let t=me(n)?n:()=>n,r=i=>i.error(t());return new Ie(e?i=>e.schedule(r,0,i):r)}function Xv(n){return!!n&&(n instanceof Ie||me(n.lift)&&me(n.subscribe))}var ai=pa(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function se(n,e){return xe((t,r)=>{let i=0;t.subscribe(De(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:uj}=Array;function lj(n,e){return uj(e)?n(...e):n(e)}function ah(n){return se(e=>lj(n,e))}var{isArray:dj}=Array,{getPrototypeOf:fj,prototype:hj,keys:pj}=Object;function ch(n){if(n.length===1){let e=n[0];if(dj(e))return{args:e,keys:null};if(mj(e)){let t=pj(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function mj(n){return n&&typeof n=="object"&&fj(n)===hj}function uh(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Lu(...n){let e=Ar(n),t=Yf(n),{args:r,keys:i}=ch(n);if(r.length===0)return Me([],e);let o=new Ie(gj(r,e,i?s=>uh(i,s):yn));return t?o.pipe(ah(t)):o}function gj(n,e,t=yn){return r=>{NM(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)NM(e,()=>{let l=Me(n[c],e),d=!1;l.subscribe(De(r,f=>{o[c]=f,d||(d=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function NM(n,e,t){n?An(t,n,e):e()}function kM(n,e,t,r,i,o,s,a){let c=[],l=0,d=0,f=!1,p=()=>{f&&!c.length&&!l&&e.complete()},g=b=>l<r?y(b):c.push(b),y=b=>{o&&e.next(b),l++;let C=!1;it(t(b,d++)).subscribe(De(e,S=>{i?.(S),o?g(S):e.next(S)},()=>{C=!0},void 0,()=>{if(C)try{for(l--;c.length&&l<r;){let S=c.shift();s?An(e,s,()=>y(S)):y(S)}p()}catch(S){e.error(S)}}))};return n.subscribe(De(e,g,()=>{f=!0,p()})),()=>{a?.()}}function Pt(n,e,t=1/0){return me(e)?Pt((r,i)=>se((o,s)=>e(r,o,i,s))(it(n(r,i))),t):(typeof e=="number"&&(t=e),xe((r,i)=>kM(r,i,n,t)))}function Pr(n=1/0){return Pt(yn,n)}function FM(){return Pr(1)}function Ia(...n){return FM()(Me(n,Ar(n)))}function lh(n){return new Ie(e=>{it(n()).subscribe(e)})}function Jv(...n){let e=Yf(n),{args:t,keys:r}=ch(n),i=new Ie(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let d=0;d<s;d++){let f=!1;it(t[d]).subscribe(De(o,p=>{f||(f=!0,l--),a[d]=p},()=>c--,void 0,()=>{(!c||!f)&&(l||o.next(r?uh(r,a):a),o.complete())}))}});return e?i.pipe(ah(e)):i}function e0(...n){let e=Ar(n),t=DM(n,1/0),r=n;return r.length?r.length===1?it(r[0]):Pr(t)(Me(r,e)):vn}function pt(n,e){return xe((t,r)=>{let i=0;t.subscribe(De(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Qi(n){return xe((e,t)=>{let r=null,i=!1,o;r=e.subscribe(De(t,void 0,void 0,s=>{o=it(n(s,Qi(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function VM(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(De(s,d=>{let f=l++;c=a?n(c,d,f):(a=!0,d),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function ci(n,e){return me(e)?Pt(n,e,1):Pt(n,1)}function Yi(n){return xe((e,t)=>{let r=!1;e.subscribe(De(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ui(n){return n<=0?()=>vn:xe((e,t)=>{let r=0;e.subscribe(De(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function t0(n){return se(()=>n)}function n0(n,e=yn){return n=n??yj,xe((t,r)=>{let i,o=!0;t.subscribe(De(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function yj(n,e){return n===e}function dh(n=vj){return xe((e,t)=>{let r=!1;e.subscribe(De(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function vj(){return new ai}function Zi(n){return xe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Qn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?pt((i,o)=>n(i,o,r)):yn,ui(1),t?Yi(e):dh(()=>new ai))}function xa(n){return n<=0?()=>vn:xe((e,t)=>{let r=[];e.subscribe(De(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function r0(n,e){let t=arguments.length>=2;return r=>r.pipe(n?pt((i,o)=>n(i,o,r)):yn,xa(1),t?Yi(e):dh(()=>new ai))}function as(){return xe((n,e)=>{let t,r=!1;n.subscribe(De(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function li(n,e){return xe(VM(n,e,arguments.length>=2,!0))}function LM(n={}){let{connector:e=()=>new Ke,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,l=0,d=!1,f=!1,p=()=>{a?.unsubscribe(),a=void 0},g=()=>{p(),s=c=void 0,d=f=!1},y=()=>{let b=s;g(),b?.unsubscribe()};return xe((b,C)=>{l++,!f&&!d&&p();let S=c=c??e();C.add(()=>{l--,l===0&&!f&&!d&&(a=i0(y,i))}),S.subscribe(C),!s&&l>0&&(s=new si({next:k=>S.next(k),error:k=>{f=!0,p(),a=i0(g,t,k),S.error(k)},complete:()=>{d=!0,p(),a=i0(g,r),S.complete()}}),it(b).subscribe(s))})(o)}}function i0(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new si({next:()=>{r.unsubscribe(),n()}});return it(e(...t)).subscribe(r)}function fh(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,LM({connector:()=>new Gf(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function di(...n){let e=Ar(n);return xe((t,r)=>{(e?Ia(n,t,e):Ia(n,t)).subscribe(r)})}function dt(n,e){return xe((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(De(r,c=>{i?.unsubscribe();let l=0,d=o++;it(n(c,d)).subscribe(i=De(r,f=>r.next(e?e(c,f,d,l++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function hh(n,e){return me(e)?dt(()=>n,e):dt(()=>n)}function fi(n){return xe((e,t)=>{it(n).subscribe(De(t,()=>t.complete(),Nu)),!t.closed&&e.subscribe(t)})}function Ot(n,e,t){let r=me(n)||e||t?{next:n,error:e,complete:t}:n;return r?xe((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(De(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):yn}var bT="https://g.co/ng/security#xss",ae=class extends Error{constructor(e,t){super(np(e,t)),this.code=e}};function np(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Ku(n){return{toString:n}.toString()}var ph="__parameters__";function _j(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function ET(n,e,t){return Ku(()=>{let r=_j(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,d){let f=c.hasOwnProperty(ph)?c[ph]:Object.defineProperty(c,ph,{value:[]})[ph];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var _n=globalThis;function Ze(n){for(let e in n)if(n[e]===Ze)return e;throw Error("Could not find renamed property on target object.")}function wj(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Cn(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Cn).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function _0(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var Cj=Ze({__forward_ref__:Ze});function jr(n){return n.__forward_ref__=jr,n.toString=function(){return Cn(this())},n}function wn(n){return IT(n)?n():n}function IT(n){return typeof n=="function"&&n.hasOwnProperty(Cj)&&n.__forward_ref__===jr}function ee(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function _t(n){return{providers:n.providers||[],imports:n.imports||[]}}function rp(n){return jM(n,DT)||jM(n,MT)}function xT(n){return rp(n)!==null}function jM(n,e){return n.hasOwnProperty(e)?n[e]:null}function bj(n){let e=n&&(n[DT]||n[MT]);return e||null}function BM(n){return n&&(n.hasOwnProperty(UM)||n.hasOwnProperty(Ej))?n[UM]:null}var DT=Ze({\u0275prov:Ze}),UM=Ze({\u0275inj:Ze}),MT=Ze({ngInjectableDef:Ze}),Ej=Ze({ngInjectorDef:Ze}),X=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=ee({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function TT(n){return n&&!!n.\u0275providers}var Ij=Ze({\u0275cmp:Ze}),xj=Ze({\u0275dir:Ze}),Dj=Ze({\u0275pipe:Ze}),Mj=Ze({\u0275mod:Ze}),xh=Ze({\u0275fac:Ze}),Bu=Ze({__NG_ELEMENT_ID__:Ze}),$M=Ze({__NG_ENV_ID__:Ze});function Oa(n){return typeof n=="string"?n:n==null?"":String(n)}function Tj(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Oa(n)}function Sj(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ae(-200,n)}function m_(n,e){throw new ae(-201,!1)}var Te=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Te||{}),w0;function ST(){return w0}function Pn(n){let e=w0;return w0=n,e}function AT(n,e,t){let r=rp(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&Te.Optional)return null;if(e!==void 0)return e;m_(n,"Injector")}var Aj={},$u=Aj,C0="__NG_DI_FLAG__",Dh="ngTempTokenPath",Pj="ngTokenPath",Oj=/\n/gm,Rj="\u0275",zM="__source",Aa;function Nj(){return Aa}function Xi(n){let e=Aa;return Aa=n,e}function kj(n,e=Te.Default){if(Aa===void 0)throw new ae(-203,!1);return Aa===null?AT(n,void 0,e):Aa.get(n,e&Te.Optional?null:void 0,e)}function K(n,e=Te.Default){return(ST()||kj)(wn(n),e)}function H(n,e=Te.Default){return K(n,ip(e))}function ip(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function b0(n){let e=[];for(let t=0;t<n.length;t++){let r=wn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ae(900,!1);let i,o=Te.Default;for(let s=0;s<r.length;s++){let a=r[s],c=Fj(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(K(i,o))}else e.push(K(r))}return e}function PT(n,e){return n[C0]=e,n.prototype[C0]=e,n}function Fj(n){return n[C0]}function Vj(n,e,t,r){let i=n[Dh];throw e[zM]&&i.unshift(e[zM]),n.message=Lj(`
`+n.message,i,t,r),n[Pj]=i,n[Dh]=null,n}function Lj(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==Rj?n.slice(2):n;let i=Cn(e);if(Array.isArray(e))i=e.map(Cn).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Cn(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Oj,`
  `)}`}var za=PT(ET("Optional"),8);var g_=PT(ET("SkipSelf"),4);function ls(n,e){let t=n.hasOwnProperty(xh);return t?n[xh]:null}function jj(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function Bj(n){return n.flat(Number.POSITIVE_INFINITY)}function y_(n,e){n.forEach(t=>Array.isArray(t)?y_(t,e):e(t))}function OT(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Mh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Uj(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function v_(n,e,t){let r=Qu(n,e);return r>=0?n[r|1]=t:(r=~r,Uj(n,r,e,t)),r}function o0(n,e){let t=Qu(n,e);if(t>=0)return n[t|1]}function Qu(n,e){return $j(n,e,1)}function $j(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Ra={},On=[],Na=new X(""),RT=new X("",-1),NT=new X(""),Th=class{get(e,t=$u){if(t===$u){let r=new Error(`NullInjectorError: No provider for ${Cn(e)}!`);throw r.name="NullInjectorError",r}return t}},kT=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(kT||{}),Nr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Nr||{}),to=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(to||{});function zj(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function E0(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];qj(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function FT(n){return n===3||n===4||n===6}function qj(n){return n.charCodeAt(0)===64}function zu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?qM(n,t,i,null,e[++r]):qM(n,t,i,null,null))}}return n}function qM(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var VT="ng-template";function Hj(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&zj(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(__(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function __(n){return n.type===4&&n.value!==VT}function Gj(n,e,t){let r=n.type===4&&!t?VT:n.value;return e===r}function Wj(n,e,t){let r=4,i=n.attrs,o=i!==null?Yj(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!mr(r)&&!mr(c))return!1;if(s&&mr(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!Gj(n,c,t)||c===""&&e.length===1){if(mr(r))return!1;s=!0}}else if(r&8){if(i===null||!Hj(n,i,c,t)){if(mr(r))return!1;s=!0}}else{let l=e[++a],d=Kj(c,i,__(n),t);if(d===-1){if(mr(r))return!1;s=!0;continue}if(l!==""){let f;if(d>o?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(mr(r))return!1;s=!0}}}}return mr(r)||s}function mr(n){return(n&1)===0}function Kj(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Zj(e,n)}function Qj(n,e,t=!1){for(let r=0;r<e.length;r++)if(Wj(n,e[r],t))return!0;return!1}function Yj(n){for(let e=0;e<n.length;e++){let t=n[e];if(FT(t))return e}return n.length}function Zj(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function HM(n,e){return n?":not("+e.trim()+")":e}function Xj(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!mr(s)&&(e+=HM(o,i),i=""),r=s,o=o||!mr(r);t++}return i!==""&&(e+=HM(o,i)),e}function Jj(n){return n.map(Xj).join(",")}function e4(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!mr(i))break;i=o}r++}return{attrs:e,classes:t}}function Nt(n){return Ku(()=>{let e=$T(n),t=ve(Y({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===kT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Nr.Emulated,styles:n.styles||On,_:null,schemas:n.schemas||null,tView:null,id:""});zT(t);let r=n.dependencies;return t.directiveDefs=WM(r,!1),t.pipeDefs=WM(r,!0),t.id=r4(t),t})}function t4(n){return no(n)||LT(n)}function n4(n){return n!==null}function wt(n){return Ku(()=>({type:n.type,bootstrap:n.bootstrap||On,declarations:n.declarations||On,imports:n.imports||On,exports:n.exports||On,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function GM(n,e){if(n==null)return Ra;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=to.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==to.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Ct(n){return Ku(()=>{let e=$T(n);return zT(e),e})}function op(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function no(n){return n[Ij]||null}function LT(n){return n[xj]||null}function jT(n){return n[Dj]||null}function BT(n){let e=no(n)||LT(n)||jT(n);return e!==null?e.standalone:!1}function UT(n,e){let t=n[Mj]||null;if(!t&&e===!0)throw new Error(`Type ${Cn(n)} does not have '\u0275mod' property.`);return t}function $T(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Ra,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||On,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:GM(n.inputs,e),outputs:GM(n.outputs),debugInfo:null}}function zT(n){n.features?.forEach(e=>e(n))}function WM(n,e){if(!n)return null;let t=e?jT:t4;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(n4)}function r4(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function sp(n){return{\u0275providers:n}}function i4(...n){return{\u0275providers:qT(!0,n),\u0275fromNgModule:!0}}function qT(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return y_(e,s=>{let a=s;I0(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&HT(i,o),t}function HT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];w_(i,o=>{e(o,r)})}}function I0(n,e,t,r){if(n=wn(n),!n)return!1;let i=null,o=BM(n),s=!o&&no(n);if(!o&&!s){let c=n.ngModule;if(o=BM(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)I0(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{y_(o.imports,d=>{I0(d,e,t,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&HT(l,e)}if(!a){let l=ls(i)||(()=>new i);e({provide:i,useFactory:l,deps:On},i),e({provide:NT,useValue:i,multi:!0},i),e({provide:Na,useValue:()=>K(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;w_(c,d=>{e(d,l)})}}else return!1;return i!==n&&n.providers!==void 0}function w_(n,e){for(let t of n)TT(t)&&(t=t.\u0275providers),Array.isArray(t)?w_(t,e):e(t)}var o4=Ze({provide:String,useValue:Ze});function GT(n){return n!==null&&typeof n=="object"&&o4 in n}function s4(n){return!!(n&&n.useExisting)}function a4(n){return!!(n&&n.useFactory)}function ka(n){return typeof n=="function"}function c4(n){return!!n.useClass}var ap=new X(""),wh={},u4={},s0;function C_(){return s0===void 0&&(s0=new Th),s0}var bn=class{},qu=class extends bn{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,D0(e,s=>this.processProvider(s)),this.records.set(RT,Da(void 0,this)),i.has("environment")&&this.records.set(bn,Da(void 0,this));let o=this.records.get(ap);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(NT,On,Te.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Fe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Fe(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Xi(this),r=Pn(void 0),i;try{return e()}finally{Xi(t),Pn(r)}}get(e,t=$u,r=Te.Default){if(this.assertNotDestroyed(),e.hasOwnProperty($M))return e[$M](this);r=ip(r);let i,o=Xi(this),s=Pn(void 0);try{if(!(r&Te.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=p4(e)&&rp(e);l&&this.injectableDefInScope(l)?c=Da(x0(e),wh):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&Te.Self?C_():this.parent;return t=r&Te.Optional&&t===$u?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Dh]=a[Dh]||[]).unshift(Cn(e)),o)throw a;return Vj(a,e,"R3InjectorError",this.source)}else throw a}finally{Pn(s),Xi(o)}}resolveInjectorInitializers(){let e=Fe(null),t=Xi(this),r=Pn(void 0),i;try{let o=this.get(Na,On,Te.Self);for(let s of o)s()}finally{Xi(t),Pn(r),Fe(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Cn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ae(205,!1)}processProvider(e){e=wn(e);let t=ka(e)?e:wn(e&&e.provide),r=d4(e);if(!ka(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Da(void 0,wh,!0),i.factory=()=>b0(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Fe(null);try{return t.value===wh&&(t.value=u4,t.value=t.factory()),typeof t.value=="object"&&t.value&&h4(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Fe(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=wn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function x0(n){let e=rp(n),t=e!==null?e.factory:ls(n);if(t!==null)return t;if(n instanceof X)throw new ae(204,!1);if(n instanceof Function)return l4(n);throw new ae(204,!1)}function l4(n){if(n.length>0)throw new ae(204,!1);let t=bj(n);return t!==null?()=>t.factory(n):()=>new n}function d4(n){if(GT(n))return Da(void 0,n.useValue);{let e=WT(n);return Da(e,wh)}}function WT(n,e,t){let r;if(ka(n)){let i=wn(n);return ls(i)||x0(i)}else if(GT(n))r=()=>wn(n.useValue);else if(a4(n))r=()=>n.useFactory(...b0(n.deps||[]));else if(s4(n))r=()=>K(wn(n.useExisting));else{let i=wn(n&&(n.useClass||n.provide));if(f4(n))r=()=>new i(...b0(n.deps));else return ls(i)||x0(i)}return r}function Da(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function f4(n){return!!n.deps}function h4(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function p4(n){return typeof n=="function"||typeof n=="object"&&n instanceof X}function D0(n,e){for(let t of n)Array.isArray(t)?D0(t,e):t&&TT(t)?D0(t.\u0275providers,e):e(t)}function Xn(n,e){n instanceof qu&&n.assertNotDestroyed();let t,r=Xi(n),i=Pn(void 0);try{return e()}finally{Xi(r),Pn(i)}}function KT(){return ST()!==void 0||Nj()!=null}function m4(n){if(!KT())throw new ae(-203,!1)}function g4(n){let e=_n.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function y4(n){return typeof n=="function"}var yi=0,_e=1,pe=2,an=3,yr=4,vr=5,Sh=6,Ah=7,Zn=8,Fa=9,kr=10,Rt=11,Hu=12,KM=13,qa=14,Fr=15,ds=16,Ma=17,hi=18,cp=19,QT=20,Ji=21,a0=22,Yn=23,En=25,YT=1;var fs=7,Ph=8,Va=9,Rn=10,Oh=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Oh||{});function eo(n){return Array.isArray(n)&&typeof n[YT]=="object"}function vi(n){return Array.isArray(n)&&n[YT]===!0}function ZT(n){return(n.flags&4)!==0}function up(n){return n.componentOffset>-1}function b_(n){return(n.flags&1)===1}function ro(n){return!!n.template}function M0(n){return(n[pe]&512)!==0}var T0=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function XT(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Jn(){return JT}function JT(n){return n.type.prototype.ngOnChanges&&(n.setInput=_4),v4}Jn.ngInherit=!0;function v4(){let n=tS(this),e=n?.current;if(e){let t=n.previous;if(t===Ra)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function _4(n,e,t,r,i){let o=this.declaredInputs[r],s=tS(n)||w4(n,{previous:Ra,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new T0(l&&l.currentValue,t,c===Ra),XT(n,e,i,t)}var eS="__ngSimpleChanges__";function tS(n){return n[eS]||null}function w4(n,e){return n[eS]=e}var QM=null;var Or=function(n,e,t){QM?.(n,e,t)},nS="svg",C4="math";function Vr(n){for(;Array.isArray(n);)n=n[yi];return n}function rS(n,e){return Vr(e[n])}function er(n,e){return Vr(e[n.index])}function E_(n,e){return n.data[e]}function lp(n,e){return n[e]}function oo(n,e){let t=e[n];return eo(t)?t:t[yi]}function b4(n){return(n[pe]&4)===4}function I_(n){return(n[pe]&128)===128}function E4(n){return vi(n[an])}function Rh(n,e){return e==null?null:n[e]}function iS(n){n[Ma]=0}function oS(n){n[pe]&1024||(n[pe]|=1024,I_(n)&&fp(n))}function I4(n,e){for(;n>0;)e=e[qa],n--;return e}function dp(n){return!!(n[pe]&9216||n[Yn]?.dirty)}function S0(n){n[kr].changeDetectionScheduler?.notify(8),n[pe]&64&&(n[pe]|=1024),dp(n)&&fp(n)}function fp(n){n[kr].changeDetectionScheduler?.notify(0);let e=hs(n);for(;e!==null&&!(e[pe]&8192||(e[pe]|=8192,!I_(e)));)e=hs(e)}function sS(n,e){if((n[pe]&256)===256)throw new ae(911,!1);n[Ji]===null&&(n[Ji]=[]),n[Ji].push(e)}function x4(n,e){if(n[Ji]===null)return;let t=n[Ji].indexOf(e);t!==-1&&n[Ji].splice(t,1)}function hs(n){let e=n[an];return vi(e)?e[an]:e}var Ce={lFrame:mS(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var aS=!1;function D4(){return Ce.lFrame.elementDepthCount}function M4(){Ce.lFrame.elementDepthCount++}function T4(){Ce.lFrame.elementDepthCount--}function cS(){return Ce.bindingsEnabled}function S4(){return Ce.skipHydrationRootTNode!==null}function A4(n){return Ce.skipHydrationRootTNode===n}function P4(){Ce.skipHydrationRootTNode=null}function Re(){return Ce.lFrame.lView}function qt(){return Ce.lFrame.tView}function et(n){return Ce.lFrame.contextLView=n,n[Zn]}function tt(n){return Ce.lFrame.contextLView=null,n}function cn(){let n=uS();for(;n!==null&&n.type===64;)n=n.parent;return n}function uS(){return Ce.lFrame.currentTNode}function O4(){let n=Ce.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Yu(n,e){let t=Ce.lFrame;t.currentTNode=n,t.isParent=e}function lS(){return Ce.lFrame.isParent}function R4(){Ce.lFrame.isParent=!1}function N4(){return Ce.lFrame.contextLView}function dS(){return aS}function YM(n){aS=n}function hp(){let n=Ce.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function k4(){return Ce.lFrame.bindingIndex}function F4(n){return Ce.lFrame.bindingIndex=n}function Zu(){return Ce.lFrame.bindingIndex++}function x_(n){let e=Ce.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function V4(){return Ce.lFrame.inI18n}function L4(n,e){let t=Ce.lFrame;t.bindingIndex=t.bindingRootIndex=n,A0(e)}function j4(){return Ce.lFrame.currentDirectiveIndex}function A0(n){Ce.lFrame.currentDirectiveIndex=n}function B4(n){let e=Ce.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function fS(){return Ce.lFrame.currentQueryIndex}function D_(n){Ce.lFrame.currentQueryIndex=n}function U4(n){let e=n[_e];return e.type===2?e.declTNode:e.type===1?n[vr]:null}function hS(n,e,t){if(t&Te.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&Te.Host);)if(i=U4(o),i===null||(o=o[qa],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=Ce.lFrame=pS();return r.currentTNode=e,r.lView=n,!0}function M_(n){let e=pS(),t=n[_e];Ce.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function pS(){let n=Ce.lFrame,e=n===null?null:n.child;return e===null?mS(n):e}function mS(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function gS(){let n=Ce.lFrame;return Ce.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var yS=gS;function T_(){let n=gS();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function $4(n){return(Ce.lFrame.contextLView=I4(n,Ce.lFrame.contextLView))[Zn]}function so(){return Ce.lFrame.selectedIndex}function ps(n){Ce.lFrame.selectedIndex=n}function S_(){let n=Ce.lFrame;return E_(n.tView,n.selectedIndex)}function mt(){Ce.lFrame.currentNamespace=nS}function Dt(){z4()}function z4(){Ce.lFrame.currentNamespace=null}function q4(){return Ce.lFrame.currentNamespace}var vS=!0;function A_(){return vS}function P_(n){vS=n}function H4(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=JT(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function O_(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function Ch(n,e,t){_S(n,e,3,t)}function bh(n,e,t,r){(n[pe]&3)===t&&_S(n,e,t,r)}function c0(n,e){let t=n[pe];(t&3)===e&&(t&=16383,t+=1,n[pe]=t)}function _S(n,e,t,r){let i=r!==void 0?n[Ma]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Ma]+=65536),(a<o||o==-1)&&(G4(n,t,e,c),n[Ma]=(n[Ma]&4294901760)+c+2),c++}function ZM(n,e){Or(4,n,e);let t=Fe(null);try{e.call(n)}finally{Fe(t),Or(5,n,e)}}function G4(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[pe]>>14<n[Ma]>>16&&(n[pe]&3)===e&&(n[pe]+=16384,ZM(a,o)):ZM(a,o)}var Pa=-1,ms=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function W4(n){return n instanceof ms}function K4(n){return(n.flags&8)!==0}function Q4(n){return(n.flags&16)!==0}var u0={},P0=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=ip(r);let i=this.injector.get(e,u0,r);return i!==u0||t===u0?i:this.parentInjector.get(e,t,r)}};function wS(n){return n!==Pa}function Nh(n){return n&32767}function Y4(n){return n>>16}function kh(n,e){let t=Y4(n),r=e;for(;t>0;)r=r[qa],t--;return r}var O0=!0;function Fh(n){let e=O0;return O0=n,e}var Z4=256,CS=Z4-1,bS=5,X4=0,Rr={};function J4(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Bu)&&(r=t[Bu]),r==null&&(r=t[Bu]=X4++);let i=r&CS,o=1<<i;e.data[n+(i>>bS)]|=o}function Vh(n,e){let t=ES(n,e);if(t!==-1)return t;let r=e[_e];r.firstCreatePass&&(n.injectorIndex=e.length,l0(r.data,n),l0(e,null),l0(r.blueprint,null));let i=R_(n,e),o=n.injectorIndex;if(wS(i)){let s=Nh(i),a=kh(i,e),c=a[_e].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function l0(n,e){n.push(0,0,0,0,0,0,0,0,e)}function ES(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function R_(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=TS(i),r===null)return Pa;if(t++,i=i[qa],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Pa}function R0(n,e,t){J4(n,e,t)}function eB(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(FT(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function IS(n,e,t){if(t&Te.Optional||n!==void 0)return n;m_(e,"NodeInjector")}function xS(n,e,t,r){if(t&Te.Optional&&r===void 0&&(r=null),!(t&(Te.Self|Te.Host))){let i=n[Fa],o=Pn(void 0);try{return i?i.get(e,r,t&Te.Optional):AT(e,r,t&Te.Optional)}finally{Pn(o)}}return IS(r,e,t)}function DS(n,e,t,r=Te.Default,i){if(n!==null){if(e[pe]&2048&&!(r&Te.Self)){let s=iB(n,e,t,r,Rr);if(s!==Rr)return s}let o=MS(n,e,t,r,Rr);if(o!==Rr)return o}return xS(e,t,r,i)}function MS(n,e,t,r,i){let o=nB(t);if(typeof o=="function"){if(!hS(e,n,r))return r&Te.Host?IS(i,t,r):xS(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&Te.Optional))m_(t);else return s}finally{yS()}}else if(typeof o=="number"){let s=null,a=ES(n,e),c=Pa,l=r&Te.Host?e[Fr][vr]:null;for((a===-1||r&Te.SkipSelf)&&(c=a===-1?R_(n,e):e[a+8],c===Pa||!JM(r,!1)?a=-1:(s=e[_e],a=Nh(c),e=kh(c,e)));a!==-1;){let d=e[_e];if(XM(o,a,d.data)){let f=tB(a,e,t,s,r,l);if(f!==Rr)return f}c=e[a+8],c!==Pa&&JM(r,e[_e].data[a+8]===l)&&XM(o,a,e)?(s=d,a=Nh(c),e=kh(c,e)):a=-1}}return i}function tB(n,e,t,r,i,o){let s=e[_e],a=s.data[n+8],c=r==null?up(a)&&O0:r!=s&&(a.type&3)!==0,l=i&Te.Host&&o===a,d=Eh(a,s,t,c,l);return d!==null?gs(e,s,d,a):Rr}function Eh(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,d=o>>20,f=r?a:a+d,p=i?a+d:l;for(let g=f;g<p;g++){let y=s[g];if(g<c&&t===y||g>=c&&y.type===t)return g}if(i){let g=s[c];if(g&&ro(g)&&g.type===t)return c}return null}function gs(n,e,t,r){let i=n[t],o=e.data;if(W4(i)){let s=i;s.resolving&&Sj(Tj(o[t]));let a=Fh(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?Pn(s.injectImpl):null,d=hS(n,r,Te.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&H4(t,o[t],e)}finally{l!==null&&Pn(l),Fh(a),s.resolving=!1,yS()}}return i}function nB(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Bu)?n[Bu]:void 0;return typeof e=="number"?e>=0?e&CS:rB:e}function XM(n,e,t){let r=1<<n;return!!(t[e+(n>>bS)]&r)}function JM(n,e){return!(n&Te.Self)&&!(n&Te.Host&&e)}var us=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return DS(this._tNode,this._lView,e,ip(r),t)}};function rB(){return new us(cn(),Re())}function Cs(n){return Ku(()=>{let e=n.prototype.constructor,t=e[xh]||N0(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[xh]||N0(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function N0(n){return IT(n)?()=>{let e=N0(wn(n));return e&&e()}:ls(n)}function iB(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[pe]&2048&&!(s[pe]&512);){let a=MS(o,s,t,r|Te.Self,Rr);if(a!==Rr)return a;let c=o.parent;if(!c){let l=s[QT];if(l){let d=l.get(t,Rr,r);if(d!==Rr)return d}c=TS(s),s=s[qa]}o=c}return i}function TS(n){let e=n[_e],t=e.type;return t===2?e.declTNode:t===1?n[vr]:null}function N_(n){return eB(cn(),n)}function eT(n,e=null,t=null,r){let i=SS(n,e,t,r);return i.resolveInjectorInitializers(),i}function SS(n,e=null,t=null,r,i=new Set){let o=[t||On,i4(n)];return r=r||(typeof n=="object"?void 0:Cn(n)),new qu(o,e||C_(),r||null,i)}var Nn=class n{static{this.THROW_IF_NOT_FOUND=$u}static{this.NULL=new Th}static create(e,t){if(Array.isArray(e))return eT({name:""},t,e,"");{let r=e.name??"";return eT({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=ee({token:n,providedIn:"any",factory:()=>K(RT)})}static{this.__NG_ELEMENT_ID__=-1}};var oB=new X("");oB.__NG_ELEMENT_ID__=n=>{let e=cn();if(e===null)throw new ae(204,!1);if(e.type&2)return e.value;if(n&Te.Optional)return null;throw new ae(204,!1)};var sB="ngOriginalError";function d0(n){return n[sB]}var AS=!0,k_=(()=>{class n{static{this.__NG_ELEMENT_ID__=aB}static{this.__NG_ENV_ID__=t=>t}}return n})(),k0=class extends k_{constructor(e){super(),this._lView=e}onDestroy(e){return sS(this._lView,e),()=>x4(this._lView,e)}};function aB(){return new k0(Re())}var _i=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new xt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=ee({token:n,providedIn:"root",factory:()=>new n})}}return n})();var F0=class extends Ke{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,KT()&&(this.destroyRef=H(k_,{optional:!0})??void 0,this.pendingTasks=H(_i,{optional:!0})??void 0)}emit(e){let t=Fe(null);try{super.next(e)}finally{Fe(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof vt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},He=F0;function Lh(...n){}function PS(n){let e,t;function r(){n=Lh;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function tT(n){return queueMicrotask(()=>n()),()=>{n=Lh}}var F_="isAngularZone",jh=F_+"_ID",cB=0,Ne=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new He(!1),this.onMicrotaskEmpty=new He(!1),this.onStable=new He(!1),this.onError=new He(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=AS}=e;if(typeof Zone>"u")throw new ae(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,dB(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(F_)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ae(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ae(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,uB,Lh,Lh);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},uB={};function V_(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function lB(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){PS(()=>{n.callbackScheduled=!1,V0(n),n.isCheckStableRunning=!0,V_(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),V0(n)}function dB(n){let e=()=>{lB(n)},t=cB++;n._inner=n._inner.fork({name:"angular",properties:{[F_]:!0,[jh]:t,[jh+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(fB(c))return r.invokeTask(o,s,a,c);try{return nT(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),rT(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return nT(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!hB(c)&&e(),rT(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,V0(n),V_(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function V0(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function nT(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function rT(n){n._nesting--,V_(n)}var Bh=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new He,this.onMicrotaskEmpty=new He,this.onStable=new He,this.onError=new He}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function fB(n){return OS(n,"__ignore_ng_zone__")}function hB(n){return OS(n,"__scheduler_tick__")}function OS(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function pB(n="zone.js",e){return n==="noop"?new Bh:n==="zone.js"?new Ne(e):n}var pi=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&d0(e);for(;t&&d0(t);)t=d0(t);return t||null}},mB=new X("",{providedIn:"root",factory:()=>{let n=H(Ne),e=H(pi);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function gB(){return Ha(cn(),Re())}function Ha(n,e){return new In(er(n,e))}var In=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=gB}}return n})();function yB(n){return n instanceof In?n.nativeElement:n}function vB(){return this._results[Symbol.iterator]()}var L0=class n{get changes(){return this._changes??=new He}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=vB)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=Bj(e);(this._changesDetected=!jj(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function RS(n){return(n.flags&128)===128}var NS=new Map,_B=0;function wB(){return _B++}function CB(n){NS.set(n[cp],n)}function j0(n){NS.delete(n[cp])}var iT="__ngContext__";function ys(n,e){eo(e)?(n[iT]=e[cp],CB(e)):n[iT]=e}function kS(n){return VS(n[Hu])}function FS(n){return VS(n[yr])}function VS(n){for(;n!==null&&!vi(n);)n=n[yr];return n}var B0;function LS(n){B0=n}function bB(){if(B0!==void 0)return B0;if(typeof document<"u")return document;throw new ae(210,!1)}var pp=new X("",{providedIn:"root",factory:()=>EB}),EB="ng",L_=new X(""),un=new X("",{providedIn:"platform",factory:()=>"unknown"});var j_=new X("",{providedIn:"root",factory:()=>bB().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var IB="h",xB="b";var DB=()=>null;function B_(n,e,t=!1){return DB(n,e,t)}var jS=!1,MB=new X("",{providedIn:"root",factory:()=>jS});var mh;function TB(){if(mh===void 0&&(mh=null,_n.trustedTypes))try{mh=_n.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return mh}function oT(n){return TB()?.createScriptURL(n)||n}var Uh=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${bT})`}};function Ga(n){return n instanceof Uh?n.changingThisBreaksApplicationSecurity:n}function U_(n,e){let t=SB(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${bT})`)}return t===e}function SB(n){return n instanceof Uh&&n.getTypeName()||null}var AB=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function BS(n){return n=String(n),n.match(AB)?n:"unsafe:"+n}var mp=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(mp||{});function Xu(n){let e=$S();return e?e.sanitize(mp.URL,n)||"":U_(n,"URL")?Ga(n):BS(Oa(n))}function PB(n){let e=$S();if(e)return oT(e.sanitize(mp.RESOURCE_URL,n)||"");if(U_(n,"ResourceURL"))return oT(Ga(n));throw new ae(904,!1)}function OB(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?PB:Xu}function US(n,e,t){return OB(e,t)(n)}function $S(){let n=Re();return n&&n[kr].sanitizer}function zS(n){return n.ownerDocument.defaultView}function qS(n){return n instanceof Function?n():n}function RB(n){return(n??H(Nn)).get(un)==="browser"}var mi=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(mi||{}),NB;function $_(n,e){return NB(n,e)}function Ta(n,e,t,r,i){if(r!=null){let o,s=!1;vi(r)?o=r:eo(r)&&(s=!0,r=r[yi]);let a=Vr(r);n===0&&t!==null?i==null?KS(e,t,a):zh(e,t,a,i||null,!0):n===1&&t!==null?zh(e,t,a,i||null,!0):n===2?QB(e,a,s):n===3&&e.destroyNode(a),o!=null&&ZB(e,n,o,t,i)}}function kB(n,e){return n.createText(e)}function FB(n,e,t){n.setValue(e,t)}function HS(n,e,t){return n.createElement(e,t)}function VB(n,e){GS(n,e),e[yi]=null,e[vr]=null}function LB(n,e,t,r,i,o){r[yi]=i,r[vr]=e,gp(n,r,t,1,i,o)}function GS(n,e){e[kr].changeDetectionScheduler?.notify(9),gp(n,e,e[Rt],2,null,null)}function jB(n){let e=n[Hu];if(!e)return f0(n[_e],n);for(;e;){let t=null;if(eo(e))t=e[Hu];else{let r=e[Rn];r&&(t=r)}if(!t){for(;e&&!e[yr]&&e!==n;)eo(e)&&f0(e[_e],e),e=e[an];e===null&&(e=n),eo(e)&&f0(e[_e],e),t=e&&e[yr]}e=t}}function BB(n,e,t,r){let i=Rn+r,o=t.length;r>0&&(t[i-1][yr]=e),r<o-Rn?(e[yr]=t[i],OT(t,Rn+r,e)):(t.push(e),e[yr]=null),e[an]=t;let s=e[ds];s!==null&&t!==s&&WS(s,e);let a=e[hi];a!==null&&a.insertView(n),S0(e),e[pe]|=128}function WS(n,e){let t=n[Va],r=e[an];if(eo(r))n[pe]|=Oh.HasTransplantedViews;else{let i=r[an][Fr];e[Fr]!==i&&(n[pe]|=Oh.HasTransplantedViews)}t===null?n[Va]=[e]:t.push(e)}function z_(n,e){let t=n[Va],r=t.indexOf(e);t.splice(r,1)}function $h(n,e){if(n.length<=Rn)return;let t=Rn+e,r=n[t];if(r){let i=r[ds];i!==null&&i!==n&&z_(i,r),e>0&&(n[t-1][yr]=r[yr]);let o=Mh(n,Rn+e);VB(r[_e],r);let s=o[hi];s!==null&&s.detachView(o[_e]),r[an]=null,r[yr]=null,r[pe]&=-129}return r}function q_(n,e){if(!(e[pe]&256)){let t=e[Rt];t.destroyNode&&gp(n,e,t,3,null,null),jB(e)}}function f0(n,e){if(e[pe]&256)return;let t=Fe(null);try{e[pe]&=-129,e[pe]|=256,e[Yn]&&jv(e[Yn]),$B(n,e),UB(n,e),e[_e].type===1&&e[Rt].destroy();let r=e[ds];if(r!==null&&vi(e[an])){r!==e[an]&&z_(r,e);let i=e[hi];i!==null&&i.detachView(n)}j0(e)}finally{Fe(t)}}function UB(n,e){let t=n.cleanup,r=e[Ah];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[Ah]=null);let i=e[Ji];if(i!==null){e[Ji]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function $B(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof ms)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Or(4,a,c);try{c.call(a)}finally{Or(5,a,c)}}else{Or(4,i,o);try{o.call(i)}finally{Or(5,i,o)}}}}}function zB(n,e,t){return qB(n,e.parent,t)}function qB(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[yi];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Nr.None||o===Nr.Emulated)return null}return er(r,t)}}function zh(n,e,t,r,i){n.insertBefore(e,t,r,i)}function KS(n,e,t){n.appendChild(e,t)}function sT(n,e,t,r,i){r!==null?zh(n,e,t,r,i):KS(n,e,t)}function QS(n,e){return n.parentNode(e)}function HB(n,e){return n.nextSibling(e)}function GB(n,e,t){return KB(n,e,t)}function WB(n,e,t){return n.type&40?er(n,t):null}var KB=WB,aT;function H_(n,e,t,r){let i=zB(n,r,e),o=e[Rt],s=r.parent||e[vr],a=GB(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)sT(o,i,t[c],a,!1);else sT(o,i,t,a,!1);aT!==void 0&&aT(o,r,e,t,i)}function ju(n,e){if(e!==null){let t=e.type;if(t&3)return er(e,n);if(t&4)return U0(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return ju(n,r);{let i=n[e.index];return vi(i)?U0(-1,i):Vr(i)}}else{if(t&128)return ju(n,e.next);if(t&32)return $_(e,n)()||Vr(n[e.index]);{let r=YS(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=hs(n[Fr]);return ju(i,r)}else return ju(n,e.next)}}}return null}function YS(n,e){if(e!==null){let r=n[Fr][vr],i=e.projection;return r.projection[i]}return null}function U0(n,e){let t=Rn+n+1;if(t<e.length){let r=e[t],i=r[_e].firstChild;if(i!==null)return ju(r,i)}return e[fs]}function QB(n,e,t){n.removeChild(null,e,t)}function G_(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&ys(Vr(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)G_(n,e,t.child,r,i,o,!1),Ta(e,n,i,a,o);else if(c&32){let l=$_(t,r),d;for(;d=l();)Ta(e,n,i,d,o);Ta(e,n,i,a,o)}else c&16?YB(n,e,r,t,i,o):Ta(e,n,i,a,o);t=s?t.projectionNext:t.next}}function gp(n,e,t,r,i,o){G_(t,r,n.firstChild,e,i,o,!1)}function YB(n,e,t,r,i,o){let s=t[Fr],c=s[vr].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];Ta(e,n,i,d,o)}else{let l=c,d=s[an];RS(r)&&(l.flags|=128),G_(n,e,l,d,i,o,!0)}}function ZB(n,e,t,r,i){let o=t[fs],s=Vr(t);o!==s&&Ta(e,n,r,o,i);for(let a=Rn;a<t.length;a++){let c=t[a];gp(c[_e],c,n,e,r,o)}}function XB(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:mi.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=mi.Important),n.setStyle(t,r,i,o))}}function JB(n,e,t){n.setAttribute(e,"style",t)}function ZS(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function XS(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&E0(n,e,r),i!==null&&ZS(n,e,i),o!==null&&JB(n,e,o)}var Ln={};function Q(n=1){JS(qt(),Re(),so()+n,!1)}function JS(n,e,t,r){if(!r)if((e[pe]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Ch(e,o,t)}else{let o=n.preOrderHooks;o!==null&&bh(e,o,0,t)}ps(t)}function re(n,e=Te.Default){let t=Re();if(t===null)return K(n,e);let r=cn();return DS(r,t,wn(n),e)}function e1(){let n="invalid";throw new Error(n)}function t1(n,e,t,r,i,o){let s=Fe(null);try{let a=null;i&to.SignalBased&&(a=e[r][oi]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&to.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):XT(e,a,r,o)}finally{Fe(s)}}function e3(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)ps(~i);else{let o=i,s=t[++r],a=t[++r];L4(s,o);let c=e[o];a(2,c)}}}finally{ps(-1)}}function yp(n,e,t,r,i,o,s,a,c,l,d){let f=e.blueprint.slice();return f[yi]=i,f[pe]=r|4|128|8|64,(l!==null||n&&n[pe]&2048)&&(f[pe]|=2048),iS(f),f[an]=f[qa]=n,f[Zn]=t,f[kr]=s||n&&n[kr],f[Rt]=a||n&&n[Rt],f[Fa]=c||n&&n[Fa]||null,f[vr]=o,f[cp]=wB(),f[Sh]=d,f[QT]=l,f[Fr]=e.type==2?n[Fr]:f,f}function vp(n,e,t,r,i){let o=n.data[e];if(o===null)o=t3(n,e,t,r,i),V4()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=O4();o.injectorIndex=s===null?-1:s.injectorIndex}return Yu(o,!0),o}function t3(n,e,t,r,i){let o=uS(),s=lS(),a=s?o:o&&o.parent,c=n.data[e]=a3(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function n1(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function r1(n,e,t,r,i){let o=so(),s=r&2;try{ps(-1),s&&e.length>En&&JS(n,e,En,!1),Or(s?2:0,i),t(r,i)}finally{ps(o),Or(s?3:1,i)}}function i1(n,e,t){if(ZT(e)){let r=Fe(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{Fe(r)}}}function o1(n,e,t){cS()&&(h3(n,e,t,er(t,e)),(t.flags&64)===64&&d1(n,e,t))}function s1(n,e,t=er){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function a1(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=W_(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function W_(n,e,t,r,i,o,s,a,c,l,d){let f=En+r,p=f+i,g=n3(f,p),y=typeof l=="function"?l():l;return g[_e]={type:n,blueprint:g,template:t,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:y,incompleteFirstPass:!1,ssrId:d}}function n3(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Ln);return t}function r3(n,e,t,r){let o=r.get(MB,jS)||t===Nr.ShadowDom,s=n.selectRootElement(e,o);return i3(s),s}function i3(n){o3(n)}var o3=()=>null;function s3(n,e,t,r){let i=p1(e);i.push(t),n.firstCreatePass&&m1(n).push(r,i.length-1)}function a3(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return S4()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function cT(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=to.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?uT(r,t,l,a,c):uT(r,t,l,a)}return r}function uT(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function c3(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],c=null,l=null;for(let d=r;d<i;d++){let f=o[d],p=t?t.get(f):null,g=p?p.inputs:null,y=p?p.outputs:null;c=cT(0,f.inputs,d,c,g),l=cT(1,f.outputs,d,l,y);let b=c!==null&&s!==null&&!__(e)?I3(c,d,s):null;a.push(b)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function u3(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function c1(n,e,t,r,i,o,s,a){let c=er(e,t),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(K_(n,t,d,r,i),up(e)&&l3(t,e.index)):e.type&3?(r=u3(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function l3(n,e){let t=oo(e,n);t[pe]&16||(t[pe]|=64)}function u1(n,e,t,r){if(cS()){let i=r===null?null:{"":-1},o=m3(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&l1(n,e,t,s,i,a),i&&g3(t,r,i)}t.mergedAttrs=zu(t.mergedAttrs,t.attrs)}function l1(n,e,t,r,i,o){for(let l=0;l<r.length;l++)R0(Vh(t,e),n,r[l].type);v3(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,c=n1(n,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];t.mergedAttrs=zu(t.mergedAttrs,d.hostAttrs),_3(n,t,e,c,d),y3(c,d,i),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let f=d.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}c3(n,t,o)}function d3(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;f3(s)!=a&&s.push(a),s.push(t,r,o)}}function f3(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function h3(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;up(t)&&w3(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Vh(t,e),ys(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let c=n.data[a],l=gs(e,n,a,t);if(ys(l,e),s!==null&&E3(e,a-i,l,c,t,s),ro(c)){let d=oo(t.index,e);d[Zn]=gs(e,n,a,t)}}}function d1(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=j4();try{ps(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];A0(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&p3(c,l)}}finally{ps(-1),A0(s)}}function p3(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function m3(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(Qj(e,s.selectors,!1))if(r||(r=[]),ro(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;$0(n,e,c)}else r.unshift(s),$0(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function $0(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function g3(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new ae(-301,!1);r.push(e[i],o)}}}function y3(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;ro(e)&&(t[""]=n)}}function v3(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function _3(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ls(i.type,!0)),s=new ms(o,ro(i),re);n.blueprint[r]=s,t[r]=s,d3(n,e,r,n1(n,t,i.hostVars,Ln),i)}function w3(n,e,t){let r=er(e,n),i=a1(t),o=n[kr].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=_p(n,yp(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function C3(n,e,t,r,i,o){let s=er(n,e);b3(e[Rt],s,o,n.value,t,r,i)}function b3(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Oa(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function E3(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],d=s[a++],f=s[a++];t1(r,t,c,l,d,f)}}function I3(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function f1(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function h1(n,e){let t=n.contentQueries;if(t!==null){let r=Fe(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];D_(o),a.contentQueries(2,e[s],s)}}}finally{Fe(r)}}}function _p(n,e){return n[Hu]?n[KM][yr]=e:n[Hu]=e,n[KM]=e,e}function z0(n,e,t){D_(0);let r=Fe(null);try{e(n,t)}finally{Fe(r)}}function p1(n){return n[Ah]??=[]}function m1(n){return n.cleanup??=[]}function g1(n,e){let t=n[Fa],r=t?t.get(pi,null):null;r&&r.handleError(e)}function K_(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],c=t[o++],l=e[s],d=n.data[s];t1(d,l,r,a,c,i)}}function y1(n,e,t){let r=rS(e,n);FB(n[Rt],r,t)}function x3(n,e){let t=oo(e,n),r=t[_e];D3(r,t);let i=t[yi];i!==null&&t[Sh]===null&&(t[Sh]=B_(i,t[Fa])),Q_(r,t,t[Zn])}function D3(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Q_(n,e,t){M_(e);try{let r=n.viewQuery;r!==null&&z0(1,r,t);let i=n.template;i!==null&&r1(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[hi]?.finishViewCreation(n),n.staticContentQueries&&h1(n,e),n.staticViewQueries&&z0(2,n.viewQuery,t);let o=n.components;o!==null&&M3(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[pe]&=-5,T_()}}function M3(n,e){for(let t=0;t<e.length;t++)x3(n,e[t])}function v1(n,e,t,r){let i=Fe(null);try{let o=e.tView,a=n[pe]&4096?4096:16,c=yp(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[ds]=l;let d=n[hi];return d!==null&&(c[hi]=d.createEmbeddedView(o)),Q_(o,c,t),c}finally{Fe(i)}}function T3(n,e){let t=Rn+e;if(t<n.length)return n[t]}function q0(n,e){return!e||e.firstChild===null||RS(n)}function _1(n,e,t,r=!0){let i=e[_e];if(BB(i,e,n,t),r){let s=U0(t,n),a=e[Rt],c=QS(a,n[fs]);c!==null&&LB(i,n[vr],a,e,c,s)}let o=e[Sh];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function S3(n,e){let t=$h(n,e);return t!==void 0&&q_(t[_e],t),t}function qh(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Vr(o)),vi(o)&&A3(o,r);let s=t.type;if(s&8)qh(n,e,t.child,r);else if(s&32){let a=$_(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=YS(e,t);if(Array.isArray(a))r.push(...a);else{let c=hs(e[Fr]);qh(c[_e],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function A3(n,e){for(let t=Rn;t<n.length;t++){let r=n[t],i=r[_e].firstChild;i!==null&&qh(r[_e],r,i,e)}n[fs]!==n[yi]&&e.push(n[fs])}var w1=[];function P3(n){return n[Yn]??O3(n)}function O3(n){let e=w1.pop()??Object.create(N3);return e.lView=n,e}function R3(n){n.lView[Yn]!==n&&(n.lView=null,w1.push(n))}var N3=ve(Y({},Ru),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{fp(n.lView)},consumerOnSignalRead(){this.lView[Yn]=this}});function k3(n){let e=n[Yn]??Object.create(F3);return e.lView=n,e}var F3=ve(Y({},Ru),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=hs(n.lView);for(;e&&!C1(e[_e]);)e=hs(e);e&&oS(e)},consumerOnSignalRead(){this.lView[Yn]=this}});function C1(n){return n.type!==2}var V3=100;function b1(n,e=!0,t=0){let r=n[kr],i=r.rendererFactory,o=!1;o||i.begin?.();try{L3(n,t)}catch(s){throw e&&g1(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function L3(n,e){let t=dS();try{YM(!0),H0(n,e);let r=0;for(;dp(n);){if(r===V3)throw new ae(103,!1);r++,H0(n,1)}}finally{YM(t)}}function j3(n,e,t,r){let i=e[pe];if((i&256)===256)return;let o=!1,s=!1;!o&&e[kr].inlineEffectRunner?.flush(),M_(e);let a=!0,c=null,l=null;o||(C1(n)?(l=P3(e),c=Lf(l)):iM()===null?(a=!1,l=k3(e),c=Lf(l)):e[Yn]&&(jv(e[Yn]),e[Yn]=null));try{iS(e),F4(n.bindingStartIndex),t!==null&&r1(n,e,t,2,r);let d=(i&3)===3;if(!o)if(d){let g=n.preOrderCheckHooks;g!==null&&Ch(e,g,null)}else{let g=n.preOrderHooks;g!==null&&bh(e,g,0,null),c0(e,0)}if(s||B3(e),E1(e,0),n.contentQueries!==null&&h1(n,e),!o)if(d){let g=n.contentCheckHooks;g!==null&&Ch(e,g)}else{let g=n.contentHooks;g!==null&&bh(e,g,1),c0(e,1)}e3(n,e);let f=n.components;f!==null&&x1(e,f,0);let p=n.viewQuery;if(p!==null&&z0(2,p,r),!o)if(d){let g=n.viewCheckHooks;g!==null&&Ch(e,g)}else{let g=n.viewHooks;g!==null&&bh(e,g,2),c0(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[a0]){for(let g of e[a0])g();e[a0]=null}o||(e[pe]&=-73)}catch(d){throw o||fp(e),d}finally{l!==null&&(Vv(l,c),a&&R3(l)),T_()}}function E1(n,e){for(let t=kS(n);t!==null;t=FS(t))for(let r=Rn;r<t.length;r++){let i=t[r];I1(i,e)}}function B3(n){for(let e=kS(n);e!==null;e=FS(e)){if(!(e[pe]&Oh.HasTransplantedViews))continue;let t=e[Va];for(let r=0;r<t.length;r++){let i=t[r];oS(i)}}}function U3(n,e,t){let r=oo(e,n);I1(r,t)}function I1(n,e){I_(n)&&H0(n,e)}function H0(n,e){let r=n[_e],i=n[pe],o=n[Yn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Lv(o)),s||=!1,o&&(o.dirty=!1),n[pe]&=-9217,s)j3(r,n,r.template,n[Zn]);else if(i&8192){E1(n,1);let a=r.components;a!==null&&x1(n,a,1)}}function x1(n,e,t){for(let r=0;r<e.length;r++)U3(n,e[r],t)}function Y_(n,e){let t=dS()?64:1088;for(n[kr].changeDetectionScheduler?.notify(e);n;){n[pe]|=t;let r=hs(n);if(M0(n)&&!r)return n;n=r}return null}var vs=class{get rootNodes(){let e=this._lView,t=e[_e];return qh(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Zn]}set context(e){this._lView[Zn]=e}get destroyed(){return(this._lView[pe]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[an];if(vi(e)){let t=e[Ph],r=t?t.indexOf(this):-1;r>-1&&($h(e,r),Mh(t,r))}this._attachedToViewContainer=!1}q_(this._lView[_e],this._lView)}onDestroy(e){sS(this._lView,e)}markForCheck(){Y_(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[pe]&=-129}reattach(){S0(this._lView),this._lView[pe]|=128}detectChanges(){this._lView[pe]|=1024,b1(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ae(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=M0(this._lView),t=this._lView[ds];t!==null&&!e&&z_(t,this._lView),GS(this._lView[_e],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ae(902,!1);this._appRef=e;let t=M0(this._lView),r=this._lView[ds];r!==null&&!t&&WS(r,this._lView),S0(this._lView)}},_s=(()=>{class n{static{this.__NG_ELEMENT_ID__=q3}}return n})(),$3=_s,z3=class extends $3{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=v1(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new vs(i)}};function q3(){return wp(cn(),Re())}function wp(n,e){return n.type&4?new z3(e,n,Ha(n,e)):null}var Ite=new RegExp(`^(\\d+)*(${xB}|${IB})*(.*)`);var H3=()=>null;function G0(n,e){return H3(n,e)}var La=class{},Z_=new X("",{providedIn:"root",factory:()=>!1});var D1=new X(""),M1=new X(""),W0=class{},Hh=class{};function G3(n){let e=Error(`No component factory found for ${Cn(n)}.`);return e[W3]=n,e}var W3="ngComponent";var K0=class{resolveComponentFactory(e){throw G3(e)}},ja=class{static{this.NULL=new K0}},Ba=class{},_r=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>K3()}}return n})();function K3(){let n=Re(),e=cn(),t=oo(e.index,n);return(eo(t)?t:n)[Rt]}var Q3=(()=>{class n{static{this.\u0275prov=ee({token:n,providedIn:"root",factory:()=>null})}}return n})();function Q0(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=_0(i,a);else if(o==2){let c=a,l=e[++s];r=_0(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Gh=class extends ja{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=no(e);return new Ua(t,this.ngModule)}};function lT(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:to.None;e?t.push({propName:s,templateName:r,isSignal:(a&to.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function Y3(n){let e=n.toLowerCase();return e==="svg"?nS:e==="math"?C4:null}var Ua=class extends Hh{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=lT(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return lT(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=Jj(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Fe(null);try{i=i||this.ngModule;let s=i instanceof bn?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new P0(e,s):e,c=a.get(Ba,null);if(c===null)throw new ae(407,!1);let l=a.get(Q3,null),d=a.get(La,null),f={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:d},p=c.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",y=r?r3(p,r,this.componentDef.encapsulation,a):HS(p,g,Y3(g)),b=512;this.componentDef.signals?b|=4096:this.componentDef.onPush||(b|=16);let C=null;y!==null&&(C=B_(y,a,!0));let S=W_(0,null,null,1,0,null,null,null,null,null,null),k=yp(null,S,null,b,null,null,f,p,a,null,C);M_(k);let P,B,q=null;try{let z=this.componentDef,I,_=null;z.findHostDirectiveDefs?(I=[],_=new Map,z.findHostDirectiveDefs(z,I,_),I.push(z)):I=[z];let w=Z3(k,y);q=X3(w,y,z,I,k,f,p),B=E_(S,En),y&&tU(p,z,y,r),t!==void 0&&nU(B,this.ngContentSelectors,t),P=eU(q,z,I,_,k,[rU]),Q_(S,k,null)}catch(z){throw q!==null&&j0(q),j0(k),z}finally{T_()}return new Y0(this.componentType,P,Ha(B,k),k,B)}finally{Fe(o)}}},Y0=class extends W0{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new vs(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;K_(o[_e],o,i,e,t),this.previousInputValues.set(e,t);let s=oo(this._tNode.index,o);Y_(s,1)}}get injector(){return new us(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Z3(n,e){let t=n[_e],r=En;return n[r]=e,vp(t,r,2,"#host",null)}function X3(n,e,t,r,i,o,s){let a=i[_e];J3(r,n,e,s);let c=null;e!==null&&(c=B_(e,i[Fa]));let l=o.rendererFactory.createRenderer(e,t),d=16;t.signals?d=4096:t.onPush&&(d=64);let f=yp(i,a1(t),null,d,i[n.index],n,o,l,null,null,c);return a.firstCreatePass&&$0(a,n,r.length-1),_p(i,f),i[n.index]=f}function J3(n,e,t,r){for(let i of n)e.mergedAttrs=zu(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Q0(e,e.mergedAttrs,!0),t!==null&&XS(r,t,e))}function eU(n,e,t,r,i,o){let s=cn(),a=i[_e],c=er(s,i);l1(a,i,s,t,null,r);for(let d=0;d<t.length;d++){let f=s.directiveStart+d,p=gs(i,a,f,s);ys(p,i)}d1(a,i,s),c&&ys(c,i);let l=gs(i,a,s.directiveStart+s.componentOffset,s);if(n[Zn]=i[Zn]=l,o!==null)for(let d of o)d(l,e);return i1(a,s,i),l}function tU(n,e,t,r){if(r)E0(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=e4(e.selectors[0]);i&&E0(n,t,i),o&&o.length>0&&ZS(n,t,o.join(" "))}}function nU(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function rU(){let n=cn();O_(Re()[_e],n)}var ao=(()=>{class n{static{this.__NG_ELEMENT_ID__=iU}}return n})();function iU(){let n=cn();return S1(n,Re())}var oU=ao,T1=class extends oU{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Ha(this._hostTNode,this._hostLView)}get injector(){return new us(this._hostTNode,this._hostLView)}get parentInjector(){let e=R_(this._hostTNode,this._hostLView);if(wS(e)){let t=kh(e,this._hostLView),r=Nh(e),i=t[_e].data[r+8];return new us(i,t)}else return new us(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=dT(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Rn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=G0(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,q0(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!y4(e),a;if(s)a=t;else{let y=t||{};a=y.index,r=y.injector,i=y.projectableNodes,o=y.environmentInjector||y.ngModuleRef}let c=s?e:new Ua(no(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let b=(s?l:this.parentInjector).get(bn,null);b&&(o=b)}let d=no(c.componentType??{}),f=G0(this._lContainer,d?.id??null),p=f?.firstChild??null,g=c.create(l,i,p,o);return this.insertImpl(g.hostView,a,q0(this._hostTNode,f)),g}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(E4(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[an],l=new T1(c,c[vr],c[an]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return _1(s,i,o,r),e.attachToViewContainerRef(),OT(h0(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=dT(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=$h(this._lContainer,t);r&&(Mh(h0(this._lContainer),t),q_(r[_e],r))}detach(e){let t=this._adjustIndex(e,-1),r=$h(this._lContainer,t);return r&&Mh(h0(this._lContainer),t)!=null?new vs(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function dT(n){return n[Ph]}function h0(n){return n[Ph]||(n[Ph]=[])}function S1(n,e){let t,r=e[n.index];return vi(r)?t=r:(t=f1(r,e,null,n),e[n.index]=t,_p(e,t)),aU(t,e,n,r),new T1(t,n,e)}function sU(n,e){let t=n[Rt],r=t.createComment(""),i=er(e,n),o=QS(t,i);return zh(t,o,r,HB(t,i),!1),r}var aU=lU,cU=()=>!1;function uU(n,e,t){return cU(n,e,t)}function lU(n,e,t,r){if(n[fs])return;let i;t.type&8?i=Vr(r):i=sU(e,t),n[fs]=i}var Z0=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},X0=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)X_(e,t).matches!==null&&this.queries[t].setDirty()}},Wh=class{constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=vU(e):this.predicate=e}},J0=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},e_=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,dU(t,o)),this.matchTNodeWithReadOption(e,t,Eh(t,e,o,!1,!1))}else r===_s?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Eh(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===In||i===ao||i===_s&&t.type&4)this.addMatch(t.index,-2);else{let o=Eh(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function dU(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function fU(n,e){return n.type&11?Ha(n,e):n.type&4?wp(n,e):null}function hU(n,e,t,r){return t===-1?fU(e,n):t===-2?pU(n,e,r):gs(n,n[_e],t,e)}function pU(n,e,t){if(t===In)return Ha(e,n);if(t===_s)return wp(e,n);if(t===ao)return S1(e,n)}function A1(n,e,t,r){let i=e[hi].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let d=o[l];a.push(hU(e,d,s[c+1],t.metadata.read))}}i.matches=a}return i.matches}function t_(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=A1(n,e,i,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let l=o[a+1],d=e[-c];for(let f=Rn;f<d.length;f++){let p=d[f];p[ds]===p[an]&&t_(p[_e],p,l,r)}if(d[Va]!==null){let f=d[Va];for(let p=0;p<f.length;p++){let g=f[p];t_(g[_e],g,l,r)}}}}}return r}function mU(n,e){return n[hi].queries[e].queryList}function P1(n,e,t){let r=new L0((t&4)===4);return s3(n,e,r,r.destroy),(e[hi]??=new X0).queries.push(new Z0(r))-1}function gU(n,e,t){let r=qt();return r.firstCreatePass&&(O1(r,new Wh(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),P1(r,Re(),e)}function yU(n,e,t,r){let i=qt();if(i.firstCreatePass){let o=cn();O1(i,new Wh(e,t,r),o.index),_U(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return P1(i,Re(),t)}function vU(n){return n.split(",").map(e=>e.trim())}function O1(n,e,t){n.queries===null&&(n.queries=new J0),n.queries.track(new e_(e,t))}function _U(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function X_(n,e){return n.queries.getByIndex(e)}function wU(n,e){let t=n[_e],r=X_(t,e);return r.crossesNgTemplate?t_(t,n,e,[]):A1(t,n,r,e)}var fT=new Set;function bs(n){fT.has(n)||(fT.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function CU(n){return typeof n=="function"&&n[oi]!==void 0}function Ju(n,e){bs("NgSignals");let t=mM(n),r=t[oi];return e?.equal&&(r.equal=e.equal),t.set=i=>Bv(r,i),t.update=i=>gM(r,i),t.asReadonly=bU.bind(t),t}function bU(){let n=this[oi];if(n.readonlyFn===void 0){let e=()=>this();e[oi]=n,n.readonlyFn=e}return n.readonlyFn}function R1(n){return CU(n)&&typeof n.set=="function"}function EU(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(MU))}return o}return Kh.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,d=i.styleUrls;i.styleUrls.forEach((f,p)=>{a.push(""),s.push(r(f).then(g=>{a[l+p]=g,d.splice(d.indexOf(f),1),d.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>TU(o));e.push(c)}),xU(),Promise.all(e).then(()=>{})}var Kh=new Map,IU=new Set;function xU(){let n=Kh;return Kh=new Map,n}function DU(){return Kh.size===0}function MU(n){return typeof n=="string"?n:n.text()}function TU(n){IU.delete(n)}function SU(n){return Object.getPrototypeOf(n.prototype).constructor}function tr(n){let e=SU(n.type),t=!0,r=[n];for(;e;){let i;if(ro(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ae(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=gh(n.inputs),s.inputTransforms=gh(n.inputTransforms),s.declaredInputs=gh(n.declaredInputs),s.outputs=gh(n.outputs);let a=i.hostBindings;a&&NU(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&OU(n,c),l&&RU(n,l),AU(n,i),wj(n.outputs,i.outputs),ro(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===tr&&(t=!1)}}e=Object.getPrototypeOf(e)}PU(r)}function AU(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function PU(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=zu(i.hostAttrs,t=zu(t,i.hostAttrs))}}function gh(n){return n===Ra?{}:n===On?[]:n}function OU(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function RU(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function NU(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function J_(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var io=class{},Gu=class{};var Qh=class extends io{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Gh(this);let o=UT(e);this._bootstrapComponents=qS(o.bootstrap),this._r3Injector=SS(e,t,[{provide:io,useValue:this},{provide:ja,useValue:this.componentFactoryResolver},...r],Cn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Yh=class extends Gu{constructor(e){super(),this.moduleType=e}create(e){return new Qh(this.moduleType,e,[])}};function kU(n,e,t){return new Qh(n,e,t,!1)}var n_=class extends io{constructor(e){super(),this.componentFactoryResolver=new Gh(this),this.instance=null;let t=new qu([...e.providers,{provide:io,useValue:this},{provide:ja,useValue:this.componentFactoryResolver}],e.parent||C_(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Cp(n,e,t=null){return new n_({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function N1(n){return VU(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function FU(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function VU(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function bp(n,e,t){return n[e]=t}function LU(n,e){return n[e]}function Lr(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Zh(n,e,t,r){let i=Lr(n,e,t);return Lr(n,e+1,r)||i}function jU(n,e,t,r,i,o){let s=Zh(n,e,t,r);return Zh(n,e+2,i,o)||s}function BU(n){return(n.flags&32)===32}function UU(n,e,t,r,i,o,s,a,c){let l=e.consts,d=vp(e,n,4,s||null,a||null);u1(e,t,d,Rh(l,c)),O_(e,d);let f=d.tView=W_(2,d,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function $U(n,e,t,r,i,o,s,a,c,l){let d=t+En,f=e.firstCreatePass?UU(d,e,n,r,i,o,s,a,c):e.data[d];Yu(f,!1);let p=zU(e,n,f,t);A_()&&H_(e,n,p,f),ys(p,n);let g=f1(p,n,p,f);return n[d]=g,_p(n,g),uU(g,f,n),b_(f)&&o1(e,n,f),c!=null&&s1(n,f,l),f}function Qe(n,e,t,r,i,o,s,a){let c=Re(),l=qt(),d=Rh(l.consts,o);return $U(c,l,n,e,t,r,i,d,s,a),Qe}var zU=qU;function qU(n,e,t,r){return P_(!0),e[Rt].createComment("")}var Sa=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Sa||{}),k1=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=ee({token:n,providedIn:"root",factory:()=>new n})}}return n})(),r_=class n{constructor(){this.ngZone=H(Ne),this.scheduler=H(La),this.errorHandler=H(pi,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Sa.EarlyRead,Sa.Write,Sa.MixedReadWrite,Sa.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=ee({token:n,providedIn:"root",factory:()=>new n})}},i_=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function ew(n,e){!e?.injector&&m4(ew);let t=e?.injector??H(Nn);return RB(t)?(bs("NgAfterNextRender"),GU(n,t,e,!0)):WU}function HU(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function GU(n,e,t,r){let i=e.get(k1);i.impl??=e.get(r_);let o=t?.phase??Sa.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(k_):null,a=new i_(i.impl,HU(n,o),r,s);return i.impl.register(a),a}var WU={destroy(){}};function Ep(n,e,t,r){let i=Re(),o=Zu();if(Lr(i,o,e)){let s=qt(),a=S_();C3(a,i,n,e,t,r)}return Ep}function KU(n,e,t,r){return Lr(n,Zu(),t)?e+Oa(t)+r:Ln}function QU(n,e,t,r,i,o){let s=k4(),a=Zh(n,s,t,i);return x_(2),a?e+Oa(t)+r+Oa(i)+o:Ln}function yh(n,e){return n<<17|e<<2}function ws(n){return n>>17&32767}function YU(n){return(n&2)==2}function ZU(n,e){return n&131071|e<<17}function o_(n){return n|2}function $a(n){return(n&131068)>>2}function p0(n,e){return n&-131069|e<<2}function XU(n){return(n&1)===1}function s_(n){return n|1}function JU(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ws(s),c=$a(s);n[r]=t;let l=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||Qu(f,d)>0)&&(l=!0)}else d=t;if(i)if(c!==0){let p=ws(n[a+1]);n[r+1]=yh(p,a),p!==0&&(n[p+1]=p0(n[p+1],r)),n[a+1]=ZU(n[a+1],r)}else n[r+1]=yh(a,0),a!==0&&(n[a+1]=p0(n[a+1],r)),a=r;else n[r+1]=yh(c,0),a===0?a=r:n[c+1]=p0(n[c+1],r),c=r;l&&(n[r+1]=o_(n[r+1])),hT(n,d,r,!0),hT(n,d,r,!1),e5(e,d,n,r,o),s=yh(a,c),o?e.classBindings=s:e.styleBindings=s}function e5(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Qu(o,e)>=0&&(t[r+1]=s_(t[r+1]))}function hT(n,e,t,r){let i=n[t+1],o=e===null,s=r?ws(i):$a(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];t5(c,e)&&(a=!0,n[s+1]=r?s_(l):o_(l)),s=r?ws(l):$a(l)}a&&(n[t+1]=r?o_(i):s_(i))}function t5(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Qu(n,e)>=0:!1}var gr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function n5(n){return n.substring(gr.key,gr.keyEnd)}function r5(n){return i5(n),F1(n,V1(n,0,gr.textEnd))}function F1(n,e){let t=gr.textEnd;return t===e?-1:(e=gr.keyEnd=o5(n,gr.key=e,t),V1(n,e,t))}function i5(n){gr.key=0,gr.keyEnd=0,gr.value=0,gr.valueEnd=0,gr.textEnd=n.length}function V1(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function o5(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function ye(n,e,t){let r=Re(),i=Zu();if(Lr(r,i,e)){let o=qt(),s=S_();c1(o,s,r,n,e,r[Rt],t,!1)}return ye}function a_(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";K_(n,t,o[s],s,r)}function el(n,e,t){return j1(n,e,t,!1),el}function Mt(n,e){return j1(n,e,null,!0),Mt}function L1(n){a5(h5,s5,n,!0)}function s5(n,e){for(let t=r5(e);t>=0;t=F1(e,t))v_(n,n5(e),!0)}function j1(n,e,t,r){let i=Re(),o=qt(),s=x_(2);if(o.firstUpdatePass&&U1(o,n,s,r),e!==Ln&&Lr(i,s,e)){let a=o.data[so()];$1(o,a,i,i[Rt],n,i[s+1]=m5(e,t),r,s)}}function a5(n,e,t,r){let i=qt(),o=x_(2);i.firstUpdatePass&&U1(i,null,o,r);let s=Re();if(t!==Ln&&Lr(s,o,t)){let a=i.data[so()];if(z1(a,r)&&!B1(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=_0(c,t||"")),a_(i,a,s,t,r)}else p5(i,a,s,s[Rt],s[o+1],s[o+1]=f5(n,e,t),r,o)}}function B1(n,e){return e>=n.expandoStartIndex}function U1(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[so()],s=B1(n,t);z1(o,r)&&e===null&&!s&&(e=!1),e=c5(i,o,e,r),JU(i,o,e,t,s,r)}}function c5(n,e,t,r){let i=B4(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=m0(null,n,e,t,r),t=Wu(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=m0(i,n,e,t,r),o===null){let c=u5(n,e,r);c!==void 0&&Array.isArray(c)&&(c=m0(null,n,e,c[1],r),c=Wu(c,e.attrs,r),l5(n,e,r,c))}else o=d5(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function u5(n,e,t){let r=t?e.classBindings:e.styleBindings;if($a(r)!==0)return n[ws(r)]}function l5(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[ws(i)]=r}function d5(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Wu(r,s,t)}return Wu(r,e.attrs,t)}function m0(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Wu(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Wu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),v_(n,s,t?!0:e[++o]))}return n===void 0?null:n}function f5(n,e,t){if(t==null||t==="")return On;let r=[],i=Ga(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function h5(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&v_(n,r,t)}function p5(n,e,t,r,i,o,s,a){i===Ln&&(i=On);let c=0,l=0,d=0<i.length?i[0]:null,f=0<o.length?o[0]:null;for(;d!==null||f!==null;){let p=c<i.length?i[c+1]:void 0,g=l<o.length?o[l+1]:void 0,y=null,b;d===f?(c+=2,l+=2,p!==g&&(y=f,b=g)):f===null||d!==null&&d<f?(c+=2,y=d):(l+=2,y=f,b=g),y!==null&&$1(n,e,t,r,y,b,s,a),d=c<i.length?i[c]:null,f=l<o.length?o[l]:null}}function $1(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],d=XU(l)?pT(c,e,t,i,$a(l),s):void 0;if(!Xh(d)){Xh(o)||YU(l)&&(o=pT(c,null,t,i,a,s));let f=rS(so(),t);XB(r,s,f,i,o)}}function pT(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),d=l?c[1]:c,f=d===null,p=t[i+1];p===Ln&&(p=f?On:void 0);let g=f?o0(p,r):d===r?p:void 0;if(l&&!Xh(g)&&(g=o0(c,r)),Xh(g)&&(a=g,s))return a;let y=n[i+1];i=s?ws(y):$a(y)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=o0(c,r))}return a}function Xh(n){return n!==void 0}function m5(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Cn(Ga(n)))),n}function z1(n,e){return(n.flags&(e?8:16))!==0}function q1(n,e){bs("NgControlFlow");let t=Re(),r=Zu(),i=t[r]!==Ln?t[r]:-1,o=i!==-1?mT(t,En+i):void 0,s=0;if(Lr(t,r,n)){let a=Fe(null);try{if(o!==void 0&&S3(o,s),n!==-1){let c=En+n,l=mT(t,c),d=g5(t[_e],c),f=G0(l,d.tView.ssrId),p=v1(t,d,e,{dehydratedView:f});_1(l,p,s,q0(d,f))}}finally{Fe(a)}}else if(o!==void 0){let a=T3(o,s);a!==void 0&&(a[Zn]=e)}}function mT(n,e){return n[e]}function g5(n,e){return E_(n,e)}function y5(n,e,t,r,i,o){let s=e.consts,a=Rh(s,i),c=vp(e,n,2,r,a);return u1(e,t,c,Rh(s,o)),c.attrs!==null&&Q0(c,c.attrs,!1),c.mergedAttrs!==null&&Q0(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function M(n,e,t,r){let i=Re(),o=qt(),s=En+n,a=i[Rt],c=o.firstCreatePass?y5(s,o,i,e,t,r):o.data[s],l=v5(o,i,c,a,e,n);i[s]=l;let d=b_(c);return Yu(c,!0),XS(a,l,c),!BU(c)&&A_()&&H_(o,i,l,c),D4()===0&&ys(l,i),M4(),d&&(o1(o,i,c),i1(o,c,i)),r!==null&&s1(i,c),M}function T(){let n=cn();lS()?R4():(n=n.parent,Yu(n,!1));let e=n;A4(e)&&P4(),T4();let t=qt();return t.firstCreatePass&&(O_(t,n),ZT(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&K4(e)&&a_(t,e,Re(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Q4(e)&&a_(t,e,Re(),e.stylesWithoutHost,!1),T}function oe(n,e,t,r){return M(n,e,t,r),T(),oe}var v5=(n,e,t,r,i,o)=>(P_(!0),HS(r,i,q4()));function jn(){return Re()}var cs=void 0;function _5(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var w5=["en",[["a","p"],["AM","PM"],cs],[["AM","PM"],cs,cs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],cs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],cs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",cs,"{1} 'at' {0}",cs],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",_5],g0={};function Ip(n){let e=C5(n),t=gT(e);if(t)return t;let r=e.split("-")[0];if(t=gT(r),t)return t;if(r==="en")return w5;throw new ae(701,!1)}function gT(n){return n in g0||(g0[n]=_n.ng&&_n.ng.common&&_n.ng.common.locales&&_n.ng.common.locales[n]),g0[n]}var Es=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Es||{});function C5(n){return n.toLowerCase().replace(/_/g,"-")}var Jh="en-US",b5="USD";var E5=Jh;function I5(n){typeof n=="string"&&(E5=n.toLowerCase().replace(/_/g,"-"))}var x5=(n,e,t)=>{};function de(n,e,t,r){let i=Re(),o=qt(),s=cn();return H1(o,i,i[Rt],s,n,e,r),de}function D5(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Ah],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function H1(n,e,t,r,i,o,s){let a=b_(r),l=n.firstCreatePass&&m1(n),d=e[Zn],f=p1(e),p=!0;if(r.type&3||s){let b=er(r,e),C=s?s(b):b,S=f.length,k=s?B=>s(Vr(B[r.index])):r.index,P=null;if(!s&&a&&(P=D5(n,e,i,r.index)),P!==null){let B=P.__ngLastListenerFn__||P;B.__ngNextListenerFn__=o,P.__ngLastListenerFn__=o,p=!1}else{o=vT(r,e,d,o),x5(b,i,o);let B=t.listen(C,i,o);f.push(o,B),l&&l.push(i,k,S,S+1)}}else o=vT(r,e,d,o);let g=r.outputs,y;if(p&&g!==null&&(y=g[i])){let b=y.length;if(b)for(let C=0;C<b;C+=2){let S=y[C],k=y[C+1],q=e[S][k].subscribe(o),z=f.length;f.push(o,q),l&&l.push(i,r.index,z,-(z+1))}}}function yT(n,e,t,r){let i=Fe(null);try{return Or(6,e,t),t(r)!==!1}catch(o){return g1(n,o),!1}finally{Or(7,e,t),Fe(i)}}function vT(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?oo(n.index,e):e;Y_(s,5);let a=yT(e,t,r,o),c=i.__ngNextListenerFn__;for(;c;)a=yT(e,t,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function Le(n=1){return $4(n)}function G1(n,e,t,r){yU(n,e,t,r)}function W1(n,e,t){gU(n,e,t)}function xp(n){let e=Re(),t=qt(),r=fS();D_(r+1);let i=X_(t,r);if(n.dirty&&b4(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=wU(e,r);n.reset(o,yB),n.notifyOnChanges()}return!0}return!1}function Dp(){return mU(Re(),fS())}function M5(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function K1(n){let e=N4();return lp(e,En+n)}function U(n,e=""){let t=Re(),r=qt(),i=n+En,o=r.firstCreatePass?vp(r,i,1,e,null):r.data[i],s=T5(r,t,o,e,n);t[i]=s,A_()&&H_(r,t,s,o),Yu(o,!1)}var T5=(n,e,t,r,i)=>(P_(!0),kB(e[Rt],r));function ot(n){return Jt("",n,""),ot}function Jt(n,e,t){let r=Re(),i=KU(r,n,e,t);return i!==Ln&&y1(r,so(),i),Jt}function tw(n,e,t,r,i){let o=Re(),s=QU(o,n,e,t,r,i);return s!==Ln&&y1(o,so(),s),tw}function Is(n,e,t){R1(e)&&(e=e());let r=Re(),i=Zu();if(Lr(r,i,e)){let o=qt(),s=S_();c1(o,s,r,n,e,r[Rt],t,!1)}return Is}function Wa(n,e){let t=R1(n);return t&&n.set(e),t}function xs(n,e){let t=Re(),r=qt(),i=cn();return H1(r,t,t[Rt],i,n,e),xs}function S5(n,e,t){let r=qt();if(r.firstCreatePass){let i=ro(n);c_(t,r.data,r.blueprint,i,!0),c_(e,r.data,r.blueprint,i,!1)}}function c_(n,e,t,r,i){if(n=wn(n),Array.isArray(n))for(let o=0;o<n.length;o++)c_(n[o],e,t,r,i);else{let o=qt(),s=Re(),a=cn(),c=ka(n)?n:wn(n.provide),l=WT(n),d=a.providerIndexes&1048575,f=a.directiveStart,p=a.providerIndexes>>20;if(ka(n)||!n.multi){let g=new ms(l,i,re),y=v0(c,e,i?d:d+p,f);y===-1?(R0(Vh(a,s),o,c),y0(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(g),s.push(g)):(t[y]=g,s[y]=g)}else{let g=v0(c,e,d+p,f),y=v0(c,e,d,d+p),b=g>=0&&t[g],C=y>=0&&t[y];if(i&&!C||!i&&!b){R0(Vh(a,s),o,c);let S=O5(i?P5:A5,t.length,i,r,l);!i&&C&&(t[y].providerFactory=S),y0(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(S),s.push(S)}else{let S=Q1(t[i?y:g],l,!i&&r);y0(o,n,g>-1?g:y,S)}!i&&r&&C&&t[y].componentProviders++}}}function y0(n,e,t,r){let i=ka(e),o=c4(e);if(i||o){let c=(o?wn(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(t);d===-1?l.push(t,[r,c]):l[d+1].push(r,c)}else l.push(t,c)}}}function Q1(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function v0(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function A5(n,e,t,r){return u_(this.multi,[])}function P5(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=gs(t,t[_e],this.providerFactory.index,r);o=a.slice(0,s),u_(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],u_(i,o);return o}function u_(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function O5(n,e,t,r,i){let o=new ms(n,t,re);return o.multi=[],o.index=e,o.componentProviders=0,Q1(o,i,r&&!t),o}function co(n,e=[]){return t=>{t.providersResolver=(r,i)=>S5(r,i?i(n):n,e)}}var R5=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=qT(!1,t.type),i=r.length>0?Cp([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=ee({token:n,providedIn:"environment",factory:()=>new n(K(bn))})}}return n})();function Y1(n){bs("NgStandalone"),n.getStandaloneInjector=e=>e.get(R5).getOrCreateStandaloneInjector(n)}function Z1(n,e,t){let r=hp()+n,i=Re();return i[r]===Ln?bp(i,r,t?e.call(t):e()):LU(i,r)}function nw(n,e){let t=n[e];return t===Ln?void 0:t}function N5(n,e,t,r,i,o){let s=e+t;return Lr(n,s,i)?bp(n,s+1,o?r.call(o,i):r(i)):nw(n,s+1)}function k5(n,e,t,r,i,o,s){let a=e+t;return Zh(n,a,i,o)?bp(n,a+2,s?r.call(s,i,o):r(i,o)):nw(n,a+2)}function F5(n,e,t,r,i,o,s,a,c){let l=e+t;return jU(n,l,i,o,s,a)?bp(n,l+4,c?r.call(c,i,o,s,a):r(i,o,s,a)):nw(n,l+4)}function nr(n,e){let t=qt(),r,i=n+En;t.firstCreatePass?(r=V5(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=ls(r.type,!0)),s,a=Pn(re);try{let c=Fh(!1),l=o();return Fh(c),M5(t,Re(),i,l),l}finally{Pn(a)}}function V5(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Mp(n,e,t){let r=n+En,i=Re(),o=lp(i,r);return rw(i,r)?N5(i,hp(),e,o.transform,t,o):o.transform(t)}function tl(n,e,t,r){let i=n+En,o=Re(),s=lp(o,i);return rw(o,i)?k5(o,hp(),e,s.transform,t,r,s):s.transform(t,r)}function nl(n,e,t,r,i,o){let s=n+En,a=Re(),c=lp(a,s);return rw(a,s)?F5(a,hp(),e,c.transform,t,r,i,o,c):c.transform(t,r,i,o)}function rw(n,e){return n[_e].data[e].pure}function X1(n,e){return wp(n,e)}var vh=null;function L5(n){vh!==null&&(n.defaultEncapsulation!==vh.defaultEncapsulation||n.preserveWhitespaces!==vh.preserveWhitespaces)||(vh=n)}var gi=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},J1=new gi("18.2.13");var Tp=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var iw=new X(""),rl=new X(""),Sp=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,ow||(j5(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ne.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(K(Ne),K(Ap),K(rl))}}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac})}}return n})(),Ap=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return ow?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function j5(n){ow=n}var ow;function Ds(n){return!!n&&typeof n.then=="function"}function eA(n){return!!n&&typeof n.subscribe=="function"}var Pp=new X(""),tA=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=H(Pp,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Ds(o))t.push(o);else if(eA(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Op=new X("");function B5(){pM(()=>{throw new ae(600,!1)})}function U5(n){return n.isBoundToModule}var $5=10;function z5(n,e,t){try{let r=t();return Ds(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function nA(n,e){return Array.isArray(e)?e.reduce(nA,n):Y(Y({},n),e)}var wi=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=H(mB),this.afterRenderManager=H(k1),this.zonelessEnabled=H(Z_),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Ke,this.afterTick=new Ke,this.componentTypes=[],this.components=[],this.isStable=H(_i).hasPendingTasks.pipe(se(t=>!t)),this._injector=H(bn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Hh;if(!this._injector.get(tA).done){let p=!i&&BT(t),g=!1;throw new ae(405,g)}let s;i?s=t:s=this._injector.get(ja).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=U5(s)?void 0:this._injector.get(io),c=r||s.selector,l=s.create(Nn.NULL,[],c,a),d=l.location.nativeElement,f=l.injector.get(iw,null);return f?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),Ih(this.components,l),f?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new ae(101,!1);let t=Fe(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Fe(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Ba,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<$5;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)q5(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>dp(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Ih(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Op,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Ih(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ae(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Ih(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function q5(n,e,t,r){if(!t&&!dp(n))return;b1(n,e,t&&!r?0:1)}var l_=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Rp=(()=>{class n{compileModuleSync(t){return new Yh(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=UT(t),o=qS(i.declarations).reduce((s,a)=>{let c=no(a);return c&&s.push(new Ua(c)),s},[]);return new l_(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),H5=new X("");function G5(n,e,t){let r=new Yh(t);return Promise.resolve(r)}function _T(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var W5=(()=>{class n{constructor(){this.zone=H(Ne),this.changeDetectionScheduler=H(La),this.applicationRef=H(wi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function K5({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ne(ve(Y({},rA()),{scheduleInRootZone:t})),[{provide:Ne,useFactory:n},{provide:Na,multi:!0,useFactory:()=>{let r=H(W5,{optional:!0});return()=>r.initialize()}},{provide:Na,multi:!0,useFactory:()=>{let r=H(Q5);return()=>{r.initialize()}}},e===!0?{provide:D1,useValue:!0}:[],{provide:M1,useValue:t??AS}]}function rA(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var Q5=(()=>{class n{constructor(){this.subscription=new vt,this.initialized=!1,this.zone=H(Ne),this.pendingTasks=H(_i)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ne.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ne.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Y5=(()=>{class n{constructor(){this.appRef=H(wi),this.taskService=H(_i),this.ngZone=H(Ne),this.zonelessEnabled=H(Z_),this.disableScheduling=H(D1,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new vt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(jh):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(H(M1,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Bh||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?tT:PS;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(jh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,tT(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Z5(){return typeof $localize<"u"&&$localize.locale||Jh}var il=new X("",{providedIn:"root",factory:()=>H(il,Te.Optional|Te.SkipSelf)||Z5()}),iA=new X("",{providedIn:"root",factory:()=>b5});var ep=new X("");function _h(n){return!n.moduleRef}function X5(n){let e=_h(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ne);return t.run(()=>{_h(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(pi,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),_h(n)){let o=()=>e.destroy(),s=n.platformInjector.get(ep);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(ep);s.add(o),n.moduleRef.onDestroy(()=>{Ih(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return z5(r,t,()=>{let o=e.get(tA);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(il,Jh);if(I5(s||Jh),_h(n)){let a=e.get(wi);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return J5(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function J5(n,e){let t=n.injector.get(wi);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new ae(-403,!1);e.push(n)}var oA=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>pB(r?.ngZone,ve(Y({},rA({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[K5({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:La,useExisting:Y5}],c=kU(t.moduleType,this.injector,a);return X5({moduleRef:c,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=nA({},r);return G5(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ae(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(ep,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(K(Nn))}}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),Uu=null,sA=new X("");function e$(n){if(Uu&&!Uu.get(sA,!1))throw new ae(400,!1);B5(),Uu=n;let e=n.get(oA);return r$(n),e}function sw(n,e,t=[]){let r=`Platform: ${e}`,i=new X(r);return(o=[])=>{let s=aA();if(!s||s.injector.get(sA,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):e$(t$(a,r))}return n$(i)}}function t$(n=[],e){return Nn.create({name:e,providers:[{provide:ap,useValue:"platform"},{provide:ep,useValue:new Set([()=>Uu=null])},...n]})}function n$(n){let e=aA();if(!e)throw new ae(401,!1);return e}function aA(){return Uu?.get(oA)??null}function r$(n){n.get(L_,null)?.forEach(t=>t())}function Np(){return!1}var uo=(()=>{class n{static{this.__NG_ELEMENT_ID__=i$}}return n})();function i$(n){return o$(cn(),Re(),(n&16)===16)}function o$(n,e,t){if(up(n)&&!t){let r=oo(n.index,e);return new vs(r,r)}else if(n.type&175){let r=e[Fr];return new vs(r,e)}return null}var d_=class{constructor(){}supports(e){return N1(e)}create(e){return new f_(e)}},s$=(n,e)=>e,f_=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||s$}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<wT(r,i,o)?t:r,a=wT(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,d=c-i;if(l!=d){for(let p=0;p<l;p++){let g=p<o.length?o[p]:o[p]=0,y=g+p;d<=y&&y<l&&(o[p]=g+1)}let f=s.previousIndex;o[f]=d-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!N1(e))throw new ae(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,FU(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new h_(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new tp),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new tp),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},h_=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},p_=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},tp=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new p_,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function wT(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function CT(){return new aw([new d_])}var aw=(()=>{class n{static{this.\u0275prov=ee({token:n,providedIn:"root",factory:CT})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||CT()),deps:[[n,new g_,new za]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new ae(901,!1)}}return n})();var cA=sw(null,"core",[]),uA=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(K(wi))}}static{this.\u0275mod=wt({type:n})}static{this.\u0275inj=_t({})}}return n})();function Ms(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function ol(n,e){bs("NgSignals");let t=dM(n);return e?.equal&&(t[oi].equal=e.equal),t}function Ci(n){let e=Fe(null);try{return n()}finally{Fe(e)}}function lA(n){let e=no(n);if(!e)return null;let t=new Ua(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var yA=null;function Br(){return yA}function vA(n){yA??=n}var kp=class{};var ln=new X(""),pw=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ee({token:n,factory:()=>H(c$),providedIn:"platform"})}}return n})(),_A=new X(""),c$=(()=>{class n extends pw{constructor(){super(),this._doc=H(ln),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Br().getBaseHref(this._doc)}onPopState(t){let r=Br().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Br().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ee({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function mw(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function dA(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function bi(n){return n&&n[0]!=="?"?"?"+n:n}var Ei=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ee({token:n,factory:()=>H(gw),providedIn:"root"})}}return n})(),wA=new X(""),gw=(()=>{class n extends Ei{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??H(ln).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return mw(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+bi(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+bi(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+bi(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(K(pw),K(wA,8))}}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),CA=(()=>{class n extends Ei{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=mw(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+bi(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+bi(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(K(pw),K(wA,8))}}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac})}}return n})(),Ya=(()=>{class n{constructor(t){this._subject=new He,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=d$(dA(fA(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+bi(r))}normalize(t){return n.stripTrailingSlash(l$(this._basePath,fA(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+bi(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+bi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=bi}static{this.joinWithSlash=mw}static{this.stripTrailingSlash=dA}static{this.\u0275fac=function(r){return new(r||n)(K(Ei))}}static{this.\u0275prov=ee({token:n,factory:()=>u$(),providedIn:"root"})}}return n})();function u$(){return new Ya(K(Ei))}function l$(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function fA(n){return n.replace(/\/index.html$/,"")}function d$(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var bA={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},yw=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(yw||{});var rr={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Ka(n,e){let t=Ip(n),r=t[Es.NumberSymbols][e];if(typeof r>"u"){if(e===rr.CurrencyDecimal)return t[Es.NumberSymbols][rr.Decimal];if(e===rr.CurrencyGroup)return t[Es.NumberSymbols][rr.Group]}return r}function EA(n,e){return Ip(n)[Es.NumberFormats][e]}function f$(n){return Ip(n)[Es.Currencies]}function h$(n,e,t="en"){let r=f$(t)[n]||bA[n]||[],i=r[1];return e==="narrow"&&typeof i=="string"?i:r[0]||n}var p$=2;function m$(n){let e,t=bA[n];return t&&(e=t[2]),typeof e=="number"?e:p$}var g$=/^(\d+)?\.((\d+)(-(\d+))?)?$/,hA=22,Fp=".",sl="0",y$=";",v$=",",cw="#",pA="\xA4";function IA(n,e,t,r,i,o,s=!1){let a="",c=!1;if(!isFinite(n))a=Ka(t,rr.Infinity);else{let l=b$(n);s&&(l=C$(l));let d=e.minInt,f=e.minFrac,p=e.maxFrac;if(o){let k=o.match(g$);if(k===null)throw new Error(`${o} is not a valid digit info`);let P=k[1],B=k[3],q=k[5];P!=null&&(d=uw(P)),B!=null&&(f=uw(B)),q!=null?p=uw(q):B!=null&&f>p&&(p=f)}E$(l,f,p);let g=l.digits,y=l.integerLen,b=l.exponent,C=[];for(c=g.every(k=>!k);y<d;y++)g.unshift(0);for(;y<0;y++)g.unshift(0);y>0?C=g.splice(y,g.length):(C=g,g=[0]);let S=[];for(g.length>=e.lgSize&&S.unshift(g.splice(-e.lgSize,g.length).join(""));g.length>e.gSize;)S.unshift(g.splice(-e.gSize,g.length).join(""));g.length&&S.unshift(g.join("")),a=S.join(Ka(t,r)),C.length&&(a+=Ka(t,i)+C.join("")),b&&(a+=Ka(t,rr.Exponential)+"+"+b)}return n<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function _$(n,e,t,r,i){let o=EA(e,yw.Currency),s=xA(o,Ka(e,rr.MinusSign));return s.minFrac=m$(r),s.maxFrac=s.minFrac,IA(n,s,e,rr.CurrencyGroup,rr.CurrencyDecimal,i).replace(pA,t).replace(pA,"").trim()}function w$(n,e,t){let r=EA(e,yw.Decimal),i=xA(r,Ka(e,rr.MinusSign));return IA(n,i,e,rr.Group,rr.Decimal,t)}function xA(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(y$),i=r[0],o=r[1],s=i.indexOf(Fp)!==-1?i.split(Fp):[i.substring(0,i.lastIndexOf(sl)+1),i.substring(i.lastIndexOf(sl)+1)],a=s[0],c=s[1]||"";t.posPre=a.substring(0,a.indexOf(cw));for(let d=0;d<c.length;d++){let f=c.charAt(d);f===sl?t.minFrac=t.maxFrac=d+1:f===cw?t.maxFrac=d+1:t.posSuf+=f}let l=a.split(v$);if(t.gSize=l[1]?l[1].length:0,t.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let d=i.length-t.posPre.length-t.posSuf.length,f=o.indexOf(cw);t.negPre=o.substring(0,f).replace(/'/g,""),t.negSuf=o.slice(f+d).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function C$(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function b$(n){let e=Math.abs(n)+"",t=0,r,i,o,s,a;for((i=e.indexOf(Fp))>-1&&(e=e.replace(Fp,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===sl;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===sl;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>hA&&(r=r.splice(0,hA-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function E$(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(e,i),t),s=o+n.integerLen,a=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let f=s;f<r.length;f++)r[f]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let f=1;f<s;f++)r[f]=0}if(a>=5)if(s-1<0){for(let f=0;f>s;f--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let c=o!==0,l=e+n.integerLen,d=r.reduceRight(function(f,p,g,y){return p=p+f,y[g]=p<10?p:p-10,c&&(y[g]===0&&g>=l?y.pop():c=!1),p>=10?1:0},0);d&&(r.unshift(d),n.integerLen++)}function uw(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function Vp(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var lw=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},lo=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new lw(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),mA(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);mA(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(re(ao),re(_s),re(aw))}}static{this.\u0275dir=Ct({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function mA(n,e){n.context.$implicit=e.item}var fo=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new dw,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){gA("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){gA("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(re(ao),re(_s))}}static{this.\u0275dir=Ct({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),dw=class{constructor(){this.$implicit=null,this.ngIf=null}};function gA(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Cn(e)}'.`)}function vw(n,e){return new ae(2100,!1)}var Lp=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw vw(n,t);return t.toUpperCase()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=op({name:"uppercase",type:n,pure:!0,standalone:!0})}}return n})();var DA=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!MA(t))return null;i||=this._locale;try{let o=TA(t);return w$(o,i,r)}catch(o){throw vw(n,o.message)}}static{this.\u0275fac=function(r){return new(r||n)(re(il,16))}}static{this.\u0275pipe=op({name:"number",type:n,pure:!0,standalone:!0})}}return n})();var Za=(()=>{class n{constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,i="symbol",o,s){if(!MA(t))return null;s||=this._locale,typeof i=="boolean"&&(i=i?"symbol":"code");let a=r||this._defaultCurrencyCode;i!=="code"&&(i==="symbol"||i==="symbol-narrow"?a=h$(a,i==="symbol"?"wide":"narrow",s):a=i);try{let c=TA(t);return _$(c,s,a,r,o)}catch(c){throw vw(n,c.message)}}static{this.\u0275fac=function(r){return new(r||n)(re(il,16),re(iA,16))}}static{this.\u0275pipe=op({name:"currency",type:n,pure:!0,standalone:!0})}}return n})();function MA(n){return!(n==null||n===""||n!==n)}function TA(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var SA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=wt({type:n})}static{this.\u0275inj=_t({})}}return n})(),_w="browser",I$="server";function x$(n){return n===_w}function ho(n){return n===I$}var AA=(()=>{class n{static{this.\u0275prov=ee({token:n,providedIn:"root",factory:()=>x$(H(un))?new fw(H(ln),window):new hw})}}return n})(),fw=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=D$(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function D$(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var hw=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Qa=class{};var cl=class{},Bp=class{},Ii=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Cw=class{encodeKey(e){return PA(e)}encodeValue(e){return PA(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function M$(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}var T$=/%(\d[a-f0-9])/gi,S$={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function PA(n){return encodeURIComponent(n).replace(T$,(e,t)=>S$[t]??e)}function jp(n){return`${n}`}var mo=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Cw,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=M$(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(jp):[jp(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(jp(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(jp(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var bw=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function A$(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function OA(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function RA(n){return typeof Blob<"u"&&n instanceof Blob}function NA(n){return typeof FormData<"u"&&n instanceof FormData}function P$(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var al=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(A$(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Ii,this.context??=new bw,!this.params)this.params=new mo,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||OA(this.body)||RA(this.body)||NA(this.body)||P$(this.body)?this.body:this.body instanceof mo?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||NA(this.body)?null:RA(this.body)?this.body.type||null:OA(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof mo?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,d=e.params||this.params,f=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((p,g)=>p.set(g,e.setHeaders[g]),l)),e.setParams&&(d=Object.keys(e.setParams).reduce((p,g)=>p.set(g,e.setParams[g]),d)),new n(t,r,s,{params:d,headers:l,context:f,reportProgress:c,responseType:i,withCredentials:a,transferCache:o})}},go=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(go||{}),ul=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new Ii,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Up=class n extends ul{constructor(e={}){super(e),this.type=go.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ll=class n extends ul{constructor(e={}){super(e),this.type=go.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},po=class extends ul{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},jA=200,O$=204;function ww(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var R$=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof al)o=t;else{let c;i.headers instanceof Ii?c=i.headers:c=new Ii(i.headers);let l;i.params&&(i.params instanceof mo?l=i.params:l=new mo({fromObject:i.params})),o=new al(t,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=ue(o).pipe(ci(c=>this.handler.handle(c)));if(t instanceof al||i.observe==="events")return s;let a=s.pipe(pt(c=>c instanceof ll));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(se(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(se(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(se(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return a.pipe(se(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new mo().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,ww(i,r))}post(t,r,i={}){return this.request("POST",t,ww(i,r))}put(t,r,i={}){return this.request("PUT",t,ww(i,r))}static{this.\u0275fac=function(r){return new(r||n)(K(cl))}}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac})}}return n})(),N$=/^\)\]\}',?\n/,k$="X-Request-URL";function kA(n){if(n.url)return n.url;let e=k$.toLocaleLowerCase();return n.headers.get(e)}var F$=(()=>{class n{constructor(){this.fetchImpl=H(Ew,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=H(Ne)}handle(t){return new Ie(r=>{let i=new AbortController;return this.doRequest(t,i.signal,r).then(Iw,o=>r.error(new po({error:o}))),()=>i.abort()})}doRequest(t,r,i){return V(this,null,function*(){let o=this.createRequestInit(t),s;try{let g=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,Y({signal:r},o)));V$(g),i.next({type:go.Sent}),s=yield g}catch(g){i.error(new po({error:g,status:g.status??0,statusText:g.statusText,url:t.urlWithParams,headers:g.headers}));return}let a=new Ii(s.headers),c=s.statusText,l=kA(s)??t.urlWithParams,d=s.status,f=null;if(t.reportProgress&&i.next(new Up({headers:a,status:d,statusText:c,url:l})),s.body){let g=s.headers.get("content-length"),y=[],b=s.body.getReader(),C=0,S,k,P=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>V(this,null,function*(){for(;;){let{done:q,value:z}=yield b.read();if(q)break;if(y.push(z),C+=z.length,t.reportProgress){k=t.responseType==="text"?(k??"")+(S??=new TextDecoder).decode(z,{stream:!0}):void 0;let I=()=>i.next({type:go.DownloadProgress,total:g?+g:void 0,loaded:C,partialText:k});P?P.run(I):I()}}}));let B=this.concatChunks(y,C);try{let q=s.headers.get("Content-Type")??"";f=this.parseBody(t,B,q)}catch(q){i.error(new po({error:q,headers:new Ii(s.headers),status:s.status,statusText:s.statusText,url:kA(s)??t.urlWithParams}));return}}d===0&&(d=f?jA:0),d>=200&&d<300?(i.next(new ll({body:f,headers:a,status:d,statusText:c,url:l})),i.complete()):i.error(new po({error:f,headers:a,status:d,statusText:c,url:l}))})}parseBody(t,r,i){switch(t.responseType){case"json":let o=new TextDecoder().decode(r).replace(N$,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(t){let r={},i=t.withCredentials?"include":void 0;if(t.headers.forEach((o,s)=>r[o]=s.join(",")),t.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){let o=t.detectContentTypeHeader();o!==null&&(r["Content-Type"]=o)}return{body:t.serializeBody(),method:t.method,headers:r,credentials:i}}concatChunks(t,r){let i=new Uint8Array(r),o=0;for(let s of t)i.set(s,o),o+=s.length;return i}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac})}}return n})(),Ew=class{};function Iw(){}function V$(n){n.then(Iw,Iw)}function BA(n,e){return e(n)}function L$(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}function j$(n,e,t){return(r,i)=>Xn(t,()=>e(r,o=>n(o,i)))}var B$=new X(""),xw=new X(""),U$=new X(""),UA=new X("",{providedIn:"root",factory:()=>!0});function $$(){let n=null;return(e,t)=>{n===null&&(n=(H(B$,{optional:!0})??[]).reduceRight(L$,BA));let r=H(_i);if(H(UA)){let o=r.add();return n(e,t).pipe(Zi(()=>r.remove(o)))}else return n(e,t)}}var FA=(()=>{class n extends cl{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=H(_i),this.contributeToStability=H(UA)}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(xw),...this.injector.get(U$,[])]));this.chain=r.reduceRight((i,o)=>j$(i,o,this.injector),BA)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Zi(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}static{this.\u0275fac=function(r){return new(r||n)(K(Bp),K(bn))}}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac})}}return n})();var z$=/^\)\]\}',?\n/;function q$(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var VA=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new ae(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Me(r.\u0275loadImpl()):ue(null)).pipe(dt(()=>new Ie(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((b,C)=>s.setRequestHeader(b,C.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let b=t.detectContentTypeHeader();b!==null&&s.setRequestHeader("Content-Type",b)}if(t.responseType){let b=t.responseType.toLowerCase();s.responseType=b!=="json"?b:"text"}let a=t.serializeBody(),c=null,l=()=>{if(c!==null)return c;let b=s.statusText||"OK",C=new Ii(s.getAllResponseHeaders()),S=q$(s)||t.url;return c=new Up({headers:C,status:s.status,statusText:b,url:S}),c},d=()=>{let{headers:b,status:C,statusText:S,url:k}=l(),P=null;C!==O$&&(P=typeof s.response>"u"?s.responseText:s.response),C===0&&(C=P?jA:0);let B=C>=200&&C<300;if(t.responseType==="json"&&typeof P=="string"){let q=P;P=P.replace(z$,"");try{P=P!==""?JSON.parse(P):null}catch(z){P=q,B&&(B=!1,P={error:z,text:P})}}B?(o.next(new ll({body:P,headers:b,status:C,statusText:S,url:k||void 0})),o.complete()):o.error(new po({error:P,headers:b,status:C,statusText:S,url:k||void 0}))},f=b=>{let{url:C}=l(),S=new po({error:b,status:s.status||0,statusText:s.statusText||"Unknown Error",url:C||void 0});o.error(S)},p=!1,g=b=>{p||(o.next(l()),p=!0);let C={type:go.DownloadProgress,loaded:b.loaded};b.lengthComputable&&(C.total=b.total),t.responseType==="text"&&s.responseText&&(C.partialText=s.responseText),o.next(C)},y=b=>{let C={type:go.UploadProgress,loaded:b.loaded};b.lengthComputable&&(C.total=b.total),o.next(C)};return s.addEventListener("load",d),s.addEventListener("error",f),s.addEventListener("timeout",f),s.addEventListener("abort",f),t.reportProgress&&(s.addEventListener("progress",g),a!==null&&s.upload&&s.upload.addEventListener("progress",y)),s.send(a),o.next({type:go.Sent}),()=>{s.removeEventListener("error",f),s.removeEventListener("abort",f),s.removeEventListener("load",d),s.removeEventListener("timeout",f),t.reportProgress&&(s.removeEventListener("progress",g),a!==null&&s.upload&&s.upload.removeEventListener("progress",y)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(K(Qa))}}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac})}}return n})(),$A=new X(""),H$="XSRF-TOKEN",G$=new X("",{providedIn:"root",factory:()=>H$}),W$="X-XSRF-TOKEN",K$=new X("",{providedIn:"root",factory:()=>W$}),$p=class{},Q$=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Vp(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(K(ln),K(un),K(G$))}}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac})}}return n})();function Y$(n,e){let t=n.url.toLowerCase();if(!H($A)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=H($p).getToken(),i=H(K$);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var zA=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(zA||{});function Z$(n,e){return{\u0275kind:n,\u0275providers:e}}function X$(...n){let e=[R$,VA,FA,{provide:cl,useExisting:FA},{provide:Bp,useFactory:()=>H(F$,{optional:!0})??H(VA)},{provide:xw,useValue:Y$,multi:!0},{provide:$A,useValue:!0},{provide:$p,useClass:Q$}];for(let t of n)e.push(...t.\u0275providers);return sp(e)}var LA=new X("");function J$(){return Z$(zA.LegacyInterceptors,[{provide:LA,useFactory:$$},{provide:xw,useExisting:LA,multi:!0}])}var qA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=wt({type:n})}static{this.\u0275inj=_t({providers:[X$(J$())]})}}return n})();var Tw=class extends kp{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Sw=class n extends Tw{static makeCurrent(){vA(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=e9();return t==null?null:t9(t)}resetBaseElement(){dl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Vp(document.cookie,e)}},dl=null;function e9(){return dl=dl||document.querySelector("base"),dl?dl.getAttribute("href"):null}function t9(n){return new URL(n,document.baseURI).pathname}var Aw=class{addToWindow(e){_n.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new ae(5103,!1);return o},_n.getAllAngularTestabilities=()=>e.getAllTestabilities(),_n.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=_n.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};_n.frameworkStabilizers||(_n.frameworkStabilizers=[]),_n.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Br().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},n9=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac})}}return n})(),Pw=new X(""),KA=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new ae(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(K(Pw),K(Ne))}}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac})}}return n})(),zp=class{constructor(e){this._doc=e}},Dw="ng-app-id",QA=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ho(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Dw}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(Dw),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Dw,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(K(ln),K(pp),K(j_,8),K(un))}}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac})}}return n})(),Mw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Rw=/%COMP%/g,YA="%COMP%",r9=`_nghost-${YA}`,i9=`_ngcontent-${YA}`,o9=!0,s9=new X("",{providedIn:"root",factory:()=>o9});function a9(n){return i9.replace(Rw,n)}function c9(n){return r9.replace(Rw,n)}function ZA(n,e){return e.map(t=>t.replace(Rw,n))}var HA=(()=>{class n{constructor(t,r,i,o,s,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=ho(a),this.defaultRenderer=new fl(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Nr.ShadowDom&&(r=ve(Y({},r),{encapsulation:Nr.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof qp?i.applyToHost(t):i instanceof hl&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case Nr.Emulated:o=new qp(c,l,r,this.appId,d,s,a,f);break;case Nr.ShadowDom:return new Ow(c,l,t,r,s,a,this.nonce,f);default:o=new hl(c,l,r,d,s,a,f);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(K(KA),K(QA),K(pp),K(s9),K(ln),K(un),K(Ne),K(j_))}}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac})}}return n})(),fl=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Mw[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(GA(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(GA(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ae(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Mw[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Mw[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(mi.DashCase|mi.Important)?e.style.setProperty(t,r,i&mi.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&mi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Br().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function GA(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Ow=class extends fl{constructor(e,t,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=ZA(i.id,i.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},hl=class extends fl{constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?ZA(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},qp=class extends hl{constructor(e,t,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,t,r,o,s,a,c,l),this.contentAttr=a9(l),this.hostAttr=c9(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},u9=(()=>{class n extends zp{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(K(ln))}}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac})}}return n})(),WA=["alt","control","meta","shift"],l9={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},d9={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},f9=(()=>{class n extends zp{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Br().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),WA.forEach(l=>{let d=r.indexOf(l);d>-1&&(r.splice(d,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=l9[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),WA.forEach(s=>{if(s!==i){let a=d9[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(K(ln))}}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac})}}return n})();function h9(){Sw.makeCurrent()}function p9(){return new pi}function m9(){return LS(document),document}var g9=[{provide:un,useValue:_w},{provide:L_,useValue:h9,multi:!0},{provide:ln,useFactory:m9,deps:[]}],XA=sw(cA,"browser",g9),y9=new X(""),v9=[{provide:rl,useClass:Aw,deps:[]},{provide:iw,useClass:Sp,deps:[Ne,Ap,rl]},{provide:Sp,useClass:Sp,deps:[Ne,Ap,rl]}],_9=[{provide:ap,useValue:"root"},{provide:pi,useFactory:p9,deps:[]},{provide:Pw,useClass:u9,multi:!0,deps:[ln,Ne,un]},{provide:Pw,useClass:f9,multi:!0,deps:[ln]},HA,QA,KA,{provide:Ba,useExisting:HA},{provide:Qa,useClass:n9,deps:[]},[]],JA=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:pp,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(K(y9,12))}}static{this.\u0275mod=wt({type:n})}static{this.\u0275inj=_t({providers:[..._9,...v9],imports:[SA,uA]})}}return n})();var eP=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(K(ln))}}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ee="primary",Ml=Symbol("RouteTitle"),Lw=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function rc(n){return new Lw(n)}function w9(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function C9(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ur(n[t],e[t]))return!1;return!0}function Ur(n,e){let t=n?jw(n):void 0,r=e?jw(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!fP(n[i],e[i]))return!1;return!0}function jw(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function fP(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function hP(n){return n.length>0?n[n.length-1]:null}function vo(n){return Xv(n)?n:Ds(n)?Me(Promise.resolve(n)):ue(n)}var b9={exact:mP,subset:gP},pP={exact:E9,subset:I9,ignored:()=>!0};function nP(n,e,t){return b9[t.paths](n.root,e.root,t.matrixParams)&&pP[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function E9(n,e){return Ur(n,e)}function mP(n,e,t){if(!As(n.segments,e.segments)||!Wp(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!mP(n.children[r],e.children[r],t))return!1;return!0}function I9(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>fP(n[t],e[t]))}function gP(n,e,t){return yP(n,e,e.segments,t)}function yP(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!As(i,t)||e.hasChildren()||!Wp(i,t,r))}else if(n.segments.length===t.length){if(!As(n.segments,t)||!Wp(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!gP(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!As(n.segments,i)||!Wp(n.segments,i,r)||!n.children[Ee]?!1:yP(n.children[Ee],e,o,r)}}function Wp(n,e,t){return e.every((r,i)=>pP[t](n[i].parameters,r.parameters))}var Di=class{constructor(e=new qe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=rc(this.queryParams),this._queryParamMap}toString(){return M9.serialize(this)}},qe=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Kp(this)}},Ss=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=rc(this.parameters),this._parameterMap}toString(){return _P(this)}};function x9(n,e){return As(n,e)&&n.every((t,r)=>Ur(t.parameters,e[r].parameters))}function As(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function D9(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Ee&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Ee&&(t=t.concat(e(i,r)))}),t}var Tl=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ee({token:n,factory:()=>new ic,providedIn:"root"})}}return n})(),ic=class{parse(e){let t=new Uw(e);return new Di(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${pl(e.root,!0)}`,r=A9(e.queryParams),i=typeof e.fragment=="string"?`#${T9(e.fragment)}`:"";return`${t}${r}${i}`}},M9=new ic;function Kp(n){return n.segments.map(e=>_P(e)).join("/")}function pl(n,e){if(!n.hasChildren())return Kp(n);if(e){let t=n.children[Ee]?pl(n.children[Ee],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==Ee&&r.push(`${i}:${pl(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=D9(n,(r,i)=>i===Ee?[pl(n.children[Ee],!1)]:[`${i}:${pl(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Ee]!=null?`${Kp(n)}/${t[0]}`:`${Kp(n)}/(${t.join("//")})`}}function vP(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Hp(n){return vP(n).replace(/%3B/gi,";")}function T9(n){return encodeURI(n)}function Bw(n){return vP(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Qp(n){return decodeURIComponent(n)}function rP(n){return Qp(n.replace(/\+/g,"%20"))}function _P(n){return`${Bw(n.path)}${S9(n.parameters)}`}function S9(n){return Object.entries(n).map(([e,t])=>`;${Bw(e)}=${Bw(t)}`).join("")}function A9(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Hp(t)}=${Hp(i)}`).join("&"):`${Hp(t)}=${Hp(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var P9=/^[^\/()?;#]+/;function Nw(n){let e=n.match(P9);return e?e[0]:""}var O9=/^[^\/()?;=#]+/;function R9(n){let e=n.match(O9);return e?e[0]:""}var N9=/^[^=?&#]+/;function k9(n){let e=n.match(N9);return e?e[0]:""}var F9=/^[^&#]+/;function V9(n){let e=n.match(F9);return e?e[0]:""}var Uw=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new qe([],{}):new qe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ee]=new qe(e,t)),r}parseSegment(){let e=Nw(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ae(4009,!1);return this.capture(e),new Ss(Qp(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=R9(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Nw(this.remaining);i&&(r=i,this.capture(r))}e[Qp(t)]=Qp(r)}parseQueryParam(e){let t=k9(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=V9(this.remaining);s&&(r=s,this.capture(r))}let i=rP(t),o=rP(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Nw(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ae(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Ee);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[Ee]:new qe([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ae(4011,!1)}};function wP(n){return n.segments.length>0?new qe([],{[Ee]:n}):n}function CP(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=CP(i);if(r===Ee&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new qe(n.segments,e);return L9(t)}function L9(n){if(n.numberOfChildren===1&&n.children[Ee]){let e=n.children[Ee];return new qe(n.segments.concat(e.segments),e.children)}return n}function Ps(n){return n instanceof Di}function j9(n,e,t=null,r=null){let i=bP(n);return EP(i,e,t,r)}function bP(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new qe(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=wP(r);return e??i}function EP(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return kw(i,i,i,t,r);let o=B9(e);if(o.toRoot())return kw(i,i,new qe([],{}),t,r);let s=U9(o,i,n),a=s.processChildren?yl(s.segmentGroup,s.index,o.commands):xP(s.segmentGroup,s.index,o.commands);return kw(i,s.segmentGroup,a,t,r)}function Yp(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function wl(n){return typeof n=="object"&&n!=null&&n.outlets}function kw(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let s;n===e?s=t:s=IP(n,e,t);let a=wP(CP(s));return new Di(a,o,i)}function IP(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=IP(o,e,t)}),new qe(n.segments,r)}var Zp=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Yp(r[0]))throw new ae(4003,!1);let i=r.find(wl);if(i&&i!==hP(r))throw new ae(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function B9(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Zp(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Zp(t,e,r)}var ec=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function U9(n,e,t){if(n.isAbsolute)return new ec(e,!0,0);if(!t)return new ec(e,!1,NaN);if(t.parent===null)return new ec(t,!0,0);let r=Yp(n.commands[0])?0:1,i=t.segments.length-1+r;return $9(t,i,n.numberOfDoubleDots)}function $9(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new ae(4005,!1);i=r.segments.length}return new ec(r,!1,i-o)}function z9(n){return wl(n[0])?n[0].outlets:{[Ee]:n}}function xP(n,e,t){if(n??=new qe([],{}),n.segments.length===0&&n.hasChildren())return yl(n,e,t);let r=q9(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new qe(n.segments.slice(0,r.pathIndex),{});return o.children[Ee]=new qe(n.segments.slice(r.pathIndex),n.children),yl(o,0,i)}else return r.match&&i.length===0?new qe(n.segments,{}):r.match&&!n.hasChildren()?$w(n,e,t):r.match?yl(n,0,i):$w(n,e,t)}function yl(n,e,t){if(t.length===0)return new qe(n.segments,{});{let r=z9(t),i={};if(Object.keys(r).some(o=>o!==Ee)&&n.children[Ee]&&n.numberOfChildren===1&&n.children[Ee].segments.length===0){let o=yl(n.children[Ee],e,t);return new qe(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=xP(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new qe(n.segments,i)}}function q9(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(wl(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!oP(c,l,s))return o;r+=2}else{if(!oP(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function $w(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(wl(o)){let c=H9(o.outlets);return new qe(r,c)}if(i===0&&Yp(t[0])){let c=n.segments[e];r.push(new Ss(c.path,iP(t[0]))),i++;continue}let s=wl(o)?o.outlets[Ee]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Yp(a)?(r.push(new Ss(s,iP(a))),i+=2):(r.push(new Ss(s,{})),i++)}return new qe(r,{})}function H9(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=$w(new qe([],{}),0,r))}),e}function iP(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function oP(n,e,t){return n==t.path&&Ur(e,t.parameters)}var vl="imperative",Ht=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Ht||{}),ir=class{constructor(e,t){this.id=e,this.url=t}},oc=class extends ir{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Ht.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},$n=class extends ir{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Ht.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Un=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Un||{}),Xp=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Xp||{}),xi=class extends ir{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Ht.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},yo=class extends ir{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Ht.NavigationSkipped}},Cl=class extends ir{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Ht.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Jp=class extends ir{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ht.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zw=class extends ir{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ht.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qw=class extends ir{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Ht.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Hw=class extends ir{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ht.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gw=class extends ir{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ht.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ww=class{constructor(e){this.route=e,this.type=Ht.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Kw=class{constructor(e){this.route=e,this.type=Ht.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Qw=class{constructor(e){this.snapshot=e,this.type=Ht.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Yw=class{constructor(e){this.snapshot=e,this.type=Ht.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zw=class{constructor(e){this.snapshot=e,this.type=Ht.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xw=class{constructor(e){this.snapshot=e,this.type=Ht.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},em=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=Ht.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},bl=class{},sc=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function G9(n,e){return n.providers&&!n._injector&&(n._injector=Cp(n.providers,e,`Route: ${n.path}`)),n._injector??e}function wr(n){return n.outlet||Ee}function W9(n,e){let t=n.filter(r=>wr(r)===e);return t.push(...n.filter(r=>wr(r)!==e)),t}function Sl(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Jw=class{get injector(){return Sl(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Al(this.rootInjector),this.attachRef=null}},Al=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Jw(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(K(bn))}}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),tm=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=eC(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=eC(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=tC(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return tC(e,this._root).map(t=>t.value)}};function eC(n,e){if(n===e.value)return e;for(let t of e.children){let r=eC(n,t);if(r)return r}return null}function tC(n,e){if(n===e.value)return[e];for(let t of e.children){let r=tC(n,t);if(r.length)return r.unshift(e),r}return[]}var Bn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ja(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var nm=class extends tm{constructor(e,t){super(e),this.snapshot=t,lC(this,e)}toString(){return this.snapshot.toString()}};function DP(n){let e=K9(n),t=new xt([new Ss("",{})]),r=new xt({}),i=new xt({}),o=new xt({}),s=new xt(""),a=new Mi(t,r,o,s,i,Ee,n,e.root);return a.snapshot=e.root,new nm(new Bn(a,[]),e)}function K9(n){let e={},t={},r={},i="",o=new tc([],e,r,i,t,Ee,n,null,{});return new im("",new Bn(o,[]))}var Mi=class{constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(se(l=>l[Ml]))??ue(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(se(e=>rc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(se(e=>rc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function rm(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:Y(Y({},e.params),n.params),data:Y(Y({},e.data),n.data),resolve:Y(Y(Y(Y({},n.data),e.data),i?.data),n._resolvedData)}:r={params:Y({},n.params),data:Y({},n.data),resolve:Y(Y({},n.data),n._resolvedData??{})},i&&TP(i)&&(r.resolve[Ml]=i.title),r}var tc=class{get title(){return this.data?.[Ml]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=rc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=rc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},im=class extends tm{constructor(e,t){super(t),this.url=e,lC(this,t)}toString(){return MP(this._root)}};function lC(n,e){e.value._routerState=n,e.children.forEach(t=>lC(n,t))}function MP(n){let e=n.children.length>0?` { ${n.children.map(MP).join(", ")} } `:"";return`${n.value}${e}`}function Fw(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ur(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ur(e.params,t.params)||n.paramsSubject.next(t.params),C9(e.url,t.url)||n.urlSubject.next(t.url),Ur(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function nC(n,e){let t=Ur(n.params,e.params)&&x9(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||nC(n.parent,e.parent))}function TP(n){return typeof n.title=="string"||n.title===null}var dC=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ee,this.activateEvents=new He,this.deactivateEvents=new He,this.attachEvents=new He,this.detachEvents=new He,this.parentContexts=H(Al),this.location=H(ao),this.changeDetector=H(uo),this.inputBinder=H(um,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ae(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ae(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ae(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new ae(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new rC(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ct({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Jn]})}}return n})(),rC=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Mi?this.route:e===Al?this.childContexts:this.parent.get(e,t)}},um=new X(""),sP=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Lu([r.queryParams,r.params,r.data]).pipe(dt(([o,s,a],c)=>(a=Y(Y(Y({},o),s),a),c===0?ue(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=lA(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac})}}return n})();function Q9(n,e,t){let r=El(n,e._root,t?t._root:void 0);return new nm(r,e)}function El(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=Y9(n,e,t);return new Bn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>El(n,a)),s}}let r=Z9(e.value),i=e.children.map(o=>El(n,o));return new Bn(r,i)}}function Y9(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return El(n,r,i);return El(n,r)})}function Z9(n){return new Mi(new xt(n.url),new xt(n.params),new xt(n.queryParams),new xt(n.fragment),new xt(n.data),n.outlet,n.component,n)}var Il=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},SP="ngNavigationCancelingError";function om(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Ps(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=AP(!1,Un.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function AP(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[SP]=!0,t.cancellationCode=e,t}function X9(n){return PP(n)&&Ps(n.url)}function PP(n){return!!n&&n[SP]}var J9=(n,e,t,r)=>se(i=>(new iC(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),iC=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Fw(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Ja(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ja(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ja(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Ja(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Xw(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Yw(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Fw(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Fw(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},sm=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},nc=class{constructor(e,t){this.component=e,this.route=t}};function ez(n,e,t){let r=n._root,i=e?e._root:null;return ml(r,i,t,[r.value])}function tz(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function uc(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!xT(n)?n:e.get(n):r}function ml(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ja(e);return n.children.forEach(s=>{nz(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>_l(a,t.getContext(s),i)),i}function nz(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=rz(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new sm(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ml(n,e,a?a.children:null,r,i):ml(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new nc(a.outlet.component,s))}else s&&_l(e,a,i),i.canActivateChecks.push(new sm(r)),o.component?ml(n,null,a?a.children:null,r,i):ml(n,null,t,r,i);return i}function rz(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!As(n.url,e.url);case"pathParamsOrQueryParamsChange":return!As(n.url,e.url)||!Ur(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!nC(n,e)||!Ur(n.queryParams,e.queryParams);case"paramsChange":default:return!nC(n,e)}}function _l(n,e,t){let r=Ja(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?_l(s,e.children.getContext(o),t):_l(s,null,t):_l(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new nc(e.outlet.component,i)):t.canDeactivateChecks.push(new nc(null,i)):t.canDeactivateChecks.push(new nc(null,i))}function Pl(n){return typeof n=="function"}function iz(n){return typeof n=="boolean"}function oz(n){return n&&Pl(n.canLoad)}function sz(n){return n&&Pl(n.canActivate)}function az(n){return n&&Pl(n.canActivateChild)}function cz(n){return n&&Pl(n.canDeactivate)}function uz(n){return n&&Pl(n.canMatch)}function OP(n){return n instanceof ai||n?.name==="EmptyError"}var Gp=Symbol("INITIAL_VALUE");function ac(){return dt(n=>Lu(n.map(e=>e.pipe(ui(1),di(Gp)))).pipe(se(e=>{for(let t of e)if(t!==!0){if(t===Gp)return Gp;if(t===!1||lz(t))return t}return!0}),pt(e=>e!==Gp),ui(1)))}function lz(n){return Ps(n)||n instanceof Il}function dz(n,e){return Pt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ue(ve(Y({},t),{guardsResult:!0})):fz(s,r,i,n).pipe(Pt(a=>a&&iz(a)?hz(r,o,n,e):ue(a)),se(a=>ve(Y({},t),{guardsResult:a})))})}function fz(n,e,t,r){return Me(n).pipe(Pt(i=>vz(i.component,i.route,t,e,r)),Qn(i=>i!==!0,!0))}function hz(n,e,t,r){return Me(e).pipe(ci(i=>Ia(mz(i.route.parent,r),pz(i.route,r),yz(n,i.path,t),gz(n,i.route,t))),Qn(i=>i!==!0,!0))}function pz(n,e){return n!==null&&e&&e(new Zw(n)),ue(!0)}function mz(n,e){return n!==null&&e&&e(new Qw(n)),ue(!0)}function gz(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ue(!0);let i=r.map(o=>lh(()=>{let s=Sl(e)??t,a=uc(o,s),c=sz(a)?a.canActivate(e,n):Xn(s,()=>a(e,n));return vo(c).pipe(Qn())}));return ue(i).pipe(ac())}function yz(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>tz(s)).filter(s=>s!==null).map(s=>lh(()=>{let a=s.guards.map(c=>{let l=Sl(s.node)??t,d=uc(c,l),f=az(d)?d.canActivateChild(r,n):Xn(l,()=>d(r,n));return vo(f).pipe(Qn())});return ue(a).pipe(ac())}));return ue(o).pipe(ac())}function vz(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ue(!0);let s=o.map(a=>{let c=Sl(e)??i,l=uc(a,c),d=cz(l)?l.canDeactivate(n,e,t,r):Xn(c,()=>l(n,e,t,r));return vo(d).pipe(Qn())});return ue(s).pipe(ac())}function _z(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ue(!0);let o=i.map(s=>{let a=uc(s,n),c=oz(a)?a.canLoad(e,t):Xn(n,()=>a(e,t));return vo(c)});return ue(o).pipe(ac(),RP(r))}function RP(n){return Gv(Ot(e=>{if(typeof e!="boolean")throw om(n,e)}),se(e=>e===!0))}function wz(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ue(!0);let o=i.map(s=>{let a=uc(s,n),c=uz(a)?a.canMatch(e,t):Xn(n,()=>a(e,t));return vo(c)});return ue(o).pipe(ac(),RP(r))}var xl=class{constructor(e){this.segmentGroup=e||null}},Dl=class extends Error{constructor(e){super(),this.urlTree=e}};function Xa(n){return Ea(new xl(n))}function Cz(n){return Ea(new ae(4e3,!1))}function bz(n){return Ea(AP(!1,Un.GuardRejected))}var oC=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ue(r);if(i.numberOfChildren>1||!i.children[Ee])return Cz(`${e.redirectTo}`);i=i.children[Ee]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:d,url:f,outlet:p,params:g,data:y,title:b}=i,C=Xn(o,()=>a({params:g,data:y,queryParams:c,fragment:l,routeConfig:d,url:f,outlet:p,title:b}));if(C instanceof Di)throw new Dl(C);t=C}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Dl(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Di(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new qe(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new ae(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},sC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ez(n,e,t,r,i){let o=NP(n,e,t);return o.matched?(r=G9(e,r),wz(r,e,t,i).pipe(se(s=>s===!0?o:Y({},sC)))):ue(o)}function NP(n,e,t){if(e.path==="**")return Iz(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?Y({},sC):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||w9)(t,n,e);if(!i)return Y({},sC);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?Y(Y({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Iz(n){return{matched:!0,parameters:n.length>0?hP(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function aP(n,e,t,r){return t.length>0&&Mz(n,t,r)?{segmentGroup:new qe(e,Dz(r,new qe(t,n.children))),slicedSegments:[]}:t.length===0&&Tz(n,t,r)?{segmentGroup:new qe(n.segments,xz(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new qe(n.segments,n.children),slicedSegments:t}}function xz(n,e,t,r){let i={};for(let o of t)if(lm(n,e,o)&&!r[wr(o)]){let s=new qe([],{});i[wr(o)]=s}return Y(Y({},r),i)}function Dz(n,e){let t={};t[Ee]=e;for(let r of n)if(r.path===""&&wr(r)!==Ee){let i=new qe([],{});t[wr(r)]=i}return t}function Mz(n,e,t){return t.some(r=>lm(n,e,r)&&wr(r)!==Ee)}function Tz(n,e,t){return t.some(r=>lm(n,e,r))}function lm(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Sz(n,e,t){return e.length===0&&!n.children[t]}var aC=class{};function Az(n,e,t,r,i,o,s="emptyOnly"){return new cC(n,e,t,r,i,s,o).recognize()}var Pz=31,cC=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new oC(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ae(4002,`'${e.segmentGroup}'`)}recognize(){let e=aP(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(se(({children:t,rootSnapshot:r})=>{let i=new Bn(r,t),o=new im("",i),s=j9(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new tc([],Object.freeze({}),Object.freeze(Y({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Ee,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Ee,t).pipe(se(r=>({children:r,rootSnapshot:t})),Qi(r=>{if(r instanceof Dl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof xl?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(se(s=>s instanceof Bn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Me(o).pipe(ci(s=>{let a=r.children[s],c=W9(t,s);return this.processSegmentGroup(e,c,a,s,i)}),li((s,a)=>(s.push(...a),s)),Yi(null),r0(),Pt(s=>{if(s===null)return Xa(r);let a=kP(s);return Oz(a),ue(a)}))}processSegment(e,t,r,i,o,s,a){return Me(t).pipe(ci(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(Qi(l=>{if(l instanceof xl)return ue(null);throw l}))),Qn(c=>!!c),Qi(c=>{if(OP(c))return Sz(r,i,o)?ue(new aC):Xa(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return wr(r)!==s&&(s===Ee||!lm(i,o,r))?Xa(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):Xa(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:f,remainingSegments:p}=NP(t,i,o);if(!c)return Xa(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Pz&&(this.allowRedirects=!1));let g=new tc(o,l,Object.freeze(Y({},this.urlTree.queryParams)),this.urlTree.fragment,cP(i),wr(i),i.component??i._loadedComponent??null,i,uP(i)),y=rm(g,a,this.paramsInheritanceStrategy);g.params=Object.freeze(y.params),g.data=Object.freeze(y.data);let b=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,g,e);return this.applyRedirects.lineralizeSegments(i,b).pipe(Pt(C=>this.processSegment(e,r,t,C.concat(p),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=Ez(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(dt(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(dt(({routes:l})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:p,remainingSegments:g}=c,y=new tc(p,f,Object.freeze(Y({},this.urlTree.queryParams)),this.urlTree.fragment,cP(r),wr(r),r.component??r._loadedComponent??null,r,uP(r)),b=rm(y,s,this.paramsInheritanceStrategy);y.params=Object.freeze(b.params),y.data=Object.freeze(b.data);let{segmentGroup:C,slicedSegments:S}=aP(t,p,g,l);if(S.length===0&&C.hasChildren())return this.processChildren(d,l,C,y).pipe(se(P=>new Bn(y,P)));if(l.length===0&&S.length===0)return ue(new Bn(y,[]));let k=wr(r)===o;return this.processSegment(d,l,C,S,k?Ee:o,!0,y).pipe(se(P=>new Bn(y,P instanceof Bn?[P]:[])))}))):Xa(t)))}getChildConfig(e,t,r){return t.children?ue({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ue({routes:t._loadedRoutes,injector:t._loadedInjector}):_z(e,t,r,this.urlSerializer).pipe(Pt(i=>i?this.configLoader.loadChildren(e,t).pipe(Ot(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):bz(t))):ue({routes:[],injector:e})}};function Oz(n){n.sort((e,t)=>e.value.outlet===Ee?-1:t.value.outlet===Ee?1:e.value.outlet.localeCompare(t.value.outlet))}function Rz(n){let e=n.value.routeConfig;return e&&e.path===""}function kP(n){let e=[],t=new Set;for(let r of n){if(!Rz(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=kP(r.children);e.push(new Bn(r.value,i))}return e.filter(r=>!t.has(r))}function cP(n){return n.data||{}}function uP(n){return n.resolve||{}}function Nz(n,e,t,r,i,o){return Pt(s=>Az(n,e,t,r,s.extractedUrl,i,o).pipe(se(({state:a,tree:c})=>ve(Y({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function kz(n,e){return Pt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ue(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of FP(c))s.add(l);let a=0;return Me(s).pipe(ci(c=>o.has(c)?Fz(c,r,n,e):(c.data=rm(c,c.parent,n).resolve,ue(void 0))),Ot(()=>a++),xa(1),Pt(c=>a===s.size?ue(t):vn))})}function FP(n){let e=n.children.map(t=>FP(t)).flat();return[n,...e]}function Fz(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!TP(i)&&(o[Ml]=i.title),Vz(o,n,e,r).pipe(se(s=>(n._resolvedData=s,n.data=rm(n,n.parent,t).resolve,null)))}function Vz(n,e,t,r){let i=jw(n);if(i.length===0)return ue({});let o={};return Me(i).pipe(Pt(s=>Lz(n[s],e,t,r).pipe(Qn(),Ot(a=>{if(a instanceof Il)throw om(new ic,a);o[s]=a}))),xa(1),t0(o),Qi(s=>OP(s)?vn:Ea(s)))}function Lz(n,e,t,r){let i=Sl(e)??r,o=uc(n,i),s=o.resolve?o.resolve(e,t):Xn(i,()=>o(e,t));return vo(s)}function Vw(n){return dt(e=>{let t=n(e);return t?Me(t).pipe(se(()=>e)):ue(e)})}var VP=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Ee);return r}getResolvedTitleForRoute(t){return t.data[Ml]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ee({token:n,factory:()=>H(jz),providedIn:"root"})}}return n})(),jz=(()=>{class n extends VP{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(K(eP))}}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ol=new X("",{providedIn:"root",factory:()=>({})}),Bz=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Nt({type:n,selectors:[["ng-component"]],standalone:!0,features:[Y1],decls:1,vars:0,template:function(r,i){r&1&&oe(0,"router-outlet")},dependencies:[dC],encapsulation:2})}}return n})();function fC(n){let e=n.children&&n.children.map(fC),t=e?ve(Y({},n),{children:e}):Y({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ee&&(t.component=Bz),t}var am=new X(""),hC=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=H(Rp)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ue(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=vo(t.loadComponent()).pipe(se(LP),Ot(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Zi(()=>{this.componentLoaders.delete(t)})),i=new _a(r,()=>new Ke).pipe(va());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ue({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=Uz(r,this.compiler,t,this.onLoadEndListener).pipe(Zi(()=>{this.childrenLoaders.delete(r)})),s=new _a(o,()=>new Ke).pipe(va());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Uz(n,e,t,r){return vo(n.loadChildren()).pipe(se(LP),Pt(i=>i instanceof Gu||Array.isArray(i)?ue(i):Me(e.compileModuleAsync(i))),se(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(am,[],{optional:!0,self:!0}).flat()),{routes:s.map(fC),injector:o}}))}function $z(n){return n&&typeof n=="object"&&"default"in n}function LP(n){return $z(n)?n.default:n}var pC=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ee({token:n,factory:()=>H(zz),providedIn:"root"})}}return n})(),zz=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),jP=new X(""),BP=new X("");function qz(n,e,t){let r=n.get(BP),i=n.get(ln);return n.get(Ne).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),Hz(n))),{onViewTransitionCreated:c}=r;return c&&Xn(n,()=>c({transition:a,from:e,to:t})),s})}function Hz(n){return new Promise(e=>{ew({read:()=>setTimeout(e)},{injector:n})})}var Gz=new X(""),mC=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ke,this.transitionAbortSubject=new Ke,this.configLoader=H(hC),this.environmentInjector=H(bn),this.urlSerializer=H(Tl),this.rootContexts=H(Al),this.location=H(Ya),this.inputBindingEnabled=H(um,{optional:!0})!==null,this.titleStrategy=H(VP),this.options=H(Ol,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=H(pC),this.createViewTransition=H(jP,{optional:!0}),this.navigationErrorHandler=H(Gz,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ue(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Ww(i)),r=i=>this.events.next(new Kw(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(ve(Y(Y({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new xt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:vl,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(pt(o=>o.id!==0),se(o=>ve(Y({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),dt(o=>{let s=!1,a=!1;return ue(o).pipe(dt(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Un.SupersededByNewNavigation),vn;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?ve(Y({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&d!=="reload"){let f="";return this.events.next(new yo(c.id,this.urlSerializer.serialize(c.rawUrl),f,Xp.IgnoredSameUrlNavigation)),c.resolve(!1),vn}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return ue(c).pipe(dt(f=>{let p=this.transitions?.getValue();return this.events.next(new oc(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),p!==this.transitions?.getValue()?vn:Promise.resolve(f)}),Nz(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ot(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=ve(Y({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let p=new Jp(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:p,source:g,restoredState:y,extras:b}=c,C=new oc(f,this.urlSerializer.serialize(p),g,y);this.events.next(C);let S=DP(this.rootComponentType).snapshot;return this.currentTransition=o=ve(Y({},c),{targetSnapshot:S,urlAfterRedirects:p,extras:ve(Y({},b),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=p,ue(o)}else{let f="";return this.events.next(new yo(c.id,this.urlSerializer.serialize(c.extractedUrl),f,Xp.IgnoredByUrlHandlingStrategy)),c.resolve(!1),vn}}),Ot(c=>{let l=new zw(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),se(c=>(this.currentTransition=o=ve(Y({},c),{guards:ez(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),dz(this.environmentInjector,c=>this.events.next(c)),Ot(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw om(this.urlSerializer,c.guardsResult);let l=new qw(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),pt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Un.GuardRejected),!1)),Vw(c=>{if(c.guards.canActivateChecks.length)return ue(c).pipe(Ot(l=>{let d=new Hw(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),dt(l=>{let d=!1;return ue(l).pipe(kz(this.paramsInheritanceStrategy,this.environmentInjector),Ot({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",Un.NoDataFromResolver)}}))}),Ot(l=>{let d=new Gw(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),Vw(c=>{let l=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(Ot(p=>{d.component=p}),se(()=>{})));for(let p of d.children)f.push(...l(p));return f};return Lu(l(c.targetSnapshot.root)).pipe(Yi(null),ui(1))}),Vw(()=>this.afterPreactivation()),dt(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,d=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return d?Me(d).pipe(se(()=>o)):ue(o)}),se(c=>{let l=Q9(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=ve(Y({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Ot(()=>{this.events.next(new bl)}),J9(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),ui(1),Ot({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new $n(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),fi(this.transitionAbortSubject.pipe(Ot(c=>{throw c}))),Zi(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Un.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Qi(c=>{if(a=!0,PP(c))this.events.next(new xi(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),X9(c)?this.events.next(new sc(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Cl(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let d=Xn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(d instanceof Il){let{message:f,cancellationCode:p}=om(this.urlSerializer,d);this.events.next(new xi(o.id,this.urlSerializer.serialize(o.extractedUrl),f,p)),this.events.next(new sc(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(l);let f=t.errorHandler(c);o.resolve(!!f)}}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return vn}))}))}cancelNavigationTransition(t,r,i){let o=new xi(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Wz(n){return n!==vl}var Kz=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ee({token:n,factory:()=>H(Qz),providedIn:"root"})}}return n})(),uC=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Qz=(()=>{class n extends uC{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Cs(n)))(i||n)}})()}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),UP=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ee({token:n,factory:()=>H(Yz),providedIn:"root"})}}return n})(),Yz=(()=>{class n extends UP{constructor(){super(...arguments),this.location=H(Ya),this.urlSerializer=H(Tl),this.options=H(Ol,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=H(pC),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Di,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=DP(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof oc)this.stateMemento=this.createStateMemento();else if(t instanceof yo)this.rawUrlTree=r.initialUrl;else if(t instanceof Jp){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof bl?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof xi&&(t.code===Un.GuardRejected||t.code===Un.NoDataFromResolver)?this.restoreHistory(r):t instanceof Cl?this.restoreHistory(r,!0):t instanceof $n&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Di?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=Y(Y({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=Y(Y({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Cs(n)))(i||n)}})()}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),gl=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(gl||{});function $P(n,e){n.events.pipe(pt(t=>t instanceof $n||t instanceof xi||t instanceof Cl||t instanceof yo),se(t=>t instanceof $n||t instanceof yo?gl.COMPLETE:(t instanceof xi?t.code===Un.Redirect||t.code===Un.SupersededByNewNavigation:!1)?gl.REDIRECTING:gl.FAILED),pt(t=>t!==gl.REDIRECTING),ui(1)).subscribe(()=>{e()})}function Zz(n){throw n}var Xz={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Jz={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ut=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=H(Tp),this.stateManager=H(UP),this.options=H(Ol,{optional:!0})||{},this.pendingTasks=H(_i),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=H(mC),this.urlSerializer=H(Tl),this.location=H(Ya),this.urlHandlingStrategy=H(pC),this._events=new Ke,this.errorHandler=this.options.errorHandler||Zz,this.navigated=!1,this.routeReuseStrategy=H(Kz),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=H(am,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!H(um,{optional:!0}),this.eventsSubscription=new vt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof xi&&r.code!==Un.Redirect&&r.code!==Un.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof $n)this.navigated=!0;else if(r instanceof sc){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=Y({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Wz(i.source)},s);this.scheduleNavigation(a,vl,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}t6(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),vl,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=Y({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(fC),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=Y(Y({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let p=i?i.snapshot:this.routerState.snapshot.root;f=bP(p)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return EP(f,t,d,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Ps(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,vl,null,r)}navigate(t,r={skipLocationChange:!1}){return e6(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=Y({},Xz):r===!1?i=Y({},Jz):i=r,Ps(t))return nP(this.currentUrlTree,t,i);let o=this.parseUrl(t);return nP(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((f,p)=>{a=f,c=p});let d=this.pendingTasks.add();return $P(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function e6(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ae(4008,!1)}function t6(n){return!(n instanceof bl)&&!(n instanceof sc)}var cc=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new Ke,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof $n&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ps(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:US(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Ps(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(re(Ut),re(Mi),N_("tabindex"),re(_r),re(In),re(Ei))}}static{this.\u0275dir=Ct({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&de("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Ep("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Ms],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Ms],replaceUrl:[2,"replaceUrl","replaceUrl",Ms],routerLink:"routerLink"},standalone:!0,features:[J_,Jn]})}}return n})(),zP=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new He,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof $n&&this.update()})}ngAfterContentInit(){ue(this.links.changes,ue(null)).pipe(Pr()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Me(t).pipe(Pr()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=n6(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static{this.\u0275fac=function(r){return new(r||n)(re(Ut),re(In),re(_r),re(uo),re(cc,8))}}static{this.\u0275dir=Ct({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&G1(o,cc,5),r&2){let s;xp(s=Dp())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Jn]})}}return n})();function n6(n){return!!n.paths}var cm=class{};var r6=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(pt(t=>t instanceof $n),ci(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Cp(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Me(i).pipe(Pr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=ue(null);let o=i.pipe(Pt(s=>s===null?ue(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Me([o,s]).pipe(Pr())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(K(Ut),K(Rp),K(bn),K(cm),K(hC))}}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),qP=new X(""),i6=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof oc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof $n?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof yo&&t.code===Xp.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof em&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new em(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){e1()}}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac})}}return n})();function o6(n){return n.routerState.root}function Rl(n,e){return{\u0275kind:n,\u0275providers:e}}function s6(){let n=H(Nn);return e=>{let t=n.get(wi);if(e!==t.components[0])return;let r=n.get(Ut),i=n.get(HP);n.get(gC)===1&&r.initialNavigation(),n.get(GP,null,Te.Optional)?.setUpPreloading(),n.get(qP,null,Te.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var HP=new X("",{factory:()=>new Ke}),gC=new X("",{providedIn:"root",factory:()=>1});function a6(){return Rl(2,[{provide:gC,useValue:0},{provide:Pp,multi:!0,deps:[Nn],useFactory:e=>{let t=e.get(_A,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(Ut),o=e.get(HP);$P(i,()=>{r(!0)}),e.get(mC).afterPreactivation=()=>(r(!0),o.closed?ue(void 0):o),i.initialNavigation()}))}}])}function c6(){return Rl(3,[{provide:Pp,multi:!0,useFactory:()=>{let e=H(Ut);return()=>{e.setUpLocationChangeListener()}}},{provide:gC,useValue:2}])}var GP=new X("");function u6(n){return Rl(0,[{provide:GP,useExisting:r6},{provide:cm,useExisting:n}])}function l6(){return Rl(8,[sP,{provide:um,useExisting:sP}])}function d6(n){let e=[{provide:jP,useValue:qz},{provide:BP,useValue:Y({skipNextTransition:!!n?.skipInitialTransition},n)}];return Rl(9,e)}var lP=new X("ROUTER_FORROOT_GUARD"),f6=[Ya,{provide:Tl,useClass:ic},Ut,Al,{provide:Mi,useFactory:o6,deps:[Ut]},hC,[]],yC=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[f6,[],{provide:am,multi:!0,useValue:t},{provide:lP,useFactory:g6,deps:[[Ut,new za,new g_]]},{provide:Ol,useValue:r||{}},r?.useHash?p6():m6(),h6(),r?.preloadingStrategy?u6(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?y6(r):[],r?.bindToComponentInputs?l6().\u0275providers:[],r?.enableViewTransitions?d6().\u0275providers:[],v6()]}}static forChild(t){return{ngModule:n,providers:[{provide:am,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(K(lP,8))}}static{this.\u0275mod=wt({type:n})}static{this.\u0275inj=_t({})}}return n})();function h6(){return{provide:qP,useFactory:()=>{let n=H(AA),e=H(Ne),t=H(Ol),r=H(mC),i=H(Tl);return t.scrollOffset&&n.setOffset(t.scrollOffset),new i6(i,r,n,e,t)}}}function p6(){return{provide:Ei,useClass:CA}}function m6(){return{provide:Ei,useClass:gw}}function g6(n){return"guarded"}function y6(n){return[n.initialNavigation==="disabled"?c6().\u0275providers:[],n.initialNavigation==="enabledBlocking"?a6().\u0275providers:[]]}var dP=new X("");function v6(){return[{provide:dP,useFactory:s6},{provide:Op,multi:!0,useExisting:dP}]}var _6="firebase",w6="10.12.0";Ki(_6,w6,"app");var kl=new gi("ANGULARFIRE2_VERSION");var C6=(n,e)=>{let t=e?[e]:nM(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Fl=class{constructor(){return C6(b6)}},b6="app-check";function vC(){}var WP=class{zone;delegate;constructor(n,e=Yv){this.zone=n,this.delegate=e}now(){return this.delegate.now()}schedule(n,e,t){let r=this.zone,i=function(o){r.runGuarded(()=>{n.apply(this,[o])})};return this.delegate.schedule(i,e,t)}},E6=class{zone;task=null;constructor(n){this.zone=n}call(n,e){let t=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vC,{},vC,vC)),e.pipe(Ot({next:t,complete:t,error:t})).subscribe(n).add(t)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},fm=class dm{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new WP(Zone.current)),this.insideAngular=t.run(()=>new WP(Zone.current,Vu)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||dm)(K(Ne))};static \u0275prov=ee({token:dm,factory:dm.\u0275fac,providedIn:"root"})};function I6(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function dn(n){return x6(I6())(n)}function x6(n){return function(t){return t=t.lift(new E6(n.ngZone)),t.pipe(pr(n.outsideAngular),Kn(n.insideAngular))}}var T6=new Map,S6={activated:!1,tokenObservers:[]},A6={initialized:!1,enabled:!1};function Cr(n){return T6.get(n)||Object.assign({},S6)}function JP(){return A6}var P6="https://content-firebaseappcheck.googleapis.com/v1";var O6="exchangeDebugToken",QP={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},are=24*60*60*1e3;var wC=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return V(this,null,function*(){this.stop();try{this.pending=new Pv,this.pending.promise.catch(t=>{}),yield R6(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Pv,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function R6(n){return new Promise(e=>{setTimeout(e,n)})}var N6={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},_o=new eM("appCheck","AppCheck",N6);function eO(n){if(!Cr(n).activated)throw _o.create("use-before-activation",{appName:n.name})}function tO(r,i){return V(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let g=yield s.getHeartbeatsHeader();g&&(o["X-Firebase-Client"]=g)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(g){throw _o.create("fetch-network-error",{originalErrorMessage:g?.message})}if(c.status!==200)throw _o.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(g){throw _o.create("fetch-parse-error",{originalErrorMessage:g?.message})}let d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw _o.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let f=Number(d[1])*1e3,p=Date.now();return{token:l.token,expireTimeMillis:p+f,issuedAtTimeMillis:p}})}function nO(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${P6}/projects/${t}/apps/${r}:${O6}?key=${i}`,body:{debug_token:e}}}var k6="firebase-app-check-database",F6=1,CC="firebase-app-check-store";var hm=null;function V6(){return hm||(hm=new Promise((n,e)=>{try{let t=indexedDB.open(k6,F6);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(_o.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(CC,{keyPath:"compositeKey"})}}}catch(t){e(_o.create("storage-open",{originalErrorMessage:t?.message}))}}),hm)}function L6(n,e){return j6(B6(n),e)}function j6(n,e){return V(this,null,function*(){let r=(yield V6()).transaction(CC,"readwrite"),o=r.objectStore(CC).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(_o.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function B6(n){return`${n.options.appId}-${n.name}`}var bC=new Nf("@firebase/app-check");function _C(n,e){return Rf()?L6(n,e).catch(t=>{bC.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function rO(){return JP().enabled}function iO(){return V(this,null,function*(){let n=JP();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var U6={error:"UNKNOWN_ERROR"};function $6(n){return ZD.encodeString(JSON.stringify(n),!1)}function EC(n,e=!1){return V(this,null,function*(){let t=n.app;eO(t);let r=Cr(t),i=r.token,o;if(i&&!Vl(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(Vl(c)?i=c:yield _C(t,void 0))}if(!e&&i&&Vl(i))return{token:i.token};let s=!1;if(rO()){r.exchangeTokenPromise||(r.exchangeTokenPromise=tO(nO(t,yield iO()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield _C(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield Cr(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?bC.warn(c.message):bC.error(c),o=c}let a;return i?o?Vl(i)?a={token:i.token,internalError:o}:a=ZP(o):(a={token:i.token},r.token=i,yield _C(t,i)):a=ZP(o),s&&G6(t,a),a})}function z6(n){return V(this,null,function*(){let e=n.app;eO(e);let{provider:t}=Cr(e);if(rO()){let r=yield iO(),{token:i}=yield tO(nO(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function q6(n,e,t,r){let{app:i}=n,o=Cr(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Vl(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),YP(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>YP(n))}function oO(n,e){let t=Cr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function YP(n){let{app:e}=n,t=Cr(e),r=t.tokenRefresher;r||(r=H6(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function H6(n){let{app:e}=n;return new wC(()=>V(this,null,function*(){let t=Cr(e),r;if(t.token?r=yield EC(n,!0):r=yield EC(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Cr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},QP.RETRIAL_MIN_WAIT,QP.RETRIAL_MAX_WAIT)}function G6(n,e){let t=Cr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Vl(n){return n.expireTimeMillis-Date.now()>0}function ZP(n){return{token:$6(U6),error:n}}var IC=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Cr(this.app);for(let t of e)oO(this.app,t.next);return Promise.resolve()}};function W6(n,e){return new IC(n,e)}function K6(n){return{getToken:e=>EC(n,e),getLimitedUseToken:()=>z6(n),addTokenListener:e=>q6(n,"INTERNAL",e),removeTokenListener:e=>oO(n.app,e)}}var Q6="@firebase/app-check",Y6="0.8.4";var Z6="app-check",XP="app-check-internal";function X6(){Pu(new rs(Z6,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return W6(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(XP).initialize()})),Pu(new rs(XP,n=>{let e=n.getProvider("app-check").getImmediate();return K6(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ki(Q6,Y6)}X6();var e8=["localhost","0.0.0.0","127.0.0.1"],yre=typeof window<"u"&&e8.includes(window.location.hostname);var t8="firebase",n8="10.12.0";Sn.registerVersion(t8,n8,"app-compat");var r8=["ngOnDestroy"],cO=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(r8.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(d=>{let f=d?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,f),f})})})});var uO=class{constructor(n){return n}},lc=new X("angularfire2.app.options"),dc=new X("angularfire2.app.name");function Ll(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=Sn.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Sn.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;i8("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new uO(s)}var i8=(n,...e)=>{Np()&&typeof console<"u"&&console[n](...e)},o8={provide:uO,useFactory:Ll,deps:[lc,Ne,[new za,dc]]},lO=class pm{static initializeApp(t,r){return{ngModule:pm,providers:[{provide:lc,useValue:t},{provide:dc,useValue:r}]}}constructor(t){Sn.registerVersion("angularfire",kl.full,"core"),Sn.registerVersion("angularfire",kl.full,"app-compat"),Sn.registerVersion("angular",J1.full,t.toString())}static \u0275fac=function(r){return new(r||pm)(K(un))};static \u0275mod=wt({type:pm});static \u0275inj=_t({providers:[o8]})};function mm(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return s8(i,s)||(aO("error",`${e} was already initialized on the ${t} Firebase App with different settings.${a8?" You may need to reload as Firebase is not HMR aware.":""}`),aO("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function s8(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var a8=typeof module<"u"&&!!module.hot,aO=(n,...e)=>{Np()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var xC=new X("angularfire2.auth.use-emulator"),DC=new X("angularfire2.auth.settings"),MC=new X("angularfire2.auth.tenant-id"),TC=new X("angularfire2.auth.langugage-code"),SC=new X("angularfire2.auth.use-device-language"),AC=new X("angularfire.auth.persistence"),PC=(n,e,t,r,i,o,s,a)=>mm(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[l,d]of Object.entries(s))c.settings[l]=d;return a&&c.setPersistence(a),c},[t,r,i,o,s,a]),dO=class gm{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,c,l,d,f,p,g){let y=new Ke,b=ue(void 0).pipe(Kn(s.outsideAngular),dt(()=>o.runOutsideAngular(()=>import("./chunk-CPIZ2WB2.js"))),se(()=>Ll(t,o,r)),se(C=>PC(C,o,a,l,d,f,c,p)),fh({bufferSize:1,refCount:!1}));if(ho(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ue(null);else{b.pipe(Qn()).subscribe();let C=b.pipe(dt(P=>P.getRedirectResult().then(B=>B,()=>null)),dn,fh({bufferSize:1,refCount:!1})),S=b.pipe(dt(P=>new Ie(B=>({unsubscribe:o.runOutsideAngular(()=>P.onAuthStateChanged(q=>B.next(q),q=>B.error(q),()=>B.complete()))})))),k=b.pipe(dt(P=>new Ie(B=>({unsubscribe:o.runOutsideAngular(()=>P.onIdTokenChanged(q=>B.next(q),q=>B.error(q),()=>B.complete()))}))));this.authState=C.pipe(hh(S),pr(s.outsideAngular),Kn(s.insideAngular)),this.user=C.pipe(hh(k),pr(s.outsideAngular),Kn(s.insideAngular)),this.idToken=this.user.pipe(dt(P=>P?Me(P.getIdToken()):ue(null))),this.idTokenResult=this.user.pipe(dt(P=>P?Me(P.getIdTokenResult()):ue(null))),this.credential=e0(C,y,this.authState.pipe(pt(P=>!P))).pipe(se(P=>P?.user?P:null),pr(s.outsideAngular),Kn(s.insideAngular))}return cO(this,b,o,{spy:{apply:(C,S,k)=>{(C.startsWith("signIn")||C.startsWith("createUser"))&&k.then(P=>y.next(P))}}})}static \u0275fac=function(r){return new(r||gm)(K(lc),K(dc,8),K(un),K(Ne),K(fm),K(xC,8),K(DC,8),K(MC,8),K(TC,8),K(SC,8),K(AC,8),K(Fl,8))};static \u0275prov=ee({token:gm,factory:gm.\u0275fac,providedIn:"any"})};var fO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},hO={};var wo,OC;(function(){var n;function e(I,_){function w(){}w.prototype=_.prototype,I.D=_.prototype,I.prototype=new w,I.prototype.constructor=I,I.C=function(D,x,A){for(var E=Array(arguments.length-2),R=2;R<arguments.length;R++)E[R-2]=arguments[R];return _.prototype[x].apply(D,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,_,w){w||(w=0);var D=Array(16);if(typeof _=="string")for(var x=0;16>x;++x)D[x]=_.charCodeAt(w++)|_.charCodeAt(w++)<<8|_.charCodeAt(w++)<<16|_.charCodeAt(w++)<<24;else for(x=0;16>x;++x)D[x]=_[w++]|_[w++]<<8|_[w++]<<16|_[w++]<<24;_=I.g[0],w=I.g[1],x=I.g[2];var A=I.g[3],E=_+(A^w&(x^A))+D[0]+3614090360&4294967295;_=w+(E<<7&4294967295|E>>>25),E=A+(x^_&(w^x))+D[1]+3905402710&4294967295,A=_+(E<<12&4294967295|E>>>20),E=x+(w^A&(_^w))+D[2]+606105819&4294967295,x=A+(E<<17&4294967295|E>>>15),E=w+(_^x&(A^_))+D[3]+3250441966&4294967295,w=x+(E<<22&4294967295|E>>>10),E=_+(A^w&(x^A))+D[4]+4118548399&4294967295,_=w+(E<<7&4294967295|E>>>25),E=A+(x^_&(w^x))+D[5]+1200080426&4294967295,A=_+(E<<12&4294967295|E>>>20),E=x+(w^A&(_^w))+D[6]+2821735955&4294967295,x=A+(E<<17&4294967295|E>>>15),E=w+(_^x&(A^_))+D[7]+4249261313&4294967295,w=x+(E<<22&4294967295|E>>>10),E=_+(A^w&(x^A))+D[8]+1770035416&4294967295,_=w+(E<<7&4294967295|E>>>25),E=A+(x^_&(w^x))+D[9]+2336552879&4294967295,A=_+(E<<12&4294967295|E>>>20),E=x+(w^A&(_^w))+D[10]+4294925233&4294967295,x=A+(E<<17&4294967295|E>>>15),E=w+(_^x&(A^_))+D[11]+2304563134&4294967295,w=x+(E<<22&4294967295|E>>>10),E=_+(A^w&(x^A))+D[12]+1804603682&4294967295,_=w+(E<<7&4294967295|E>>>25),E=A+(x^_&(w^x))+D[13]+4254626195&4294967295,A=_+(E<<12&4294967295|E>>>20),E=x+(w^A&(_^w))+D[14]+2792965006&4294967295,x=A+(E<<17&4294967295|E>>>15),E=w+(_^x&(A^_))+D[15]+1236535329&4294967295,w=x+(E<<22&4294967295|E>>>10),E=_+(x^A&(w^x))+D[1]+4129170786&4294967295,_=w+(E<<5&4294967295|E>>>27),E=A+(w^x&(_^w))+D[6]+3225465664&4294967295,A=_+(E<<9&4294967295|E>>>23),E=x+(_^w&(A^_))+D[11]+643717713&4294967295,x=A+(E<<14&4294967295|E>>>18),E=w+(A^_&(x^A))+D[0]+3921069994&4294967295,w=x+(E<<20&4294967295|E>>>12),E=_+(x^A&(w^x))+D[5]+3593408605&4294967295,_=w+(E<<5&4294967295|E>>>27),E=A+(w^x&(_^w))+D[10]+38016083&4294967295,A=_+(E<<9&4294967295|E>>>23),E=x+(_^w&(A^_))+D[15]+3634488961&4294967295,x=A+(E<<14&4294967295|E>>>18),E=w+(A^_&(x^A))+D[4]+3889429448&4294967295,w=x+(E<<20&4294967295|E>>>12),E=_+(x^A&(w^x))+D[9]+568446438&4294967295,_=w+(E<<5&4294967295|E>>>27),E=A+(w^x&(_^w))+D[14]+3275163606&4294967295,A=_+(E<<9&4294967295|E>>>23),E=x+(_^w&(A^_))+D[3]+4107603335&4294967295,x=A+(E<<14&4294967295|E>>>18),E=w+(A^_&(x^A))+D[8]+1163531501&4294967295,w=x+(E<<20&4294967295|E>>>12),E=_+(x^A&(w^x))+D[13]+2850285829&4294967295,_=w+(E<<5&4294967295|E>>>27),E=A+(w^x&(_^w))+D[2]+4243563512&4294967295,A=_+(E<<9&4294967295|E>>>23),E=x+(_^w&(A^_))+D[7]+1735328473&4294967295,x=A+(E<<14&4294967295|E>>>18),E=w+(A^_&(x^A))+D[12]+2368359562&4294967295,w=x+(E<<20&4294967295|E>>>12),E=_+(w^x^A)+D[5]+4294588738&4294967295,_=w+(E<<4&4294967295|E>>>28),E=A+(_^w^x)+D[8]+2272392833&4294967295,A=_+(E<<11&4294967295|E>>>21),E=x+(A^_^w)+D[11]+1839030562&4294967295,x=A+(E<<16&4294967295|E>>>16),E=w+(x^A^_)+D[14]+4259657740&4294967295,w=x+(E<<23&4294967295|E>>>9),E=_+(w^x^A)+D[1]+2763975236&4294967295,_=w+(E<<4&4294967295|E>>>28),E=A+(_^w^x)+D[4]+1272893353&4294967295,A=_+(E<<11&4294967295|E>>>21),E=x+(A^_^w)+D[7]+4139469664&4294967295,x=A+(E<<16&4294967295|E>>>16),E=w+(x^A^_)+D[10]+3200236656&4294967295,w=x+(E<<23&4294967295|E>>>9),E=_+(w^x^A)+D[13]+681279174&4294967295,_=w+(E<<4&4294967295|E>>>28),E=A+(_^w^x)+D[0]+3936430074&4294967295,A=_+(E<<11&4294967295|E>>>21),E=x+(A^_^w)+D[3]+3572445317&4294967295,x=A+(E<<16&4294967295|E>>>16),E=w+(x^A^_)+D[6]+76029189&4294967295,w=x+(E<<23&4294967295|E>>>9),E=_+(w^x^A)+D[9]+3654602809&4294967295,_=w+(E<<4&4294967295|E>>>28),E=A+(_^w^x)+D[12]+3873151461&4294967295,A=_+(E<<11&4294967295|E>>>21),E=x+(A^_^w)+D[15]+530742520&4294967295,x=A+(E<<16&4294967295|E>>>16),E=w+(x^A^_)+D[2]+3299628645&4294967295,w=x+(E<<23&4294967295|E>>>9),E=_+(x^(w|~A))+D[0]+4096336452&4294967295,_=w+(E<<6&4294967295|E>>>26),E=A+(w^(_|~x))+D[7]+1126891415&4294967295,A=_+(E<<10&4294967295|E>>>22),E=x+(_^(A|~w))+D[14]+2878612391&4294967295,x=A+(E<<15&4294967295|E>>>17),E=w+(A^(x|~_))+D[5]+4237533241&4294967295,w=x+(E<<21&4294967295|E>>>11),E=_+(x^(w|~A))+D[12]+1700485571&4294967295,_=w+(E<<6&4294967295|E>>>26),E=A+(w^(_|~x))+D[3]+2399980690&4294967295,A=_+(E<<10&4294967295|E>>>22),E=x+(_^(A|~w))+D[10]+4293915773&4294967295,x=A+(E<<15&4294967295|E>>>17),E=w+(A^(x|~_))+D[1]+2240044497&4294967295,w=x+(E<<21&4294967295|E>>>11),E=_+(x^(w|~A))+D[8]+1873313359&4294967295,_=w+(E<<6&4294967295|E>>>26),E=A+(w^(_|~x))+D[15]+4264355552&4294967295,A=_+(E<<10&4294967295|E>>>22),E=x+(_^(A|~w))+D[6]+2734768916&4294967295,x=A+(E<<15&4294967295|E>>>17),E=w+(A^(x|~_))+D[13]+1309151649&4294967295,w=x+(E<<21&4294967295|E>>>11),E=_+(x^(w|~A))+D[4]+4149444226&4294967295,_=w+(E<<6&4294967295|E>>>26),E=A+(w^(_|~x))+D[11]+3174756917&4294967295,A=_+(E<<10&4294967295|E>>>22),E=x+(_^(A|~w))+D[2]+718787259&4294967295,x=A+(E<<15&4294967295|E>>>17),E=w+(A^(x|~_))+D[9]+3951481745&4294967295,I.g[0]=I.g[0]+_&4294967295,I.g[1]=I.g[1]+(x+(E<<21&4294967295|E>>>11))&4294967295,I.g[2]=I.g[2]+x&4294967295,I.g[3]=I.g[3]+A&4294967295}r.prototype.u=function(I,_){_===void 0&&(_=I.length);for(var w=_-this.blockSize,D=this.B,x=this.h,A=0;A<_;){if(x==0)for(;A<=w;)i(this,I,A),A+=this.blockSize;if(typeof I=="string"){for(;A<_;)if(D[x++]=I.charCodeAt(A++),x==this.blockSize){i(this,D),x=0;break}}else for(;A<_;)if(D[x++]=I[A++],x==this.blockSize){i(this,D),x=0;break}}this.h=x,this.o+=_},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var _=1;_<I.length-8;++_)I[_]=0;var w=8*this.o;for(_=I.length-8;_<I.length;++_)I[_]=w&255,w/=256;for(this.u(I),I=Array(16),_=w=0;4>_;++_)for(var D=0;32>D;D+=8)I[w++]=this.g[_]>>>D&255;return I};function o(I,_){var w=a;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=_(I)}function s(I,_){this.h=_;for(var w=[],D=!0,x=I.length-1;0<=x;x--){var A=I[x]|0;D&&A==_||(w[x]=A,D=!1)}this.g=w}var a={};function c(I){return-128<=I&&128>I?o(I,function(_){return new s([_|0],0>_?-1:0)}):new s([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return C(l(-I));for(var _=[],w=1,D=0;I>=w;D++)_[D]=I/w|0,w*=4294967296;return new s(_,0)}function d(I,_){if(I.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(I.charAt(0)=="-")return C(d(I.substring(1),_));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(_,8)),D=f,x=0;x<I.length;x+=8){var A=Math.min(8,I.length-x),E=parseInt(I.substring(x,x+A),_);8>A?(A=l(Math.pow(_,A)),D=D.j(A).add(l(E))):(D=D.j(w),D=D.add(l(E)))}return D}var f=c(0),p=c(1),g=c(16777216);n=s.prototype,n.m=function(){if(b(this))return-C(this).m();for(var I=0,_=1,w=0;w<this.g.length;w++){var D=this.i(w);I+=(0<=D?D:4294967296+D)*_,_*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(y(this))return"0";if(b(this))return"-"+C(this).toString(I);for(var _=l(Math.pow(I,6)),w=this,D="";;){var x=B(w,_).g;w=S(w,x.j(_));var A=((0<w.g.length?w.g[0]:w.h)>>>0).toString(I);if(w=x,y(w))return A+D;for(;6>A.length;)A="0"+A;D=A+D}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function y(I){if(I.h!=0)return!1;for(var _=0;_<I.g.length;_++)if(I.g[_]!=0)return!1;return!0}function b(I){return I.h==-1}n.l=function(I){return I=S(this,I),b(I)?-1:y(I)?0:1};function C(I){for(var _=I.g.length,w=[],D=0;D<_;D++)w[D]=~I.g[D];return new s(w,~I.h).add(p)}n.abs=function(){return b(this)?C(this):this},n.add=function(I){for(var _=Math.max(this.g.length,I.g.length),w=[],D=0,x=0;x<=_;x++){var A=D+(this.i(x)&65535)+(I.i(x)&65535),E=(A>>>16)+(this.i(x)>>>16)+(I.i(x)>>>16);D=E>>>16,A&=65535,E&=65535,w[x]=E<<16|A}return new s(w,w[w.length-1]&-2147483648?-1:0)};function S(I,_){return I.add(C(_))}n.j=function(I){if(y(this)||y(I))return f;if(b(this))return b(I)?C(this).j(C(I)):C(C(this).j(I));if(b(I))return C(this.j(C(I)));if(0>this.l(g)&&0>I.l(g))return l(this.m()*I.m());for(var _=this.g.length+I.g.length,w=[],D=0;D<2*_;D++)w[D]=0;for(D=0;D<this.g.length;D++)for(var x=0;x<I.g.length;x++){var A=this.i(D)>>>16,E=this.i(D)&65535,R=I.i(x)>>>16,N=I.i(x)&65535;w[2*D+2*x]+=E*N,k(w,2*D+2*x),w[2*D+2*x+1]+=A*N,k(w,2*D+2*x+1),w[2*D+2*x+1]+=E*R,k(w,2*D+2*x+1),w[2*D+2*x+2]+=A*R,k(w,2*D+2*x+2)}for(D=0;D<_;D++)w[D]=w[2*D+1]<<16|w[2*D];for(D=_;D<2*_;D++)w[D]=0;return new s(w,0)};function k(I,_){for(;(I[_]&65535)!=I[_];)I[_+1]+=I[_]>>>16,I[_]&=65535,_++}function P(I,_){this.g=I,this.h=_}function B(I,_){if(y(_))throw Error("division by zero");if(y(I))return new P(f,f);if(b(I))return _=B(C(I),_),new P(C(_.g),C(_.h));if(b(_))return _=B(I,C(_)),new P(C(_.g),_.h);if(30<I.g.length){if(b(I)||b(_))throw Error("slowDivide_ only works with positive integers.");for(var w=p,D=_;0>=D.l(I);)w=q(w),D=q(D);var x=z(w,1),A=z(D,1);for(D=z(D,2),w=z(w,2);!y(D);){var E=A.add(D);0>=E.l(I)&&(x=x.add(w),A=E),D=z(D,1),w=z(w,1)}return _=S(I,x.j(_)),new P(x,_)}for(x=f;0<=I.l(_);){for(w=Math.max(1,Math.floor(I.m()/_.m())),D=Math.ceil(Math.log(w)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),A=l(w),E=A.j(_);b(E)||0<E.l(I);)w-=D,A=l(w),E=A.j(_);y(A)&&(A=p),x=x.add(A),I=S(I,E)}return new P(x,I)}n.A=function(I){return B(this,I).h},n.and=function(I){for(var _=Math.max(this.g.length,I.g.length),w=[],D=0;D<_;D++)w[D]=this.i(D)&I.i(D);return new s(w,this.h&I.h)},n.or=function(I){for(var _=Math.max(this.g.length,I.g.length),w=[],D=0;D<_;D++)w[D]=this.i(D)|I.i(D);return new s(w,this.h|I.h)},n.xor=function(I){for(var _=Math.max(this.g.length,I.g.length),w=[],D=0;D<_;D++)w[D]=this.i(D)^I.i(D);return new s(w,this.h^I.h)};function q(I){for(var _=I.g.length+1,w=[],D=0;D<_;D++)w[D]=I.i(D)<<1|I.i(D-1)>>>31;return new s(w,I.h)}function z(I,_){var w=_>>5;_%=32;for(var D=I.g.length-w,x=[],A=0;A<D;A++)x[A]=0<_?I.i(A+w)>>>_|I.i(A+w+1)<<32-_:I.i(A+w);return new s(x,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,OC=hO.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=d,wo=hO.Integer=s}).apply(typeof fO<"u"?fO:typeof self<"u"?self:typeof window<"u"?window:{});var ym=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ti={};var RC,NC,fc,kC,jl,vm,FC,VC,LC;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,h,m){return u==Array.prototype||u==Object.prototype||(u[h]=m.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ym=="object"&&ym];for(var h=0;h<u.length;++h){var m=u[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=t(this);function i(u,h){if(h)e:{var m=r;u=u.split(".");for(var v=0;v<u.length-1;v++){var O=u[v];if(!(O in m))break e;m=m[O]}u=u[u.length-1],v=m[u],h=h(v),h!=v&&h!=null&&e(m,u,{configurable:!0,writable:!0,value:h})}}function o(u,h){u instanceof String&&(u+="");var m=0,v=!1,O={next:function(){if(!v&&m<u.length){var L=m++;return{value:h(L,u[L]),done:!1}}return v=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}i("Array.prototype.values",function(u){return u||function(){return o(this,function(h,m){return m})}});var s=s||{},a=this||self;function c(u){var h=typeof u;return h=h!="object"?h:u?Array.isArray(u)?"array":h:"null",h=="array"||h=="object"&&typeof u.length=="number"}function l(u){var h=typeof u;return h=="object"&&u!=null||h=="function"}function d(u,h,m){return u.call.apply(u.bind,arguments)}function f(u,h,m){if(!u)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,v),u.apply(h,O)}}return function(){return u.apply(h,arguments)}}function p(u,h,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,p.apply(null,arguments)}function g(u,h){var m=Array.prototype.slice.call(arguments,1);return function(){var v=m.slice();return v.push.apply(v,arguments),u.apply(this,v)}}function y(u,h){function m(){}m.prototype=h.prototype,u.aa=h.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(v,O,L){for(var Z=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)Z[Ye-2]=arguments[Ye];return h.prototype[O].apply(v,Z)}}function b(u){let h=u.length;if(0<h){let m=Array(h);for(let v=0;v<h;v++)m[v]=u[v];return m}return[]}function C(u,h){for(let m=1;m<arguments.length;m++){let v=arguments[m];if(c(v)){let O=u.length||0,L=v.length||0;u.length=O+L;for(let Z=0;Z<L;Z++)u[O+Z]=v[Z]}else u.push(v)}}class S{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function k(u){return/^[\s\xa0]*$/.test(u)}function P(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function B(u){return B[" "](u),u}B[" "]=function(){};var q=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function z(u,h,m){for(let v in u)h.call(m,u[v],v,u)}function I(u,h){for(let m in u)h.call(void 0,u[m],m,u)}function _(u){let h={};for(let m in u)h[m]=u[m];return h}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(u,h){let m,v;for(let O=1;O<arguments.length;O++){v=arguments[O];for(m in v)u[m]=v[m];for(let L=0;L<w.length;L++)m=w[L],Object.prototype.hasOwnProperty.call(v,m)&&(u[m]=v[m])}}function x(u){var h=1;u=u.split(":");let m=[];for(;0<h&&u.length;)m.push(u.shift()),h--;return u.length&&m.push(u.join(":")),m}function A(u){a.setTimeout(()=>{throw u},0)}function E(){var u=he;let h=null;return u.g&&(h=u.g,u.g=u.g.next,u.g||(u.h=null),h.next=null),h}class R{constructor(){this.h=this.g=null}add(h,m){let v=N.get();v.set(h,m),this.h?this.h.next=v:this.g=v,this.h=v}}var N=new S(()=>new $,u=>u.reset());class ${constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let J,ce=!1,he=new R,ge=()=>{let u=a.Promise.resolve(void 0);J=()=>{u.then(Ae)}};var Ae=()=>{for(var u;u=E();){try{u.h.call(u.g)}catch(m){A(m)}var h=N;h.j(u),100>h.h&&(h.h++,u.next=h.g,h.g=u)}ce=!1};function Pe(){this.s=this.s,this.C=this.C}Pe.prototype.s=!1,Pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},Pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Oe(u,h){this.type=u,this.g=this.target=h,this.defaultPrevented=!1}Oe.prototype.h=function(){this.defaultPrevented=!0};var ut=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,h=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let m=()=>{};a.addEventListener("test",m,h),a.removeEventListener("test",m,h)}catch{}return u}();function lt(u,h){if(Oe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,v=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=h,h=u.relatedTarget){if(q){e:{try{B(h.nodeName);var O=!0;break e}catch{}O=!1}O||(h=null)}}else m=="mouseover"?h=u.fromElement:m=="mouseout"&&(h=u.toElement);this.relatedTarget=h,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:lr[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&lt.aa.h.call(this)}}y(lt,Oe);var lr={2:"touch",3:"pen",4:"mouse"};lt.prototype.h=function(){lt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Zt="closure_listenable_"+(1e6*Math.random()|0),dr=0;function mu(u,h,m,v,O){this.listener=u,this.proxy=null,this.src=h,this.type=m,this.capture=!!v,this.ha=O,this.key=++dr,this.da=this.fa=!1}function mf(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function gf(u){this.src=u,this.g={},this.h=0}gf.prototype.add=function(u,h,m,v,O){var L=u.toString();u=this.g[L],u||(u=this.g[L]=[],this.h++);var Z=av(u,h,v,O);return-1<Z?(h=u[Z],m||(h.fa=!1)):(h=new mu(h,this.src,L,!!v,O),h.fa=m,u.push(h)),h};function sv(u,h){var m=h.type;if(m in u.g){var v=u.g[m],O=Array.prototype.indexOf.call(v,h,void 0),L;(L=0<=O)&&Array.prototype.splice.call(v,O,1),L&&(mf(h),u.g[m].length==0&&(delete u.g[m],u.h--))}}function av(u,h,m,v){for(var O=0;O<u.length;++O){var L=u[O];if(!L.da&&L.listener==h&&L.capture==!!m&&L.ha==v)return O}return-1}var cv="closure_lm_"+(1e6*Math.random()|0),uv={};function Wx(u,h,m,v,O){if(v&&v.once)return Qx(u,h,m,v,O);if(Array.isArray(h)){for(var L=0;L<h.length;L++)Wx(u,h[L],m,v,O);return null}return m=hv(m),u&&u[Zt]?u.K(h,m,l(v)?!!v.capture:!!v,O):Kx(u,h,m,!1,v,O)}function Kx(u,h,m,v,O,L){if(!h)throw Error("Invalid event type");var Z=l(O)?!!O.capture:!!O,Ye=dv(u);if(Ye||(u[cv]=Ye=new gf(u)),m=Ye.add(h,m,v,Z,L),m.proxy)return m;if(v=yL(),m.proxy=v,v.src=u,v.listener=m,u.addEventListener)ut||(O=Z),O===void 0&&(O=!1),u.addEventListener(h.toString(),v,O);else if(u.attachEvent)u.attachEvent(Zx(h.toString()),v);else if(u.addListener&&u.removeListener)u.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return m}function yL(){function u(m){return h.call(u.src,u.listener,m)}let h=vL;return u}function Qx(u,h,m,v,O){if(Array.isArray(h)){for(var L=0;L<h.length;L++)Qx(u,h[L],m,v,O);return null}return m=hv(m),u&&u[Zt]?u.L(h,m,l(v)?!!v.capture:!!v,O):Kx(u,h,m,!0,v,O)}function Yx(u,h,m,v,O){if(Array.isArray(h))for(var L=0;L<h.length;L++)Yx(u,h[L],m,v,O);else v=l(v)?!!v.capture:!!v,m=hv(m),u&&u[Zt]?(u=u.i,h=String(h).toString(),h in u.g&&(L=u.g[h],m=av(L,m,v,O),-1<m&&(mf(L[m]),Array.prototype.splice.call(L,m,1),L.length==0&&(delete u.g[h],u.h--)))):u&&(u=dv(u))&&(h=u.g[h.toString()],u=-1,h&&(u=av(h,m,v,O)),(m=-1<u?h[u]:null)&&lv(m))}function lv(u){if(typeof u!="number"&&u&&!u.da){var h=u.src;if(h&&h[Zt])sv(h.i,u);else{var m=u.type,v=u.proxy;h.removeEventListener?h.removeEventListener(m,v,u.capture):h.detachEvent?h.detachEvent(Zx(m),v):h.addListener&&h.removeListener&&h.removeListener(v),(m=dv(h))?(sv(m,u),m.h==0&&(m.src=null,h[cv]=null)):mf(u)}}}function Zx(u){return u in uv?uv[u]:uv[u]="on"+u}function vL(u,h){if(u.da)u=!0;else{h=new lt(h,this);var m=u.listener,v=u.ha||u.src;u.fa&&lv(u),u=m.call(v,h)}return u}function dv(u){return u=u[cv],u instanceof gf?u:null}var fv="__closure_events_fn_"+(1e9*Math.random()>>>0);function hv(u){return typeof u=="function"?u:(u[fv]||(u[fv]=function(h){return u.handleEvent(h)}),u[fv])}function rn(){Pe.call(this),this.i=new gf(this),this.M=this,this.F=null}y(rn,Pe),rn.prototype[Zt]=!0,rn.prototype.removeEventListener=function(u,h,m,v){Yx(this,u,h,m,v)};function mn(u,h){var m,v=u.F;if(v)for(m=[];v;v=v.F)m.push(v);if(u=u.M,v=h.type||h,typeof h=="string")h=new Oe(h,u);else if(h instanceof Oe)h.target=h.target||u;else{var O=h;h=new Oe(v,u),D(h,O)}if(O=!0,m)for(var L=m.length-1;0<=L;L--){var Z=h.g=m[L];O=yf(Z,v,!0,h)&&O}if(Z=h.g=u,O=yf(Z,v,!0,h)&&O,O=yf(Z,v,!1,h)&&O,m)for(L=0;L<m.length;L++)Z=h.g=m[L],O=yf(Z,v,!1,h)&&O}rn.prototype.N=function(){if(rn.aa.N.call(this),this.i){var u=this.i,h;for(h in u.g){for(var m=u.g[h],v=0;v<m.length;v++)mf(m[v]);delete u.g[h],u.h--}}this.F=null},rn.prototype.K=function(u,h,m,v){return this.i.add(String(u),h,!1,m,v)},rn.prototype.L=function(u,h,m,v){return this.i.add(String(u),h,!0,m,v)};function yf(u,h,m,v){if(h=u.i.g[String(h)],!h)return!0;h=h.concat();for(var O=!0,L=0;L<h.length;++L){var Z=h[L];if(Z&&!Z.da&&Z.capture==m){var Ye=Z.listener,Xt=Z.ha||Z.src;Z.fa&&sv(u.i,Z),O=Ye.call(Xt,v)!==!1&&O}}return O&&!v.defaultPrevented}function Xx(u,h,m){if(typeof u=="function")m&&(u=p(u,m));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(u,h||0)}function Jx(u){u.g=Xx(()=>{u.g=null,u.i&&(u.i=!1,Jx(u))},u.l);let h=u.h;u.h=null,u.m.apply(null,h)}class _L extends Pe{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Jx(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gu(u){Pe.call(this),this.h=u,this.g={}}y(gu,Pe);var eD=[];function tD(u){z(u.g,function(h,m){this.g.hasOwnProperty(m)&&lv(h)},u),u.g={}}gu.prototype.N=function(){gu.aa.N.call(this),tD(this)},gu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pv=a.JSON.stringify,wL=a.JSON.parse,CL=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function mv(){}mv.prototype.h=null;function nD(u){return u.h||(u.h=u.i())}function rD(){}var yu={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gv(){Oe.call(this,"d")}y(gv,Oe);function yv(){Oe.call(this,"c")}y(yv,Oe);var Jo={},iD=null;function vf(){return iD=iD||new rn}Jo.La="serverreachability";function oD(u){Oe.call(this,Jo.La,u)}y(oD,Oe);function vu(u){let h=vf();mn(h,new oD(h))}Jo.STAT_EVENT="statevent";function sD(u,h){Oe.call(this,Jo.STAT_EVENT,u),this.stat=h}y(sD,Oe);function gn(u){let h=vf();mn(h,new sD(h,u))}Jo.Ma="timingevent";function aD(u,h){Oe.call(this,Jo.Ma,u),this.size=h}y(aD,Oe);function _u(u,h){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},h)}function wu(){this.g=!0}wu.prototype.xa=function(){this.g=!1};function bL(u,h,m,v,O,L){u.info(function(){if(u.g)if(L)for(var Z="",Ye=L.split("&"),Xt=0;Xt<Ye.length;Xt++){var $e=Ye[Xt].split("=");if(1<$e.length){var on=$e[0];$e=$e[1];var sn=on.split("_");Z=2<=sn.length&&sn[1]=="type"?Z+(on+"="+$e+"&"):Z+(on+"=redacted&")}}else Z=null;else Z=L;return"XMLHTTP REQ ("+v+") [attempt "+O+"]: "+h+`
`+m+`
`+Z})}function EL(u,h,m,v,O,L,Z){u.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+O+"]: "+h+`
`+m+`
`+L+" "+Z})}function la(u,h,m,v){u.info(function(){return"XMLHTTP TEXT ("+h+"): "+xL(u,m)+(v?" "+v:"")})}function IL(u,h){u.info(function(){return"TIMEOUT: "+h})}wu.prototype.info=function(){};function xL(u,h){if(!u.g)return h;if(!h)return null;try{var m=JSON.parse(h);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var v=m[u];if(!(2>v.length)){var O=v[1];if(Array.isArray(O)&&!(1>O.length)){var L=O[0];if(L!="noop"&&L!="stop"&&L!="close")for(var Z=1;Z<O.length;Z++)O[Z]=""}}}}return pv(m)}catch{return h}}var _f={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},cD={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vv;function wf(){}y(wf,mv),wf.prototype.g=function(){return new XMLHttpRequest},wf.prototype.i=function(){return{}},vv=new wf;function Hi(u,h,m,v){this.j=u,this.i=h,this.l=m,this.R=v||1,this.U=new gu(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new uD}function uD(){this.i=null,this.g="",this.h=!1}var lD={},_v={};function wv(u,h,m){u.L=1,u.v=If(ri(h)),u.m=m,u.P=!0,dD(u,null)}function dD(u,h){u.F=Date.now(),Cf(u),u.A=ri(u.v);var m=u.A,v=u.R;Array.isArray(v)||(v=[String(v)]),xD(m.i,"t",v),u.C=0,m=u.j.J,u.h=new uD,u.g=zD(u.j,m?h:null,!u.m),0<u.O&&(u.M=new _L(p(u.Y,u,u.g),u.O)),h=u.U,m=u.g,v=u.ca;var O="readystatechange";Array.isArray(O)||(O&&(eD[0]=O.toString()),O=eD);for(var L=0;L<O.length;L++){var Z=Wx(m,O[L],v||h.handleEvent,!1,h.h||h);if(!Z)break;h.g[Z.key]=Z}h=u.H?_(u.H):{},u.m?(u.u||(u.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,h)):(u.u="GET",u.g.ea(u.A,u.u,null,h)),vu(),bL(u.i,u.u,u.A,u.l,u.R,u.m)}Hi.prototype.ca=function(u){u=u.target;let h=this.M;h&&ii(u)==3?h.j():this.Y(u)},Hi.prototype.Y=function(u){try{if(u==this.g)e:{let sn=ii(this.g);var h=this.g.Ba();let ha=this.g.Z();if(!(3>sn)&&(sn!=3||this.g&&(this.h.h||this.g.oa()||OD(this.g)))){this.J||sn!=4||h==7||(h==8||0>=ha?vu(3):vu(2)),Cv(this);var m=this.g.Z();this.X=m;t:if(fD(this)){var v=OD(this.g);u="";var O=v.length,L=ii(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){es(this),Cu(this);var Z="";break t}this.h.i=new a.TextDecoder}for(h=0;h<O;h++)this.h.h=!0,u+=this.h.i.decode(v[h],{stream:!(L&&h==O-1)});v.length=0,this.h.g+=u,this.C=0,Z=this.h.g}else Z=this.g.oa();if(this.o=m==200,EL(this.i,this.u,this.A,this.l,this.R,sn,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ye,Xt=this.g;if((Ye=Xt.g?Xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(Ye)){var $e=Ye;break t}}$e=null}if(m=$e)la(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bv(this,m);else{this.o=!1,this.s=3,gn(12),es(this),Cu(this);break e}}if(this.P){m=!0;let fr;for(;!this.J&&this.C<Z.length;)if(fr=DL(this,Z),fr==_v){sn==4&&(this.s=4,gn(14),m=!1),la(this.i,this.l,null,"[Incomplete Response]");break}else if(fr==lD){this.s=4,gn(15),la(this.i,this.l,Z,"[Invalid Chunk]"),m=!1;break}else la(this.i,this.l,fr,null),bv(this,fr);if(fD(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),sn!=4||Z.length!=0||this.h.h||(this.s=1,gn(16),m=!1),this.o=this.o&&m,!m)la(this.i,this.l,Z,"[Invalid Chunked Response]"),es(this),Cu(this);else if(0<Z.length&&!this.W){this.W=!0;var on=this.j;on.g==this&&on.ba&&!on.M&&(on.j.info("Great, no buffering proxy detected. Bytes received: "+Z.length),Tv(on),on.M=!0,gn(11))}}else la(this.i,this.l,Z,null),bv(this,Z);sn==4&&es(this),this.o&&!this.J&&(sn==4?jD(this.j,this):(this.o=!1,Cf(this)))}else zL(this.g),m==400&&0<Z.indexOf("Unknown SID")?(this.s=3,gn(12)):(this.s=0,gn(13)),es(this),Cu(this)}}}catch{}finally{}};function fD(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function DL(u,h){var m=u.C,v=h.indexOf(`
`,m);return v==-1?_v:(m=Number(h.substring(m,v)),isNaN(m)?lD:(v+=1,v+m>h.length?_v:(h=h.slice(v,v+m),u.C=v+m,h)))}Hi.prototype.cancel=function(){this.J=!0,es(this)};function Cf(u){u.S=Date.now()+u.I,hD(u,u.I)}function hD(u,h){if(u.B!=null)throw Error("WatchDog timer not null");u.B=_u(p(u.ba,u),h)}function Cv(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Hi.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(IL(this.i,this.A),this.L!=2&&(vu(),gn(17)),es(this),this.s=2,Cu(this)):hD(this,this.S-u)};function Cu(u){u.j.G==0||u.J||jD(u.j,u)}function es(u){Cv(u);var h=u.M;h&&typeof h.ma=="function"&&h.ma(),u.M=null,tD(u.U),u.g&&(h=u.g,u.g=null,h.abort(),h.ma())}function bv(u,h){try{var m=u.j;if(m.G!=0&&(m.g==u||Ev(m.h,u))){if(!u.K&&Ev(m.h,u)&&m.G==3){try{var v=m.Da.g.parse(h)}catch{v=null}if(Array.isArray(v)&&v.length==3){var O=v;if(O[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)Sf(m),Mf(m);else break e;Mv(m),gn(18)}}else m.za=O[1],0<m.za-m.T&&37500>O[2]&&m.F&&m.v==0&&!m.C&&(m.C=_u(p(m.Za,m),6e3));if(1>=gD(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else ns(m,11)}else if((u.K||m.g==u)&&Sf(m),!k(h))for(O=m.Da.g.parse(h),h=0;h<O.length;h++){let $e=O[h];if(m.T=$e[0],$e=$e[1],m.G==2)if($e[0]=="c"){m.K=$e[1],m.ia=$e[2];let on=$e[3];on!=null&&(m.la=on,m.j.info("VER="+m.la));let sn=$e[4];sn!=null&&(m.Aa=sn,m.j.info("SVER="+m.Aa));let ha=$e[5];ha!=null&&typeof ha=="number"&&0<ha&&(v=1.5*ha,m.L=v,m.j.info("backChannelRequestTimeoutMs_="+v)),v=m;let fr=u.g;if(fr){let Pf=fr.g?fr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pf){var L=v.h;L.g||Pf.indexOf("spdy")==-1&&Pf.indexOf("quic")==-1&&Pf.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Iv(L,L.h),L.h=null))}if(v.D){let Sv=fr.g?fr.g.getResponseHeader("X-HTTP-Session-Id"):null;Sv&&(v.ya=Sv,rt(v.I,v.D,Sv))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),v=m;var Z=u;if(v.qa=$D(v,v.J?v.ia:null,v.W),Z.K){yD(v.h,Z);var Ye=Z,Xt=v.L;Xt&&(Ye.I=Xt),Ye.B&&(Cv(Ye),Cf(Ye)),v.g=Z}else VD(v);0<m.i.length&&Tf(m)}else $e[0]!="stop"&&$e[0]!="close"||ns(m,7);else m.G==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?ns(m,7):Dv(m):$e[0]!="noop"&&m.l&&m.l.ta($e),m.v=0)}}vu(4)}catch{}}var ML=class{constructor(u,h){this.g=u,this.map=h}};function pD(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mD(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function gD(u){return u.h?1:u.g?u.g.size:0}function Ev(u,h){return u.h?u.h==h:u.g?u.g.has(h):!1}function Iv(u,h){u.g?u.g.add(h):u.h=h}function yD(u,h){u.h&&u.h==h?u.h=null:u.g&&u.g.has(h)&&u.g.delete(h)}pD.prototype.cancel=function(){if(this.i=vD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function vD(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let h=u.i;for(let m of u.g.values())h=h.concat(m.D);return h}return b(u.i)}function TL(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var h=[],m=u.length,v=0;v<m;v++)h.push(u[v]);return h}h=[],m=0;for(v in u)h[m++]=u[v];return h}function SL(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var h=[];u=u.length;for(var m=0;m<u;m++)h.push(m);return h}h=[],m=0;for(let v in u)h[m++]=v;return h}}}function _D(u,h){if(u.forEach&&typeof u.forEach=="function")u.forEach(h,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,h,void 0);else for(var m=SL(u),v=TL(u),O=v.length,L=0;L<O;L++)h.call(void 0,v[L],m&&m[L],u)}var wD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function AL(u,h){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var v=u[m].indexOf("="),O=null;if(0<=v){var L=u[m].substring(0,v);O=u[m].substring(v+1)}else L=u[m];h(L,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function ts(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ts){this.h=u.h,bf(this,u.j),this.o=u.o,this.g=u.g,Ef(this,u.s),this.l=u.l;var h=u.i,m=new Iu;m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),CD(this,m),this.m=u.m}else u&&(h=String(u).match(wD))?(this.h=!1,bf(this,h[1]||"",!0),this.o=bu(h[2]||""),this.g=bu(h[3]||"",!0),Ef(this,h[4]),this.l=bu(h[5]||"",!0),CD(this,h[6]||"",!0),this.m=bu(h[7]||"")):(this.h=!1,this.i=new Iu(null,this.h))}ts.prototype.toString=function(){var u=[],h=this.j;h&&u.push(Eu(h,bD,!0),":");var m=this.g;return(m||h=="file")&&(u.push("//"),(h=this.o)&&u.push(Eu(h,bD,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(Eu(m,m.charAt(0)=="/"?RL:OL,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",Eu(m,kL)),u.join("")};function ri(u){return new ts(u)}function bf(u,h,m){u.j=m?bu(h,!0):h,u.j&&(u.j=u.j.replace(/:$/,""))}function Ef(u,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);u.s=h}else u.s=null}function CD(u,h,m){h instanceof Iu?(u.i=h,FL(u.i,u.h)):(m||(h=Eu(h,NL)),u.i=new Iu(h,u.h))}function rt(u,h,m){u.i.set(h,m)}function If(u){return rt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function bu(u,h){return u?h?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Eu(u,h,m){return typeof u=="string"?(u=encodeURI(u).replace(h,PL),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function PL(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var bD=/[#\/\?@]/g,OL=/[#\?:]/g,RL=/[#\?]/g,NL=/[#\?@]/g,kL=/#/g;function Iu(u,h){this.h=this.g=null,this.i=u||null,this.j=!!h}function Gi(u){u.g||(u.g=new Map,u.h=0,u.i&&AL(u.i,function(h,m){u.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}n=Iu.prototype,n.add=function(u,h){Gi(this),this.i=null,u=da(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(h),this.h+=1,this};function ED(u,h){Gi(u),h=da(u,h),u.g.has(h)&&(u.i=null,u.h-=u.g.get(h).length,u.g.delete(h))}function ID(u,h){return Gi(u),h=da(u,h),u.g.has(h)}n.forEach=function(u,h){Gi(this),this.g.forEach(function(m,v){m.forEach(function(O){u.call(h,O,v,this)},this)},this)},n.na=function(){Gi(this);let u=Array.from(this.g.values()),h=Array.from(this.g.keys()),m=[];for(let v=0;v<h.length;v++){let O=u[v];for(let L=0;L<O.length;L++)m.push(h[v])}return m},n.V=function(u){Gi(this);let h=[];if(typeof u=="string")ID(this,u)&&(h=h.concat(this.g.get(da(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)h=h.concat(u[m])}return h},n.set=function(u,h){return Gi(this),this.i=null,u=da(this,u),ID(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[h]),this.h+=1,this},n.get=function(u,h){return u?(u=this.V(u),0<u.length?String(u[0]):h):h};function xD(u,h,m){ED(u,h),0<m.length&&(u.i=null,u.g.set(da(u,h),b(m)),u.h+=m.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],h=Array.from(this.g.keys());for(var m=0;m<h.length;m++){var v=h[m];let L=encodeURIComponent(String(v)),Z=this.V(v);for(v=0;v<Z.length;v++){var O=L;Z[v]!==""&&(O+="="+encodeURIComponent(String(Z[v]))),u.push(O)}}return this.i=u.join("&")};function da(u,h){return h=String(h),u.j&&(h=h.toLowerCase()),h}function FL(u,h){h&&!u.j&&(Gi(u),u.i=null,u.g.forEach(function(m,v){var O=v.toLowerCase();v!=O&&(ED(this,v),xD(this,O,m))},u)),u.j=h}function VL(u,h){let m=new wu;if(a.Image){let v=new Image;v.onload=g(Wi,m,"TestLoadImage: loaded",!0,h,v),v.onerror=g(Wi,m,"TestLoadImage: error",!1,h,v),v.onabort=g(Wi,m,"TestLoadImage: abort",!1,h,v),v.ontimeout=g(Wi,m,"TestLoadImage: timeout",!1,h,v),a.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=u}else h(!1)}function LL(u,h){let m=new wu,v=new AbortController,O=setTimeout(()=>{v.abort(),Wi(m,"TestPingServer: timeout",!1,h)},1e4);fetch(u,{signal:v.signal}).then(L=>{clearTimeout(O),L.ok?Wi(m,"TestPingServer: ok",!0,h):Wi(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(O),Wi(m,"TestPingServer: error",!1,h)})}function Wi(u,h,m,v,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),v(m)}catch{}}function jL(){this.g=new CL}function BL(u,h,m){let v=m||"";try{_D(u,function(O,L){let Z=O;l(O)&&(Z=pv(O)),h.push(v+L+"="+encodeURIComponent(Z))})}catch(O){throw h.push(v+"type="+encodeURIComponent("_badmap")),O}}function xu(u){this.l=u.Ub||null,this.j=u.eb||!1}y(xu,mv),xu.prototype.g=function(){return new xf(this.l,this.j)},xu.prototype.i=function(u){return function(){return u}}({});function xf(u,h){rn.call(this),this.D=u,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(xf,rn),n=xf.prototype,n.open=function(u,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=h,this.readyState=1,Mu(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(h.body=u),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Du(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Mu(this)),this.g&&(this.readyState=3,Mu(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;DD(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function DD(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var h=u.value?u.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!u.done}))&&(this.response=this.responseText+=h)}u.done?Du(this):Mu(this),this.readyState==3&&DD(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Du(this))},n.Qa=function(u){this.g&&(this.response=u,Du(this))},n.ga=function(){this.g&&Du(this)};function Du(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Mu(u)}n.setRequestHeader=function(u,h){this.u.append(u,h)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=h.next();return u.join(`\r
`)};function Mu(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(xf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function MD(u){let h="";return z(u,function(m,v){h+=v,h+=":",h+=m,h+=`\r
`}),h}function xv(u,h,m){e:{for(v in m){var v=!1;break e}v=!0}v||(m=MD(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):rt(u,h,m))}function yt(u){rn.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(yt,rn);var UL=/^https?$/i,$L=["POST","PUT"];n=yt.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,h,m,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);h=h?h.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vv.g(),this.v=this.o?nD(this.o):nD(vv),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(h,String(u),!0),this.B=!1}catch(L){TD(this,L);return}if(u=m||"",m=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var O in v)m.set(O,v[O]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(let L of v.keys())m.set(L,v.get(L));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(m.keys()).find(L=>L.toLowerCase()=="content-type"),O=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call($L,h,void 0))||v||O||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[L,Z]of m)this.g.setRequestHeader(L,Z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{PD(this),this.u=!0,this.g.send(u),this.u=!1}catch(L){TD(this,L)}};function TD(u,h){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=h,u.m=5,SD(u),Df(u)}function SD(u){u.A||(u.A=!0,mn(u,"complete"),mn(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,mn(this,"complete"),mn(this,"abort"),Df(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Df(this,!0)),yt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?AD(this):this.bb())},n.bb=function(){AD(this)};function AD(u){if(u.h&&typeof s<"u"&&(!u.v[1]||ii(u)!=4||u.Z()!=2)){if(u.u&&ii(u)==4)Xx(u.Ea,0,u);else if(mn(u,"readystatechange"),ii(u)==4){u.h=!1;try{let Z=u.Z();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var v;if(v=Z===0){var O=String(u.D).match(wD)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),v=!UL.test(O?O.toLowerCase():"")}m=v}if(m)mn(u,"complete"),mn(u,"success");else{u.m=6;try{var L=2<ii(u)?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.Z()+"]",SD(u)}}finally{Df(u)}}}}function Df(u,h){if(u.g){PD(u);let m=u.g,v=u.v[0]?()=>{}:null;u.g=null,u.v=null,h||mn(u,"ready");try{m.onreadystatechange=v}catch{}}}function PD(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function ii(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<ii(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var h=this.g.responseText;return u&&h.indexOf(u)==0&&(h=h.substring(u.length)),wL(h)}};function OD(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function zL(u){let h={};u=(u.g&&2<=ii(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<u.length;v++){if(k(u[v]))continue;var m=x(u[v]);let O=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();let L=h[O]||[];h[O]=L,L.push(m)}I(h,function(v){return v.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Tu(u,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||h}function RD(u){this.Aa=0,this.i=[],this.j=new wu,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Tu("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Tu("baseRetryDelayMs",5e3,u),this.cb=Tu("retryDelaySeedMs",1e4,u),this.Wa=Tu("forwardChannelMaxRetries",2,u),this.wa=Tu("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new pD(u&&u.concurrentRequestLimit),this.Da=new jL,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=RD.prototype,n.la=8,n.G=1,n.connect=function(u,h,m,v){gn(0),this.W=u,this.H=h||{},m&&v!==void 0&&(this.H.OSID=m,this.H.OAID=v),this.F=this.X,this.I=$D(this,null,this.W),Tf(this)};function Dv(u){if(ND(u),u.G==3){var h=u.U++,m=ri(u.I);if(rt(m,"SID",u.K),rt(m,"RID",h),rt(m,"TYPE","terminate"),Su(u,m),h=new Hi(u,u.j,h),h.L=2,h.v=If(ri(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=h.v,m=!0),m||(h.g=zD(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Cf(h)}UD(u)}function Mf(u){u.g&&(Tv(u),u.g.cancel(),u.g=null)}function ND(u){Mf(u),u.u&&(a.clearTimeout(u.u),u.u=null),Sf(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Tf(u){if(!mD(u.h)&&!u.s){u.s=!0;var h=u.Ga;J||ge(),ce||(J(),ce=!0),he.add(h,u),u.B=0}}function qL(u,h){return gD(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=h.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=_u(p(u.Ga,u,h),BD(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let O=new Hi(this,this.j,u),L=this.o;if(this.S&&(L?(L=_(L),D(L,this.S)):L=this.S),this.m!==null||this.O||(O.H=L,L=null),this.P)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var v=this.i[m];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(h+=v,4096<h){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=FD(this,O,h),m=ri(this.I),rt(m,"RID",u),rt(m,"CVER",22),this.D&&rt(m,"X-HTTP-Session-Id",this.D),Su(this,m),L&&(this.O?h="headers="+encodeURIComponent(String(MD(L)))+"&"+h:this.m&&xv(m,this.m,L)),Iv(this.h,O),this.Ua&&rt(m,"TYPE","init"),this.P?(rt(m,"$req",h),rt(m,"SID","null"),O.T=!0,wv(O,m,null)):wv(O,m,h),this.G=2}}else this.G==3&&(u?kD(this,u):this.i.length==0||mD(this.h)||kD(this))};function kD(u,h){var m;h?m=h.l:m=u.U++;let v=ri(u.I);rt(v,"SID",u.K),rt(v,"RID",m),rt(v,"AID",u.T),Su(u,v),u.m&&u.o&&xv(v,u.m,u.o),m=new Hi(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),h&&(u.i=h.D.concat(u.i)),h=FD(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Iv(u.h,m),wv(m,v,h)}function Su(u,h){u.H&&z(u.H,function(m,v){rt(h,v,m)}),u.l&&_D({},function(m,v){rt(h,v,m)})}function FD(u,h,m){m=Math.min(u.i.length,m);var v=u.l?p(u.l.Na,u.l,u):null;e:{var O=u.i;let L=-1;for(;;){let Z=["count="+m];L==-1?0<m?(L=O[0].g,Z.push("ofs="+L)):L=0:Z.push("ofs="+L);let Ye=!0;for(let Xt=0;Xt<m;Xt++){let $e=O[Xt].g,on=O[Xt].map;if($e-=L,0>$e)L=Math.max(0,O[Xt].g-100),Ye=!1;else try{BL(on,Z,"req"+$e+"_")}catch{v&&v(on)}}if(Ye){v=Z.join("&");break e}}}return u=u.i.splice(0,m),h.D=u,v}function VD(u){if(!u.g&&!u.u){u.Y=1;var h=u.Fa;J||ge(),ce||(J(),ce=!0),he.add(h,u),u.v=0}}function Mv(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=_u(p(u.Fa,u),BD(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,LD(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=_u(p(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gn(10),Mf(this),LD(this))};function Tv(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function LD(u){u.g=new Hi(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var h=ri(u.qa);rt(h,"RID","rpc"),rt(h,"SID",u.K),rt(h,"AID",u.T),rt(h,"CI",u.F?"0":"1"),!u.F&&u.ja&&rt(h,"TO",u.ja),rt(h,"TYPE","xmlhttp"),Su(u,h),u.m&&u.o&&xv(h,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=If(ri(h)),m.m=null,m.P=!0,dD(m,u)}n.Za=function(){this.C!=null&&(this.C=null,Mf(this),Mv(this),gn(19))};function Sf(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function jD(u,h){var m=null;if(u.g==h){Sf(u),Tv(u),u.g=null;var v=2}else if(Ev(u.h,h))m=h.D,yD(u.h,h),v=1;else return;if(u.G!=0){if(h.o)if(v==1){m=h.m?h.m.length:0,h=Date.now()-h.F;var O=u.B;v=vf(),mn(v,new aD(v,m)),Tf(u)}else VD(u);else if(O=h.s,O==3||O==0&&0<h.X||!(v==1&&qL(u,h)||v==2&&Mv(u)))switch(m&&0<m.length&&(h=u.h,h.i=h.i.concat(m)),O){case 1:ns(u,5);break;case 4:ns(u,10);break;case 3:ns(u,6);break;default:ns(u,2)}}}function BD(u,h){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*h}function ns(u,h){if(u.j.info("Error code "+h),h==2){var m=p(u.fb,u),v=u.Xa;let O=!v;v=new ts(v||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||bf(v,"https"),If(v),O?VL(v.toString(),m):LL(v.toString(),m)}else gn(2);u.G=0,u.l&&u.l.sa(h),UD(u),ND(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),gn(2)):(this.j.info("Failed to ping google.com"),gn(1))};function UD(u){if(u.G=0,u.ka=[],u.l){let h=vD(u.h);(h.length!=0||u.i.length!=0)&&(C(u.ka,h),C(u.ka,u.i),u.h.i.length=0,b(u.i),u.i.length=0),u.l.ra()}}function $D(u,h,m){var v=m instanceof ts?ri(m):new ts(m);if(v.g!="")h&&(v.g=h+"."+v.g),Ef(v,v.s);else{var O=a.location;v=O.protocol,h=h?h+"."+O.hostname:O.hostname,O=+O.port;var L=new ts(null);v&&bf(L,v),h&&(L.g=h),O&&Ef(L,O),m&&(L.l=m),v=L}return m=u.D,h=u.ya,m&&h&&rt(v,m,h),rt(v,"VER",u.la),Su(u,v),v}function zD(u,h,m){if(h&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=u.Ca&&!u.pa?new yt(new xu({eb:m})):new yt(u.pa),h.Ha(u.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function qD(){}n=qD.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Af(){}Af.prototype.g=function(u,h){return new Vn(u,h)};function Vn(u,h){rn.call(this),this.g=new RD(h),this.l=u,this.h=h&&h.messageUrlParams||null,u=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(u?u["X-WebChannel-Content-Type"]=h.messageContentType:u={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(u?u["X-WebChannel-Client-Profile"]=h.va:u={"X-WebChannel-Client-Profile":h.va}),this.g.S=u,(u=h&&h.Sb)&&!k(u)&&(this.g.m=u),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!k(h)&&(this.g.D=h,u=this.h,u!==null&&h in u&&(u=this.h,h in u&&delete u[h])),this.j=new fa(this)}y(Vn,rn),Vn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vn.prototype.close=function(){Dv(this.g)},Vn.prototype.o=function(u){var h=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=pv(u),u=m);h.i.push(new ML(h.Ya++,u)),h.G==3&&Tf(h)},Vn.prototype.N=function(){this.g.l=null,delete this.j,Dv(this.g),delete this.g,Vn.aa.N.call(this)};function HD(u){gv.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var h=u.__sm__;if(h){e:{for(let m in h){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,h=h!==null&&u in h?h[u]:void 0),this.data=h}else this.data=u}y(HD,gv);function GD(){yv.call(this),this.status=1}y(GD,yv);function fa(u){this.g=u}y(fa,qD),fa.prototype.ua=function(){mn(this.g,"a")},fa.prototype.ta=function(u){mn(this.g,new HD(u))},fa.prototype.sa=function(u){mn(this.g,new GD)},fa.prototype.ra=function(){mn(this.g,"b")},Af.prototype.createWebChannel=Af.prototype.g,Vn.prototype.send=Vn.prototype.o,Vn.prototype.open=Vn.prototype.m,Vn.prototype.close=Vn.prototype.close,LC=Ti.createWebChannelTransport=function(){return new Af},VC=Ti.getStatEventTarget=function(){return vf()},FC=Ti.Event=Jo,vm=Ti.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_f.NO_ERROR=0,_f.TIMEOUT=8,_f.HTTP_ERROR=6,jl=Ti.ErrorCode=_f,cD.COMPLETE="complete",kC=Ti.EventType=cD,rD.EventType=yu,yu.OPEN="a",yu.CLOSE="b",yu.ERROR="c",yu.MESSAGE="d",rn.prototype.listen=rn.prototype.K,fc=Ti.WebChannel=rD,NC=Ti.FetchXmlHttpFactory=xu,yt.prototype.listenOnce=yt.prototype.L,yt.prototype.getLastError=yt.prototype.Ka,yt.prototype.getLastErrorCode=yt.prototype.Ba,yt.prototype.getStatus=yt.prototype.Z,yt.prototype.getResponseJson=yt.prototype.Oa,yt.prototype.getResponseText=yt.prototype.oa,yt.prototype.send=yt.prototype.ea,yt.prototype.setWithCredentials=yt.prototype.Ha,RC=Ti.XhrIo=yt}).apply(typeof ym<"u"?ym:typeof self<"u"?self:typeof window<"u"?window:{});var pO="@firebase/firestore";var Vt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Vt.UNAUTHENTICATED=new Vt(null),Vt.GOOGLE_CREDENTIALS=new Vt("google-credentials-uid"),Vt.FIRST_PARTY=new Vt("first-party-uid"),Vt.MOCK_USER=new Vt("mock-user");var zc="10.12.0";var Mo=new Nf("@firebase/firestore");function yc(){return Mo.logLevel}function pR(n){Mo.setLogLevel(n)}function W(n,...e){if(Mo.logLevel<=Sr.DEBUG){let t=e.map(UE);Mo.debug(`Firestore (${zc}): ${n}`,...t)}}function Tt(n,...e){if(Mo.logLevel<=Sr.ERROR){let t=e.map(UE);Mo.error(`Firestore (${zc}): ${n}`,...t)}}function sr(n,...e){if(Mo.logLevel<=Sr.WARN){let t=e.map(UE);Mo.warn(`Firestore (${zc}): ${n}`,...t)}}function UE(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ie(n="Unexpected state"){let e=`FIRESTORE (${zc}) INTERNAL ASSERTION FAILED: `+n;throw Tt(e),new Error(e)}function le(n,e){n||ie()}function mR(n,e){n||ie()}function ne(n,e){return n}var j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},G=class extends JD{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Lt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Sm=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},zC=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Vt.UNAUTHENTICATED))}shutdown(){}},qC=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},HC=class{constructor(e){this.t=e,this.currentUser=Vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new Lt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Lt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>V(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Lt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(le(typeof r.accessToken=="string"),new Sm(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return le(e===null||typeof e=="string"),new Vt(e)}},GC=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Vt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},WC=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new GC(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},KC=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},QC=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let r=o=>{o.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,W("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(le(typeof t.token=="string"),this.R=t.token,new KC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function u8(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Am=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=u8(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function we(n,e){return n<e?-1:n>e?1:0}function Dc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function gR(n){return n+"\0"}var gt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new G(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new G(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new G(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?we(this.nanoseconds,e.nanoseconds):we(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var fe=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new gt(0,0))}static max(){return new n(new gt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Pm=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ie(),r===void 0?r=e.length-t:r>e.length-t&&ie(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Be=class n extends Pm{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new G(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},l8=/^[_a-zA-Z][_a-zA-Z0-9]*$/,St=class n extends Pm{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return l8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new G(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new G(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new G(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new G(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var te=class n{constructor(e){this.path=e}static fromPath(e){return new n(Be.fromString(e))}static fromName(e){return new n(Be.fromString(e).popFirst(5))}static empty(){return new n(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Be.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Be(e.slice()))}};var Mc=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function YC(n){return n.fields.find(e=>e.kind===2)}function Rs(n){return n.fields.filter(e=>e.kind!==2)}Mc.UNKNOWN_ID=-1;var Ec=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var Zl=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,ar.min())}};function yR(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=fe.fromTimestamp(r===1e9?new gt(t+1,0):new gt(t,r));return new ar(i,te.empty(),e)}function vR(n){return new ar(n.readTime,n.key,-1)}var ar=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(fe.min(),te.empty(),-1)}static max(){return new n(fe.max(),te.empty(),-1)}};function $E(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=te.comparator(n.documentKey,e.documentKey),t!==0?t:we(n.largestBatchId,e.largestBatchId))}var _R="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Om=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Vo(n){return V(this,null,function*(){if(n.code!==j.FAILED_PRECONDITION||n.message!==_R)throw n;W("LocalStore","Unexpectedly lost primary lease")})}var F=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(d=>{s[l]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var Rm=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Lt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new js(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=zE(r.target.error);this.V.reject(new js(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new js(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(W("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new XC(t)}},To=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(Au())===12.2&&Tt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return W("SimpleDb","Removing database:",e),Ns(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Rf())return!1;if(n.C())return!0;let e=Au(),t=n.S(e),r=0<t&&t<10,i=wR(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return V(this,null,function*(){return this.db||(W("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new js(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new G(j.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new G(j.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new js(e,s))},i.onupgradeneeded=o=>{W("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{W("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return V(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=Rm.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),F.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(W("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function wR(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var ZC=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ns(this.B.delete())}},js=class extends G{constructor(e,t){super(j.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Lo(n){return n.name==="IndexedDbTransactionError"}var XC=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(W("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(W("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ns(r)}add(e){return W("SimpleDb","ADD",this.store.name,e,e),Ns(this.store.add(e))}get(e){return Ns(this.store.get(e)).next(t=>(t===void 0&&(t=null),W("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return W("SimpleDb","DELETE",this.store.name,e),Ns(this.store.delete(e))}count(){return W("SimpleDb","COUNT",this.store.name),Ns(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new F((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new F((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){W("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new F((r,i)=>{t.onerror=o=>{let s=zE(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new F((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new ZC(a),l=t(a.primaryKey,a.value,c);if(l instanceof F){let d=l.catch(f=>(c.done(),F.reject(f)));r.push(d)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>F.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Ns(n){return new F((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=zE(r.target.error);t(i)}})}var mO=!1;function zE(n){let e=To.S(Au());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new G("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return mO||(mO=!0,setTimeout(()=>{throw r},0)),r}}return n}var JC=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){W("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>V(this,null,function*(){this.task=null;try{W("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){Lo(t)?W("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield Vo(t)}yield this.X(6e4)}))}},eb=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return V(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return F.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return W("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(W("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=vR(o);$E(s,r)>0&&(r=s)}),new ar(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var zn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function _d(n){return n==null}function Xl(n){return n===0&&1/n==-1/0}function CR(n){return typeof n=="number"&&Number.isInteger(n)&&!Xl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function xn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=gO(e)),e=d8(n.get(t),e);return gO(e)}function d8(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function gO(n){return n+""}function $r(n){let e=n.length;if(le(e>=2),e===2)return le(n.charAt(0)===""&&n.charAt(1)===""),Be.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&ie(),n.charAt(s+1)){case"":let a=n.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:ie()}o=s+2}return new Be(r)}var yO=["userId","batchId"];function Em(n,e){return[n,xn(e)]}function bR(n,e,t){return[n,xn(e),t]}var f8={},h8=["prefixPath","collectionGroup","readTime","documentId"],p8=["prefixPath","collectionGroup","documentId"],m8=["collectionGroup","readTime","prefixPath","documentId"],g8=["canonicalId","targetId"],y8=["targetId","path"],v8=["path","targetId"],_8=["collectionId","parent"],w8=["indexId","uid"],C8=["uid","sequenceNumber"],b8=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],E8=["indexId","uid","orderedDocumentKey"],I8=["userId","collectionPath","documentId"],x8=["userId","collectionPath","largestBatchId"],D8=["userId","collectionGroup","largestBatchId"],ER=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],M8=[...ER,"documentOverlays"],IR=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],xR=IR,DR=[...xR,"indexConfiguration","indexState","indexEntries"],T8=DR;var Jl=class extends Om{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function Wt(n,e){let t=ne(n);return To.F(t._e,e)}function vO(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Zs(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function MR(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var at=class n{constructor(e,t){this.comparator=e,this.root=t||qr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bc(this.root,e,this.comparator,!1)}getReverseIterator(){return new bc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bc(this.root,e,this.comparator,!0)}},bc=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},qr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();let e=this.left.check();if(e!==this.right.check())throw ie();return e+(this.isRed()?0:1)}};qr.EMPTY=null,qr.RED=!0,qr.BLACK=!1;qr.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(e,t,r,i,o){return this}insert(e,t,r){return new qr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Xe=class n{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Nm(this.data.getIterator())}getIteratorFrom(e){return new Nm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Nm=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function hc(n){return n.hasNext()?n.getNext():void 0}var qn=class n{constructor(e){this.fields=e,e.sort(St.comparator)}static empty(){return new n([])}unionWith(e){let t=new Xe(St.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Dc(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var km=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function TR(){return typeof atob<"u"}var Gt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new km("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return we(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Gt.EMPTY_BYTE_STRING=new Gt("");var S8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pi(n){if(le(!!n),typeof n=="string"){let e=0,t=S8.exec(n);if(le(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:bt(n.seconds),nanos:bt(n.nanos)}}function bt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function So(n){return typeof n=="string"?Gt.fromBase64String(n):Gt.fromUint8Array(n)}function xg(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function qE(n){let e=n.mapValue.fields.__previous_value__;return xg(e)?qE(e):e}function ed(n){let e=Pi(n.mapValue.fields.__local_write_time__.timestampValue);return new gt(e.seconds,e.nanos)}var tb=class{constructor(e,t,r,i,o,s,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Ao=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var xo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Im={nullValue:"NULL_VALUE"};function Bs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?xg(n)?4:SR(n)?9007199254740991:10:ie()}function Wr(n,e){if(n===e)return!0;let t=Bs(n);if(t!==Bs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ed(n).isEqual(ed(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Pi(i.timestampValue),a=Pi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return So(i.bytesValue).isEqual(So(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return bt(i.geoPointValue.latitude)===bt(o.geoPointValue.latitude)&&bt(i.geoPointValue.longitude)===bt(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return bt(i.integerValue)===bt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=bt(i.doubleValue),a=bt(o.doubleValue);return s===a?Xl(s)===Xl(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Dc(n.arrayValue.values||[],e.arrayValue.values||[],Wr);case 10:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(vO(s)!==vO(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Wr(s[c],a[c])))return!1;return!0}(n,e);default:return ie()}}function td(n,e){return(n.values||[]).find(t=>Wr(t,e))!==void 0}function Po(n,e){if(n===e)return 0;let t=Bs(n),r=Bs(e);if(t!==r)return we(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return we(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=bt(o.integerValue||o.doubleValue),c=bt(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return _O(n.timestampValue,e.timestampValue);case 4:return _O(ed(n),ed(e));case 5:return we(n.stringValue,e.stringValue);case 6:return function(o,s){let a=So(o),c=So(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=we(a[l],c[l]);if(d!==0)return d}return we(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=we(bt(o.latitude),bt(s.latitude));return a!==0?a:we(bt(o.longitude),bt(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,s){let a=o.values||[],c=s.values||[];for(let l=0;l<a.length&&l<c.length;++l){let d=Po(a[l],c[l]);if(d)return d}return we(a.length,c.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===xo.mapValue&&s===xo.mapValue)return 0;if(o===xo.mapValue)return 1;if(s===xo.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let p=we(c[f],d[f]);if(p!==0)return p;let g=Po(a[c[f]],l[d[f]]);if(g!==0)return g}return we(c.length,d.length)}(n.mapValue,e.mapValue);default:throw ie()}}function _O(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return we(n,e);let t=Pi(n),r=Pi(e),i=we(t.seconds,r.seconds);return i!==0?i:we(t.nanos,r.nanos)}function Tc(n){return nb(n)}function nb(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Pi(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return So(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return te.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=nb(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${nb(t.fields[s])}`;return i+"}"}(n.mapValue):ie()}function Us(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function rb(n){return!!n&&"integerValue"in n}function nd(n){return!!n&&"arrayValue"in n}function wO(n){return!!n&&"nullValue"in n}function CO(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function xm(n){return!!n&&"mapValue"in n}function Gl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Zs(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Gl(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Gl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function SR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function A8(n){return"nullValue"in n?Im:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Us(Ao.empty(),te.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ie()}function P8(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Us(Ao.empty(),te.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?xo:ie()}function bO(n,e){let t=Po(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function EO(n,e){let t=Po(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var hn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!xm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gl(t)}setAll(e){let t=St.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Gl(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());xm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];xm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Zs(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Gl(this.value))}};function AR(n){let e=[];return Zs(n.fields,(t,r)=>{let i=new St([t]);if(xm(r)){let o=AR(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new qn(e)}var jt=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,fe.min(),fe.min(),fe.min(),hn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,fe.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,fe.min(),fe.min(),hn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,fe.min(),fe.min(),hn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Kr=class{constructor(e,t){this.position=e,this.inclusive=t}};function IO(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=te.comparator(te.fromName(s.referenceValue),t.key):r=Po(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function xO(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Wr(n.position[t],e.position[t]))return!1;return!0}var $s=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function O8(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Fm=class{},ke=class n extends Fm{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new sb(e,t,r):t==="array-contains"?new ub(e,r):t==="in"?new Vm(e,r):t==="not-in"?new lb(e,r):t==="array-contains-any"?new db(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new ab(e,r):new cb(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Po(t,this.value)):t!==null&&Bs(this.value)===Bs(t)&&this.matchesComparison(Po(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ge=class n extends Fm{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Sc(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Sc(n){return n.op==="and"}function ib(n){return n.op==="or"}function HE(n){return PR(n)&&Sc(n)}function PR(n){for(let e of n.filters)if(e instanceof Ge)return!1;return!0}function ob(n){if(n instanceof ke)return n.field.canonicalString()+n.op.toString()+Tc(n.value);if(HE(n))return n.filters.map(e=>ob(e)).join(",");{let e=n.filters.map(t=>ob(t)).join(",");return`${n.op}(${e})`}}function OR(n,e){return n instanceof ke?function(r,i){return i instanceof ke&&r.op===i.op&&r.field.isEqual(i.field)&&Wr(r.value,i.value)}(n,e):n instanceof Ge?function(r,i){return i instanceof Ge&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&OR(s,i.filters[a]),!0):!1}(n,e):void ie()}function RR(n,e){let t=n.filters.concat(e);return Ge.create(t,n.op)}function NR(n){return n instanceof ke?function(t){return`${t.field.canonicalString()} ${t.op} ${Tc(t.value)}`}(n):n instanceof Ge?function(t){return t.op.toString()+" {"+t.getFilters().map(NR).join(" ,")+"}"}(n):"Filter"}var sb=class extends ke{constructor(e,t,r){super(e,t,r),this.key=te.fromName(r.referenceValue)}matches(e){let t=te.comparator(e.key,this.key);return this.matchesComparison(t)}},ab=class extends ke{constructor(e,t){super(e,"in",t),this.keys=kR("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},cb=class extends ke{constructor(e,t){super(e,"not-in",t),this.keys=kR("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function kR(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>te.fromName(r.referenceValue))}var ub=class extends ke{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return nd(t)&&td(t.arrayValue,this.value)}},Vm=class extends ke{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&td(this.value.arrayValue,t)}},lb=class extends ke{constructor(e,t){super(e,"not-in",t)}matches(e){if(td(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!td(this.value.arrayValue,t)}},db=class extends ke{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!nd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>td(this.value.arrayValue,r))}};var fb=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function hb(n,e=null,t=[],r=[],i=null,o=null,s=null){return new fb(n,e,t,r,i,o,s)}function zs(n){let e=ne(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>ob(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),_d(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Tc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Tc(r)).join(",")),e.ue=t}return e.ue}function wd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!O8(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!OR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!xO(n.startAt,e.startAt)&&xO(n.endAt,e.endAt)}function Lm(n){return te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function jm(n,e){return n.filters.filter(t=>t instanceof ke&&t.field.isEqual(e))}function DO(n,e,t){let r=Im,i=!0;for(let o of jm(n,e)){let s=Im,a=!0;switch(o.op){case"<":case"<=":s=A8(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Im}bO({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];bO({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function MO(n,e,t){let r=xo,i=!0;for(let o of jm(n,e)){let s=xo,a=!0;switch(o.op){case">=":case">":s=P8(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=xo}EO({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];EO({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var br=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function FR(n,e,t,r,i,o,s,a){return new br(n,e,t,r,i,o,s,a)}function qc(n){return new br(n)}function TO(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function GE(n){return n.collectionGroup!==null}function Ic(n){let e=ne(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Xe(St.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new $s(o,r))}),t.has(St.keyField().canonicalString())||e.ce.push(new $s(St.keyField(),r))}return e.ce}function Dn(n){let e=ne(n);return e.le||(e.le=R8(e,Ic(n))),e.le}function R8(n,e){if(n.limitType==="F")return hb(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new $s(i.field,o)});let t=n.endAt?new Kr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Kr(n.startAt.position,n.startAt.inclusive):null;return hb(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function pb(n,e){let t=n.filters.concat([e]);return new br(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Bm(n,e,t){return new br(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Cd(n,e){return wd(Dn(n),Dn(e))&&n.limitType===e.limitType}function VR(n){return`${zs(Dn(n))}|lt:${n.limitType}`}function vc(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>NR(i)).join(", ")}]`),_d(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Tc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Tc(i)).join(",")),`Target(${r})`}(Dn(n))}; limitType=${n.limitType})`}function bd(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):te.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Ic(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=IO(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,Ic(r),i)||r.endAt&&!function(s,a,c){let l=IO(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,Ic(r),i))}(n,e)}function LR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function jR(n){return(e,t)=>{let r=!1;for(let i of Ic(n)){let o=N8(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function N8(n,e,t){let r=n.field.isKeyField()?te.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?Po(c,l):ie()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ie()}}var Qr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Zs(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return MR(this.inner)}size(){return this.innerSize}};var k8=new at(te.comparator);function kn(){return k8}var BR=new at(te.comparator);function ql(...n){let e=BR;for(let t of n)e=e.insert(t.key,t);return e}function UR(n){let e=BR;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function zr(){return Wl()}function $R(){return Wl()}function Wl(){return new Qr(n=>n.toString(),(n,e)=>n.isEqual(e))}var F8=new at(te.comparator),V8=new Xe(te.comparator);function be(...n){let e=V8;for(let t of n)e=e.add(t);return e}var L8=new Xe(we);function WE(){return L8}function zR(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xl(e)?"-0":e}}function qR(n){return{integerValue:""+n}}function HR(n,e){return CR(e)?qR(e):zR(n,e)}var Ac=class{constructor(){this._=void 0}};function j8(n,e,t){return n instanceof Oo?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&xg(o)&&(o=qE(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Oi?WR(n,e):n instanceof Ri?KR(n,e):function(i,o){let s=GR(i,o),a=SO(s)+SO(i.Pe);return rb(s)&&rb(i.Pe)?qR(a):zR(i.serializer,a)}(n,e)}function B8(n,e,t){return n instanceof Oi?WR(n,e):n instanceof Ri?KR(n,e):t}function GR(n,e){return n instanceof Ro?function(r){return rb(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Oo=class extends Ac{},Oi=class extends Ac{constructor(e){super(),this.elements=e}};function WR(n,e){let t=QR(e);for(let r of n.elements)t.some(i=>Wr(i,r))||t.push(r);return{arrayValue:{values:t}}}var Ri=class extends Ac{constructor(e){super(),this.elements=e}};function KR(n,e){let t=QR(e);for(let r of n.elements)t=t.filter(i=>!Wr(i,r));return{arrayValue:{values:t}}}var Ro=class extends Ac{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function SO(n){return bt(n.integerValue||n.doubleValue)}function QR(n){return nd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var qs=class{constructor(e,t){this.field=e,this.transform=t}};function U8(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Oi&&i instanceof Oi||r instanceof Ri&&i instanceof Ri?Dc(r.elements,i.elements,Wr):r instanceof Ro&&i instanceof Ro?Wr(r.Pe,i.Pe):r instanceof Oo&&i instanceof Oo}(n.transform,e.transform)}var mb=class{constructor(e,t){this.version=e,this.transformResults=t}},Et=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Dm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Pc=class{};function YR(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ko(n.key,Et.none()):new No(n.key,n.data,Et.none());{let t=n.data,r=hn.empty(),i=new Xe(St.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Er(n.key,r,new qn(i.toArray()),Et.none())}}function $8(n,e,t){n instanceof No?function(i,o,s){let a=i.value.clone(),c=PO(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Er?function(i,o,s){if(!Dm(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=PO(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(ZR(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Kl(n,e,t,r){return n instanceof No?function(o,s,a,c){if(!Dm(o.precondition,s))return a;let l=o.value.clone(),d=OO(o.fieldTransforms,c,s);return l.setAll(d),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Er?function(o,s,a,c){if(!Dm(o.precondition,s))return a;let l=OO(o.fieldTransforms,c,s),d=s.data;return d.setAll(ZR(o)),d.setAll(l),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(o,s,a){return Dm(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function z8(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=GR(r.transform,i||null);o!=null&&(t===null&&(t=hn.empty()),t.set(r.field,o))}return t||null}function AO(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Dc(r,i,(o,s)=>U8(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var No=class extends Pc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Er=class extends Pc{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function ZR(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function PO(n,e,t){let r=new Map;le(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,B8(s,a,t[i]))}return r}function OO(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,j8(o,s,e))}return r}var ko=class extends Pc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},rd=class extends Pc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var id=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&$8(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Kl(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Kl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=$R();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=YR(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(fe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),be())}isEqual(e){return this.batchId===e.batchId&&Dc(this.mutations,e.mutations,(t,r)=>AO(t,r))&&Dc(this.baseMutations,e.baseMutations,(t,r)=>AO(t,r))}},gb=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){le(e.mutations.length===r.length);let i=function(){return F8}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var od=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var yb=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var kt,je;function XR(n){switch(n){default:return ie();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function JR(n){if(n===void 0)return Tt("GRPC error has no .code"),j.UNKNOWN;switch(n){case kt.OK:return j.OK;case kt.CANCELLED:return j.CANCELLED;case kt.UNKNOWN:return j.UNKNOWN;case kt.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case kt.INTERNAL:return j.INTERNAL;case kt.UNAVAILABLE:return j.UNAVAILABLE;case kt.UNAUTHENTICATED:return j.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case kt.NOT_FOUND:return j.NOT_FOUND;case kt.ALREADY_EXISTS:return j.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return j.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case kt.ABORTED:return j.ABORTED;case kt.OUT_OF_RANGE:return j.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return j.UNIMPLEMENTED;case kt.DATA_LOSS:return j.DATA_LOSS;default:return ie()}}(je=kt||(kt={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";var RO=null;function eN(){return new TextEncoder}var q8=new wo([4294967295,4294967295],0);function NO(n){let e=eN().encode(n),t=new OC;return t.update(e),new Uint8Array(t.digest())}function kO(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new wo([t,r],0),new wo([i,o],0)]}var vb=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ls(`Invalid padding: ${t}`);if(r<0)throw new Ls(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ls(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ls(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=wo.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(wo.fromNumber(r)));return i.compare(q8)===1&&(i=new wo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=NO(e),[r,i]=kO(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=NO(e),[r,i]=kO(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Ls=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var sd=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,ad.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(fe.min(),i,new at(we),kn(),be())}},ad=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,be(),be(),be())}};var xc=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Um=class{constructor(e,t){this.targetId=e,this.me=t}},$m=class{constructor(e,t,r=Gt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},zm=class{constructor(){this.fe=0,this.ge=VO(),this.pe=Gt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=be(),t=be(),r=be();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ie()}}),new ad(this.pe,this.ye,e,t,r)}ve(){this.we=!1,this.ge=VO()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,le(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},_b=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=kn(),this.qe=FO(),this.Qe=new at(we)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:ie()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(Lm(o))if(r===0){let s=new te(o.path);this.Ue(t,s,jt.newNoDocument(s,fe.min()))}else le(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}RO?.et(function(d,f,p,g,y){var b,C,S,k,P,B;let q={localCacheCount:d,existenceFilterCount:f.count,databaseId:p.database,projectId:p.projectId},z=f.unchangedNames;return z&&(q.bloomFilter={applied:y===0,hashCount:(b=z?.hashCount)!==null&&b!==void 0?b:0,bitmapLength:(k=(S=(C=z?.bits)===null||C===void 0?void 0:C.bitmap)===null||S===void 0?void 0:S.length)!==null&&k!==void 0?k:0,padding:(B=(P=z?.bits)===null||P===void 0?void 0:P.padding)!==null&&B!==void 0?B:0,mightContain:I=>{var _;return(_=g?.mightContain(I))!==null&&_!==void 0&&_}}),q}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=So(r).toUint8Array()}catch(c){if(c instanceof km)return sr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new vb(s,i,o)}catch(c){return sr(c instanceof Ls?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&Lm(a.target)){let c=new te(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,jt.newNoDocument(c,e))}o.be&&(t.set(s,o.Ce()),o.ve())}});let r=be();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new sd(e,t,this.Qe,this.ke,r);return this.ke=kn(),this.qe=FO(),this.Qe=new at(we),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new zm,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Xe(we),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||W("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new zm),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function FO(){return new at(te.comparator)}function VO(){return new at(te.comparator)}var H8={asc:"ASCENDING",desc:"DESCENDING"},G8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},W8={and:"AND",or:"OR"},wb=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Cb(n,e){return n.useProto3Json||_d(e)?e:{value:e}}function Oc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function K8(n,e){return Oc(n,e.toTimestamp())}function At(n){return le(!!n),fe.fromTimestamp(function(t){let r=Pi(t);return new gt(r.seconds,r.nanos)}(n))}function KE(n,e){return bb(n,e).canonicalString()}function bb(n,e){let t=function(i){return new Be(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function nN(n){let e=Be.fromString(n);return le(fN(e)),e}function cd(n,e){return KE(n.databaseId,e.path)}function Hr(n,e){let t=nN(e);if(t.get(1)!==n.databaseId.projectId)throw new G(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new G(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new te(oN(t))}function rN(n,e){return KE(n.databaseId,e)}function iN(n){let e=nN(n);return e.length===4?Be.emptyPath():oN(e)}function Eb(n){return new Be(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function oN(n){return le(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function LO(n,e,t){return{name:cd(n,e),fields:t.value.mapValue.fields}}function sN(n,e,t){let r=Hr(n,e.name),i=At(e.updateTime),o=e.createTime?At(e.createTime):fe.min(),s=new hn({mapValue:{fields:e.fields}}),a=jt.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function Q8(n,e){return"found"in e?function(r,i){le(!!i.found),i.found.name,i.found.updateTime;let o=Hr(r,i.found.name),s=At(i.found.updateTime),a=i.found.createTime?At(i.found.createTime):fe.min(),c=new hn({mapValue:{fields:i.found.fields}});return jt.newFoundDocument(o,s,a,c)}(n,e):"missing"in e?function(r,i){le(!!i.missing),le(!!i.readTime);let o=Hr(r,i.missing),s=At(i.readTime);return jt.newNoDocument(o,s)}(n,e):ie()}function Y8(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,d){return l.useProto3Json?(le(d===void 0||typeof d=="string"),Gt.fromBase64String(d||"")):(le(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Gt.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let d=l.code===void 0?j.UNKNOWN:JR(l.code);return new G(d,l.message||"")}(s);t=new $m(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Hr(n,r.document.name),o=At(r.document.updateTime),s=r.document.createTime?At(r.document.createTime):fe.min(),a=new hn({mapValue:{fields:r.document.fields}}),c=jt.newFoundDocument(i,o,s,a),l=r.targetIds||[],d=r.removedTargetIds||[];t=new xc(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Hr(n,r.document),o=r.readTime?At(r.readTime):fe.min(),s=jt.newNoDocument(i,o),a=r.removedTargetIds||[];t=new xc([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Hr(n,r.document),o=r.removedTargetIds||[];t=new xc([],o,i,null)}else{if(!("filter"in e))return ie();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new yb(i,o),a=r.targetId;t=new Um(a,s)}}return t}function ud(n,e){let t;if(e instanceof No)t={update:LO(n,e.key,e.value)};else if(e instanceof ko)t={delete:cd(n,e.key)};else if(e instanceof Er)t={update:LO(n,e.key,e.data),updateMask:nq(e.fieldMask)};else{if(!(e instanceof rd))return ie();t={verify:cd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Oo)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Oi)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ri)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ro)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw ie()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:K8(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ie()}(n,e.precondition)),t}function Ib(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?Et.updateTime(At(o.updateTime)):o.exists!==void 0?Et.exists(o.exists):Et.none()}(e.currentDocument):Et.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)le(a.setToServerValue==="REQUEST_TIME"),c=new Oo;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];c=new Oi(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];c=new Ri(d)}else"increment"in a?c=new Ro(s,a.increment):ie();let l=St.fromServerFormat(a.fieldPath);return new qs(l,c)}(n,i)):[];if(e.update){e.update.name;let i=Hr(n,e.update.name),o=new hn({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let l=c.fieldPaths||[];return new qn(l.map(d=>St.fromServerFormat(d)))}(e.updateMask);return new Er(i,o,s,t,r)}return new No(i,o,t,r)}if(e.delete){let i=Hr(n,e.delete);return new ko(i,t)}if(e.verify){let i=Hr(n,e.verify);return new rd(i,t)}return ie()}function Z8(n,e){return n&&n.length>0?(le(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?At(i.updateTime):At(o);return s.isEqual(fe.min())&&(s=At(o)),new mb(s,i.transformResults||[])}(t,e))):[]}function aN(n,e){return{documents:[rN(n,e.path)]}}function cN(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=rN(n,i);let o=function(l){if(l.length!==0)return dN(Ge.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(d=>function(p){return{field:_c(p.field),direction:J8(p.dir)}}(d))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=Cb(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function uN(n){let e=iN(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){le(r===1);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=function(f){let p=lN(f);return p instanceof Ge&&HE(p)?p.getFilters():[p]}(t.where));let s=[];t.orderBy&&(s=function(f){return f.map(p=>function(y){return new $s(wc(y.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(t.orderBy));let a=null;t.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,_d(p)?null:p}(t.limit));let c=null;t.startAt&&(c=function(f){let p=!!f.before,g=f.values||[];return new Kr(g,p)}(t.startAt));let l=null;return t.endAt&&(l=function(f){let p=!f.before,g=f.values||[];return new Kr(g,p)}(t.endAt)),FR(e,i,s,o,a,"F",c,l)}function X8(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function lN(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=wc(t.unaryFilter.field);return ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=wc(t.unaryFilter.field);return ke.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=wc(t.unaryFilter.field);return ke.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=wc(t.unaryFilter.field);return ke.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(n):n.fieldFilter!==void 0?function(t){return ke.create(wc(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ge.create(t.compositeFilter.filters.map(r=>lN(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ie()}}(t.compositeFilter.op))}(n):ie()}function J8(n){return H8[n]}function eq(n){return G8[n]}function tq(n){return W8[n]}function _c(n){return{fieldPath:n.canonicalString()}}function wc(n){return St.fromServerFormat(n.fieldPath)}function dN(n){return n instanceof ke?function(t){if(t.op==="=="){if(CO(t.value))return{unaryFilter:{field:_c(t.field),op:"IS_NAN"}};if(wO(t.value))return{unaryFilter:{field:_c(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(CO(t.value))return{unaryFilter:{field:_c(t.field),op:"IS_NOT_NAN"}};if(wO(t.value))return{unaryFilter:{field:_c(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_c(t.field),op:eq(t.op),value:t.value}}}(n):n instanceof Ge?function(t){let r=t.getFilters().map(i=>dN(i));return r.length===1?r[0]:{compositeFilter:{op:tq(t.op),filters:r}}}(n):ie()}function nq(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function fN(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Rc=class n{constructor(e,t,r,i,o=fe.min(),s=fe.min(),a=Gt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var qm=class{constructor(e){this.ct=e}};function rq(n,e){let t;if(e.document)t=sN(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=te.fromSegments(e.noDocument.path),i=Gs(e.noDocument.readTime);t=jt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ie();{let r=te.fromSegments(e.unknownDocument.path),i=Gs(e.unknownDocument.version);t=jt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new gt(i[0],i[1]);return fe.fromTimestamp(o)}(e.readTime)),t}function jO(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Hm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:cd(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Oc(o,s.version.toTimestamp()),createTime:Oc(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Hs(e.version)};else{if(!e.isUnknownDocument())return ie();r.unknownDocument={path:t.path.toArray(),version:Hs(e.version)}}return r}function Hm(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Hs(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Gs(n){let e=new gt(n.seconds,n.nanoseconds);return fe.fromTimestamp(e)}function ks(n,e){let t=(e.baseMutations||[]).map(o=>Ib(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>Ib(n.ct,o)),i=gt.fromMillis(e.localWriteTimeMs);return new id(e.batchId,i,t,r)}function Hl(n){let e=Gs(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Gs(n.lastLimboFreeSnapshotVersion):fe.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return le(o.documents.length===1),Dn(qc(iN(o.documents[0])))}(n.query):function(o){return Dn(uN(o))}(n.query),new Rc(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Gt.fromBase64String(n.resumeToken))}function hN(n,e){let t=Hs(e.snapshotVersion),r=Hs(e.lastLimboFreeSnapshotVersion),i;i=Lm(e.target)?aN(n.ct,e.target):cN(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:zs(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function QE(n){let e=uN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Bm(e,e.limit,"L"):e}function jC(n,e){return new od(e.largestBatchId,Ib(n.ct,e.overlayMutation))}function BO(n,e){let t=e.path.lastSegment();return[n,xn(e.path.popLast()),t]}function UO(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Hs(r.readTime),documentKey:xn(r.documentKey.path),largestBatchId:r.largestBatchId}}var xb=class{getBundleMetadata(e,t){return $O(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Gs(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return $O(e).put(function(i){return{bundleId:i.id,createTime:Hs(At(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return zO(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:QE(o.bundledQuery),readTime:Gs(o.readTime)}}(r)})}saveNamedQuery(e,t){return zO(e).put(function(i){return{name:i.name,readTime:Hs(At(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function $O(n){return Wt(n,"bundles")}function zO(n){return Wt(n,"namedQueries")}var Gm=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return Bl(e).get(BO(this.userId,t)).next(r=>r?jC(this.serializer,r):null)}getOverlays(e,t){let r=zr();return F.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new od(t,s);i.push(this.ht(e,a))}),F.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(xn(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Bl(e).j("collectionPathOverlayIndex",a))}),F.waitFor(o)}getOverlaysForCollection(e,t,r){let i=zr(),o=xn(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Bl(e).U("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let l=jC(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=zr(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Bl(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,d)=>{let f=jC(this.serializer,l);o.size()<i||f.largestBatchId===s?(o.set(f.getKey(),f),s=f.largestBatchId):d.done()}).next(()=>o)}ht(e,t){return Bl(e).put(function(i,o,s){let[a,c,l]=BO(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:ud(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function Bl(n){return Wt(n,"documentOverlays")}var Si=class{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(bt(e.integerValue));else if("doubleValue"in e){let r=bt(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),Xl(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(t,20),typeof r=="string"&&(r=Pi(r)),t.At(`${r.seconds||""}`),t.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(So(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?SR(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):ie()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){let r=e.fields||{};this.Et(t,55);for(let i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){let r=e.values||[];this.Et(t,50);for(let i of r)this.It(i,t)}gt(e,t){this.Et(t,37),te.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}};Si.bt=new Si;function iq(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function qO(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=iq(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var Db=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ct(r.value),r=t.next();this.vt()}Ft(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Mt(r.value),r=t.next();this.xt()}Ot(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{let i=t.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{let i=t.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){let t=this.Bt(e),r=qO(t);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}qt(e){let t=this.Bt(e),r=qO(t);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ct(e){let t=255&e;t===0?(this.Kt(0),this.Kt(255)):t===255?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Mb=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}},Tb=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},Fs=class{constructor(){this.Gt=new Db,this.zt=new Mb(this.Gt),this.jt=new Tb(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var Vs=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Jt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Co(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=HO(n.arrayValue,e.arrayValue),t!==0?t:(t=HO(n.directionalValue,e.directionalValue),t!==0?t:te.comparator(n.documentKey,e.documentKey)))}function HO(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var Wm=class{constructor(e){this.Yt=new Xe((t,r)=>St.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let t of e.filters){let r=t;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(le(e.collectionGroup===this.collectionId),this.en)return!1;let t=YC(e);if(t!==void 0&&!this.nn(t))return!1;let r=Rs(e),i=new Set,o=0,s=0;for(;o<r.length&&this.nn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.rn(a,c)||!this.sn(this.Zt[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.Zt.length||!this.sn(this.Zt[s++],a))return!1}return!0}on(){if(this.en)return null;let e=new Xe(St.comparator),t=[];for(let r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Ec(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Ec(r.field,0))}for(let r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Ec(r.field,r.dir==="asc"?0:1)));return new Mc(Mc.UNKNOWN_ID,this.collectionId,t,Zl.empty())}nn(e){for(let t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function pN(n){var e,t;if(le(n instanceof ke||n instanceof Ge),n instanceof ke){if(n instanceof Vm){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>ke.create(n.field,"==",o)))||[];return Ge.create(i,"or")}return n}let r=n.filters.map(i=>pN(i));return Ge.create(r,n.op)}function oq(n){if(n.getFilters().length===0)return[];let e=Pb(pN(n));return le(mN(e)),Sb(e)||Ab(e)?[e]:e.getFilters()}function Sb(n){return n instanceof ke}function Ab(n){return n instanceof Ge&&HE(n)}function mN(n){return Sb(n)||Ab(n)||function(t){if(t instanceof Ge&&ib(t)){for(let r of t.getFilters())if(!Sb(r)&&!Ab(r))return!1;return!0}return!1}(n)}function Pb(n){if(le(n instanceof ke||n instanceof Ge),n instanceof ke)return n;if(n.filters.length===1)return Pb(n.filters[0]);let e=n.filters.map(r=>Pb(r)),t=Ge.create(e,n.op);return t=Km(t),mN(t)?t:(le(t instanceof Ge),le(Sc(t)),le(t.filters.length>1),t.filters.reduce((r,i)=>YE(r,i)))}function YE(n,e){let t;return le(n instanceof ke||n instanceof Ge),le(e instanceof ke||e instanceof Ge),t=n instanceof ke?e instanceof ke?function(i,o){return Ge.create([i,o],"and")}(n,e):GO(n,e):e instanceof ke?GO(e,n):function(i,o){if(le(i.filters.length>0&&o.filters.length>0),Sc(i)&&Sc(o))return RR(i,o.getFilters());let s=ib(i)?i:o,a=ib(i)?o:i,c=s.filters.map(l=>YE(l,a));return Ge.create(c,"or")}(n,e),Km(t)}function GO(n,e){if(Sc(e))return RR(e,n.getFilters());{let t=e.filters.map(r=>YE(n,r));return Ge.create(t,"or")}}function Km(n){if(le(n instanceof ke||n instanceof Ge),n instanceof ke)return n;let e=n.getFilters();if(e.length===1)return Km(e[0]);if(PR(n))return n;let t=e.map(i=>Km(i)),r=[];return t.forEach(i=>{i instanceof ke?r.push(i):i instanceof Ge&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Ge.create(r,n.op)}var Ob=class{constructor(){this._n=new ld}addToCollectionParentIndex(e,t){return this._n.add(t),F.resolve()}getCollectionParents(e,t){return F.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return F.resolve()}deleteFieldIndex(e,t){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,t){return F.resolve()}getDocumentsMatchingTarget(e,t){return F.resolve(null)}getIndexType(e,t){return F.resolve(0)}getFieldIndexes(e,t){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,t){return F.resolve(ar.min())}getMinOffsetFromCollectionGroup(e,t){return F.resolve(ar.min())}updateCollectionGroup(e,t,r){return F.resolve()}updateIndexEntries(e,t){return F.resolve()}},ld=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Xe(Be.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Xe(Be.comparator)).toArray()}};var _m=new Uint8Array(0),Rb=class{constructor(e,t){this.databaseId=t,this.an=new ld,this.un=new Qr(r=>zs(r),(r,i)=>wd(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});let o={collectionId:r,parent:xn(i)};return WO(e).put(o)}return F.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[gR(t),""],!1,!0);return WO(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push($r(s.parent))}return r})}addFieldIndex(e,t){let r=Ul(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=mc(e);return o.next(a=>{s.put(UO(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=Ul(e),i=mc(e),o=pc(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=Ul(e),r=pc(e),i=mc(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return F.forEach(this.cn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new Wm(r).on();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=pc(e),i=!0,o=new Map;return F.forEach(this.cn(t),s=>this.ln(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=be(),a=[];return F.forEach(o,(c,l)=>{W("IndexedDbIndexManager",`Using index ${function(P){return`id=${P.indexId}|cg=${P.collectionGroup}|f=${P.fields.map(B=>`${B.fieldPath}:${B.kind}`).join(",")}`}(c)} to execute ${zs(t)}`);let d=function(P,B){let q=YC(B);if(q===void 0)return null;for(let z of jm(P,q.fieldPath))switch(z.op){case"array-contains-any":return z.value.arrayValue.values||[];case"array-contains":return[z.value]}return null}(l,c),f=function(P,B){let q=new Map;for(let z of Rs(B))for(let I of jm(P,z.fieldPath))switch(I.op){case"==":case"in":q.set(z.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return q.set(z.fieldPath.canonicalString(),I.value),Array.from(q.values())}return null}(l,c),p=function(P,B){let q=[],z=!0;for(let I of Rs(B)){let _=I.kind===0?DO(P,I.fieldPath,P.startAt):MO(P,I.fieldPath,P.startAt);q.push(_.value),z&&(z=_.inclusive)}return new Kr(q,z)}(l,c),g=function(P,B){let q=[],z=!0;for(let I of Rs(B)){let _=I.kind===0?MO(P,I.fieldPath,P.endAt):DO(P,I.fieldPath,P.endAt);q.push(_.value),z&&(z=_.inclusive)}return new Kr(q,z)}(l,c),y=this.hn(c,l,p),b=this.hn(c,l,g),C=this.Pn(c,l,f),S=this.In(c.indexId,d,y,p.inclusive,b,g.inclusive,C);return F.forEach(S,k=>r.G(k,t.limit).next(P=>{P.forEach(B=>{let q=te.fromSegments(B.documentKey);s.has(q)||(s=s.add(q),a.push(q))})}))}).next(()=>a)}return F.resolve(null)})}cn(e){let t=this.un.get(e);return t||(e.filters.length===0?t=[e]:t=oq(Ge.create(e.filters,"and")).map(r=>hb(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}In(e,t,r,i,o,s,a){let c=(t!=null?t.length:1)*Math.max(r.length,o.length),l=c/(t!=null?t.length:1),d=[];for(let f=0;f<c;++f){let p=t?this.Tn(t[f/l]):_m,g=this.En(e,p,r[f%l],i),y=this.dn(e,p,o[f%l],s),b=a.map(C=>this.En(e,p,C,!0));d.push(...this.createRange(g,y,b))}return d}En(e,t,r,i){let o=new Vs(e,te.empty(),t,r);return i?o:o.Jt()}dn(e,t,r,i){let o=new Vs(e,te.empty(),t,r);return i?o.Jt():o}ln(e,t){let r=new Wm(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.tn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.cn(t);return F.forEach(i,o=>this.ln(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let l=new Xe(St.comparator),d=!1;for(let f of c.filters)for(let p of f.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?d=!0:l=l.add(p.field));for(let f of c.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(d?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}An(e,t){let r=new Fs;for(let i of Rs(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Ht(i.kind);Si.bt.Pt(o,s)}return r.Wt()}Tn(e){let t=new Fs;return Si.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){let r=new Fs;return Si.bt.Pt(Us(this.databaseId,t),r.Ht(function(o){let s=Rs(o);return s.length===0?0:s[s.length-1].kind}(e))),r.Wt()}Pn(e,t,r){if(r===null)return[];let i=[];i.push(new Fs);let o=0;for(let s of Rs(e)){let a=r[o++];for(let c of i)if(this.Vn(t,s.fieldPath)&&nd(a))i=this.mn(i,s,a);else{let l=c.Ht(s.kind);Si.bt.Pt(a,l)}}return this.fn(i)}hn(e,t,r){return this.Pn(e,t,r.position)}fn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Wt();return t}mn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new Fs;c.seed(a.Wt()),Si.bt.Pt(s,c.Ht(t.kind)),o.push(c)}return o}Vn(e,t){return!!e.filters.find(r=>r instanceof ke&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=Ul(e),i=mc(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return F.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(d,f){let p=f?new Zl(f.sequenceNumber,new ar(Gs(f.readTime),new te($r(f.documentKey)),f.largestBatchId)):Zl.empty(),g=d.fields.map(([y,b])=>new Ec(St.fromServerFormat(y),b));return new Mc(d.indexId,d.collectionGroup,g,p)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:we(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=Ul(e),o=mc(e);return this.gn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>F.forEach(a,c=>o.put(UO(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return F.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?F.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),F.forEach(a,c=>this.pn(e,i,c).next(l=>{let d=this.yn(o,c);return l.isEqual(d)?F.resolve():this.wn(e,o,c,l,d)}))))})}Sn(e,t,r,i){return pc(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,t.key),documentKey:t.key.path.toArray()})}bn(e,t,r,i){return pc(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,t.key),t.key.path.toArray()])}pn(e,t,r){let i=pc(e),o=new Xe(Co);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,t)])},(s,a)=>{o=o.add(new Vs(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}yn(e,t){let r=new Xe(Co),i=this.An(t,e);if(i==null)return r;let o=YC(t);if(o!=null){let s=e.data.field(o.fieldPath);if(nd(s))for(let a of s.arrayValue.values||[])r=r.add(new Vs(t.indexId,e.key,this.Tn(a),i))}else r=r.add(new Vs(t.indexId,e.key,_m,i));return r}wn(e,t,r,i,o){W("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(c,l,d,f,p){let g=c.getIterator(),y=l.getIterator(),b=hc(g),C=hc(y);for(;b||C;){let S=!1,k=!1;if(b&&C){let P=d(b,C);P<0?k=!0:P>0&&(S=!0)}else b!=null?k=!0:S=!0;S?(f(C),C=hc(y)):k?(p(b),b=hc(g)):(b=hc(g),C=hc(y))}}(i,o,Co,a=>{s.push(this.Sn(e,t,r,a))},a=>{s.push(this.bn(e,t,r,a))}),F.waitFor(s)}gn(e){let t=1;return mc(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Co(s,a)).filter((s,a,c)=>!a||Co(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Co(s,e),c=Co(s,t);if(a===0)i[0]=e.Jt();else if(a>0&&c<0)i.push(s),i.push(s.Jt());else if(c>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Dn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,_m,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,_m,[]];o.push(IDBKeyRange.bound(a,c))}return o}Dn(e,t){return Co(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(KO)}getMinOffset(e,t){return F.mapArray(this.cn(t),r=>this.ln(e,r).next(i=>i||ie())).next(KO)}};function WO(n){return Wt(n,"collectionParents")}function pc(n){return Wt(n,"indexEntries")}function Ul(n){return Wt(n,"indexConfiguration")}function mc(n){return Wt(n,"indexState")}function KO(n){le(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;$E(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ar(e.readTime,e.documentKey,t)}var QO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},or=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function gN(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,c=r.J({range:s},(d,f,p)=>(a++,p.delete()));o.push(c.next(()=>{le(a===1)}));let l=[];for(let d of t.mutations){let f=bR(e,d.key.path,t.batchId);o.push(i.delete(f)),l.push(d.key)}return F.waitFor(o).next(()=>l)}function Qm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ie();e=n.noDocument}return JSON.stringify(e).length}or.DEFAULT_COLLECTION_PERCENTILE=10,or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,or.DEFAULT=new or(41943040,or.DEFAULT_COLLECTION_PERCENTILE,or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),or.DISABLED=new or(-1,0,0);var Ym=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,t,r,i){le(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return bo(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=Cc(e),s=bo(e);return s.add({}).next(a=>{le(typeof a=="number");let c=new id(a,t,r,i),l=function(g,y,b){let C=b.baseMutations.map(k=>ud(g.ct,k)),S=b.mutations.map(k=>ud(g.ct,k));return{userId:y,batchId:b.batchId,localWriteTimeMs:b.localWriteTime.toMillis(),baseMutations:C,mutations:S}}(this.serializer,this.userId,c),d=[],f=new Xe((p,g)=>we(p.canonicalString(),g.canonicalString()));for(let p of i){let g=bR(this.userId,p.key.path,a);f=f.add(p.key.path.popLast()),d.push(s.put(l)),d.push(o.put(g,f8))}return f.forEach(p=>{d.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),F.waitFor(d).next(()=>c)})}lookupMutationBatch(e,t){return bo(e).get(t).next(r=>r?(le(r.userId===this.userId),ks(this.serializer,r)):null)}vn(e,t){return this.Cn[t]?F.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Cn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return bo(e).J({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(le(a.batchId>=r),o=ks(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return bo(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return bo(e).U("userMutationsIndex",t).next(r=>r.map(i=>ks(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Em(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Cc(e).J({range:i},(s,a,c)=>{let[l,d,f]=s,p=$r(d);if(l===this.userId&&t.path.isEqual(p))return bo(e).get(f).next(g=>{if(!g)throw ie();le(g.userId===this.userId),o.push(ks(this.serializer,g))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Xe(we),i=[];return t.forEach(o=>{let s=Em(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=Cc(e).J({range:a},(l,d,f)=>{let[p,g,y]=l,b=$r(g);p===this.userId&&o.path.isEqual(b)?r=r.add(y):f.done()});i.push(c)}),F.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=Em(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Xe(we);return Cc(e).J({range:s},(c,l,d)=>{let[f,p,g]=c,y=$r(p);f===this.userId&&r.isPrefixOf(y)?y.length===i&&(a=a.add(g)):d.done()}).next(()=>this.Fn(e,a))}Fn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(bo(e).get(o).next(s=>{if(s===null)throw ie();le(s.userId===this.userId),r.push(ks(this.serializer,s))}))}),F.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return gN(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),F.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return F.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Cc(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=$r(o[1]);i.push(c)}else a.done()}).next(()=>{le(i.length===0)})})}containsKey(e,t){return yN(e,this.userId,t)}xn(e){return vN(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function yN(n,e,t){let r=Em(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Cc(n).J({range:o,H:!0},(a,c,l)=>{let[d,f,p]=a;d===e&&f===i&&(s=!0),l.done()}).next(()=>s)}function bo(n){return Wt(n,"mutations")}function Cc(n){return Wt(n,"documentMutations")}function vN(n){return Wt(n,"mutationQueues")}var Nc=class n{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new n(0)}static Ln(){return new n(-1)}};var Nb=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{let r=new Nc(t.highestTargetId);return t.highestTargetId=r.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>fe.fromTimestamp(new gt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.kn(e,i)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(t,r),this.kn(e,r))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>gc(e).delete(t.targetId)).next(()=>this.Bn(e)).next(r=>(le(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return gc(e).J((s,a)=>{let c=Hl(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>F.waitFor(o)).next(()=>i)}forEachTarget(e,t){return gc(e).J((r,i)=>{let o=Hl(i);t(o)})}Bn(e){return YO(e).get("targetGlobalKey").next(t=>(le(t!==null),t))}kn(e,t){return YO(e).put("targetGlobalKey",t)}qn(e,t){return gc(e).put(hN(this.serializer,t))}Qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=zs(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return gc(e).J({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let l=Hl(a);wd(t,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=Eo(e);return t.forEach(s=>{let a=xn(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),F.waitFor(i)}removeMatchingKeys(e,t,r){let i=Eo(e);return F.forEach(t,o=>{let s=xn(o.path);return F.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=Eo(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Eo(e),o=be();return i.J({range:r,H:!0},(s,a,c)=>{let l=$r(s[1]),d=new te(l);o=o.add(d)}).next(()=>o)}containsKey(e,t){let r=xn(t.path),i=IDBKeyRange.bound([r],[gR(r)],!1,!0),o=0;return Eo(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return gc(e).get(t).next(r=>r?Hl(r):null)}};function gc(n){return Wt(n,"targets")}function YO(n){return Wt(n,"targetGlobal")}function Eo(n){return Wt(n,"targetDocuments")}function ZO([n,e],[t,r]){let i=we(n,t);return i===0?we(e,r):i}var kb=class{constructor(e){this.Kn=e,this.buffer=new Xe(ZO),this.$n=0}Un(){return++this.$n}Wn(e){let t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();ZO(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Fb=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){W("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>V(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Lo(t)?W("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Vo(t)}yield this.zn(3e5)}))}},Vb=class{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return F.resolve(zn.oe);let r=new kb(t);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(QO)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),QO):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let r,i,o,s,a,c,l,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(o=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),yc()<=Sr.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(l-c)+`ms
Total Duration: ${l-d}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function sq(n,e){return new Vb(n,e)}var Lb=class{constructor(e,t){this.db=e,this.garbageCollector=sq(this,t)}Hn(e){let t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Zn(e){let t=0;return this.Jn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(r,i)=>t(i))}addReference(e,t,r){return wm(e,r)}removeReference(e,t,r){return wm(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return wm(e,t)}er(e,t){return function(i,o){let s=!1;return vN(i).Y(a=>yN(i,a,o).next(c=>(c&&(s=!0),F.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.Xn(e,(s,a)=>{if(a<=t){let c=this.er(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,fe.min()),Eo(e).delete(function(f){return[0,xn(f.path)]}(s))))});i.push(c)}}).next(()=>F.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return wm(e,t)}Xn(e,t){let r=Eo(e),i,o=zn.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==zn.oe&&t(new te($r(i)),o),o=l,i=c):o=zn.oe}).next(()=>{o!==zn.oe&&t(new te($r(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function wm(n,e){return Eo(n).put(function(r,i){return{targetId:0,path:xn(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var Zm=class{constructor(){this.changes=new Qr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,jt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?F.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var jb=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Os(e).put(r)}removeEntry(e,t,r){return Os(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Hm(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.tr(e,r)))}getEntry(e,t){let r=jt.newInvalidDocument(t);return Os(e).J({index:"documentKeyIndex",range:IDBKeyRange.only($l(t))},(i,o)=>{r=this.nr(t,o)}).next(()=>r)}rr(e,t){let r={size:0,document:jt.newInvalidDocument(t)};return Os(e).J({index:"documentKeyIndex",range:IDBKeyRange.only($l(t))},(i,o)=>{r={document:this.nr(t,o),size:Qm(o)}}).next(()=>r)}getEntries(e,t){let r=kn();return this.ir(e,t,(i,o)=>{let s=this.nr(i,o);r=r.insert(i,s)}).next(()=>r)}sr(e,t){let r=kn(),i=new at(te.comparator);return this.ir(e,t,(o,s)=>{let a=this.nr(o,s);r=r.insert(o,a),i=i.insert(o,Qm(s))}).next(()=>({documents:r,_r:i}))}ir(e,t,r){if(t.isEmpty())return F.resolve();let i=new Xe(eR);t.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound($l(i.first()),$l(i.last())),s=i.getIterator(),a=s.getNext();return Os(e).J({index:"documentKeyIndex",range:o},(c,l,d)=>{let f=te.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&eR(a,f)<0;)r(a,null),a=s.getNext();a&&a.isEqual(f)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?d.$($l(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Hm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Os(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let d=kn();for(let f of l){let p=this.nr(te.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);p.isFoundDocument()&&(bd(t,p)||i.has(p.key))&&(d=d.insert(p.key,p))}return d})}getAllFromCollectionGroup(e,t,r,i){let o=kn(),s=JO(t,r),a=JO(t,ar.max());return Os(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,l,d)=>{let f=this.nr(te.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(f.key,f),o.size===i&&d.done()}).next(()=>o)}newChangeBuffer(e){return new Bb(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return XO(e).get("remoteDocumentGlobalKey").next(t=>(le(!!t),t))}tr(e,t){return XO(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){let r=rq(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(fe.min())))return r}return jt.newInvalidDocument(e)}};function _N(n){return new jb(n)}var Bb=class extends Zm{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new Qr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Xe((o,s)=>we(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.ur.get(o);if(t.push(this.ar.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=jO(this.ar.serializer,s);i=i.add(o.path.popLast());let l=Qm(c);r+=l-a.size,t.push(this.ar.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=jO(this.ar.serializer,s.convertToNoDocument(fe.min()));t.push(this.ar.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.ar.updateMetadata(e,r)),F.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(r=>(this.ur.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:r,_r:i})=>(i.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function XO(n){return Wt(n,"remoteDocumentGlobal")}function Os(n){return Wt(n,"remoteDocumentsV14")}function $l(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function JO(n,e){let t=e.documentKey.path.toArray();return[n,Hm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function eR(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=we(t[o],r[o]),i)return i;return i=we(t.length,r.length),i||(i=we(t[t.length-2],r[r.length-2]),i||we(t[t.length-1],r[r.length-1]))}var Ub=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Xm=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Kl(r.mutation,i,qn.empty(),gt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,be()).next(()=>r))}getLocalViewOfDocuments(e,t,r=be()){let i=zr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=ql();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=zr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,be()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=kn(),s=Wl(),a=function(){return Wl()}();return t.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof Er)?o=o.insert(l.key,l):d!==void 0?(s.set(l.key,d.mutation.getFieldMask()),Kl(d.mutation,l,d.mutation.getFieldMask(),gt.now())):s.set(l.key,qn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,d)=>s.set(l,d)),t.forEach((l,d)=>{var f;return a.set(l,new Ub(d,(f=s.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Wl(),i=new at((s,a)=>s-a),o=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let d=r.get(c)||qn.empty();d=a.applyToLocalView(l,d),r.set(c,d);let f=(i.get(a.batchId)||be()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,f=$R();d.forEach(p=>{if(!o.has(p)){let g=YR(t.get(p),r.get(p));g!==null&&f.set(p,g),o=o.add(p)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,f))}return F.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return te.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):GE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):F.resolve(zr()),a=-1,c=o;return s.next(l=>F.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?F.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{c=c.insert(d,p)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,be())).next(d=>({batchId:a,changes:UR(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new te(t)).next(r=>{let i=ql();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=ql();return this.indexManager.getCollectionParents(e,o).next(a=>F.forEach(a,c=>{let l=function(f,p){return new br(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,p)=>{s=s.insert(f,p)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let d=l.getKey();s.get(d)===null&&(s=s.insert(d,jt.newInvalidDocument(d)))});let a=ql();return s.forEach((c,l)=>{let d=o.get(c);d!==void 0&&Kl(d.mutation,l,qn.empty(),gt.now()),bd(t,l)&&(a=a.insert(c,l))}),a})}};var $b=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return F.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:At(i.createTime)}}(t)),F.resolve()}getNamedQuery(e,t){return F.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(i){return{name:i.name,query:QE(i.bundledQuery),readTime:At(i.readTime)}}(t)),F.resolve()}};var zb=class{constructor(){this.overlays=new at(te.comparator),this.hr=new Map}getOverlay(e,t){return F.resolve(this.overlays.get(t))}getOverlays(e,t){let r=zr();return F.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),F.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),F.resolve()}getOverlaysForCollection(e,t,r){let i=zr(),o=t.length+1,s=new te(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return F.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new at((l,d)=>l-d),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let d=o.get(l.largestBatchId);d===null&&(d=zr(),o=o.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=zr(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return F.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new od(t,r));let o=this.hr.get(t);o===void 0&&(o=be(),this.hr.set(t,o)),this.hr.set(t,o.add(r.key))}};var dd=class{constructor(){this.Pr=new Xe(Ft.Ir),this.Tr=new Xe(Ft.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){let r=new Ft(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new Ft(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){let t=new te(new Be([])),r=new Ft(t,e),i=new Ft(t,e+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let t=new te(new Be([])),r=new Ft(t,e),i=new Ft(t,e+1),o=be();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Ft(e,0),r=this.Pr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ft=class{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return te.comparator(e.key,t.key)||we(e.pr,t.pr)}static Er(e,t){return we(e.pr,t.pr)||te.comparator(e.key,t.key)}};var qb=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Xe(Ft.Ir)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new id(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.wr=this.wr.add(new Ft(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(s)}lookupMutationBatch(e,t){return F.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.br(r),o=i<0?0:i;return F.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ft(t,0),i=new Ft(t,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{let a=this.Sr(s.pr);o.push(a)}),F.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Xe(we);return t.forEach(i=>{let o=new Ft(i,0),s=new Ft(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),F.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;te.isDocumentKey(o)||(o=o.child(""));let s=new Ft(new te(o),0),a=new Xe(we);return this.wr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.pr)),!0)},s),F.resolve(this.Dr(a))}Dr(e){let t=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){le(this.Cr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return F.forEach(t.mutations,i=>{let o=new Ft(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){let r=new Ft(t,0),i=this.wr.firstAfterOrEqual(r);return F.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Cr(e,t){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Hb=class{constructor(e){this.vr=e,this.docs=function(){return new at(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return F.resolve(r?r.document.mutableCopy():jt.newInvalidDocument(t))}getEntries(e,t){let r=kn();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():jt.newInvalidDocument(i))}),F.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=kn(),s=t.path,a=new te(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||$E(vR(d),r)<=0||(i.has(d.key)||bd(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return F.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ie()}Fr(e,t){return F.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Gb(this)}getSize(e){return F.resolve(this.size)}},Gb=class extends Zm{constructor(e){super(),this.ar=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),F.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}};var Wb=class{constructor(e){this.persistence=e,this.Mr=new Qr(t=>zs(t),wd),this.lastRemoteSnapshotVersion=fe.min(),this.highestTargetId=0,this.Or=0,this.Nr=new dd,this.targetCount=0,this.Lr=Nc.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),F.resolve()}qn(e){this.Mr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Lr=new Nc(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,F.resolve()}updateTargetData(e,t){return this.qn(t),F.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),F.waitFor(o).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,t){let r=this.Mr.get(t)||null;return F.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),F.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),F.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),F.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Nr.gr(t);return F.resolve(r)}containsKey(e,t){return F.resolve(this.Nr.containsKey(t))}};var Jm=class{constructor(e,t){this.Br={},this.overlays={},this.kr=new zn(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Wb(this),this.indexManager=new Ob,this.remoteDocumentCache=function(i){return new Hb(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new qm(t),this.$r=new $b(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new zb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new qb(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){W("MemoryPersistence","Starting transaction:",e);let i=new Kb(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,t){return F.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}},Kb=class extends Om{constructor(e){super(),this.currentSequenceNumber=e}},eg=class n{constructor(e){this.persistence=e,this.zr=new dd,this.jr=null}static Hr(e){return new n(e)}get Jr(){if(this.jr)return this.jr;throw ie()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),F.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),F.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Jr,r=>{let i=te.fromPath(r);return this.Yr(e,i).next(o=>{o||t.removeEntry(i,fe.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return F.or([()=>F.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}};var Qb=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new Rm("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yO,{unique:!0}),c.createObjectStore("documentMutations")}(e),tR(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=F.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),tR(e)),s=s.next(()=>function(c){let l=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:fe.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",d)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,l){return l.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yO,{unique:!0});let f=l.store("mutations"),p=d.map(g=>f.put(g));return F.waitFor(p)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.Xr(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),r<7&&i>=7&&(s=s.next(()=>this.ti(o))),r<8&&i>=8&&(s=s.next(()=>this.ni(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.ri(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:I8});l.createIndex("collectionPathOverlayIndex",x8,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",D8,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:h8});l.createIndex("documentKeyIndex",p8),l.createIndex("collectionGroupIndex",m8)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.si(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:w8}).createIndex("sequenceNumberIndex",C8,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:b8}).createIndex("documentKeyIndex",E8,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),s}ei(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Qm(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>F.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>F.forEach(a,c=>{le(c.userId===o.userId);let l=ks(this.serializer,c);return gN(e,o.userId,l).next(()=>{})}))}))}ti(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let c=new Be(s),l=function(f){return[0,xn(f)]}(c);o.push(t.get(l).next(d=>d?F.resolve():(f=>t.put({targetId:0,path:xn(f),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>F.waitFor(o))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:_8});let r=t.store("collectionParents"),i=new ld,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:xn(c)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let c=new Be(s);return o(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,c],l)=>{let d=$r(a);return o(d.popLast())}))}ri(e){let t=e.store("targets");return t.J((r,i)=>{let o=Hl(i),s=hN(this.serializer,o);return t.put(s)})}ii(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),c=function(f){return f.document?new te(Be.fromString(f.document.name).popFirst(5)):f.noDocument?te.fromSegments(f.noDocument.path):f.unknownDocument?te.fromSegments(f.unknownDocument.path):ie()}(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>F.waitFor(i))}si(e,t){let r=t.store("mutations"),i=_N(this.serializer),o=new Jm(eg.Hr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(c=>{var l;let d=(l=a.get(c.userId))!==null&&l!==void 0?l:be();ks(this.serializer,c).keys().forEach(f=>d=d.add(f)),a.set(c.userId,d)}),F.forEach(a,(c,l)=>{let d=new Vt(l),f=Gm.lt(this.serializer,d),p=o.getIndexManager(d),g=Ym.lt(d,this.serializer,p,o.referenceDelegate);return new Xm(i,g,f,p).recalculateAndSaveOverlaysForDocumentKeys(new Jl(t,zn.oe),c).next()})})}};function tR(n){n.createObjectStore("targetDocuments",{keyPath:y8}).createIndex("documentTargetsIndex",v8,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",g8,{unique:!0}),n.createObjectStore("targetGlobal")}var BC="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Yb=class n{constructor(e,t,r,i,o,s,a,c,l,d,f=16){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.oi=o,this.window=s,this.document=a,this._i=l,this.ai=d,this.ui=f,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=p=>Promise.resolve(),!n.D())throw new G(j.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Lb(this,i),this.Ti=t+"main",this.serializer=new qm(c),this.Ei=new To(this.Ti,this.ui,new Qb(this.serializer)),this.Qr=new Nb(this.referenceDelegate,this.serializer),this.remoteDocumentCache=_N(this.serializer),this.$r=new xb,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,d===!1&&Tt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new G(j.FAILED_PRECONDITION,BC);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new zn(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=t=>V(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(t=>V(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>V(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Cm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Lo(e))return W("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return W("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return zl(e).get("owner").next(t=>F.resolve(this.Si(t)))}bi(e){return Cm(e).delete(this.clientId)}Di(){return V(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=Wt(t,"clientMetadata");return r.U().next(i=>{let o=this.vi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return F.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.di)for(let t of e)this.di.removeItem(this.Fi(t.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?F.resolve(!0):zl(e).get("owner").next(t=>{if(t!==null&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new G(j.FAILED_PRECONDITION,BC);return!1}}return!(!this.networkEnabled||!this.inForeground)||Cm(e).U().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&W("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return V(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new Jl(e,zn.oe);return this.yi(t).next(()=>this.bi(t))}),this.Ei.close(),this.Li()})}vi(e,t){return e.filter(r=>this.Ci(r.updateTimeMs,t)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Cm(e).U().next(t=>this.vi(t,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return Ym.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Rb(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Gm.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,r){W("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(c){return c===16?T8:c===15?DR:c===14?xR:c===13?IR:c===12?M8:c===11?ER:void ie()}(this.ui),s;return this.Ei.runTransaction(e,i,o,a=>(s=new Jl(a,this.kr?this.kr.next():zn.oe),t==="readwrite-primary"?this.gi(s).next(c=>!!c||this.pi(s)).next(c=>{if(!c)throw Tt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new G(j.FAILED_PRECONDITION,_R);return r(s)}).next(c=>this.wi(s).next(()=>c)):this.ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ki(e){return zl(e).get("owner").next(t=>{if(t!==null&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new G(j.FAILED_PRECONDITION,BC)})}wi(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return zl(e).put("owner",t)}static D(){return To.D()}yi(e){let t=zl(e);return t.get("owner").next(r=>this.Si(r)?(W("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):F.resolve())}Ci(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(Tt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let t=/(?:Version|Mobile)\/1[456]/;Ov()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{let r=((t=this.di)===null||t===void 0?void 0:t.getItem(this.Fi(e)))!==null;return W("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Tt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Tt("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function zl(n){return Wt(n,"owner")}function Cm(n){return Wt(n,"clientMetadata")}function ZE(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var Zb=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=be(),i=be();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Xb=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var tg=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Ov()?8:wR(Au())>0?6:4}()}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ji(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Xb;return this.Ji(e,t,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,t,s,a.size)})}).next(()=>o.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(yc()<=Sr.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",vc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),F.resolve()):(yc()<=Sr.DEBUG&&W("QueryEngine","Query:",vc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(yc()<=Sr.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",vc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Dn(t))):F.resolve())}ji(e,t){if(TO(t))return F.resolve(null);let r=Dn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Bm(t,null,"F"),r=Dn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=be(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.Zi(t,a);return this.Xi(t,l,s,c.readTime)?this.ji(e,Bm(t,null,"F")):this.es(e,l,t,c)}))})))}Hi(e,t,r,i){return TO(t)||i.isEqual(fe.min())?F.resolve(null):this.zi.getDocuments(e,r).next(o=>{let s=this.Zi(t,o);return this.Xi(t,s,r,i)?F.resolve(null):(yc()<=Sr.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),vc(t)),this.es(e,s,t,yR(i,-1)).next(a=>a))})}Zi(e,t){let r=new Xe(jR(e));return t.forEach((i,o)=>{bd(e,o)&&(r=r.add(o))}),r}Xi(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,t,r){return yc()<=Sr.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",vc(t)),this.zi.getDocumentsMatchingQuery(e,t,ar.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Jb=class{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new at(we),this.rs=new Qr(o=>zs(o),wd),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Xm(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}};function wN(n,e,t,r){return new Jb(n,e,t,r)}function CN(n,e){return V(this,null,function*(){let t=ne(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=be();for(let l of i){s.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of o){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(l=>({us:l,removedBatchIds:s,addedBatchIds:a}))})})})}function aq(n,e){let t=ne(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let f=l.batch,p=f.keys(),g=F.resolve();return p.forEach(y=>{g=g.next(()=>d.getEntry(c,y)).next(b=>{let C=l.docVersions.get(y);le(C!==null),b.version.compareTo(C)<0&&(f.applyToRemoteDocument(b,l),b.isValidDocument()&&(b.setReadTime(l.commitVersion),d.addEntry(b)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=be();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function bN(n){let e=ne(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function cq(n,e){let t=ne(n),r=e.snapshotVersion,i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;let a=[];e.targetChanges.forEach((d,f)=>{let p=i.get(f);if(!p)return;a.push(t.Qr.removeMatchingKeys(o,d.removedDocuments,f).next(()=>t.Qr.addMatchingKeys(o,d.addedDocuments,f)));let g=p.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(Gt.EMPTY_BYTE_STRING,fe.min()).withLastLimboFreeSnapshotVersion(fe.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),i=i.insert(f,g),function(b,C,S){return b.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(p,g,d)&&a.push(t.Qr.updateTargetData(o,g))});let c=kn(),l=be();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(EN(o,s,e.documentUpdates).next(d=>{c=d.cs,l=d.ls})),!r.isEqual(fe.min())){let d=t.Qr.getLastRemoteSnapshotVersion(o).next(f=>t.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return F.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.ns=i,o))}function EN(n,e,t){let r=be(),i=be();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=kn();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(fe.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):W("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:s,ls:i}})}function uq(n,e){let t=ne(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function kc(n,e){let t=ne(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(o=>o?(i=o,F.resolve(i)):t.Qr.allocateTargetId(r).next(s=>(i=new Rc(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}function Fc(n,e,t){return V(this,null,function*(){let r=ne(n),i=r.ns.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Lo(s))throw s;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function ng(n,e,t){let r=ne(n),i=fe.min(),o=be();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,d){let f=ne(c),p=f.rs.get(d);return p!==void 0?F.resolve(f.ns.get(p)):f.Qr.getTargetData(l,d)}(r,s,Dn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ts.getDocumentsMatchingQuery(s,e,t?i:fe.min(),t?o:be())).next(a=>(DN(r,LR(e),a),{documents:a,hs:o})))}function IN(n,e){let t=ne(n),r=ne(t.Qr),i=t.ns.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function xN(n,e){let t=ne(n),r=t.ss.get(e)||fe.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.os.getAllFromCollectionGroup(i,e,yR(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(DN(t,e,i),i))}function DN(n,e,t){let r=n.ss.get(e)||fe.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.ss.set(e,r)}function lq(n,e,t,r){return V(this,null,function*(){let i=ne(n),o=be(),s=kn();for(let l of t){let d=e.Ps(l.metadata.name);l.document&&(o=o.add(d));let f=e.Is(l);f.setReadTime(e.Ts(l.metadata.readTime)),s=s.insert(d,f)}let a=i.os.newChangeBuffer({trackRemovals:!0}),c=yield kc(i,function(d){return Dn(qc(Be.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>EN(l,a,s).next(d=>(a.apply(l),d)).next(d=>i.Qr.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Qr.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,d.cs,d.ls)).next(()=>d.cs)))})}function dq(r,i){return V(this,arguments,function*(n,e,t=be()){let o=yield kc(n,Dn(QE(e.bundledQuery))),s=ne(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=At(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.$r.saveNamedQuery(a,e);let l=o.withResumeToken(Gt.EMPTY_BYTE_STRING,c);return s.ns=s.ns.insert(l.targetId,l),s.Qr.updateTargetData(a,l).next(()=>s.Qr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Qr.addMatchingKeys(a,t,o.targetId)).next(()=>s.$r.saveNamedQuery(a,e))})})}function nR(n,e){return`firestore_clients_${n}_${e}`}function rR(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function UC(n,e){return`firestore_targets_${n}_${e}`}var rg=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Es(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new G(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(Tt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Ql=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Es(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new G(r.error.code,r.error.message))),o?new n(e,r.state,i):(Tt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},ig=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=WE();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=CR(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(Tt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},eE=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(Tt("SharedClientState",`Failed to parse online state: ${e}`),null)}},fd=class{constructor(){this.activeTargetIds=WE()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Yl=class{constructor(e,t,r,i,o){this.window=e,this.oi=t,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new at(we),this.started=!1,this.ys=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=nR(this.persistenceKey,this.Vs),this.Ss=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new fd),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return V(this,null,function*(){let e=yield this.syncEngine.Bi();for(let r of e){if(r===this.Vs)continue;let i=this.getItem(nR(this.persistenceKey,r));if(i){let o=ig.Es(r,i);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();let t=this.storage.getItem(this.vs);if(t){let r=this.xs(t);r&&this.Os(r)}for(let r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,r){this.Ls(e,t,r),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(UC(this.persistenceKey,e));if(r){let i=Ql.Es(e,r);i&&(t=i.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(UC(this.persistenceKey,e))}updateQueryState(e,t,r){this.qs(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return W("SharedClientState","READ",e,t),t}setItem(e,t){W("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){W("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let t=e;if(t.storageArea===this.storage){if(W("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void Tt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>V(this,null,function*(){if(this.started){if(t.key!==null){if(this.bs.test(t.key)){if(t.newValue==null){let r=this.$s(t.key);return this.Us(r,null)}{let r=this.Ws(t.key,t.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(t.key)){if(t.newValue!==null){let r=this.Gs(t.key,t.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(t.key)){if(t.newValue!==null){let r=this.js(t.key,t.newValue);if(r)return this.Hs(r)}}else if(t.key===this.vs){if(t.newValue!==null){let r=this.xs(t.newValue);if(r)return this.Os(r)}}else if(t.key===this.Ss){let r=function(o){let s=zn.oe;if(o!=null)try{let a=JSON.parse(o);le(typeof a=="number"),s=a}catch(a){Tt("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==zn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Fs){let r=this.Js(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,r){let i=new rg(this.currentUser,e,t,r),o=rR(this.persistenceKey,this.currentUser,e);this.setItem(o,i.ds())}Bs(e){let t=rR(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){let t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,r){let i=UC(this.persistenceKey,e),o=new Ql(e,t,r);this.setItem(i,o.ds())}Ks(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){let t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){let r=this.$s(e);return ig.Es(r,t)}Gs(e,t){let r=this.Ds.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return rg.Es(new Vt(o),i,t)}js(e,t){let r=this.Cs.exec(e),i=Number(r[1]);return Ql.Es(i,t)}xs(e){return eE.Es(e)}Js(e){return JSON.parse(e)}zs(e){return V(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);W("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){let r=t?this.ps.insert(e,t):this.ps.remove(e),i=this.Ns(this.ps),o=this.Ns(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.eo(s,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=WE();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},og=class{constructor(){this.no=new fd,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new fd,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var tE=class{io(e){}shutdown(){}};var sg=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var bm=null;function $C(){return bm===null?bm=function(){return 268435456+Math.round(2147483648*Math.random())}():bm++,"0x"+bm.toString(16)}var fq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var nE=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var fn="WebChannelConnection",rE=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+t.host,this.So=`projects/${i}/databases/${o}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Do(){return!1}Co(t,r,i,o,s){let a=$C(),c=this.vo(t,r.toUriEncodedString());W("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,o,s),this.Mo(t,c,l,i).then(d=>(W("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw sr("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}xo(t,r,i,o,s,a){return this.Co(t,r,i,o,s)}Fo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+zc}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}vo(t,r){let i=fq[t];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,r,i){let o=$C();return new Promise((s,a)=>{let c=new RC;c.setWithCredentials(!0),c.listenOnce(kC.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case jl.NO_ERROR:let d=c.getResponseJson();W(fn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case jl.TIMEOUT:W(fn,`RPC '${e}' ${o} timed out`),a(new G(j.DEADLINE_EXCEEDED,"Request time out"));break;case jl.HTTP_ERROR:let f=c.getStatus();if(W(fn,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);let g=p?.error;if(g&&g.status&&g.message){let y=function(C){let S=C.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(S)>=0?S:j.UNKNOWN}(g.status);a(new G(y,g.message))}else a(new G(j.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new G(j.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{W(fn,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);W(fn,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",l,r,15)})}Oo(e,t,r){let i=$C(),o=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=LC(),a=VC(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.xmlHttpFactory=new NC({})),this.Fo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=o.join("");W(fn,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=s.createWebChannel(d,c),p=!1,g=!1,y=new nE({lo:C=>{g?W(fn,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(p||(W(fn,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),W(fn,`RPC '${e}' stream ${i} sending:`,C),f.send(C))},ho:()=>f.close()}),b=(C,S,k)=>{C.listen(S,P=>{try{k(P)}catch(B){setTimeout(()=>{throw B},0)}})};return b(f,fc.EventType.OPEN,()=>{g||(W(fn,`RPC '${e}' stream ${i} transport opened.`),y.mo())}),b(f,fc.EventType.CLOSE,()=>{g||(g=!0,W(fn,`RPC '${e}' stream ${i} transport closed`),y.po())}),b(f,fc.EventType.ERROR,C=>{g||(g=!0,sr(fn,`RPC '${e}' stream ${i} transport errored:`,C),y.po(new G(j.UNAVAILABLE,"The operation could not be completed")))}),b(f,fc.EventType.MESSAGE,C=>{var S;if(!g){let k=C.data[0];le(!!k);let P=k,B=P.error||((S=P[0])===null||S===void 0?void 0:S.error);if(B){W(fn,`RPC '${e}' stream ${i} received error:`,B);let q=B.status,z=function(w){let D=kt[w];if(D!==void 0)return JR(D)}(q),I=B.message;z===void 0&&(z=j.INTERNAL,I="Unknown error status: "+q+" with message "+B.message),g=!0,y.po(new G(z,I)),f.close()}else W(fn,`RPC '${e}' stream ${i} received:`,k),y.yo(k)}}),b(a,FC.STAT_EVENT,C=>{C.stat===vm.PROXY?W(fn,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===vm.NOPROXY&&W(fn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.fo()},0),y}};function MN(){return typeof window<"u"?window:null}function Mm(){return typeof document<"u"?document:null}function Ed(n){return new wb(n,!0)}var hd=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=t,this.No=r,this.Lo=i,this.Bo=o,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let t=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,t-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var ag=class{constructor(e,t,r,i,o,s,a,c){this.oi=e,this.Go=r,this.zo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new hd(e,t)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return V(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return V(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,t){return V(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():t&&t.code===j.RESOURCE_EXHAUSTED?(Tt(t.toString()),Tt("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):t&&t.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(t)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===t&&this.u_(r,i)},r=>{e(()=>{let i=new G(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,t){let r=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(()=>V(this,null,function*(){this.state=0,this.start()}))}c_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget(()=>this.jo===e?t():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},iE=class extends ag{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();let t=Y8(this.serializer,e),r=function(o){if(!("targetChange"in o))return fe.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?fe.min():s.readTime?At(s.readTime):fe.min()}(e);return this.listener.h_(t,r)}P_(e){let t={};t.database=Eb(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=Lm(c)?{documents:aN(o,c)}:{query:cN(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=tN(o,s.resumeToken);let l=Cb(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(fe.min())>0){a.readTime=Oc(o,s.snapshotVersion.toTimestamp());let l=Cb(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=X8(this.serializer,e);r&&(t.labels=r),this.i_(t)}I_(e){let t={};t.database=Eb(this.serializer),t.removeTarget=e,this.i_(t)}},oE=class extends ag{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let t=Z8(e.writeResults,e.commitTime),r=At(e.commitTime);return this.listener.A_(r,t)}return le(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=Eb(this.serializer),this.i_(e)}d_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>ud(this.serializer,r))};this.i_(t)}};var sE=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new G(j.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Co(e,bb(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(j.UNKNOWN,o.toString())})}xo(e,t,r,i,o){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.xo(e,bb(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(j.UNKNOWN,s.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},aE=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Tt(t),this.y_=!1):W("OnlineStateTracker",t)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var cE=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=o,this.O_.io(s=>{r.enqueueAndForget(()=>V(this,null,function*(){jo(this)&&(W("RemoteStore","Restarting streams for network reachability change."),yield function(c){return V(this,null,function*(){let l=ne(c);l.M_.add(4),yield Hc(l),l.N_.set("Unknown"),l.M_.delete(4),yield Id(l)})}(this))}))}),this.N_=new aE(r,i)}};function Id(n){return V(this,null,function*(){if(jo(n))for(let e of n.x_)yield e(!0)})}function Hc(n){return V(this,null,function*(){for(let e of n.x_)yield e(!1)})}function Dg(n,e){let t=ne(n);t.F_.has(e.targetId)||(t.F_.set(e.targetId,e),eI(t)?JE(t):Wc(t).Xo()&&XE(t,e))}function Vc(n,e){let t=ne(n),r=Wc(t);t.F_.delete(e),r.Xo()&&TN(t,e),t.F_.size===0&&(r.Xo()?r.n_():jo(t)&&t.N_.set("Unknown"))}function XE(n,e){if(n.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fe.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Wc(n).P_(e)}function TN(n,e){n.L_.xe(e),Wc(n).I_(e)}function JE(n){n.L_=new _b({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.F_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Wc(n).start(),n.N_.w_()}function eI(n){return jo(n)&&!Wc(n).Zo()&&n.F_.size>0}function jo(n){return ne(n).M_.size===0}function SN(n){n.L_=void 0}function hq(n){return V(this,null,function*(){n.N_.set("Online")})}function pq(n){return V(this,null,function*(){n.F_.forEach((e,t)=>{XE(n,e)})})}function mq(n,e){return V(this,null,function*(){SN(n),eI(n)?(n.N_.D_(e),JE(n)):n.N_.set("Unknown")})}function gq(n,e,t){return V(this,null,function*(){if(n.N_.set("Online"),e instanceof $m&&e.state===2&&e.cause)try{yield function(i,o){return V(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.F_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.F_.delete(a),i.L_.removeTarget(a))})}(n,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield cg(n,r)}else if(e instanceof xc?n.L_.Ke(e):e instanceof Um?n.L_.He(e):n.L_.We(e),!t.isEqual(fe.min()))try{let r=yield bN(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.L_.rt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=o.F_.get(l);d&&o.F_.set(l,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let d=o.F_.get(c);if(!d)return;o.F_.set(c,d.withResumeToken(Gt.EMPTY_BYTE_STRING,d.snapshotVersion)),TN(o,c);let f=new Rc(d.target,c,l,d.sequenceNumber);XE(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){W("RemoteStore","Failed to raise snapshot:",r),yield cg(n,r)}})}function cg(n,e,t){return V(this,null,function*(){if(!Lo(e))throw e;n.M_.add(1),yield Hc(n),n.N_.set("Offline"),t||(t=()=>bN(n.localStore)),n.asyncQueue.enqueueRetryable(()=>V(this,null,function*(){W("RemoteStore","Retrying IndexedDB access"),yield t(),n.M_.delete(1),yield Id(n)}))})}function AN(n,e){return e().catch(t=>cg(n,t,e))}function Gc(n){return V(this,null,function*(){let e=ne(n),t=Fo(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;yq(e);)try{let i=yield uq(e.localStore,r);if(i===null){e.v_.length===0&&t.n_();break}r=i.batchId,vq(e,i)}catch(i){yield cg(e,i)}PN(e)&&ON(e)})}function yq(n){return jo(n)&&n.v_.length<10}function vq(n,e){n.v_.push(e);let t=Fo(n);t.Xo()&&t.E_&&t.d_(e.mutations)}function PN(n){return jo(n)&&!Fo(n).Zo()&&n.v_.length>0}function ON(n){Fo(n).start()}function _q(n){return V(this,null,function*(){Fo(n).V_()})}function wq(n){return V(this,null,function*(){let e=Fo(n);for(let t of n.v_)e.d_(t.mutations)})}function Cq(n,e,t){return V(this,null,function*(){let r=n.v_.shift(),i=gb.from(r,e,t);yield AN(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Gc(n)})}function bq(n,e){return V(this,null,function*(){e&&Fo(n).E_&&(yield function(r,i){return V(this,null,function*(){if(function(s){return XR(s)&&s!==j.ABORTED}(i.code)){let o=r.v_.shift();Fo(r).t_(),yield AN(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Gc(r)}})}(n,e)),PN(n)&&ON(n)})}function iR(n,e){return V(this,null,function*(){let t=ne(n);t.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");let r=jo(t);t.M_.add(3),yield Hc(t),r&&t.N_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),yield Id(t)})}function uE(n,e){return V(this,null,function*(){let t=ne(n);e?(t.M_.delete(2),yield Id(t)):e||(t.M_.add(2),yield Hc(t),t.N_.set("Unknown"))})}function Wc(n){return n.B_||(n.B_=function(t,r,i){let o=ne(t);return o.f_(),new iE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Po:hq.bind(null,n),To:pq.bind(null,n),Ao:mq.bind(null,n),h_:gq.bind(null,n)}),n.x_.push(e=>V(this,null,function*(){e?(n.B_.t_(),eI(n)?JE(n):n.N_.set("Unknown")):(yield n.B_.stop(),SN(n))}))),n.B_}function Fo(n){return n.k_||(n.k_=function(t,r,i){let o=ne(t);return o.f_(),new oE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:_q.bind(null,n),Ao:bq.bind(null,n),R_:wq.bind(null,n),A_:Cq.bind(null,n)}),n.x_.push(e=>V(this,null,function*(){e?(n.k_.t_(),yield Gc(n)):(yield n.k_.stop(),n.v_.length>0&&(W("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))}))),n.k_}var lE=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Lt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Kc(n,e){if(Tt("AsyncQueue",`${e}: ${n}`),Lo(n))return new G(j.UNAVAILABLE,`${e}: ${n}`);throw n}var ug=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||te.comparator(t.key,r.key):(t,r)=>te.comparator(t.key,r.key),this.keyedMap=ql(),this.sortedSet=new at(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var lg=class{constructor(){this.q_=new at(te.comparator)}track(e){let t=e.doc.key,r=this.q_.get(t);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(t,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(t):e.type===1&&r.type===2?this.q_=this.q_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):ie():this.q_=this.q_.insert(t,e)}Q_(){let e=[];return this.q_.inorderTraversal((t,r)=>{e.push(r)}),e}},Lc=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,ug.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var dE=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},fE=class{constructor(){this.queries=new Qr(e=>VR(e),Cd),this.onlineState="Unknown",this.z_=new Set}};function tI(n,e){return V(this,null,function*(){let t=ne(n),r=3,i=e.query,o=t.queries.get(i);o?!o.W_()&&e.G_()&&(r=2):(o=new dE,r=e.G_()?0:1);try{switch(r){case 0:o.K_=yield t.onListen(i,!0);break;case 1:o.K_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Kc(s,`Initialization of query '${vc(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.U_.push(e),e.j_(t.onlineState),o.K_&&e.H_(o.K_)&&rI(t)})}function nI(n,e){return V(this,null,function*(){let t=ne(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.U_.indexOf(e);s>=0&&(o.U_.splice(s,1),o.U_.length===0?i=e.G_()?0:1:!o.W_()&&e.G_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function Eq(n,e){let t=ne(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.U_)a.H_(i)&&(r=!0);s.K_=i}}r&&rI(t)}function Iq(n,e,t){let r=ne(n),i=r.queries.get(e);if(i)for(let o of i.U_)o.onError(t);r.queries.delete(e)}function rI(n){n.z_.forEach(e=>{e.next()})}var hE,oR;(oR=hE||(hE={})).J_="default",oR.Cache="cache";var pd=class{constructor(e,t,r){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Lc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache||!this.G_())return!0;let r=t!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}na(e){e=Lc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==hE.Cache}};var pE=class{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}};var dg=class{constructor(e){this.serializer=e}Ps(e){return Hr(this.serializer,e)}Is(e){return e.metadata.exists?sN(this.serializer,e.document,!1):jt.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return At(e)}},mE=class{constructor(e,t,r){this.oa=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=RN(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;let r=Be.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){let t=new Map,r=new dg(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Ps(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||be()).add(o);t.set(s,a)}}return t}complete(){return V(this,null,function*(){let e=yield lq(this.localStore,new dg(this.serializer),this.documents,this.oa.id),t=this.aa(this.documents);for(let r of this.queries)yield dq(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}})}};function RN(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var fg=class{constructor(e){this.key=e}},hg=class{constructor(e){this.key=e}},pg=class{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=be(),this.mutatedKeys=be(),this.Ia=jR(e),this.Ta=new ug(this.Ia)}get Ea(){return this.la}da(e,t){let r=t?t.Aa:new lg,i=t?t.Ta:this.Ta,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let p=i.get(d),g=bd(this.query,f)?f:null,y=!!p&&this.mutatedKeys.has(p.key),b=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations),C=!1;p&&g?p.data.isEqual(g.data)?y!==b&&(r.track({type:3,doc:g}),C=!0):this.Ra(p,g)||(r.track({type:2,doc:g}),C=!0,(c&&this.Ia(g,c)>0||l&&this.Ia(g,l)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),C=!0):p&&!g&&(r.track({type:1,doc:p}),C=!0,(c||l)&&(a=!0)),C&&(g?(s=s.add(g),o=b?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{Ta:s,Aa:r,Xi:a,mutatedKeys:o}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let s=e.Aa.Q_();s.sort((d,f)=>function(g,y){let b=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie()}};return b(g)-b(y)}(d.type,f.type)||this.Ia(d.doc,f.doc)),this.Va(r),i=i!=null&&i;let a=t&&!i?this.ma():[],c=this.Pa.size===0&&this.current&&!i?1:0,l=c!==this.ha;return this.ha=c,s.length!==0||l?{snapshot:new Lc(this.query,e.Ta,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new lg,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(t=>this.la=this.la.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.la=this.la.delete(t)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=be(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});let t=[];return e.forEach(r=>{this.Pa.has(r)||t.push(new hg(r))}),this.Pa.forEach(r=>{e.has(r)||t.push(new fg(r))}),t}pa(e){this.la=e.hs,this.Pa=be();let t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return Lc.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},gE=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},yE=class{constructor(e){this.key=e,this.wa=!1}},vE=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new Qr(a=>VR(a),Cd),this.Da=new Map,this.Ca=new Set,this.va=new at(te.comparator),this.Fa=new Map,this.Ma=new dd,this.xa={},this.Oa=new Map,this.Na=Nc.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function xq(n,e,t=!0){return V(this,null,function*(){let r=Mg(n),i,o=r.ba.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ya()):i=yield NN(r,e,t,!0),i})}function Dq(n,e){return V(this,null,function*(){let t=Mg(n);yield NN(t,e,!0,!1)})}function NN(n,e,t,r){return V(this,null,function*(){let i=yield kc(n.localStore,Dn(e)),o=i.targetId,s=t?n.sharedClientState.addLocalQueryTarget(o):"not-current",a;return r&&(a=yield iI(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Dg(n.remoteStore,i),a})}function iI(n,e,t,r,i){return V(this,null,function*(){n.Ba=(f,p,g)=>function(b,C,S,k){return V(this,null,function*(){let P=C.view.da(S);P.Xi&&(P=yield ng(b.localStore,C.query,!1).then(({documents:I})=>C.view.da(I,P)));let B=k&&k.targetChanges.get(C.targetId),q=k&&k.targetMismatches.get(C.targetId)!=null,z=C.view.applyChanges(P,b.isPrimaryClient,B,q);return _E(b,C.targetId,z.fa),z.snapshot})}(n,f,p,g);let o=yield ng(n.localStore,e,!0),s=new pg(e,o.hs),a=s.da(o.documents),c=ad.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);_E(n,t,l.fa);let d=new gE(e,t,s);return n.ba.set(e,d),n.Da.has(t)?n.Da.get(t).push(e):n.Da.set(t,[e]),l.snapshot})}function Mq(n,e,t){return V(this,null,function*(){let r=ne(n),i=r.ba.get(e),o=r.Da.get(i.targetId);if(o.length>1)return r.Da.set(i.targetId,o.filter(s=>!Cd(s,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Fc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Vc(r.remoteStore,i.targetId),jc(r,i.targetId)}).catch(Vo))):(jc(r,i.targetId),yield Fc(r.localStore,i.targetId,!0))})}function Tq(n,e){return V(this,null,function*(){let t=ne(n),r=t.ba.get(e),i=t.Da.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Vc(t.remoteStore,r.targetId))})}function Sq(n,e,t){return V(this,null,function*(){let r=cI(n);try{let i=yield function(s,a){let c=ne(s),l=gt.now(),d=a.reduce((g,y)=>g.add(y.key),be()),f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let y=kn(),b=be();return c.os.getEntries(g,d).next(C=>{y=C,y.forEach((S,k)=>{k.isValidDocument()||(b=b.add(S))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,y)).next(C=>{f=C;let S=[];for(let k of a){let P=z8(k,f.get(k.key).overlayedDocument);P!=null&&S.push(new Er(k.key,P,AR(P.value.mapValue),Et.exists(!0)))}return c.mutationQueue.addMutationBatch(g,l,S,a)}).next(C=>{p=C;let S=C.applyToLocalDocumentSet(f,b);return c.documentOverlayCache.saveOverlays(g,C.batchId,S)})}).then(()=>({batchId:p.batchId,changes:UR(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.xa[s.currentUser.toKey()];l||(l=new at(we)),l=l.insert(a,c),s.xa[s.currentUser.toKey()]=l}(r,i.batchId,t),yield Fi(r,i.changes),yield Gc(r.remoteStore)}catch(i){let o=Kc(i,"Failed to persist write");t.reject(o)}})}function kN(n,e){return V(this,null,function*(){let t=ne(n);try{let r=yield cq(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Fa.get(o);s&&(le(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.wa=!0:i.modifiedDocuments.size>0?le(s.wa):i.removedDocuments.size>0&&(le(s.wa),s.wa=!1))}),yield Fi(t,r,e)}catch(r){yield Vo(r)}})}function sR(n,e,t){let r=ne(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.ba.forEach((o,s)=>{let a=s.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=ne(s);c.onlineState=a;let l=!1;c.queries.forEach((d,f)=>{for(let p of f.U_)p.j_(a)&&(l=!0)}),l&&rI(c)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Aq(n,e,t){return V(this,null,function*(){let r=ne(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Fa.get(e),o=i&&i.key;if(o){let s=new at(te.comparator);s=s.insert(o,jt.newNoDocument(o,fe.min()));let a=be().add(o),c=new sd(fe.min(),new Map,new at(we),s,a);yield kN(r,c),r.va=r.va.remove(o),r.Fa.delete(e),aI(r)}else yield Fc(r.localStore,e,!1).then(()=>jc(r,e,t)).catch(Vo)})}function Pq(n,e){return V(this,null,function*(){let t=ne(n),r=e.batch.batchId;try{let i=yield aq(t.localStore,e);sI(t,r,null),oI(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Fi(t,i)}catch(i){yield Vo(i)}})}function Oq(n,e,t){return V(this,null,function*(){let r=ne(n);try{let i=yield function(s,a){let c=ne(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(f=>(le(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(l,f))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(r.localStore,e);sI(r,e,t),oI(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Fi(r,i)}catch(i){yield Vo(i)}})}function Rq(n,e){return V(this,null,function*(){let t=ne(n);jo(t.remoteStore)||W("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=ne(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===-1)return void e.resolve();let i=t.Oa.get(r)||[];i.push(e),t.Oa.set(r,i)}catch(r){let i=Kc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function oI(n,e){(n.Oa.get(e)||[]).forEach(t=>{t.resolve()}),n.Oa.delete(e)}function sI(n,e,t){let r=ne(n),i=r.xa[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function jc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Da.get(e))n.ba.delete(r),t&&n.Sa.ka(r,t);n.Da.delete(e),n.isPrimaryClient&&n.Ma.Vr(e).forEach(r=>{n.Ma.containsKey(r)||FN(n,r)})}function FN(n,e){n.Ca.delete(e.path.canonicalString());let t=n.va.get(e);t!==null&&(Vc(n.remoteStore,t),n.va=n.va.remove(e),n.Fa.delete(t),aI(n))}function _E(n,e,t){for(let r of t)r instanceof fg?(n.Ma.addReference(r.key,e),Nq(n,r)):r instanceof hg?(W("SyncEngine","Document no longer in limbo: "+r.key),n.Ma.removeReference(r.key,e),n.Ma.containsKey(r.key)||FN(n,r.key)):ie()}function Nq(n,e){let t=e.key,r=t.path.canonicalString();n.va.get(t)||n.Ca.has(r)||(W("SyncEngine","New document in limbo: "+t),n.Ca.add(r),aI(n))}function aI(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){let e=n.Ca.values().next().value;n.Ca.delete(e);let t=new te(Be.fromString(e)),r=n.Na.next();n.Fa.set(r,new yE(t)),n.va=n.va.insert(t,r),Dg(n.remoteStore,new Rc(Dn(qc(t.path)),r,"TargetPurposeLimboResolution",zn.oe))}}function Fi(n,e,t){return V(this,null,function*(){let r=ne(n),i=[],o=[],s=[];r.ba.isEmpty()||(r.ba.forEach((a,c)=>{s.push(r.Ba(c,e,t).then(l=>{if((l||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,l?.fromCache?"not-current":"current"),l){i.push(l);let d=Zb.Ki(c.targetId,l);o.push(d)}}))}),yield Promise.all(s),r.Sa.h_(i),yield function(c,l){return V(this,null,function*(){let d=ne(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>F.forEach(l,p=>F.forEach(p.qi,g=>d.persistence.referenceDelegate.addReference(f,p.targetId,g)).next(()=>F.forEach(p.Qi,g=>d.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))}catch(f){if(!Lo(f))throw f;W("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let p=f.targetId;if(!f.fromCache){let g=d.ns.get(p),y=g.snapshotVersion,b=g.withLastLimboFreeSnapshotVersion(y);d.ns=d.ns.insert(p,b)}}})}(r.localStore,o))})}function kq(n,e){return V(this,null,function*(){let t=ne(n);if(!t.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());let r=yield CN(t.localStore,e);t.currentUser=e,function(o,s){o.Oa.forEach(a=>{a.forEach(c=>{c.reject(new G(j.CANCELLED,s))})}),o.Oa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Fi(t,r.us)}})}function Fq(n,e){let t=ne(n),r=t.Fa.get(e);if(r&&r.wa)return be().add(r.key);{let i=be(),o=t.Da.get(e);if(!o)return i;for(let s of o){let a=t.ba.get(s);i=i.unionWith(a.view.Ea)}return i}}function Vq(n,e){return V(this,null,function*(){let t=ne(n),r=yield ng(t.localStore,e.query,!0),i=e.view.pa(r);return t.isPrimaryClient&&_E(t,e.targetId,i.fa),i})}function Lq(n,e){return V(this,null,function*(){let t=ne(n);return xN(t.localStore,e).then(r=>Fi(t,r))})}function jq(n,e,t,r){return V(this,null,function*(){let i=ne(n),o=yield function(a,c){let l=ne(a),d=ne(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.vn(f,c).next(p=>p?l.localDocuments.getDocuments(f,p):F.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield Gc(i.remoteStore):t==="acknowledged"||t==="rejected"?(sI(i,e,r||null),oI(i,e),function(a,c){ne(ne(a).mutationQueue).Mn(c)}(i.localStore,e)):ie(),yield Fi(i,o)):W("SyncEngine","Cannot apply mutation batch with id: "+e)})}function Bq(n,e){return V(this,null,function*(){let t=ne(n);if(Mg(t),cI(t),e===!0&&t.La!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield aR(t,r.toArray());t.La=!0,yield uE(t.remoteStore,!0);for(let o of i)Dg(t.remoteStore,o)}else if(e===!1&&t.La!==!1){let r=[],i=Promise.resolve();t.Da.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(jc(t,s),Fc(t.localStore,s,!0))),Vc(t.remoteStore,s)}),yield i,yield aR(t,r),function(s){let a=ne(s);a.Fa.forEach((c,l)=>{Vc(a.remoteStore,l)}),a.Ma.mr(),a.Fa=new Map,a.va=new at(te.comparator)}(t),t.La=!1,yield uE(t.remoteStore,!1)}})}function aR(n,e,t){return V(this,null,function*(){let r=ne(n),i=[],o=[];for(let s of e){let a,c=r.Da.get(s);if(c&&c.length!==0){a=yield kc(r.localStore,Dn(c[0]));for(let l of c){let d=r.ba.get(l),f=yield Vq(r,d);f.snapshot&&o.push(f.snapshot)}}else{let l=yield IN(r.localStore,s);a=yield kc(r.localStore,l),yield iI(r,VN(l),s,!1,a.resumeToken)}i.push(a)}return r.Sa.h_(o),i})}function VN(n){return FR(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Uq(n){return function(t){return ne(ne(t).persistence).Bi()}(ne(n).localStore)}function $q(n,e,t,r){return V(this,null,function*(){let i=ne(n);if(i.La)return void W("SyncEngine","Ignoring unexpected query state notification.");let o=i.Da.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield xN(i.localStore,LR(o[0])),a=sd.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Gt.EMPTY_BYTE_STRING);yield Fi(i,s,a);break}case"rejected":yield Fc(i.localStore,e,!0),jc(i,e,r);break;default:ie()}})}function zq(n,e,t){return V(this,null,function*(){let r=Mg(n);if(r.La){for(let i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){W("SyncEngine","Adding an already active target "+i);continue}let o=yield IN(r.localStore,i),s=yield kc(r.localStore,o);yield iI(r,VN(o),s.targetId,!1,s.resumeToken),Dg(r.remoteStore,s)}for(let i of t)r.Da.has(i)&&(yield Fc(r.localStore,i,!1).then(()=>{Vc(r.remoteStore,i),jc(r,i)}).catch(Vo))}})}function Mg(n){let e=ne(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=kN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Fq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Aq.bind(null,e),e.Sa.h_=Eq.bind(null,e.eventManager),e.Sa.ka=Iq.bind(null,e.eventManager),e}function cI(n){let e=ne(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Pq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Oq.bind(null,e),e}function qq(n,e,t){let r=ne(n);(function(o,s,a){return V(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(g,y){let b=ne(g),C=At(y.createTime);return b.persistence.runTransaction("hasNewerBundle","readonly",S=>b.$r.getBundleMetadata(S,y.id)).then(S=>!!S&&S.createTime.compareTo(C)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(g){return{taskState:"Success",documentsLoaded:g.totalDocuments,bytesLoaded:g.totalBytes,totalDocuments:g.totalDocuments,totalBytes:g.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(RN(c));let l=new mE(c,o.localStore,s.serializer),d=yield s.qa();for(;d;){let p=yield l._a(d);p&&a._updateProgress(p),d=yield s.qa()}let f=yield l.complete();return yield Fi(o,f.ca,void 0),yield function(g,y){let b=ne(g);return b.persistence.runTransaction("Save bundle","readwrite",C=>b.$r.saveBundleMetadata(C,y))}(o.localStore,c),a._completeWith(f.progress),Promise.resolve(f.ua)}catch(c){return sr("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var md=class{constructor(){this.synchronizeTabs=!1}initialize(e){return V(this,null,function*(){this.serializer=Ed(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return wN(this.persistence,new tg,e.initialUser,this.serializer)}createPersistence(e){return new Jm(eg.Hr,this.serializer)}createSharedClientState(e){return new og}terminate(){return V(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var mg=class n extends md{constructor(e,t,r){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return V(this,null,function*(){yield Av(n.prototype,this,"initialize").call(this,e),yield this.Qa.initialize(this,e),yield cI(this.Qa.syncEngine),yield Gc(this.Qa.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return wN(this.persistence,new tg,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new Fb(r,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){let r=new eb(t,this.persistence);return new JC(e.asyncQueue,r)}createPersistence(e){let t=ZE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?or.withCacheSize(this.cacheSizeBytes):or.DEFAULT;return new Yb(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,MN(),Mm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new og}},wE=class n extends mg{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return V(this,null,function*(){yield Av(n.prototype,this,"initialize").call(this,e);let t=this.Qa.syncEngine;this.sharedClientState instanceof Yl&&(this.sharedClientState.syncEngine={Zs:jq.bind(null,t),Xs:$q.bind(null,t),eo:zq.bind(null,t),Bi:Uq.bind(null,t),Ys:Lq.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.fi(r=>V(this,null,function*(){yield Bq(this.Qa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let t=MN();if(!Yl.D(t))throw new G(j.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=ZE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Yl(t,e.asyncQueue,r,e.clientId,e.initialUser)}},gd=class{initialize(e,t){return V(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>sR(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=kq.bind(null,this.syncEngine),yield uE(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new fE}()}createDatastore(e){let t=Ed(e.databaseInfo.databaseId),r=function(o){return new rE(o)}(e.databaseInfo);return function(o,s,a,c){return new sE(o,s,a,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,o,s,a){return new cE(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,t=>sR(this.syncEngine,t,0),function(){return sg.D()?new sg:new tE}())}createSyncEngine(e,t){return function(i,o,s,a,c,l,d){let f=new vE(i,o,s,a,c,l);return d&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return V(this,null,function*(){var e;yield function(r){return V(this,null,function*(){let i=ne(r);W("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield Hc(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function cR(n,e=10240){let t=0;return{read(){return V(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return V(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Bc=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Tt("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}};var CE=class{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new Lt,this.buffer=new Uint8Array,this.Wa=function(){return new TextDecoder("utf-8")}(),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}getMetadata(){return V(this,null,function*(){return this.metadata.promise})}qa(){return V(this,null,function*(){return yield this.getMetadata(),this.Ga()})}Ga(){return V(this,null,function*(){let e=yield this.za();if(e===null)return null;let t=this.Wa.decode(e),r=Number(t);isNaN(r)&&this.ja(`length string (${t}) is not valid number`);let i=yield this.Ha(r);return new pE(JSON.parse(i),e.length+r)})}Ja(){return this.buffer.findIndex(e=>e===123)}za(){return V(this,null,function*(){for(;this.Ja()<0&&!(yield this.Ya()););if(this.buffer.length===0)return null;let e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}Ha(e){return V(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ya())&&this.ja("Reached the end of bundle when more is expected.");let t=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){return V(this,null,function*(){let e=yield this.Ua.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var bE=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return V(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new G(j.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return V(this,null,function*(){let s=ne(i),a={documents:o.map(f=>cd(s.serializer,f))},c=yield s.xo("BatchGetDocuments",s.serializer.databaseId,Be.emptyPath(),a,o.length),l=new Map;c.forEach(f=>{let p=Q8(s.serializer,f);l.set(p.key.toString(),p)});let d=[];return o.forEach(f=>{let p=l.get(f.toString());le(!!p),d.push(p)}),d})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ko(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return V(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=te.fromPath(r);this.mutations.push(new rd(i,this.precondition(i)))}),yield function(r,i){return V(this,null,function*(){let o=ne(r),s={writes:i.map(a=>ud(o.serializer,a))};yield o.Co("Commit",o.serializer.databaseId,Be.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ie();t=fe.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new G(j.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(fe.min())?Et.exists(!1):Et.updateTime(t):Et.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(fe.min()))throw new G(j.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Et.updateTime(t)}return Et.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var EE=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Za=r.maxAttempts,this.Yo=new hd(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o(()=>V(this,null,function*(){let e=new bE(this.datastore),t=this.tu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.nu(i)}))}).catch(r=>{this.nu(r)})}))}tu(e){try{let t=this.updateFunction(e);return!_d(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!XR(t)}return!1}};var IE=class{constructor(e,t,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Vt.UNAUTHENTICATED,this.clientId=Am.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>V(this,null,function*(){W("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new G(j.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Lt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>V(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Kc(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Tm(n,e){return V(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>V(this,null,function*(){r.isEqual(i)||(yield CN(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function xE(n,e){return V(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield uI(n);W("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>iR(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>iR(e.remoteStore,i)),n._onlineComponents=e})}function LN(n){return n.name==="FirebaseError"?n.code===j.FAILED_PRECONDITION||n.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function uI(n){return V(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Tm(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!LN(t))throw t;sr("Error using user provided cache. Falling back to memory cache: "+t),yield Tm(n,new md)}}else W("FirestoreClient","Using default OfflineComponentProvider"),yield Tm(n,new md);return n._offlineComponents})}function Tg(n){return V(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),yield xE(n,n._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),yield xE(n,new gd))),n._onlineComponents})}function jN(n){return uI(n).then(e=>e.persistence)}function lI(n){return uI(n).then(e=>e.localStore)}function BN(n){return Tg(n).then(e=>e.remoteStore)}function dI(n){return Tg(n).then(e=>e.syncEngine)}function Hq(n){return Tg(n).then(e=>e.datastore)}function Uc(n){return V(this,null,function*(){let e=yield Tg(n),t=e.eventManager;return t.onListen=xq.bind(null,e.syncEngine),t.onUnlisten=Mq.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Dq.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Tq.bind(null,e.syncEngine),t})}function Gq(n){return n.asyncQueue.enqueue(()=>V(this,null,function*(){let e=yield jN(n),t=yield BN(n);return e.setNetworkEnabled(!0),function(i){let o=ne(i);return o.M_.delete(0),Id(o)}(t)}))}function Wq(n){return n.asyncQueue.enqueue(()=>V(this,null,function*(){let e=yield jN(n),t=yield BN(n);return e.setNetworkEnabled(!1),function(i){return V(this,null,function*(){let o=ne(i);o.M_.add(0),yield Hc(o),o.N_.set("Offline")})}(t)}))}function Kq(n,e){let t=new Lt;return n.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return function(i,o,s){return V(this,null,function*(){try{let a=yield function(l,d){let f=ne(l);return f.persistence.runTransaction("read document","readonly",p=>f.localDocuments.getDocument(p,d))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new G(j.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=Kc(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield lI(n),e,t)})),t.promise}function UN(n,e,t={}){let r=new Lt;return n.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return function(o,s,a,c,l){let d=new Bc({next:p=>{s.enqueueAndForget(()=>nI(o,f));let g=p.docs.has(a);!g&&p.fromCache?l.reject(new G(j.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&c&&c.source==="server"?l.reject(new G(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(p)},error:p=>l.reject(p)}),f=new pd(qc(a.path),d,{includeMetadataChanges:!0,ra:!0});return tI(o,f)}(yield Uc(n),n.asyncQueue,e,t,r)})),r.promise}function Qq(n,e){let t=new Lt;return n.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return function(i,o,s){return V(this,null,function*(){try{let a=yield ng(i,o,!0),c=new pg(o,a.hs),l=c.da(a.documents),d=c.applyChanges(l,!1);s.resolve(d.snapshot)}catch(a){let c=Kc(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield lI(n),e,t)})),t.promise}function $N(n,e,t={}){let r=new Lt;return n.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return function(o,s,a,c,l){let d=new Bc({next:p=>{s.enqueueAndForget(()=>nI(o,f)),p.fromCache&&c.source==="server"?l.reject(new G(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(p)},error:p=>l.reject(p)}),f=new pd(a,d,{includeMetadataChanges:!0,ra:!0});return tI(o,f)}(yield Uc(n),n.asyncQueue,e,t,r)})),r.promise}function Yq(n,e){let t=new Bc(e);return n.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return function(i,o){ne(i).z_.add(o),o.next()}(yield Uc(n),t)})),()=>{t.$a(),n.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return function(i,o){ne(i).z_.delete(o)}(yield Uc(n),t)}))}}function Zq(n,e,t,r){let i=function(s,a){let c;return c=typeof s=="string"?eN().encode(s):s,function(d,f){return new CE(d,f)}(function(d,f){if(d instanceof Uint8Array)return cR(d,f);if(d instanceof ArrayBuffer)return cR(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,Ed(e));n.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){qq(yield dI(n),i,r)}))}function Xq(n,e){return n.asyncQueue.enqueue(()=>V(this,null,function*(){return function(r,i){let o=ne(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,i))}(yield lI(n),e)}))}function zN(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var uR=new Map;function fI(n,e,t){if(!t)throw new G(j.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function hI(n,e,t,r){if(e===!0&&r===!0)throw new G(j.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function lR(n){if(!te.isDocumentKey(n))throw new G(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function dR(n){if(te.isDocumentKey(n))throw new G(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Sg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ie()}function Ue(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new G(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Sg(n);throw new G(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function qN(n,e){if(e<=0)throw new G(j.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var gg=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new G(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new G(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new G(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ws=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new G(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new G(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gg(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new zC;switch(r.type){case"firstParty":return new WC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=uR.get(t);r&&(W("ComponentProvider","Removing Datastore"),uR.delete(t),r.terminate())}(this),Promise.resolve()}};function HN(n,e,t,r={}){var i;let o=(n=Ue(n,Ws))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&sr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Vt.MOCK_USER;else{a=XD(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new G(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Vt(l)}n._authCredentials=new qC(new Sm(a,c))}}var en=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},nt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Gr=class n extends en{constructor(e,t,r){super(e,t,qc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new nt(this.firestore,null,new te(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function pI(n,e,...t){if(n=ht(n),fI("collection","path",e),n instanceof Ws){let r=Be.fromString(e,...t);return dR(r),new Gr(n,null,r)}{if(!(n instanceof nt||n instanceof Gr))throw new G(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Be.fromString(e,...t));return dR(r),new Gr(n.firestore,null,r)}}function GN(n,e){if(n=Ue(n,Ws),fI("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new G(j.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new en(n,null,function(r){return new br(Be.emptyPath(),r)}(e))}function xd(n,e,...t){if(n=ht(n),arguments.length===1&&(e=Am.newId()),fI("doc","path",e),n instanceof Ws){let r=Be.fromString(e,...t);return lR(r),new nt(n,null,new te(r))}{if(!(n instanceof nt||n instanceof Gr))throw new G(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Be.fromString(e,...t));return lR(r),new nt(n.firestore,n instanceof Gr?n.converter:null,new te(r))}}function mI(n,e){return n=ht(n),e=ht(e),(n instanceof nt||n instanceof Gr)&&(e instanceof nt||e instanceof Gr)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function gI(n,e){return n=ht(n),e=ht(e),n instanceof en&&e instanceof en&&n.firestore===e.firestore&&Cd(n._query,e._query)&&n.converter===e.converter}var DE=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new hd(this,"async_queue_retry"),this.hu=()=>{let t=Mm();t&&W("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};let e=Mm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let t=Mm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let t=new Lt;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return V(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!Lo(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let t=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Tt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=t,t}enqueueAfterDelay(e,t,r){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);let i=lE.createAndSchedule(this,e,t,r,o=>this.Eu(o));return this._u.push(i),i}Pu(){this.au&&ie()}verifyOperationInProgress(){}du(){return V(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this._u)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let t=this._u.indexOf(e);this._u.splice(t,1)}};function ME(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var TE=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Lt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var WN=-1,ft=class extends Ws{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=function(){return new DE}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||KN(this),this._firestoreClient.terminate()}};function $t(n){return n._firestoreClient||KN(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function KN(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,l,d){return new tb(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,zN(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._firestoreClient=new IE(n._authCredentials,n._appCheckCredentials,n._queue,o),!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function QN(n,e){ik(n=Ue(n,ft));let t=$t(n);if(t._uninitializedComponentsProvider)throw new G(j.FAILED_PRECONDITION,"SDK cache is already specified.");sr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=n._freezeSettings(),i=new gd;return ZN(t,i,new mg(i,r.cacheSizeBytes,e?.forceOwnership))}function YN(n){ik(n=Ue(n,ft));let e=$t(n);if(e._uninitializedComponentsProvider)throw new G(j.FAILED_PRECONDITION,"SDK cache is already specified.");sr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings(),r=new gd;return ZN(e,r,new wE(r,t.cacheSizeBytes))}function ZN(n,e,t){let r=new Lt;return n.asyncQueue.enqueue(()=>V(this,null,function*(){try{yield Tm(n,t),yield xE(n,e),r.resolve()}catch(i){let o=i;if(!LN(o))throw o;sr("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function XN(n){if(n._initialized&&!n._terminated)throw new G(j.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Lt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>V(this,null,function*(){try{yield function(r){return V(this,null,function*(){if(!To.D())return Promise.resolve();let i=r+"main";yield To.delete(i)})}(ZE(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function JN(n){return function(t){let r=new Lt;return t.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return Rq(yield dI(t),r)})),r.promise}($t(n=Ue(n,ft)))}function ek(n){return Gq($t(n=Ue(n,ft)))}function tk(n){return Wq($t(n=Ue(n,ft)))}function nk(n,e){let t=$t(n=Ue(n,ft)),r=new TE;return Zq(t,n._databaseId,e,r),r}function rk(n,e){return Xq($t(n=Ue(n,ft)),e).then(t=>t?new en(n,null,t.query):null)}function ik(n){if(n._initialized||n._terminated)throw new G(j.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Yr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Gt.fromBase64String(e))}catch(t){throw new G(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Ir=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new G(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ni=class{constructor(e){this._methodName=e}};var Ks=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new G(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new G(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return we(this._lat,e._lat)||we(this._long,e._long)}};var Jq=/^__.*__$/,SE=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Er(e,this.data,this.fieldMask,t,this.fieldTransforms):new No(e,this.data,t,this.fieldTransforms)}},yg=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Er(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function ok(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}var vg=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.mu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return _g(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(ok(this.fu)&&Jq.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},AE=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ed(e)}Fu(e,t,r,i=!1){return new vg({fu:e,methodName:t,vu:r,path:St.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Xs(n){let e=n._freezeSettings(),t=Ed(n._databaseId);return new AE(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ag(n,e,t,r,i,o={}){let s=n.Fu(o.merge||o.mergeFields?2:0,e,t,i);_I("Data must be an object, but it was:",s,r);let a=ck(r,s),c,l;if(o.merge)c=new qn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let p=kE(e,f,t);if(!s.contains(p))throw new G(j.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);lk(d,p)||d.push(p)}c=new qn(d),l=s.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,l=s.fieldTransforms;return new SE(new hn(a),c,l)}var yd=class n extends Ni{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function sk(n,e,t){return new vg({fu:3,vu:e.settings.vu,methodName:n._methodName,yu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var PE=class n extends Ni{_toFieldTransform(e){return new qs(e.path,new Oo)}isEqual(e){return e instanceof n}},OE=class n extends Ni{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){let t=sk(this,e,!0),r=this.Mu.map(o=>Js(o,t)),i=new Oi(r);return new qs(e.path,i)}isEqual(e){return e instanceof n&&Rv(this.Mu,e.Mu)}},RE=class n extends Ni{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){let t=sk(this,e,!0),r=this.Mu.map(o=>Js(o,t)),i=new Ri(r);return new qs(e.path,i)}isEqual(e){return e instanceof n&&Rv(this.Mu,e.Mu)}},NE=class n extends Ni{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){let t=new Ro(e.serializer,HR(e.serializer,this.xu));return new qs(e.path,t)}isEqual(e){return e instanceof n&&this.xu===e.xu}};function yI(n,e,t,r){let i=n.Fu(1,e,t);_I("Data must be an object, but it was:",i,r);let o=[],s=hn.empty();Zs(r,(c,l)=>{let d=wI(e,c,t);l=ht(l);let f=i.Su(d);if(l instanceof yd)o.push(d);else{let p=Js(l,f);p!=null&&(o.push(d),s.set(d,p))}});let a=new qn(o);return new yg(s,a,i.fieldTransforms)}function vI(n,e,t,r,i,o){let s=n.Fu(1,e,t),a=[kE(e,r,t)],c=[i];if(o.length%2!=0)throw new G(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<o.length;p+=2)a.push(kE(e,o[p])),c.push(o[p+1]);let l=[],d=hn.empty();for(let p=a.length-1;p>=0;--p)if(!lk(l,a[p])){let g=a[p],y=c[p];y=ht(y);let b=s.Su(g);if(y instanceof yd)l.push(g);else{let C=Js(y,b);C!=null&&(l.push(g),d.set(g,C))}}let f=new qn(l);return new yg(d,f,s.fieldTransforms)}function ak(n,e,t,r=!1){return Js(t,n.Fu(r?4:3,e))}function Js(n,e){if(uk(n=ht(n)))return _I("Unsupported field value:",e,n),ck(n,e);if(n instanceof Ni)return function(r,i){if(!ok(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=Js(a,i.bu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=ht(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return HR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=gt.fromDate(r);return{timestampValue:Oc(i.serializer,o)}}if(r instanceof gt){let o=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Oc(i.serializer,o)}}if(r instanceof Ks)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Yr)return{bytesValue:tN(i.serializer,r._byteString)};if(r instanceof nt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Du(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:KE(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${Sg(r)}`)}(n,e)}function ck(n,e){let t={};return MR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zs(n,(r,i)=>{let o=Js(i,e.pu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function uk(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof gt||n instanceof Ks||n instanceof Yr||n instanceof nt||n instanceof Ni)}function _I(n,e,t){if(!uk(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Sg(t);throw r==="an object"?e.Du(n+" a custom object"):e.Du(n+" "+r)}}function kE(n,e,t){if((e=ht(e))instanceof Ir)return e._internalPath;if(typeof e=="string")return wI(n,e);throw _g("Field path arguments must be of type string or ",n,!1,void 0,t)}var eH=new RegExp("[~\\*/\\[\\]]");function wI(n,e,t){if(e.search(eH)>=0)throw _g(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ir(...e.split("."))._internalPath}catch{throw _g(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function _g(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new G(j.INVALID_ARGUMENT,a+n+c)}function lk(n,e){return n.some(t=>t.isEqual(e))}var Qs=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new FE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Pg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},FE=class extends Qs{data(){return super.data()}};function Pg(n,e){return typeof e=="string"?wI(n,e):e instanceof Ir?e._internalPath:e._delegate._internalPath}function dk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new G(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var vd=class{},Ys=class extends vd{};function Vi(n,e,...t){let r=[];e instanceof vd&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof VE).length,a=o.filter(c=>c instanceof wg).length;if(s>1||s>0&&a>0)throw new G(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var wg=class n extends Ys{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return Ck(e._query,t),new en(e.firestore,e.converter,pb(e._query,t))}_parse(e){let t=Xs(e.firestore);return function(o,s,a,c,l,d,f){let p;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new G(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){hR(f,d);let g=[];for(let y of f)g.push(fR(c,o,y));p={arrayValue:{values:g}}}else p=fR(c,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||hR(f,d),p=ak(a,s,f,d==="in"||d==="not-in");return ke.create(l,d,p)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function fk(n,e,t){let r=e,i=Pg("where",n);return wg._create(i,r,t)}var VE=class n extends vd{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Ge.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)Ck(s,c),s=pb(s,c)}(e._query,t),new en(e.firestore,e.converter,pb(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var LE=class n extends Ys{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new G(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new G(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $s(o,s)}(e._query,this._field,this._direction);return new en(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new br(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function hk(n,e="asc"){let t=e,r=Pg("orderBy",n);return LE._create(r,t)}var Cg=class n extends Ys{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new en(e.firestore,e.converter,Bm(e._query,this._limit,this._limitType))}};function pk(n){return qN("limit",n),Cg._create("limit",n,"F")}function mk(n){return qN("limitToLast",n),Cg._create("limitToLast",n,"L")}var bg=class n extends Ys{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=wk(e,this.type,this._docOrFields,this._inclusive);return new en(e.firestore,e.converter,function(i,o){return new br(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function gk(...n){return bg._create("startAt",n,!0)}function yk(...n){return bg._create("startAfter",n,!1)}var Eg=class n extends Ys{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=wk(e,this.type,this._docOrFields,this._inclusive);return new en(e.firestore,e.converter,function(i,o){return new br(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function vk(...n){return Eg._create("endBefore",n,!1)}function _k(...n){return Eg._create("endAt",n,!0)}function wk(n,e,t,r){if(t[0]=ht(t[0]),t[0]instanceof Qs)return function(o,s,a,c,l){if(!c)throw new G(j.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of Ic(o))if(f.field.isKeyField())d.push(Us(s,c.key));else{let p=c.data.field(f.field);if(xg(p))throw new G(j.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){let g=f.field.canonicalString();throw new G(j.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}d.push(p)}return new Kr(d,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Xs(n.firestore);return function(s,a,c,l,d,f){let p=s.explicitOrderBy;if(d.length>p.length)throw new G(j.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let g=[];for(let y=0;y<d.length;y++){let b=d[y];if(p[y].field.isKeyField()){if(typeof b!="string")throw new G(j.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof b}`);if(!GE(s)&&b.indexOf("/")!==-1)throw new G(j.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${b}' contains a slash.`);let C=s.path.child(Be.fromString(b));if(!te.isDocumentKey(C))throw new G(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${C}' is not because it contains an odd number of segments.`);let S=new te(C);g.push(Us(a,S))}else{let C=ak(c,l,b);g.push(C)}}return new Kr(g,f)}(n._query,n.firestore._databaseId,i,e,t,r)}}function fR(n,e,t){if(typeof(t=ht(t))=="string"){if(t==="")throw new G(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!GE(e)&&t.indexOf("/")!==-1)throw new G(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Be.fromString(t));if(!te.isDocumentKey(r))throw new G(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Us(n,new te(r))}if(t instanceof nt)return Us(n,t._key);throw new G(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sg(t)}.`)}function hR(n,e){if(!Array.isArray(n)||n.length===0)throw new G(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ck(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new G(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var $c=class{convertValue(e,t="none"){switch(Bs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(So(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ie()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Zs(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new Ks(bt(e.latitude),bt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=qE(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ed(e));default:return null}}convertTimestamp(e){let t=Pi(e);return new gt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Be.fromString(e);le(fN(r));let i=new Ao(r.get(1),r.get(3)),o=new te(r.popFirst(5));return i.isEqual(t)||Tt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Og(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var jE=class extends $c{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new nt(this.firestore,null,t)}};var Ai=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},cr=class extends Qs{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Do(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Pg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Do=class extends cr{data(e={}){return super.data(e)}},xr=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ai(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Do(this._firestore,this._userDataWriter,r.key,r,new Ai(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new G(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Do(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ai(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Do(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ai(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:tH(a.type),doc:c,oldIndex:l,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function tH(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie()}}function CI(n,e){return n instanceof cr&&e instanceof cr?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof xr&&e instanceof xr&&n._firestore===e._firestore&&gI(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function bk(n){n=Ue(n,nt);let e=Ue(n.firestore,ft);return UN($t(e),n._key).then(t=>xI(e,n,t))}var ki=class extends $c{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new nt(this.firestore,null,t)}};function Ek(n){n=Ue(n,nt);let e=Ue(n.firestore,ft),t=$t(e),r=new ki(e);return Kq(t,n._key).then(i=>new cr(e,r,n._key,i,new Ai(i!==null&&i.hasLocalMutations,!0),n.converter))}function Ik(n){n=Ue(n,nt);let e=Ue(n.firestore,ft);return UN($t(e),n._key,{source:"server"}).then(t=>xI(e,n,t))}function xk(n){n=Ue(n,en);let e=Ue(n.firestore,ft),t=$t(e),r=new ki(e);return dk(n._query),$N(t,n._query).then(i=>new xr(e,r,n,i))}function Dk(n){n=Ue(n,en);let e=Ue(n.firestore,ft),t=$t(e),r=new ki(e);return Qq(t,n._query).then(i=>new xr(e,r,n,i))}function Mk(n){n=Ue(n,en);let e=Ue(n.firestore,ft),t=$t(e),r=new ki(e);return $N(t,n._query,{source:"server"}).then(i=>new xr(e,r,n,i))}function bI(n,e,t){n=Ue(n,nt);let r=Ue(n.firestore,ft),i=Og(n.converter,e,t);return Qc(r,[Ag(Xs(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Et.none())])}function EI(n,e,t,...r){n=Ue(n,nt);let i=Ue(n.firestore,ft),o=Xs(i),s;return s=typeof(e=ht(e))=="string"||e instanceof Ir?vI(o,"updateDoc",n._key,e,t,r):yI(o,"updateDoc",n._key,e),Qc(i,[s.toMutation(n._key,Et.exists(!0))])}function Tk(n){return Qc(Ue(n.firestore,ft),[new ko(n._key,Et.none())])}function Sk(n,e){let t=Ue(n.firestore,ft),r=xd(n),i=Og(n.converter,e);return Qc(t,[Ag(Xs(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Et.exists(!1))]).then(()=>r)}function II(n,...e){var t,r,i;n=ht(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||ME(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(ME(e[s])){let f=e[s];e[s]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,l,d;if(n instanceof nt)l=Ue(n.firestore,ft),d=qc(n._key.path),c={next:f=>{e[s]&&e[s](xI(l,n,f))},error:e[s+1],complete:e[s+2]};else{let f=Ue(n,en);l=Ue(f.firestore,ft),d=f._query;let p=new ki(l);c={next:g=>{e[s]&&e[s](new xr(l,p,f,g))},error:e[s+1],complete:e[s+2]},dk(n._query)}return function(p,g,y,b){let C=new Bc(b),S=new pd(g,C,y);return p.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return tI(yield Uc(p),S)})),()=>{C.$a(),p.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return nI(yield Uc(p),S)}))}}($t(l),d,a,c)}function Ak(n,e){return Yq($t(n=Ue(n,ft)),ME(e)?e:{next:e})}function Qc(n,e){return function(r,i){let o=new Lt;return r.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return Sq(yield dI(r),i,o)})),o.promise}($t(n),e)}function xI(n,e,t){let r=t.docs.get(e._key),i=new ki(n);return new cr(n,i,e._key,r,new Ai(t.hasPendingWrites,t.fromCache),e.converter)}var nH={maxAttempts:5};var Ig=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Xs(e)}set(e,t,r){this._verifyNotCommitted();let i=Io(e,this._firestore),o=Og(i.converter,t,r),s=Ag(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Et.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Io(e,this._firestore),s;return s=typeof(t=ht(t))=="string"||t instanceof Ir?vI(this._dataReader,"WriteBatch.update",o._key,t,r,i):yI(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Et.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Io(e,this._firestore);return this._mutations=this._mutations.concat(new ko(t._key,Et.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new G(j.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Io(n,e){if((n=ht(n)).firestore!==e)throw new G(j.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var BE=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Xs(t)}get(t){let r=Io(t,this._firestore),i=new jE(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return ie();let s=o[0];if(s.isFoundDocument())return new Qs(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Qs(this._firestore,i,r._key,null,r.converter);throw ie()})}set(t,r,i){let o=Io(t,this._firestore),s=Og(o.converter,r,i),a=Ag(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=Io(t,this._firestore),a;return a=typeof(r=ht(r))=="string"||r instanceof Ir?vI(this._dataReader,"Transaction.update",s._key,r,i,o):yI(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=Io(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Io(e,this._firestore),r=new ki(this._firestore);return super.get(e).then(i=>new cr(this._firestore,r,t._key,i._document,new Ai(!1,!1),t.converter))}};function Pk(n,e,t){n=Ue(n,ft);let r=Object.assign(Object.assign({},nH),t);return function(o){if(o.maxAttempts<1)throw new G(j.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new Lt;return o.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){let l=yield Hq(o);new EE(o.asyncQueue,l,a,s,c).Xa()})),c.promise}($t(n),i=>e(new BE(n,i)),r)}function Ok(){return new yd("deleteField")}function Rk(){return new PE("serverTimestamp")}function Nk(...n){return new OE("arrayUnion",n)}function kk(...n){return new RE("arrayRemove",n)}function Fk(n){return new NE("increment",n)}(function(e,t=!0){(function(i){zc=i})(tM),Pu(new rs("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new ft(new HC(r.getProvider("auth-internal")),new QC(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new G(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ao(l.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ki(pO,"4.6.2",e),Ki(pO,"4.6.2","esm2017")})();var rH="@firebase/firestore-compat",iH="0.3.31";function PI(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new G("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Vk(){if(typeof Uint8Array>"u")throw new G("unimplemented","Uint8Arrays are not available in this environment.")}function Lk(){if(!TR())throw new G("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Rg=class n{constructor(e){this._delegate=e}static fromBase64String(e){return Lk(),new n(Yr.fromBase64String(e))}static fromUint8Array(e){return Vk(),new n(Yr.fromUint8Array(e))}toBase64(){return Lk(),this._delegate.toBase64()}toUint8Array(){return Vk(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function DI(n){return oH(n,["next","error","complete"])}function oH(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var MI=class{enableIndexedDbPersistence(e,t){return QN(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return YN(e._delegate)}clearIndexedDbPersistence(e){return XN(e._delegate)}},Ng=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ao||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&sr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){HN(this._delegate,e,t,r)}enableNetwork(){return ek(this._delegate)}disableNetwork(){return tk(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,hI("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return JN(this._delegate)}onSnapshotsInSync(e){return Ak(this._delegate,e)}get app(){if(!this._appCompat)throw new G("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Xc(this,pI(this._delegate,e))}catch(t){throw Mn(t,"collection()","Firestore.collection()")}}doc(e){try{return new Zr(this,xd(this._delegate,e))}catch(t){throw Mn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ra(this,GN(this._delegate,e))}catch(t){throw Mn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Pk(this._delegate,t=>e(new kg(this,t)))}batch(){return $t(this._delegate),new Fg(new Ig(this._delegate,e=>Qc(this._delegate,e)))}loadBundle(e){return nk(this._delegate,e)}namedQuery(e){return rk(this._delegate,e).then(t=>t?new ra(this,t):null)}},Yc=class extends $c{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rg(new Yr(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Zr.forKey(t,this.firestore,null)}};function sH(n){pR(n)}var kg=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Yc(e)}get(e){let t=ea(e);return this._delegate.get(t).then(r=>new ta(this._firestore,new cr(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=ea(e);return r?(PI("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=ea(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=ea(e);return this._delegate.delete(t),this}},Fg=class{constructor(e){this._delegate=e}set(e,t,r){let i=ea(e);return r?(PI("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=ea(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=ea(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Zc=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Do(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new na(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new Yc(e),t),i.set(t,o)),o}};Zc.INSTANCES=new WeakMap;var Zr=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Yc(e)}static forPath(e,t,r){if(e.length%2!==0)throw new G("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new nt(t._delegate,r,new te(e)))}static forKey(e,t,r){return new n(t,new nt(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Xc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Xc(this.firestore,pI(this._delegate,e))}catch(t){throw Mn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ht(e),e instanceof nt?mI(this._delegate,e):!1}set(e,t){t=PI("DocumentReference.set",t);try{return t?bI(this._delegate,e,t):bI(this._delegate,e)}catch(r){throw Mn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?EI(this._delegate,e):EI(this._delegate,e,t,...r)}catch(i){throw Mn(i,"updateDoc()","DocumentReference.update()")}}delete(){return Tk(this._delegate)}onSnapshot(...e){let t=jk(e),r=Bk(e,i=>new ta(this.firestore,new cr(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return II(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=Ek(this._delegate):e?.source==="server"?t=Ik(this._delegate):t=bk(this._delegate),t.then(r=>new ta(this.firestore,new cr(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Zc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Mn(n,e,t){return n.message=n.message.replace(e,t),n}function jk(n){for(let e of n)if(typeof e=="object"&&!DI(e))return e;return{}}function Bk(n,e){var t,r;let i;return DI(n[0])?i=n[0]:DI(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var ta=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Zr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return CI(this._delegate,e._delegate)}},na=class extends ta{data(e){let t=this._delegate.data(e);return this._delegate._converter||mR(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},ra=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Yc(e)}where(e,t,r){try{return new n(this.firestore,Vi(this._delegate,fk(e,t,r)))}catch(i){throw Mn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,Vi(this._delegate,hk(e,t)))}catch(r){throw Mn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,Vi(this._delegate,pk(e)))}catch(t){throw Mn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,Vi(this._delegate,mk(e)))}catch(t){throw Mn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,Vi(this._delegate,gk(...e)))}catch(t){throw Mn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,Vi(this._delegate,yk(...e)))}catch(t){throw Mn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,Vi(this._delegate,vk(...e)))}catch(t){throw Mn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,Vi(this._delegate,_k(...e)))}catch(t){throw Mn(t,"endAt()","Query.endAt()")}}isEqual(e){return gI(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=Dk(this._delegate):e?.source==="server"?t=Mk(this._delegate):t=xk(this._delegate),t.then(r=>new Dd(this.firestore,new xr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=jk(e),r=Bk(e,i=>new Dd(this.firestore,new xr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return II(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Zc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},TI=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new na(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Dd=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ra(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new na(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new TI(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new na(this._firestore,r))})}isEqual(e){return CI(this._delegate,e._delegate)}},Xc=class n extends ra{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Zr(this.firestore,e):null}doc(e){try{return e===void 0?new Zr(this.firestore,xd(this._delegate)):new Zr(this.firestore,xd(this._delegate,e))}catch(t){throw Mn(t,"doc()","CollectionReference.doc()")}}add(e){return Sk(this._delegate,e).then(t=>new Zr(this.firestore,t))}isEqual(e){return mI(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Zc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function ea(n){return Ue(n,nt)}var SI=class n{constructor(...e){this._delegate=new Ir(...e)}static documentId(){return new n(St.keyField().canonicalString())}isEqual(e){return e=ht(e),e instanceof Ir?this._delegate._internalPath.isEqual(e._internalPath):!1}};var AI=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=Rk();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=Ok();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=Nk(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=kk(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=Fk(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var aH={Firestore:Ng,GeoPoint:Ks,Timestamp:gt,Blob:Rg,Transaction:kg,WriteBatch:Fg,DocumentReference:Zr,DocumentSnapshot:ta,Query:ra,QueryDocumentSnapshot:na,QuerySnapshot:Dd,CollectionReference:Xc,FieldPath:SI,FieldValue:AI,setLogLevel:sH,CACHE_SIZE_UNLIMITED:WN};function cH(n,e){n.INTERNAL.registerComponent(new rs("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},aH)))}function uH(n){cH(n,(e,t)=>new Ng(e,t,new MI)),n.registerVersion(rH,iH)}uH(Sn);function lH(n,e=Vu){return new Ie(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function Uk(n,e){return lH(n,e)}function dH(n,e){return Uk(n,e).pipe(di(void 0),as(),se(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function RI(n,e){return Uk(n,e).pipe(se(t=>({payload:t,type:"query"})))}var $k=class{ref;afs;constructor(n,e){this.ref=n,this.afs=e}set(n,e){return this.ref.set(n,e)}update(n){return this.ref.update(n)}delete(){return this.ref.delete()}collection(n,e){let t=this.ref.collection(n),{ref:r,query:i}=Kk(t,e);return new Hk(r,i,this.afs)}snapshotChanges(){return dH(this.ref,this.afs.schedulers.outsideAngular).pipe(dn)}valueChanges(n={}){return this.snapshotChanges().pipe(se(({payload:e})=>n.idField?ve(Y({},e.data()),{[n.idField]:e.id}):e.data()))}get(n){return Me(this.ref.get(n)).pipe(dn)}};function jg(n,e){return RI(n,e).pipe(di(void 0),as(),se(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=o.find(f=>f.doc.ref.isEqual(a.ref)),d=r?.payload.docs.find(f=>f.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function zk(n,e,t){return jg(n,t).pipe(li((r,i)=>fH(r,i.map(o=>o.payload),e),[]),n0(),se(r=>r.map(i=>({type:i.type,payload:i}))))}function fH(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=hH(n,r))}),n}function OI(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function hH(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return OI(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return OI(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return OI(n,e.oldIndex,1);break}return n}function qk(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var Hk=class{ref;query;afs;constructor(n,e,t){this.ref=n,this.query=e,this.afs=t}stateChanges(n){let e=jg(this.query,this.afs.schedulers.outsideAngular);return n&&n.length>0&&(e=e.pipe(se(t=>t.filter(r=>n.indexOf(r.type)>-1)))),e.pipe(di(void 0),as(),pt(([t,r])=>r.length>0||!t),se(([,t])=>t),dn)}auditTrail(n){return this.stateChanges(n).pipe(li((e,t)=>[...e,...t],[]))}snapshotChanges(n){let e=qk(n);return zk(this.query,e,this.afs.schedulers.outsideAngular).pipe(dn)}valueChanges(n={}){return RI(this.query,this.afs.schedulers.outsideAngular).pipe(se(e=>e.payload.docs.map(t=>n.idField?ve(Y({},t.data()),{[n.idField]:t.id}):t.data())),dn)}get(n){return Me(this.query.get(n)).pipe(dn)}add(n){return this.ref.add(n)}doc(n){return new $k(this.ref.doc(n),this.afs)}},pH=class{query;afs;constructor(n,e){this.query=n,this.afs=e}stateChanges(n){return!n||n.length===0?jg(this.query,this.afs.schedulers.outsideAngular).pipe(dn):jg(this.query,this.afs.schedulers.outsideAngular).pipe(se(e=>e.filter(t=>n.indexOf(t.type)>-1)),pt(e=>e.length>0),dn)}auditTrail(n){return this.stateChanges(n).pipe(li((e,t)=>[...e,...t],[]))}snapshotChanges(n){let e=qk(n);return zk(this.query,e,this.afs.schedulers.outsideAngular).pipe(dn)}valueChanges(n={}){return RI(this.query,this.afs.schedulers.outsideAngular).pipe(se(t=>t.payload.docs.map(r=>n.idField?Y({[n.idField]:r.id},r.data()):r.data())),dn)}get(n){return Me(this.query.get(n)).pipe(dn)}},Gk=new X("angularfire2.enableFirestorePersistence"),Wk=new X("angularfire2.firestore.persistenceSettings"),mH=new X("angularfire2.firestore.settings"),gH=new X("angularfire2.firestore.use-emulator");function Kk(n,e=t=>t){return{query:e(n),ref:n}}var Md=class Vg{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,c,l,d,f,p,g,y,b,C,S,k){this.schedulers=c;let P=Ll(t,a,r),B=d;f&&PC(P,a,p,y,b,C,g,S),[this.firestore,this.persistenceEnabled$]=mm(`${P.name}.firestore`,"AngularFirestore",P.name,()=>{let q=a.runOutsideAngular(()=>P.firestore());if(o&&q.settings(o),B&&q.useEmulator(...B),i&&!ho(s)){let z=()=>{try{return Me(q.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),ue(!1)}};return[q,a.runOutsideAngular(z)]}else return[q,ue(!1)]},[o,B,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=Kk(i,r),a=this.schedulers.ngZone.run(()=>o);return new Hk(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new pH(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new $k(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||Vg)(K(lc),K(dc,8),K(Gk,8),K(mH,8),K(un),K(Ne),K(fm),K(Wk,8),K(gH,8),K(dO,8),K(xC,8),K(DC,8),K(MC,8),K(TC,8),K(SC,8),K(AC,8),K(Fl,8))};static \u0275prov=ee({token:Vg,factory:Vg.\u0275fac,providedIn:"any"})},Qk=class Lg{constructor(){Sn.registerVersion("angularfire",kl.full,"fst-compat")}static enablePersistence(t){return{ngModule:Lg,providers:[{provide:Gk,useValue:!0},{provide:Wk,useValue:t}]}}static \u0275fac=function(r){return new(r||Lg)};static \u0275mod=wt({type:Lg});static \u0275inj=_t({providers:[Md]})};var Xr=class n{constructor(e){this.firestore=e}getAllPerfumes(){return this.firestore.collection("perfumes").valueChanges({idField:"id"})}getPerfumesByCountry(e){return this.firestore.collection("perfumes",t=>t.where("country","==",e)).valueChanges({idField:"id"})}getPerfumeById(e){return this.firestore.doc(`perfumes/${e}`).valueChanges()}getCountries(){return this.firestore.collection("perfumes").valueChanges().pipe(se(e=>(console.log("Perfumes:",e),[...new Set(e.map(r=>r.country))].sort())))}getFeaturedPerfumes(){return this.firestore.collection("perfumes",e=>e.where("isBestSeller","==",!0).limit(3)).valueChanges({idField:"id"})}updatePerfume(e,t){return this.firestore.doc(`perfumes/${e}`).update(t)}static \u0275fac=function(t){return new(t||n)(K(Md))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};var Hn=class{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){let t=this._partials,r=0;for(let i=0;i<this._n&&i<32;i++){let o=t[i],s=e+o,a=Math.abs(e)<Math.abs(o)?e-(s-o):o-(s-e);a&&(t[r++]=a),e=s}return t[r]=e,this._n=r+1,this}valueOf(){let e=this._partials,t=this._n,r,i,o,s=0;if(t>0){for(s=e[--t];t>0&&(r=s,i=e[--t],s=r+i,o=i-(s-r),!o););t>0&&(o<0&&e[t-1]<0||o>0&&e[t-1]>0)&&(i=o*2,r=s+i,i==r-s&&(s=r))}return s}};function*yH(n){for(let e of n)yield*WD(e)}function Jc(n){return Array.from(yH(n))}var vH={value:()=>{}};function Jk(){for(var n=0,e=arguments.length,t={},r;n<e;++n){if(!(r=arguments[n]+"")||r in t||/[\s.]/.test(r))throw new Error("illegal type: "+r);t[r]=[]}return new Bg(t)}function Bg(n){this._=n}function _H(n,e){return n.trim().split(/^|\s+/).map(function(t){var r="",i=t.indexOf(".");if(i>=0&&(r=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}})}Bg.prototype=Jk.prototype={constructor:Bg,on:function(n,e){var t=this._,r=_H(n+"",t),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(n=r[o]).type)&&(i=wH(t[i],n.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(i=(n=r[o]).type)t[i]=Xk(t[i],n.name,e);else if(e==null)for(i in t)t[i]=Xk(t[i],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new Bg(n)},call:function(n,e){if((i=arguments.length-2)>0)for(var t=new Array(i),r=0,i,o;r<i;++r)t[r]=arguments[r+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(o=this._[n],r=0,i=o.length;r<i;++r)o[r].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],i=0,o=r.length;i<o;++i)r[i].value.apply(e,t)}};function wH(n,e){for(var t=0,r=n.length,i;t<r;++t)if((i=n[t]).name===e)return i.value}function Xk(n,e,t){for(var r=0,i=n.length;r<i;++r)if(n[r].name===e){n[r]=vH,n=n.slice(0,r).concat(n.slice(r+1));break}return t!=null&&n.push({name:e,value:t}),n}var Td=Jk;var Ug="http://www.w3.org/1999/xhtml",NI={svg:"http://www.w3.org/2000/svg",xhtml:Ug,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Li(n){var e=n+="",t=e.indexOf(":");return t>=0&&(e=n.slice(0,t))!=="xmlns"&&(n=n.slice(t+1)),NI.hasOwnProperty(e)?{space:NI[e],local:n}:n}function CH(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===Ug&&e.documentElement.namespaceURI===Ug?e.createElement(n):e.createElementNS(t,n)}}function bH(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function $g(n){var e=Li(n);return(e.local?bH:CH)(e)}function EH(){}function ia(n){return n==null?EH:function(){return this.querySelector(n)}}function eF(n){typeof n!="function"&&(n=ia(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var o=e[i],s=o.length,a=r[i]=new Array(s),c,l,d=0;d<s;++d)(c=o[d])&&(l=n.call(c,c.__data__,d,o))&&("__data__"in c&&(l.__data__=c.__data__),a[d]=l);return new It(r,this._parents)}function kI(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function IH(){return[]}function Sd(n){return n==null?IH:function(){return this.querySelectorAll(n)}}function xH(n){return function(){return kI(n.apply(this,arguments))}}function tF(n){typeof n=="function"?n=xH(n):n=Sd(n);for(var e=this._groups,t=e.length,r=[],i=[],o=0;o<t;++o)for(var s=e[o],a=s.length,c,l=0;l<a;++l)(c=s[l])&&(r.push(n.call(c,c.__data__,l,s)),i.push(c));return new It(r,i)}function Ad(n){return function(){return this.matches(n)}}function zg(n){return function(e){return e.matches(n)}}var DH=Array.prototype.find;function MH(n){return function(){return DH.call(this.children,n)}}function TH(){return this.firstElementChild}function nF(n){return this.select(n==null?TH:MH(typeof n=="function"?n:zg(n)))}var SH=Array.prototype.filter;function AH(){return Array.from(this.children)}function PH(n){return function(){return SH.call(this.children,n)}}function rF(n){return this.selectAll(n==null?AH:PH(typeof n=="function"?n:zg(n)))}function iF(n){typeof n!="function"&&(n=Ad(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var o=e[i],s=o.length,a=r[i]=[],c,l=0;l<s;++l)(c=o[l])&&n.call(c,c.__data__,l,o)&&a.push(c);return new It(r,this._parents)}function qg(n){return new Array(n.length)}function oF(){return new It(this._enter||this._groups.map(qg),this._parents)}function Pd(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}Pd.prototype={constructor:Pd,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function sF(n){return function(){return n}}function OH(n,e,t,r,i,o){for(var s=0,a,c=e.length,l=o.length;s<l;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):t[s]=new Pd(n,o[s]);for(;s<c;++s)(a=e[s])&&(i[s]=a)}function RH(n,e,t,r,i,o,s){var a,c,l=new Map,d=e.length,f=o.length,p=new Array(d),g;for(a=0;a<d;++a)(c=e[a])&&(p[a]=g=s.call(c,c.__data__,a,e)+"",l.has(g)?i[a]=c:l.set(g,c));for(a=0;a<f;++a)g=s.call(n,o[a],a,o)+"",(c=l.get(g))?(r[a]=c,c.__data__=o[a],l.delete(g)):t[a]=new Pd(n,o[a]);for(a=0;a<d;++a)(c=e[a])&&l.get(p[a])===c&&(i[a]=c)}function NH(n){return n.__data__}function aF(n,e){if(!arguments.length)return Array.from(this,NH);var t=e?RH:OH,r=this._parents,i=this._groups;typeof n!="function"&&(n=sF(n));for(var o=i.length,s=new Array(o),a=new Array(o),c=new Array(o),l=0;l<o;++l){var d=r[l],f=i[l],p=f.length,g=kH(n.call(d,d&&d.__data__,l,r)),y=g.length,b=a[l]=new Array(y),C=s[l]=new Array(y),S=c[l]=new Array(p);t(d,f,b,C,S,g,e);for(var k=0,P=0,B,q;k<y;++k)if(B=b[k]){for(k>=P&&(P=k+1);!(q=C[P])&&++P<y;);B._next=q||null}}return s=new It(s,r),s._enter=a,s._exit=c,s}function kH(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function cF(){return new It(this._exit||this._groups.map(qg),this._parents)}function uF(n,e,t){var r=this.enter(),i=this,o=this.exit();return typeof n=="function"?(r=n(r),r&&(r=r.selection())):r=r.append(n+""),e!=null&&(i=e(i),i&&(i=i.selection())),t==null?o.remove():t(o),r&&i?r.merge(i).order():i}function lF(n){for(var e=n.selection?n.selection():n,t=this._groups,r=e._groups,i=t.length,o=r.length,s=Math.min(i,o),a=new Array(i),c=0;c<s;++c)for(var l=t[c],d=r[c],f=l.length,p=a[c]=new Array(f),g,y=0;y<f;++y)(g=l[y]||d[y])&&(p[y]=g);for(;c<i;++c)a[c]=t[c];return new It(a,this._parents)}function dF(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var r=n[e],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function fF(n){n||(n=FH);function e(f,p){return f&&p?n(f.__data__,p.__data__):!f-!p}for(var t=this._groups,r=t.length,i=new Array(r),o=0;o<r;++o){for(var s=t[o],a=s.length,c=i[o]=new Array(a),l,d=0;d<a;++d)(l=s[d])&&(c[d]=l);c.sort(e)}return new It(i,this._parents).order()}function FH(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function hF(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function pF(){return Array.from(this)}function mF(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function gF(){let n=0;for(let e of this)++n;return n}function yF(){return!this.node()}function vF(n){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var i=e[t],o=0,s=i.length,a;o<s;++o)(a=i[o])&&n.call(a,a.__data__,o,i);return this}function VH(n){return function(){this.removeAttribute(n)}}function LH(n){return function(){this.removeAttributeNS(n.space,n.local)}}function jH(n,e){return function(){this.setAttribute(n,e)}}function BH(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function UH(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(n):this.setAttribute(n,t)}}function $H(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function _F(n,e){var t=Li(n);if(arguments.length<2){var r=this.node();return t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}return this.each((e==null?t.local?LH:VH:typeof e=="function"?t.local?$H:UH:t.local?BH:jH)(t,e))}function Hg(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function zH(n){return function(){this.style.removeProperty(n)}}function qH(n,e,t){return function(){this.style.setProperty(n,e,t)}}function HH(n,e,t){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(n):this.style.setProperty(n,r,t)}}function wF(n,e,t){return arguments.length>1?this.each((e==null?zH:typeof e=="function"?HH:qH)(n,e,t??"")):Bo(this.node(),n)}function Bo(n,e){return n.style.getPropertyValue(e)||Hg(n).getComputedStyle(n,null).getPropertyValue(e)}function GH(n){return function(){delete this[n]}}function WH(n,e){return function(){this[n]=e}}function KH(n,e){return function(){var t=e.apply(this,arguments);t==null?delete this[n]:this[n]=t}}function CF(n,e){return arguments.length>1?this.each((e==null?GH:typeof e=="function"?KH:WH)(n,e)):this.node()[n]}function bF(n){return n.trim().split(/^|\s+/)}function FI(n){return n.classList||new EF(n)}function EF(n){this._node=n,this._names=bF(n.getAttribute("class")||"")}EF.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function IF(n,e){for(var t=FI(n),r=-1,i=e.length;++r<i;)t.add(e[r])}function xF(n,e){for(var t=FI(n),r=-1,i=e.length;++r<i;)t.remove(e[r])}function QH(n){return function(){IF(this,n)}}function YH(n){return function(){xF(this,n)}}function ZH(n,e){return function(){(e.apply(this,arguments)?IF:xF)(this,n)}}function DF(n,e){var t=bF(n+"");if(arguments.length<2){for(var r=FI(this.node()),i=-1,o=t.length;++i<o;)if(!r.contains(t[i]))return!1;return!0}return this.each((typeof e=="function"?ZH:e?QH:YH)(t,e))}function XH(){this.textContent=""}function JH(n){return function(){this.textContent=n}}function eG(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function MF(n){return arguments.length?this.each(n==null?XH:(typeof n=="function"?eG:JH)(n)):this.node().textContent}function tG(){this.innerHTML=""}function nG(n){return function(){this.innerHTML=n}}function rG(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function TF(n){return arguments.length?this.each(n==null?tG:(typeof n=="function"?rG:nG)(n)):this.node().innerHTML}function iG(){this.nextSibling&&this.parentNode.appendChild(this)}function SF(){return this.each(iG)}function oG(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function AF(){return this.each(oG)}function PF(n){var e=typeof n=="function"?n:$g(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function sG(){return null}function OF(n,e){var t=typeof n=="function"?n:$g(n),r=e==null?sG:typeof e=="function"?e:ia(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),r.apply(this,arguments)||null)})}function aG(){var n=this.parentNode;n&&n.removeChild(this)}function RF(){return this.each(aG)}function cG(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function uG(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function NF(n){return this.select(n?uG:cG)}function kF(n){return arguments.length?this.property("__data__",n):this.node().__data__}function lG(n){return function(e){n.call(this,e,this.__data__)}}function dG(n){return n.trim().split(/^|\s+/).map(function(e){var t="",r=e.indexOf(".");return r>=0&&(t=e.slice(r+1),e=e.slice(0,r)),{type:e,name:t}})}function fG(n){return function(){var e=this.__on;if(e){for(var t=0,r=-1,i=e.length,o;t<i;++t)o=e[t],(!n.type||o.type===n.type)&&o.name===n.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function hG(n,e,t){return function(){var r=this.__on,i,o=lG(e);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===n.type&&i.name===n.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=t),i.value=e;return}}this.addEventListener(n.type,o,t),i={type:n.type,name:n.name,value:e,listener:o,options:t},r?r.push(i):this.__on=[i]}}function FF(n,e,t){var r=dG(n+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,l=a.length,d;c<l;++c)for(i=0,d=a[c];i<o;++i)if((s=r[i]).type===d.type&&s.name===d.name)return d.value}return}for(a=e?hG:fG,i=0;i<o;++i)this.each(a(r[i],e,t));return this}function VF(n,e,t){var r=Hg(n),i=r.CustomEvent;typeof i=="function"?i=new i(e,t):(i=r.document.createEvent("Event"),t?(i.initEvent(e,t.bubbles,t.cancelable),i.detail=t.detail):i.initEvent(e,!1,!1)),n.dispatchEvent(i)}function pG(n,e){return function(){return VF(this,n,e)}}function mG(n,e){return function(){return VF(this,n,e.apply(this,arguments))}}function LF(n,e){return this.each((typeof e=="function"?mG:pG)(n,e))}function*jF(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var VI=[null];function It(n,e){this._groups=n,this._parents=e}function BF(){return new It([[document.documentElement]],VI)}function gG(){return this}It.prototype=BF.prototype={constructor:It,select:eF,selectAll:tF,selectChild:nF,selectChildren:rF,filter:iF,data:aF,enter:oF,exit:cF,join:uF,merge:lF,selection:gG,order:dF,sort:fF,call:hF,nodes:pF,node:mF,size:gF,empty:yF,each:vF,attr:_F,style:wF,property:CF,classed:DF,text:MF,html:TF,raise:SF,lower:AF,append:PF,insert:OF,remove:RF,clone:NF,datum:kF,on:FF,dispatch:LF,[Symbol.iterator]:jF};var ji=BF;function tn(n){return typeof n=="string"?new It([[document.querySelector(n)]],[document.documentElement]):new It([[n]],VI)}function UF(n){let e;for(;e=n.sourceEvent;)n=e;return n}function Bi(n,e){if(n=UF(n),e===void 0&&(e=n.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var r=t.createSVGPoint();return r.x=n.clientX,r.y=n.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[n.clientX-i.left-e.clientLeft,n.clientY-i.top-e.clientTop]}}return[n.pageX,n.pageY]}var Gg={capture:!0,passive:!1};function Wg(n){n.preventDefault(),n.stopImmediatePropagation()}function LI(n){var e=n.document.documentElement,t=tn(n).on("dragstart.drag",Wg,Gg);"onselectstart"in e?t.on("selectstart.drag",Wg,Gg):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function jI(n,e){var t=n.document.documentElement,r=tn(n).on("dragstart.drag",null);e&&(r.on("click.drag",Wg,Gg),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in t?r.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}function Kg(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function BI(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function Nd(){}var Od=.7,Zg=1/Od,eu="\\s*([+-]?\\d+)\\s*",Rd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Jr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yG=/^#([0-9a-f]{3,8})$/,vG=new RegExp(`^rgb\\(${eu},${eu},${eu}\\)$`),_G=new RegExp(`^rgb\\(${Jr},${Jr},${Jr}\\)$`),wG=new RegExp(`^rgba\\(${eu},${eu},${eu},${Rd}\\)$`),CG=new RegExp(`^rgba\\(${Jr},${Jr},${Jr},${Rd}\\)$`),bG=new RegExp(`^hsl\\(${Rd},${Jr},${Jr}\\)$`),EG=new RegExp(`^hsla\\(${Rd},${Jr},${Jr},${Rd}\\)$`),$F={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Kg(Nd,Uo,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:zF,formatHex:zF,formatHex8:IG,formatHsl:xG,formatRgb:qF,toString:qF});function zF(){return this.rgb().formatHex()}function IG(){return this.rgb().formatHex8()}function xG(){return YF(this).formatHsl()}function qF(){return this.rgb().formatRgb()}function Uo(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=yG.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?HF(e):t===3?new Fn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Qg(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Qg(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=vG.exec(n))?new Fn(e[1],e[2],e[3],1):(e=_G.exec(n))?new Fn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=wG.exec(n))?Qg(e[1],e[2],e[3],e[4]):(e=CG.exec(n))?Qg(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=bG.exec(n))?KF(e[1],e[2]/100,e[3]/100,1):(e=EG.exec(n))?KF(e[1],e[2]/100,e[3]/100,e[4]):$F.hasOwnProperty(n)?HF($F[n]):n==="transparent"?new Fn(NaN,NaN,NaN,0):null}function HF(n){return new Fn(n>>16&255,n>>8&255,n&255,1)}function Qg(n,e,t,r){return r<=0&&(n=e=t=NaN),new Fn(n,e,t,r)}function DG(n){return n instanceof Nd||(n=Uo(n)),n?(n=n.rgb(),new Fn(n.r,n.g,n.b,n.opacity)):new Fn}function tu(n,e,t,r){return arguments.length===1?DG(n):new Fn(n,e,t,r??1)}function Fn(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}Kg(Fn,tu,BI(Nd,{brighter(n){return n=n==null?Zg:Math.pow(Zg,n),new Fn(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Od:Math.pow(Od,n),new Fn(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Fn(sa(this.r),sa(this.g),sa(this.b),Xg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:GF,formatHex:GF,formatHex8:MG,formatRgb:WF,toString:WF}));function GF(){return`#${oa(this.r)}${oa(this.g)}${oa(this.b)}`}function MG(){return`#${oa(this.r)}${oa(this.g)}${oa(this.b)}${oa((isNaN(this.opacity)?1:this.opacity)*255)}`}function WF(){let n=Xg(this.opacity);return`${n===1?"rgb(":"rgba("}${sa(this.r)}, ${sa(this.g)}, ${sa(this.b)}${n===1?")":`, ${n})`}`}function Xg(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function sa(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function oa(n){return n=sa(n),(n<16?"0":"")+n.toString(16)}function KF(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Dr(n,e,t,r)}function YF(n){if(n instanceof Dr)return new Dr(n.h,n.s,n.l,n.opacity);if(n instanceof Nd||(n=Uo(n)),!n)return new Dr;if(n instanceof Dr)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),o=Math.max(e,t,r),s=NaN,a=o-i,c=(o+i)/2;return a?(e===o?s=(t-r)/a+(t<r)*6:t===o?s=(r-e)/a+2:s=(e-t)/a+4,a/=c<.5?o+i:2-o-i,s*=60):a=c>0&&c<1?0:s,new Dr(s,a,c,n.opacity)}function ZF(n,e,t,r){return arguments.length===1?YF(n):new Dr(n,e,t,r??1)}function Dr(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}Kg(Dr,ZF,BI(Nd,{brighter(n){return n=n==null?Zg:Math.pow(Zg,n),new Dr(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Od:Math.pow(Od,n),new Dr(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new Fn(UI(n>=240?n-240:n+120,i,r),UI(n,i,r),UI(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new Dr(QF(this.h),Yg(this.s),Yg(this.l),Xg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let n=Xg(this.opacity);return`${n===1?"hsl(":"hsla("}${QF(this.h)}, ${Yg(this.s)*100}%, ${Yg(this.l)*100}%${n===1?")":`, ${n})`}`}}));function QF(n){return n=(n||0)%360,n<0?n+360:n}function Yg(n){return Math.max(0,Math.min(1,n||0))}function UI(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}function $I(n,e,t,r,i){var o=n*n,s=o*n;return((1-3*n+3*o-s)*e+(4-6*o+3*s)*t+(1+3*n+3*o-3*s)*r+s*i)/6}function XF(n){var e=n.length-1;return function(t){var r=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),i=n[r],o=n[r+1],s=r>0?n[r-1]:2*i-o,a=r<e-1?n[r+2]:2*o-i;return $I((t-r/e)*e,s,i,o,a)}}function JF(n){var e=n.length;return function(t){var r=Math.floor(((t%=1)<0?++t:t)*e),i=n[(r+e-1)%e],o=n[r%e],s=n[(r+1)%e],a=n[(r+2)%e];return $I((t-r/e)*e,i,o,s,a)}}var zI=n=>()=>n;function TG(n,e){return function(t){return n+t*e}}function SG(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function e2(n){return(n=+n)==1?Jg:function(e,t){return t-e?SG(e,t,n):zI(isNaN(e)?t:e)}}function Jg(n,e){var t=e-n;return t?TG(n,t):zI(isNaN(n)?e:n)}var ey=function n(e){var t=e2(e);function r(i,o){var s=t((i=tu(i)).r,(o=tu(o)).r),a=t(i.g,o.g),c=t(i.b,o.b),l=Jg(i.opacity,o.opacity);return function(d){return i.r=s(d),i.g=a(d),i.b=c(d),i.opacity=l(d),i+""}}return r.gamma=n,r}(1);function t2(n){return function(e){var t=e.length,r=new Array(t),i=new Array(t),o=new Array(t),s,a;for(s=0;s<t;++s)a=tu(e[s]),r[s]=a.r||0,i[s]=a.g||0,o[s]=a.b||0;return r=n(r),i=n(i),o=n(o),a.opacity=1,function(c){return a.r=r(c),a.g=i(c),a.b=o(c),a+""}}}var AG=t2(XF),PG=t2(JF);function ur(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var HI=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qI=new RegExp(HI.source,"g");function OG(n){return function(){return n}}function RG(n){return function(e){return n(e)+""}}function GI(n,e){var t=HI.lastIndex=qI.lastIndex=0,r,i,o,s=-1,a=[],c=[];for(n=n+"",e=e+"";(r=HI.exec(n))&&(i=qI.exec(e));)(o=i.index)>t&&(o=e.slice(t,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,c.push({i:s,x:ur(r,i)})),t=qI.lastIndex;return t<e.length&&(o=e.slice(t),a[s]?a[s]+=o:a[++s]=o),a.length<2?c[0]?RG(c[0].x):OG(e):(e=c.length,function(l){for(var d=0,f;d<e;++d)a[(f=c[d]).i]=f.x(l);return a.join("")})}var n2=180/Math.PI,ty={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function WI(n,e,t,r,i,o){var s,a,c;return(s=Math.sqrt(n*n+e*e))&&(n/=s,e/=s),(c=n*t+e*r)&&(t-=n*c,r-=e*c),(a=Math.sqrt(t*t+r*r))&&(t/=a,r/=a,c/=a),n*r<e*t&&(n=-n,e=-e,c=-c,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,n)*n2,skewX:Math.atan(c)*n2,scaleX:s,scaleY:a}}var ny;function r2(n){let e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?ty:WI(e.a,e.b,e.c,e.d,e.e,e.f)}function i2(n){return n==null?ty:(ny||(ny=document.createElementNS("http://www.w3.org/2000/svg","g")),ny.setAttribute("transform",n),(n=ny.transform.baseVal.consolidate())?(n=n.matrix,WI(n.a,n.b,n.c,n.d,n.e,n.f)):ty)}function o2(n,e,t,r){function i(l){return l.length?l.pop()+" ":""}function o(l,d,f,p,g,y){if(l!==f||d!==p){var b=g.push("translate(",null,e,null,t);y.push({i:b-4,x:ur(l,f)},{i:b-2,x:ur(d,p)})}else(f||p)&&g.push("translate("+f+e+p+t)}function s(l,d,f,p){l!==d?(l-d>180?d+=360:d-l>180&&(l+=360),p.push({i:f.push(i(f)+"rotate(",null,r)-2,x:ur(l,d)})):d&&f.push(i(f)+"rotate("+d+r)}function a(l,d,f,p){l!==d?p.push({i:f.push(i(f)+"skewX(",null,r)-2,x:ur(l,d)}):d&&f.push(i(f)+"skewX("+d+r)}function c(l,d,f,p,g,y){if(l!==f||d!==p){var b=g.push(i(g)+"scale(",null,",",null,")");y.push({i:b-4,x:ur(l,f)},{i:b-2,x:ur(d,p)})}else(f!==1||p!==1)&&g.push(i(g)+"scale("+f+","+p+")")}return function(l,d){var f=[],p=[];return l=n(l),d=n(d),o(l.translateX,l.translateY,d.translateX,d.translateY,f,p),s(l.rotate,d.rotate,f,p),a(l.skewX,d.skewX,f,p),c(l.scaleX,l.scaleY,d.scaleX,d.scaleY,f,p),l=d=null,function(g){for(var y=-1,b=p.length,C;++y<b;)f[(C=p[y]).i]=C.x(g);return f.join("")}}}var KI=o2(r2,"px, ","px)","deg)"),QI=o2(i2,", ",")",")");var NG=1e-12;function s2(n){return((n=Math.exp(n))+1/n)/2}function kG(n){return((n=Math.exp(n))-1/n)/2}function FG(n){return((n=Math.exp(2*n))-1)/(n+1)}var YI=function n(e,t,r){function i(o,s){var a=o[0],c=o[1],l=o[2],d=s[0],f=s[1],p=s[2],g=d-a,y=f-c,b=g*g+y*y,C,S;if(b<NG)S=Math.log(p/l)/e,C=function(I){return[a+I*g,c+I*y,l*Math.exp(e*I*S)]};else{var k=Math.sqrt(b),P=(p*p-l*l+r*b)/(2*l*t*k),B=(p*p-l*l-r*b)/(2*p*t*k),q=Math.log(Math.sqrt(P*P+1)-P),z=Math.log(Math.sqrt(B*B+1)-B);S=(z-q)/e,C=function(I){var _=I*S,w=s2(q),D=l/(t*k)*(w*FG(e*_+q)-kG(q));return[a+D*g,c+D*y,l*w/s2(e*_+q)]}}return C.duration=S*1e3*e/Math.SQRT2,C}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,c=a*a;return n(s,a,c)},i}(Math.SQRT2,2,4);var nu=0,Fd=0,kd=0,c2=1e3,ry,Vd,iy=0,aa=0,oy=0,Ld=typeof performance=="object"&&performance.now?performance:Date,u2=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Bd(){return aa||(u2(VG),aa=Ld.now()+oy)}function VG(){aa=0}function jd(){this._call=this._time=this._next=null}jd.prototype=sy.prototype={constructor:jd,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?Bd():+t)+(e==null?0:+e),!this._next&&Vd!==this&&(Vd?Vd._next=this:ry=this,Vd=this),this._call=n,this._time=t,ZI()},stop:function(){this._call&&(this._call=null,this._time=1/0,ZI())}};function sy(n,e,t){var r=new jd;return r.restart(n,e,t),r}function l2(){Bd(),++nu;for(var n=ry,e;n;)(e=aa-n._time)>=0&&n._call.call(void 0,e),n=n._next;--nu}function a2(){aa=(iy=Ld.now())+oy,nu=Fd=0;try{l2()}finally{nu=0,jG(),aa=0}}function LG(){var n=Ld.now(),e=n-iy;e>c2&&(oy-=e,iy=n)}function jG(){for(var n,e=ry,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:ry=t);Vd=n,ZI(r)}function ZI(n){if(!nu){Fd&&(Fd=clearTimeout(Fd));var e=n-aa;e>24?(n<1/0&&(Fd=setTimeout(a2,n-Ld.now()-oy)),kd&&(kd=clearInterval(kd))):(kd||(iy=Ld.now(),kd=setInterval(LG,c2)),nu=1,u2(a2))}}function ay(n,e,t){var r=new jd;return e=e==null?0:+e,r.restart(i=>{r.stop(),n(i+e)},e,t),r}var BG=Td("start","end","cancel","interrupt"),UG=[],h2=0,d2=1,uy=2,cy=3,f2=4,ly=5,Ud=6;function $o(n,e,t,r,i,o){var s=n.__transition;if(!s)n.__transition={};else if(t in s)return;$G(n,t,{name:e,index:r,group:i,on:BG,tween:UG,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:h2})}function $d(n,e){var t=zt(n,e);if(t.state>h2)throw new Error("too late; already scheduled");return t}function nn(n,e){var t=zt(n,e);if(t.state>cy)throw new Error("too late; already running");return t}function zt(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function $G(n,e,t){var r=n.__transition,i;r[e]=t,t.timer=sy(o,0,t.time);function o(l){t.state=d2,t.timer.restart(s,t.delay,t.time),t.delay<=l&&s(l-t.delay)}function s(l){var d,f,p,g;if(t.state!==d2)return c();for(d in r)if(g=r[d],g.name===t.name){if(g.state===cy)return ay(s);g.state===f2?(g.state=Ud,g.timer.stop(),g.on.call("interrupt",n,n.__data__,g.index,g.group),delete r[d]):+d<e&&(g.state=Ud,g.timer.stop(),g.on.call("cancel",n,n.__data__,g.index,g.group),delete r[d])}if(ay(function(){t.state===cy&&(t.state=f2,t.timer.restart(a,t.delay,t.time),a(l))}),t.state=uy,t.on.call("start",n,n.__data__,t.index,t.group),t.state===uy){for(t.state=cy,i=new Array(p=t.tween.length),d=0,f=-1;d<p;++d)(g=t.tween[d].value.call(n,n.__data__,t.index,t.group))&&(i[++f]=g);i.length=f+1}}function a(l){for(var d=l<t.duration?t.ease.call(null,l/t.duration):(t.timer.restart(c),t.state=ly,1),f=-1,p=i.length;++f<p;)i[f].call(n,d);t.state===ly&&(t.on.call("end",n,n.__data__,t.index,t.group),c())}function c(){t.state=Ud,t.timer.stop(),delete r[e];for(var l in r)return;delete n.__transition}}function zo(n,e){var t=n.__transition,r,i,o=!0,s;if(t){e=e==null?null:e+"";for(s in t){if((r=t[s]).name!==e){o=!1;continue}i=r.state>uy&&r.state<ly,r.state=Ud,r.timer.stop(),r.on.call(i?"interrupt":"cancel",n,n.__data__,r.index,r.group),delete t[s]}o&&delete n.__transition}}function p2(n){return this.each(function(){zo(this,n)})}function zG(n,e){var t,r;return function(){var i=nn(this,n),o=i.tween;if(o!==t){r=t=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function qG(n,e,t){var r,i;if(typeof t!="function")throw new Error;return function(){var o=nn(this,n),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:e,value:t},c=0,l=i.length;c<l;++c)if(i[c].name===e){i[c]=a;break}c===l&&i.push(a)}o.tween=i}}function m2(n,e){var t=this._id;if(n+="",arguments.length<2){for(var r=zt(this.node(),t).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===n)return s.value;return null}return this.each((e==null?zG:qG)(t,n,e))}function ru(n,e,t){var r=n._id;return n.each(function(){var i=nn(this,r);(i.value||(i.value={}))[e]=t.apply(this,arguments)}),function(i){return zt(i,r).value[e]}}function dy(n,e){var t;return(typeof e=="number"?ur:e instanceof Uo?ey:(t=Uo(e))?(e=t,ey):GI)(n,e)}function HG(n){return function(){this.removeAttribute(n)}}function GG(n){return function(){this.removeAttributeNS(n.space,n.local)}}function WG(n,e,t){var r,i=t+"",o;return function(){var s=this.getAttribute(n);return s===i?null:s===r?o:o=e(r=s,t)}}function KG(n,e,t){var r,i=t+"",o;return function(){var s=this.getAttributeNS(n.space,n.local);return s===i?null:s===r?o:o=e(r=s,t)}}function QG(n,e,t){var r,i,o;return function(){var s,a=t(this),c;return a==null?void this.removeAttribute(n):(s=this.getAttribute(n),c=a+"",s===c?null:s===r&&c===i?o:(i=c,o=e(r=s,a)))}}function YG(n,e,t){var r,i,o;return function(){var s,a=t(this),c;return a==null?void this.removeAttributeNS(n.space,n.local):(s=this.getAttributeNS(n.space,n.local),c=a+"",s===c?null:s===r&&c===i?o:(i=c,o=e(r=s,a)))}}function g2(n,e){var t=Li(n),r=t==="transform"?QI:dy;return this.attrTween(n,typeof e=="function"?(t.local?YG:QG)(t,r,ru(this,"attr."+n,e)):e==null?(t.local?GG:HG)(t):(t.local?KG:WG)(t,r,e))}function ZG(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function XG(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function JG(n,e){var t,r;function i(){var o=e.apply(this,arguments);return o!==r&&(t=(r=o)&&XG(n,o)),t}return i._value=e,i}function e7(n,e){var t,r;function i(){var o=e.apply(this,arguments);return o!==r&&(t=(r=o)&&ZG(n,o)),t}return i._value=e,i}function y2(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var r=Li(n);return this.tween(t,(r.local?JG:e7)(r,e))}function t7(n,e){return function(){$d(this,n).delay=+e.apply(this,arguments)}}function n7(n,e){return e=+e,function(){$d(this,n).delay=e}}function v2(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?t7:n7)(e,n)):zt(this.node(),e).delay}function r7(n,e){return function(){nn(this,n).duration=+e.apply(this,arguments)}}function i7(n,e){return e=+e,function(){nn(this,n).duration=e}}function _2(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?r7:i7)(e,n)):zt(this.node(),e).duration}function o7(n,e){if(typeof e!="function")throw new Error;return function(){nn(this,n).ease=e}}function w2(n){var e=this._id;return arguments.length?this.each(o7(e,n)):zt(this.node(),e).ease}function s7(n,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;nn(this,n).ease=t}}function C2(n){if(typeof n!="function")throw new Error;return this.each(s7(this._id,n))}function b2(n){typeof n!="function"&&(n=Ad(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var o=e[i],s=o.length,a=r[i]=[],c,l=0;l<s;++l)(c=o[l])&&n.call(c,c.__data__,l,o)&&a.push(c);return new Tn(r,this._parents,this._name,this._id)}function E2(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,r=e.length,i=t.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var c=e[a],l=t[a],d=c.length,f=s[a]=new Array(d),p,g=0;g<d;++g)(p=c[g]||l[g])&&(f[g]=p);for(;a<r;++a)s[a]=e[a];return new Tn(s,this._parents,this._name,this._id)}function a7(n){return(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function c7(n,e,t){var r,i,o=a7(e)?$d:nn;return function(){var s=o(this,n),a=s.on;a!==r&&(i=(r=a).copy()).on(e,t),s.on=i}}function I2(n,e){var t=this._id;return arguments.length<2?zt(this.node(),t).on.on(n):this.each(c7(t,n,e))}function u7(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}function x2(){return this.on("end.remove",u7(this._id))}function D2(n){var e=this._name,t=this._id;typeof n!="function"&&(n=ia(n));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],c=a.length,l=o[s]=new Array(c),d,f,p=0;p<c;++p)(d=a[p])&&(f=n.call(d,d.__data__,p,a))&&("__data__"in d&&(f.__data__=d.__data__),l[p]=f,$o(l[p],e,t,p,l,zt(d,t)));return new Tn(o,this._parents,e,t)}function M2(n){var e=this._name,t=this._id;typeof n!="function"&&(n=Sd(n));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var c=r[a],l=c.length,d,f=0;f<l;++f)if(d=c[f]){for(var p=n.call(d,d.__data__,f,c),g,y=zt(d,t),b=0,C=p.length;b<C;++b)(g=p[b])&&$o(g,e,t,b,p,y);o.push(p),s.push(d)}return new Tn(o,s,e,t)}var l7=ji.prototype.constructor;function T2(){return new l7(this._groups,this._parents)}function d7(n,e){var t,r,i;return function(){var o=Bo(this,n),s=(this.style.removeProperty(n),Bo(this,n));return o===s?null:o===t&&s===r?i:i=e(t=o,r=s)}}function S2(n){return function(){this.style.removeProperty(n)}}function f7(n,e,t){var r,i=t+"",o;return function(){var s=Bo(this,n);return s===i?null:s===r?o:o=e(r=s,t)}}function h7(n,e,t){var r,i,o;return function(){var s=Bo(this,n),a=t(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(n),Bo(this,n))),s===c?null:s===r&&c===i?o:(i=c,o=e(r=s,a))}}function p7(n,e){var t,r,i,o="style."+e,s="end."+o,a;return function(){var c=nn(this,n),l=c.on,d=c.value[o]==null?a||(a=S2(e)):void 0;(l!==t||i!==d)&&(r=(t=l).copy()).on(s,i=d),c.on=r}}function A2(n,e,t){var r=(n+="")=="transform"?KI:dy;return e==null?this.styleTween(n,d7(n,r)).on("end.style."+n,S2(n)):typeof e=="function"?this.styleTween(n,h7(n,r,ru(this,"style."+n,e))).each(p7(this._id,n)):this.styleTween(n,f7(n,r,e),t).on("end.style."+n,null)}function m7(n,e,t){return function(r){this.style.setProperty(n,e.call(this,r),t)}}function g7(n,e,t){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&m7(n,s,t)),r}return o._value=e,o}function P2(n,e,t){var r="style."+(n+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,g7(n,e,t??""))}function y7(n){return function(){this.textContent=n}}function v7(n){return function(){var e=n(this);this.textContent=e??""}}function O2(n){return this.tween("text",typeof n=="function"?v7(ru(this,"text",n)):y7(n==null?"":n+""))}function _7(n){return function(e){this.textContent=n.call(this,e)}}function w7(n){var e,t;function r(){var i=n.apply(this,arguments);return i!==t&&(e=(t=i)&&_7(i)),e}return r._value=n,r}function R2(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,w7(n))}function N2(){for(var n=this._name,e=this._id,t=fy(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,c,l=0;l<a;++l)if(c=s[l]){var d=zt(c,e);$o(c,n,t,l,s,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Tn(r,this._parents,n,t)}function k2(){var n,e,t=this,r=t._id,i=t.size();return new Promise(function(o,s){var a={value:s},c={value:function(){--i===0&&o()}};t.each(function(){var l=nn(this,r),d=l.on;d!==n&&(e=(n=d).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(c)),l.on=e}),i===0&&o()})}var C7=0;function Tn(n,e,t,r){this._groups=n,this._parents=e,this._name=t,this._id=r}function F2(n){return ji().transition(n)}function fy(){return++C7}var Ui=ji.prototype;Tn.prototype=F2.prototype={constructor:Tn,select:D2,selectAll:M2,selectChild:Ui.selectChild,selectChildren:Ui.selectChildren,filter:b2,merge:E2,selection:T2,transition:N2,call:Ui.call,nodes:Ui.nodes,node:Ui.node,size:Ui.size,empty:Ui.empty,each:Ui.each,on:I2,attr:g2,attrTween:y2,style:A2,styleTween:P2,text:O2,textTween:R2,remove:x2,tween:m2,delay:v2,duration:_2,ease:w2,easeVarying:C2,end:k2,[Symbol.iterator]:Ui[Symbol.iterator]};function hy(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var b7={time:null,delay:0,duration:250,ease:hy};function E7(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}function V2(n){var e,t;n instanceof Tn?(e=n._id,n=n._name):(e=fy(),(t=b7).time=Bd(),n=n==null?null:n+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,c,l=0;l<a;++l)(c=s[l])&&$o(c,n,e,l,s,t||E7(c,e));return new Tn(r,this._parents,n,e)}ji.prototype.interrupt=p2;ji.prototype.transition=V2;var{abs:ale,max:cle,min:ule}=Math;function L2(n){return[+n[0],+n[1]]}function I7(n){return[L2(n[0]),L2(n[1])]}var lle={name:"x",handles:["w","e"].map(XI),input:function(n,e){return n==null?null:[[+n[0],e[0][1]],[+n[1],e[1][1]]]},output:function(n){return n&&[n[0][0],n[1][0]]}},dle={name:"y",handles:["n","s"].map(XI),input:function(n,e){return n==null?null:[[e[0][0],+n[0]],[e[1][0],+n[1]]]},output:function(n){return n&&[n[0][1],n[1][1]]}},fle={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(XI),input:function(n){return n==null?null:I7(n)},output:function(n){return n}};function XI(n){return{type:n}}function x7(n){if(!n.ok)throw new Error(n.status+" "+n.statusText);if(!(n.status===204||n.status===205))return n.json()}function JI(n,e){return fetch(n,e).then(x7)}var Ve=1e-6,j2=1e-12,Se=Math.PI,Kt=Se/2,ex=Se/4,Qt=Se*2,pn=180/Se,ct=Se/180,ze=Math.abs,py=Math.atan,$i=Math.atan2,We=Math.cos;var B2=Math.exp;var U2=Math.log;var Je=Math.sin,$2=Math.sign||function(n){return n>0?1:n<0?-1:0},Gn=Math.sqrt,z2=Math.tan;function q2(n){return n>1?0:n<-1?Se:Math.acos(n)}function zi(n){return n>1?Kt:n<-1?-Kt:Math.asin(n)}function Yt(){}function my(n,e){n&&G2.hasOwnProperty(n.type)&&G2[n.type](n,e)}var H2={Feature:function(n,e){my(n.geometry,e)},FeatureCollection:function(n,e){for(var t=n.features,r=-1,i=t.length;++r<i;)my(t[r].geometry,e)}},G2={Sphere:function(n,e){e.sphere()},Point:function(n,e){n=n.coordinates,e.point(n[0],n[1],n[2])},MultiPoint:function(n,e){for(var t=n.coordinates,r=-1,i=t.length;++r<i;)n=t[r],e.point(n[0],n[1],n[2])},LineString:function(n,e){tx(n.coordinates,e,0)},MultiLineString:function(n,e){for(var t=n.coordinates,r=-1,i=t.length;++r<i;)tx(t[r],e,0)},Polygon:function(n,e){W2(n.coordinates,e)},MultiPolygon:function(n,e){for(var t=n.coordinates,r=-1,i=t.length;++r<i;)W2(t[r],e)},GeometryCollection:function(n,e){for(var t=n.geometries,r=-1,i=t.length;++r<i;)my(t[r],e)}};function tx(n,e,t){var r=-1,i=n.length-t,o;for(e.lineStart();++r<i;)o=n[r],e.point(o[0],o[1],o[2]);e.lineEnd()}function W2(n,e){var t=-1,r=n.length;for(e.polygonStart();++t<r;)tx(n[t],e,1);e.polygonEnd()}function qo(n,e){n&&H2.hasOwnProperty(n.type)?H2[n.type](n,e):my(n,e)}function zd(n){return[$i(n[1],n[0]),zi(n[2])]}function ei(n){var e=n[0],t=n[1],r=We(t);return[r*We(e),r*Je(e),Je(t)]}function qd(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function iu(n,e){return[n[1]*e[2]-n[2]*e[1],n[2]*e[0]-n[0]*e[2],n[0]*e[1]-n[1]*e[0]]}function gy(n,e){n[0]+=e[0],n[1]+=e[1],n[2]+=e[2]}function Hd(n,e){return[n[0]*e,n[1]*e,n[2]*e]}function Gd(n){var e=Gn(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=e,n[1]/=e,n[2]/=e}function Wd(n,e){function t(r,i){return r=n(r,i),e(r[0],r[1])}return n.invert&&e.invert&&(t.invert=function(r,i){return r=e.invert(r,i),r&&n.invert(r[0],r[1])}),t}function nx(n,e){return ze(n)>Se&&(n-=Math.round(n/Qt)*Qt),[n,e]}nx.invert=nx;function rx(n,e,t){return(n%=Qt)?e||t?Wd(Q2(n),Y2(e,t)):Q2(n):e||t?Y2(e,t):nx}function K2(n){return function(e,t){return e+=n,ze(e)>Se&&(e-=Math.round(e/Qt)*Qt),[e,t]}}function Q2(n){var e=K2(n);return e.invert=K2(-n),e}function Y2(n,e){var t=We(n),r=Je(n),i=We(e),o=Je(e);function s(a,c){var l=We(c),d=We(a)*l,f=Je(a)*l,p=Je(c),g=p*t+d*r;return[$i(f*i-g*o,d*t-p*r),zi(g*i+f*o)]}return s.invert=function(a,c){var l=We(c),d=We(a)*l,f=Je(a)*l,p=Je(c),g=p*i-f*o;return[$i(f*i+p*o,d*t+g*r),zi(g*t-d*r)]},s}function Z2(n){n=rx(n[0]*ct,n[1]*ct,n.length>2?n[2]*ct:0);function e(t){return t=n(t[0]*ct,t[1]*ct),t[0]*=pn,t[1]*=pn,t}return e.invert=function(t){return t=n.invert(t[0]*ct,t[1]*ct),t[0]*=pn,t[1]*=pn,t},e}function J2(n,e,t,r,i,o){if(t){var s=We(e),a=Je(e),c=r*t;i==null?(i=e+r*Qt,o=e-c/2):(i=X2(s,i),o=X2(s,o),(r>0?i<o:i>o)&&(i+=r*Qt));for(var l,d=i;r>0?d>o:d<o;d-=c)l=zd([s,-a*We(d),-a*Je(d)]),n.point(l[0],l[1])}}function X2(n,e){e=ei(e),e[0]-=n,Gd(e);var t=q2(-e[1]);return((-e[2]<0?-t:t)+Qt-Ve)%Qt}function yy(){var n=[],e;return{point:function(t,r,i){e.push([t,r,i])},lineStart:function(){n.push(e=[])},lineEnd:Yt,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var t=n;return n=[],e=null,t}}}function ou(n,e){return ze(n[0]-e[0])<Ve&&ze(n[1]-e[1])<Ve}function vy(n,e,t,r){this.x=n,this.z=e,this.o=t,this.e=r,this.v=!1,this.n=this.p=null}function _y(n,e,t,r,i){var o=[],s=[],a,c;if(n.forEach(function(y){if(!((b=y.length-1)<=0)){var b,C=y[0],S=y[b],k;if(ou(C,S)){if(!C[2]&&!S[2]){for(i.lineStart(),a=0;a<b;++a)i.point((C=y[a])[0],C[1]);i.lineEnd();return}S[0]+=2*Ve}o.push(k=new vy(C,y,null,!0)),s.push(k.o=new vy(C,null,k,!1)),o.push(k=new vy(S,y,null,!1)),s.push(k.o=new vy(S,null,k,!0))}}),!!o.length){for(s.sort(e),eV(o),eV(s),a=0,c=s.length;a<c;++a)s[a].e=t=!t;for(var l=o[0],d,f;;){for(var p=l,g=!0;p.v;)if((p=p.n)===l)return;d=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(g)for(a=0,c=d.length;a<c;++a)i.point((f=d[a])[0],f[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(g)for(d=p.p.z,a=d.length-1;a>=0;--a)i.point((f=d[a])[0],f[1]);else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,d=p.z,g=!g}while(!p.v);i.lineEnd()}}}function eV(n){if(e=n.length){for(var e,t=0,r=n[0],i;++t<e;)r.n=i=n[t],i.p=r,r=i;r.n=i=n[0],i.p=r}}function ix(n){return ze(n[0])<=Se?n[0]:$2(n[0])*((ze(n[0])+Se)%Qt-Se)}function tV(n,e){var t=ix(e),r=e[1],i=Je(r),o=[Je(t),-We(t),0],s=0,a=0,c=new Hn;i===1?r=Kt+Ve:i===-1&&(r=-Kt-Ve);for(var l=0,d=n.length;l<d;++l)if(p=(f=n[l]).length)for(var f,p,g=f[p-1],y=ix(g),b=g[1]/2+ex,C=Je(b),S=We(b),k=0;k<p;++k,y=B,C=z,S=I,g=P){var P=f[k],B=ix(P),q=P[1]/2+ex,z=Je(q),I=We(q),_=B-y,w=_>=0?1:-1,D=w*_,x=D>Se,A=C*z;if(c.add($i(A*w*Je(D),S*I+A*We(D))),s+=x?_+w*Qt:_,x^y>=t^B>=t){var E=iu(ei(g),ei(P));Gd(E);var R=iu(o,E);Gd(R);var N=(x^_>=0?-1:1)*zi(R[2]);(r>N||r===N&&(E[0]||E[1]))&&(a+=x^_>=0?1:-1)}}return(s<-Ve||s<Ve&&c<-j2)^a&1}function wy(n,e,t,r){return function(i){var o=e(i),s=yy(),a=e(s),c=!1,l,d,f,p={point:g,lineStart:b,lineEnd:C,polygonStart:function(){p.point=S,p.lineStart=k,p.lineEnd=P,d=[],l=[]},polygonEnd:function(){p.point=g,p.lineStart=b,p.lineEnd=C,d=Jc(d);var B=tV(l,r);d.length?(c||(i.polygonStart(),c=!0),_y(d,M7,B,t,i)):B&&(c||(i.polygonStart(),c=!0),i.lineStart(),t(null,null,1,i),i.lineEnd()),c&&(i.polygonEnd(),c=!1),d=l=null},sphere:function(){i.polygonStart(),i.lineStart(),t(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function g(B,q){n(B,q)&&i.point(B,q)}function y(B,q){o.point(B,q)}function b(){p.point=y,o.lineStart()}function C(){p.point=g,o.lineEnd()}function S(B,q){f.push([B,q]),a.point(B,q)}function k(){a.lineStart(),f=[]}function P(){S(f[0][0],f[0][1]),a.lineEnd();var B=a.clean(),q=s.result(),z,I=q.length,_,w,D;if(f.pop(),l.push(f),f=null,!!I){if(B&1){if(w=q[0],(_=w.length-1)>0){for(c||(i.polygonStart(),c=!0),i.lineStart(),z=0;z<_;++z)i.point((D=w[z])[0],D[1]);i.lineEnd()}return}I>1&&B&2&&q.push(q.pop().concat(q.shift())),d.push(q.filter(D7))}}return p}}function D7(n){return n.length>1}function M7(n,e){return((n=n.x)[0]<0?n[1]-Kt-Ve:Kt-n[1])-((e=e.x)[0]<0?e[1]-Kt-Ve:Kt-e[1])}var ox=wy(function(){return!0},T7,A7,[-Se,-Kt]);function T7(n){var e=NaN,t=NaN,r=NaN,i;return{lineStart:function(){n.lineStart(),i=1},point:function(o,s){var a=o>0?Se:-Se,c=ze(o-e);ze(c-Se)<Ve?(n.point(e,t=(t+s)/2>0?Kt:-Kt),n.point(r,t),n.lineEnd(),n.lineStart(),n.point(a,t),n.point(o,t),i=0):r!==a&&c>=Se&&(ze(e-r)<Ve&&(e-=r*Ve),ze(o-a)<Ve&&(o-=a*Ve),t=S7(e,t,o,s),n.point(r,t),n.lineEnd(),n.lineStart(),n.point(a,t),i=0),n.point(e=o,t=s),r=a},lineEnd:function(){n.lineEnd(),e=t=NaN},clean:function(){return 2-i}}}function S7(n,e,t,r){var i,o,s=Je(n-t);return ze(s)>Ve?py((Je(e)*(o=We(r))*Je(t)-Je(r)*(i=We(e))*Je(n))/(i*o*s)):(e+r)/2}function A7(n,e,t,r){var i;if(n==null)i=t*Kt,r.point(-Se,i),r.point(0,i),r.point(Se,i),r.point(Se,0),r.point(Se,-i),r.point(0,-i),r.point(-Se,-i),r.point(-Se,0),r.point(-Se,i);else if(ze(n[0]-e[0])>Ve){var o=n[0]<e[0]?Se:-Se;i=t*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}function nV(n){var e=We(n),t=2*ct,r=e>0,i=ze(e)>Ve;function o(d,f,p,g){J2(g,n,t,p,d,f)}function s(d,f){return We(d)*We(f)>e}function a(d){var f,p,g,y,b;return{lineStart:function(){y=g=!1,b=1},point:function(C,S){var k=[C,S],P,B=s(C,S),q=r?B?0:l(C,S):B?l(C+(C<0?Se:-Se),S):0;if(!f&&(y=g=B)&&d.lineStart(),B!==g&&(P=c(f,k),(!P||ou(f,P)||ou(k,P))&&(k[2]=1)),B!==g)b=0,B?(d.lineStart(),P=c(k,f),d.point(P[0],P[1])):(P=c(f,k),d.point(P[0],P[1],2),d.lineEnd()),f=P;else if(i&&f&&r^B){var z;!(q&p)&&(z=c(k,f,!0))&&(b=0,r?(d.lineStart(),d.point(z[0][0],z[0][1]),d.point(z[1][0],z[1][1]),d.lineEnd()):(d.point(z[1][0],z[1][1]),d.lineEnd(),d.lineStart(),d.point(z[0][0],z[0][1],3)))}B&&(!f||!ou(f,k))&&d.point(k[0],k[1]),f=k,g=B,p=q},lineEnd:function(){g&&d.lineEnd(),f=null},clean:function(){return b|(y&&g)<<1}}}function c(d,f,p){var g=ei(d),y=ei(f),b=[1,0,0],C=iu(g,y),S=qd(C,C),k=C[0],P=S-k*k;if(!P)return!p&&d;var B=e*S/P,q=-e*k/P,z=iu(b,C),I=Hd(b,B),_=Hd(C,q);gy(I,_);var w=z,D=qd(I,w),x=qd(w,w),A=D*D-x*(qd(I,I)-1);if(!(A<0)){var E=Gn(A),R=Hd(w,(-D-E)/x);if(gy(R,I),R=zd(R),!p)return R;var N=d[0],$=f[0],J=d[1],ce=f[1],he;$<N&&(he=N,N=$,$=he);var ge=$-N,Ae=ze(ge-Se)<Ve,Pe=Ae||ge<Ve;if(!Ae&&ce<J&&(he=J,J=ce,ce=he),Pe?Ae?J+ce>0^R[1]<(ze(R[0]-N)<Ve?J:ce):J<=R[1]&&R[1]<=ce:ge>Se^(N<=R[0]&&R[0]<=$)){var Oe=Hd(w,(-D+E)/x);return gy(Oe,I),[R,zd(Oe)]}}}function l(d,f){var p=r?n:Se-n,g=0;return d<-p?g|=1:d>p&&(g|=2),f<-p?g|=4:f>p&&(g|=8),g}return wy(s,a,o,r?[0,-n]:[-Se,n-Se])}function rV(n,e,t,r,i,o){var s=n[0],a=n[1],c=e[0],l=e[1],d=0,f=1,p=c-s,g=l-a,y;if(y=t-s,!(!p&&y>0)){if(y/=p,p<0){if(y<d)return;y<f&&(f=y)}else if(p>0){if(y>f)return;y>d&&(d=y)}if(y=i-s,!(!p&&y<0)){if(y/=p,p<0){if(y>f)return;y>d&&(d=y)}else if(p>0){if(y<d)return;y<f&&(f=y)}if(y=r-a,!(!g&&y>0)){if(y/=g,g<0){if(y<d)return;y<f&&(f=y)}else if(g>0){if(y>f)return;y>d&&(d=y)}if(y=o-a,!(!g&&y<0)){if(y/=g,g<0){if(y>f)return;y>d&&(d=y)}else if(g>0){if(y<d)return;y<f&&(f=y)}return d>0&&(n[0]=s+d*p,n[1]=a+d*g),f<1&&(e[0]=s+f*p,e[1]=a+f*g),!0}}}}}var Kd=1e9,Cy=-Kd;function sx(n,e,t,r){function i(l,d){return n<=l&&l<=t&&e<=d&&d<=r}function o(l,d,f,p){var g=0,y=0;if(l==null||(g=s(l,f))!==(y=s(d,f))||c(l,d)<0^f>0)do p.point(g===0||g===3?n:t,g>1?r:e);while((g=(g+f+4)%4)!==y);else p.point(d[0],d[1])}function s(l,d){return ze(l[0]-n)<Ve?d>0?0:3:ze(l[0]-t)<Ve?d>0?2:1:ze(l[1]-e)<Ve?d>0?1:0:d>0?3:2}function a(l,d){return c(l.x,d.x)}function c(l,d){var f=s(l,1),p=s(d,1);return f!==p?f-p:f===0?d[1]-l[1]:f===1?l[0]-d[0]:f===2?l[1]-d[1]:d[0]-l[0]}return function(l){var d=l,f=yy(),p,g,y,b,C,S,k,P,B,q,z,I={point:_,lineStart:A,lineEnd:E,polygonStart:D,polygonEnd:x};function _(N,$){i(N,$)&&d.point(N,$)}function w(){for(var N=0,$=0,J=g.length;$<J;++$)for(var ce=g[$],he=1,ge=ce.length,Ae=ce[0],Pe,Oe,ut=Ae[0],lt=Ae[1];he<ge;++he)Pe=ut,Oe=lt,Ae=ce[he],ut=Ae[0],lt=Ae[1],Oe<=r?lt>r&&(ut-Pe)*(r-Oe)>(lt-Oe)*(n-Pe)&&++N:lt<=r&&(ut-Pe)*(r-Oe)<(lt-Oe)*(n-Pe)&&--N;return N}function D(){d=f,p=[],g=[],z=!0}function x(){var N=w(),$=z&&N,J=(p=Jc(p)).length;($||J)&&(l.polygonStart(),$&&(l.lineStart(),o(null,null,1,l),l.lineEnd()),J&&_y(p,a,N,o,l),l.polygonEnd()),d=l,p=g=y=null}function A(){I.point=R,g&&g.push(y=[]),q=!0,B=!1,k=P=NaN}function E(){p&&(R(b,C),S&&B&&f.rejoin(),p.push(f.result())),I.point=_,B&&d.lineEnd()}function R(N,$){var J=i(N,$);if(g&&y.push([N,$]),q)b=N,C=$,S=J,q=!1,J&&(d.lineStart(),d.point(N,$));else if(J&&B)d.point(N,$);else{var ce=[k=Math.max(Cy,Math.min(Kd,k)),P=Math.max(Cy,Math.min(Kd,P))],he=[N=Math.max(Cy,Math.min(Kd,N)),$=Math.max(Cy,Math.min(Kd,$))];rV(ce,he,n,e,t,r)?(B||(d.lineStart(),d.point(ce[0],ce[1])),d.point(he[0],he[1]),J||d.lineEnd(),z=!1):J&&(d.lineStart(),d.point(N,$),z=!1)}k=N,P=$,B=J}return I}}var Qd=n=>n;var ax=new Hn,cx=new Hn,iV,oV,ux,lx,Ho={point:Yt,lineStart:Yt,lineEnd:Yt,polygonStart:function(){Ho.lineStart=P7,Ho.lineEnd=R7},polygonEnd:function(){Ho.lineStart=Ho.lineEnd=Ho.point=Yt,ax.add(ze(cx)),cx=new Hn},result:function(){var n=ax/2;return ax=new Hn,n}};function P7(){Ho.point=O7}function O7(n,e){Ho.point=sV,iV=ux=n,oV=lx=e}function sV(n,e){cx.add(lx*n-ux*e),ux=n,lx=e}function R7(){sV(iV,oV)}var dx=Ho;var su=1/0,by=su,Yd=-su,Ey=Yd,N7={point:k7,lineStart:Yt,lineEnd:Yt,polygonStart:Yt,polygonEnd:Yt,result:function(){var n=[[su,by],[Yd,Ey]];return Yd=Ey=-(by=su=1/0),n}};function k7(n,e){n<su&&(su=n),n>Yd&&(Yd=n),e<by&&(by=e),e>Ey&&(Ey=e)}var au=N7;var fx=0,hx=0,Zd=0,Iy=0,xy=0,cu=0,px=0,mx=0,Xd=0,uV,lV,ti,ni,Mr={point:ca,lineStart:aV,lineEnd:cV,polygonStart:function(){Mr.lineStart=L7,Mr.lineEnd=j7},polygonEnd:function(){Mr.point=ca,Mr.lineStart=aV,Mr.lineEnd=cV},result:function(){var n=Xd?[px/Xd,mx/Xd]:cu?[Iy/cu,xy/cu]:Zd?[fx/Zd,hx/Zd]:[NaN,NaN];return fx=hx=Zd=Iy=xy=cu=px=mx=Xd=0,n}};function ca(n,e){fx+=n,hx+=e,++Zd}function aV(){Mr.point=F7}function F7(n,e){Mr.point=V7,ca(ti=n,ni=e)}function V7(n,e){var t=n-ti,r=e-ni,i=Gn(t*t+r*r);Iy+=i*(ti+n)/2,xy+=i*(ni+e)/2,cu+=i,ca(ti=n,ni=e)}function cV(){Mr.point=ca}function L7(){Mr.point=B7}function j7(){dV(uV,lV)}function B7(n,e){Mr.point=dV,ca(uV=ti=n,lV=ni=e)}function dV(n,e){var t=n-ti,r=e-ni,i=Gn(t*t+r*r);Iy+=i*(ti+n)/2,xy+=i*(ni+e)/2,cu+=i,i=ni*n-ti*e,px+=i*(ti+n),mx+=i*(ni+e),Xd+=i*3,ca(ti=n,ni=e)}var gx=Mr;function Dy(n){this._context=n}Dy.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,e){switch(this._point){case 0:{this._context.moveTo(n,e),this._point=1;break}case 1:{this._context.lineTo(n,e);break}default:{this._context.moveTo(n+this._radius,e),this._context.arc(n,e,this._radius,0,Qt);break}}},result:Yt};var vx=new Hn,yx,fV,hV,Jd,ef,My={point:Yt,lineStart:function(){My.point=U7},lineEnd:function(){yx&&pV(fV,hV),My.point=Yt},polygonStart:function(){yx=!0},polygonEnd:function(){yx=null},result:function(){var n=+vx;return vx=new Hn,n}};function U7(n,e){My.point=pV,fV=Jd=n,hV=ef=e}function pV(n,e){Jd-=n,ef-=e,vx.add(Gn(Jd*Jd+ef*ef)),Jd=n,ef=e}var _x=My;var mV,Ty,gV,yV,tf=class{constructor(e){this._append=e==null?vV:$7(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,t){switch(this._point){case 0:{this._append`M${e},${t}`,this._point=1;break}case 1:{this._append`L${e},${t}`;break}default:{if(this._append`M${e},${t}`,this._radius!==gV||this._append!==Ty){let r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,gV=r,Ty=this._append,yV=this._,this._=i}this._+=yV;break}}}result(){let e=this._;return this._="",e.length?e:null}};function vV(n){let e=1;this._+=n[0];for(let t=n.length;e<t;++e)this._+=arguments[e]+n[e]}function $7(n){let e=Math.floor(n);if(!(e>=0))throw new RangeError(`invalid digits: ${n}`);if(e>15)return vV;if(e!==mV){let t=10**e;mV=e,Ty=function(i){let o=1;this._+=i[0];for(let s=i.length;o<s;++o)this._+=Math.round(arguments[o]*t)/t+i[o]}}return Ty}function wx(n,e){let t=3,r=4.5,i,o;function s(a){return a&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),qo(a,i(o))),o.result()}return s.area=function(a){return qo(a,i(dx)),dx.result()},s.measure=function(a){return qo(a,i(_x)),_x.result()},s.bounds=function(a){return qo(a,i(au)),au.result()},s.centroid=function(a){return qo(a,i(gx)),gx.result()},s.projection=function(a){return arguments.length?(i=a==null?(n=null,Qd):(n=a).stream,s):n},s.context=function(a){return arguments.length?(o=a==null?(e=null,new tf(t)):new Dy(e=a),typeof r!="function"&&o.pointRadius(r),s):e},s.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(o.pointRadius(+a),+a),s):r},s.digits=function(a){if(!arguments.length)return t;if(a==null)t=null;else{let c=Math.floor(a);if(!(c>=0))throw new RangeError(`invalid digits: ${a}`);t=c}return e===null&&(o=new tf(t)),s},s.projection(n).digits(t).context(e)}function nf(n){return function(e){var t=new Cx;for(var r in n)t[r]=n[r];return t.stream=e,t}}function Cx(){}Cx.prototype={constructor:Cx,point:function(n,e){this.stream.point(n,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function bx(n,e,t){var r=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),r!=null&&n.clipExtent(null),qo(t,n.stream(au)),e(au.result()),r!=null&&n.clipExtent(r),n}function Ex(n,e,t){return bx(n,function(r){var i=e[1][0]-e[0][0],o=e[1][1]-e[0][1],s=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),a=+e[0][0]+(i-s*(r[1][0]+r[0][0]))/2,c=+e[0][1]+(o-s*(r[1][1]+r[0][1]))/2;n.scale(150*s).translate([a,c])},t)}function _V(n,e,t){return Ex(n,[[0,0],e],t)}function wV(n,e,t){return bx(n,function(r){var i=+e,o=i/(r[1][0]-r[0][0]),s=(i-o*(r[1][0]+r[0][0]))/2,a=-o*r[0][1];n.scale(150*o).translate([s,a])},t)}function CV(n,e,t){return bx(n,function(r){var i=+e,o=i/(r[1][1]-r[0][1]),s=-o*r[0][0],a=(i-o*(r[1][1]+r[0][1]))/2;n.scale(150*o).translate([s,a])},t)}var bV=16,z7=We(30*ct);function Ix(n,e){return+e?H7(n,e):q7(n)}function q7(n){return nf({point:function(e,t){e=n(e,t),this.stream.point(e[0],e[1])}})}function H7(n,e){function t(r,i,o,s,a,c,l,d,f,p,g,y,b,C){var S=l-r,k=d-i,P=S*S+k*k;if(P>4*e&&b--){var B=s+p,q=a+g,z=c+y,I=Gn(B*B+q*q+z*z),_=zi(z/=I),w=ze(ze(z)-1)<Ve||ze(o-f)<Ve?(o+f)/2:$i(q,B),D=n(w,_),x=D[0],A=D[1],E=x-r,R=A-i,N=k*E-S*R;(N*N/P>e||ze((S*E+k*R)/P-.5)>.3||s*p+a*g+c*y<z7)&&(t(r,i,o,s,a,c,x,A,w,B/=I,q/=I,z,b,C),C.point(x,A),t(x,A,w,B,q,z,l,d,f,p,g,y,b,C))}}return function(r){var i,o,s,a,c,l,d,f,p,g,y,b,C={point:S,lineStart:k,lineEnd:B,polygonStart:function(){r.polygonStart(),C.lineStart=q},polygonEnd:function(){r.polygonEnd(),C.lineStart=k}};function S(_,w){_=n(_,w),r.point(_[0],_[1])}function k(){f=NaN,C.point=P,r.lineStart()}function P(_,w){var D=ei([_,w]),x=n(_,w);t(f,p,d,g,y,b,f=x[0],p=x[1],d=_,g=D[0],y=D[1],b=D[2],bV,r),r.point(f,p)}function B(){C.point=S,r.lineEnd()}function q(){k(),C.point=z,C.lineEnd=I}function z(_,w){P(i=_,w),o=f,s=p,a=g,c=y,l=b,C.point=P}function I(){t(f,p,d,g,y,b,o,s,i,a,c,l,bV,r),C.lineEnd=B,B()}return C}}var G7=nf({point:function(n,e){this.stream.point(n*ct,e*ct)}});function W7(n){return nf({point:function(e,t){var r=n(e,t);return this.stream.point(r[0],r[1])}})}function K7(n,e,t,r,i){function o(s,a){return s*=r,a*=i,[e+n*s,t-n*a]}return o.invert=function(s,a){return[(s-e)/n*r,(t-a)/n*i]},o}function EV(n,e,t,r,i,o){if(!o)return K7(n,e,t,r,i);var s=We(o),a=Je(o),c=s*n,l=a*n,d=s/n,f=a/n,p=(a*t-s*e)/n,g=(a*e+s*t)/n;function y(b,C){return b*=r,C*=i,[c*b-l*C+e,t-l*b-c*C]}return y.invert=function(b,C){return[r*(d*b-f*C+p),i*(g-f*b-d*C)]},y}function xx(n){return Q7(function(){return n})()}function Q7(n){var e,t=150,r=480,i=250,o=0,s=0,a=0,c=0,l=0,d,f=0,p=1,g=1,y=null,b=ox,C=null,S,k,P,B=Qd,q=.5,z,I,_,w,D;function x(N){return _(N[0]*ct,N[1]*ct)}function A(N){return N=_.invert(N[0],N[1]),N&&[N[0]*pn,N[1]*pn]}x.stream=function(N){return w&&D===N?w:w=G7(W7(d)(b(z(B(D=N)))))},x.preclip=function(N){return arguments.length?(b=N,y=void 0,R()):b},x.postclip=function(N){return arguments.length?(B=N,C=S=k=P=null,R()):B},x.clipAngle=function(N){return arguments.length?(b=+N?nV(y=N*ct):(y=null,ox),R()):y*pn},x.clipExtent=function(N){return arguments.length?(B=N==null?(C=S=k=P=null,Qd):sx(C=+N[0][0],S=+N[0][1],k=+N[1][0],P=+N[1][1]),R()):C==null?null:[[C,S],[k,P]]},x.scale=function(N){return arguments.length?(t=+N,E()):t},x.translate=function(N){return arguments.length?(r=+N[0],i=+N[1],E()):[r,i]},x.center=function(N){return arguments.length?(o=N[0]%360*ct,s=N[1]%360*ct,E()):[o*pn,s*pn]},x.rotate=function(N){return arguments.length?(a=N[0]%360*ct,c=N[1]%360*ct,l=N.length>2?N[2]%360*ct:0,E()):[a*pn,c*pn,l*pn]},x.angle=function(N){return arguments.length?(f=N%360*ct,E()):f*pn},x.reflectX=function(N){return arguments.length?(p=N?-1:1,E()):p<0},x.reflectY=function(N){return arguments.length?(g=N?-1:1,E()):g<0},x.precision=function(N){return arguments.length?(z=Ix(I,q=N*N),R()):Gn(q)},x.fitExtent=function(N,$){return Ex(x,N,$)},x.fitSize=function(N,$){return _V(x,N,$)},x.fitWidth=function(N,$){return wV(x,N,$)},x.fitHeight=function(N,$){return CV(x,N,$)};function E(){var N=EV(t,0,0,p,g,f).apply(null,e(o,s)),$=EV(t,r-N[0],i-N[1],p,g,f);return d=rx(a,c,l),I=Wd(e,$),_=Wd(d,I),z=Ix(I,q),R()}function R(){return w=D=null,x}return function(){return e=n.apply(this,arguments),x.invert=e.invert&&A,E()}}function Sy(n,e){return[n,U2(z2((Kt+e)/2))]}Sy.invert=function(n,e){return[n,2*py(B2(e))-Kt]};function Dx(){return Y7(Sy).scale(961/Qt)}function Y7(n){var e=xx(n),t=e.center,r=e.scale,i=e.translate,o=e.clipExtent,s=null,a,c,l;e.scale=function(f){return arguments.length?(r(f),d()):r()},e.translate=function(f){return arguments.length?(i(f),d()):i()},e.center=function(f){return arguments.length?(t(f),d()):t()},e.clipExtent=function(f){return arguments.length?(f==null?s=a=c=l=null:(s=+f[0][0],a=+f[0][1],c=+f[1][0],l=+f[1][1]),d()):s==null?null:[[s,a],[c,l]]};function d(){var f=Se*r(),p=e(Z2(e.rotate()).invert([0,0]));return o(s==null?[[p[0]-f,p[1]-f],[p[0]+f,p[1]+f]]:n===Sy?[[Math.max(p[0]-f,s),a],[Math.min(p[0]+f,c),l]]:[[s,Math.max(p[1]-f,a)],[c,Math.min(p[1]+f,l)]])}return d()}var rf=n=>()=>n;function Mx(n,{sourceEvent:e,target:t,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Tr(n,e,t){this.k=n,this.x=e,this.y=t}Tr.prototype={constructor:Tr,scale:function(n){return n===1?this:new Tr(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new Tr(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var of=new Tr(1,0,0);Tx.prototype=Tr.prototype;function Tx(n){for(;!n.__zoom;)if(!(n=n.parentNode))return of;return n.__zoom}function Ay(n){n.stopImmediatePropagation()}function uu(n){n.preventDefault(),n.stopImmediatePropagation()}function Z7(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function X7(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function IV(){return this.__zoom||of}function J7(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function eW(){return navigator.maxTouchPoints||"ontouchstart"in this}function tW(n,e,t){var r=n.invertX(e[0][0])-t[0][0],i=n.invertX(e[1][0])-t[1][0],o=n.invertY(e[0][1])-t[0][1],s=n.invertY(e[1][1])-t[1][1];return n.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function Sx(){var n=Z7,e=X7,t=tW,r=J7,i=eW,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,c=YI,l=Td("start","zoom","end"),d,f,p,g=500,y=150,b=0,C=10;function S(R){R.property("__zoom",IV).on("wheel.zoom",_,{passive:!1}).on("mousedown.zoom",w).on("dblclick.zoom",D).filter(i).on("touchstart.zoom",x).on("touchmove.zoom",A).on("touchend.zoom touchcancel.zoom",E).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}S.transform=function(R,N,$,J){var ce=R.selection?R.selection():R;ce.property("__zoom",IV),R!==ce?q(R,N,$,J):ce.interrupt().each(function(){z(this,arguments).event(J).start().zoom(null,typeof N=="function"?N.apply(this,arguments):N).end()})},S.scaleBy=function(R,N,$,J){S.scaleTo(R,function(){var ce=this.__zoom.k,he=typeof N=="function"?N.apply(this,arguments):N;return ce*he},$,J)},S.scaleTo=function(R,N,$,J){S.transform(R,function(){var ce=e.apply(this,arguments),he=this.__zoom,ge=$==null?B(ce):typeof $=="function"?$.apply(this,arguments):$,Ae=he.invert(ge),Pe=typeof N=="function"?N.apply(this,arguments):N;return t(P(k(he,Pe),ge,Ae),ce,s)},$,J)},S.translateBy=function(R,N,$,J){S.transform(R,function(){return t(this.__zoom.translate(typeof N=="function"?N.apply(this,arguments):N,typeof $=="function"?$.apply(this,arguments):$),e.apply(this,arguments),s)},null,J)},S.translateTo=function(R,N,$,J,ce){S.transform(R,function(){var he=e.apply(this,arguments),ge=this.__zoom,Ae=J==null?B(he):typeof J=="function"?J.apply(this,arguments):J;return t(of.translate(Ae[0],Ae[1]).scale(ge.k).translate(typeof N=="function"?-N.apply(this,arguments):-N,typeof $=="function"?-$.apply(this,arguments):-$),he,s)},J,ce)};function k(R,N){return N=Math.max(o[0],Math.min(o[1],N)),N===R.k?R:new Tr(N,R.x,R.y)}function P(R,N,$){var J=N[0]-$[0]*R.k,ce=N[1]-$[1]*R.k;return J===R.x&&ce===R.y?R:new Tr(R.k,J,ce)}function B(R){return[(+R[0][0]+ +R[1][0])/2,(+R[0][1]+ +R[1][1])/2]}function q(R,N,$,J){R.on("start.zoom",function(){z(this,arguments).event(J).start()}).on("interrupt.zoom end.zoom",function(){z(this,arguments).event(J).end()}).tween("zoom",function(){var ce=this,he=arguments,ge=z(ce,he).event(J),Ae=e.apply(ce,he),Pe=$==null?B(Ae):typeof $=="function"?$.apply(ce,he):$,Oe=Math.max(Ae[1][0]-Ae[0][0],Ae[1][1]-Ae[0][1]),ut=ce.__zoom,lt=typeof N=="function"?N.apply(ce,he):N,lr=c(ut.invert(Pe).concat(Oe/ut.k),lt.invert(Pe).concat(Oe/lt.k));return function(Zt){if(Zt===1)Zt=lt;else{var dr=lr(Zt),mu=Oe/dr[2];Zt=new Tr(mu,Pe[0]-dr[0]*mu,Pe[1]-dr[1]*mu)}ge.zoom(null,Zt)}})}function z(R,N,$){return!$&&R.__zooming||new I(R,N)}function I(R,N){this.that=R,this.args=N,this.active=0,this.sourceEvent=null,this.extent=e.apply(R,N),this.taps=0}I.prototype={event:function(R){return R&&(this.sourceEvent=R),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(R,N){return this.mouse&&R!=="mouse"&&(this.mouse[1]=N.invert(this.mouse[0])),this.touch0&&R!=="touch"&&(this.touch0[1]=N.invert(this.touch0[0])),this.touch1&&R!=="touch"&&(this.touch1[1]=N.invert(this.touch1[0])),this.that.__zoom=N,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(R){var N=tn(this.that).datum();l.call(R,this.that,new Mx(R,{sourceEvent:this.sourceEvent,target:S,type:R,transform:this.that.__zoom,dispatch:l}),N)}};function _(R,...N){if(!n.apply(this,arguments))return;var $=z(this,N).event(R),J=this.__zoom,ce=Math.max(o[0],Math.min(o[1],J.k*Math.pow(2,r.apply(this,arguments)))),he=Bi(R);if($.wheel)($.mouse[0][0]!==he[0]||$.mouse[0][1]!==he[1])&&($.mouse[1]=J.invert($.mouse[0]=he)),clearTimeout($.wheel);else{if(J.k===ce)return;$.mouse=[he,J.invert(he)],zo(this),$.start()}uu(R),$.wheel=setTimeout(ge,y),$.zoom("mouse",t(P(k(J,ce),$.mouse[0],$.mouse[1]),$.extent,s));function ge(){$.wheel=null,$.end()}}function w(R,...N){if(p||!n.apply(this,arguments))return;var $=R.currentTarget,J=z(this,N,!0).event(R),ce=tn(R.view).on("mousemove.zoom",Pe,!0).on("mouseup.zoom",Oe,!0),he=Bi(R,$),ge=R.clientX,Ae=R.clientY;LI(R.view),Ay(R),J.mouse=[he,this.__zoom.invert(he)],zo(this),J.start();function Pe(ut){if(uu(ut),!J.moved){var lt=ut.clientX-ge,lr=ut.clientY-Ae;J.moved=lt*lt+lr*lr>b}J.event(ut).zoom("mouse",t(P(J.that.__zoom,J.mouse[0]=Bi(ut,$),J.mouse[1]),J.extent,s))}function Oe(ut){ce.on("mousemove.zoom mouseup.zoom",null),jI(ut.view,J.moved),uu(ut),J.event(ut).end()}}function D(R,...N){if(n.apply(this,arguments)){var $=this.__zoom,J=Bi(R.changedTouches?R.changedTouches[0]:R,this),ce=$.invert(J),he=$.k*(R.shiftKey?.5:2),ge=t(P(k($,he),J,ce),e.apply(this,N),s);uu(R),a>0?tn(this).transition().duration(a).call(q,ge,J,R):tn(this).call(S.transform,ge,J,R)}}function x(R,...N){if(n.apply(this,arguments)){var $=R.touches,J=$.length,ce=z(this,N,R.changedTouches.length===J).event(R),he,ge,Ae,Pe;for(Ay(R),ge=0;ge<J;++ge)Ae=$[ge],Pe=Bi(Ae,this),Pe=[Pe,this.__zoom.invert(Pe),Ae.identifier],ce.touch0?!ce.touch1&&ce.touch0[2]!==Pe[2]&&(ce.touch1=Pe,ce.taps=0):(ce.touch0=Pe,he=!0,ce.taps=1+!!d);d&&(d=clearTimeout(d)),he&&(ce.taps<2&&(f=Pe[0],d=setTimeout(function(){d=null},g)),zo(this),ce.start())}}function A(R,...N){if(this.__zooming){var $=z(this,N).event(R),J=R.changedTouches,ce=J.length,he,ge,Ae,Pe;for(uu(R),he=0;he<ce;++he)ge=J[he],Ae=Bi(ge,this),$.touch0&&$.touch0[2]===ge.identifier?$.touch0[0]=Ae:$.touch1&&$.touch1[2]===ge.identifier&&($.touch1[0]=Ae);if(ge=$.that.__zoom,$.touch1){var Oe=$.touch0[0],ut=$.touch0[1],lt=$.touch1[0],lr=$.touch1[1],Zt=(Zt=lt[0]-Oe[0])*Zt+(Zt=lt[1]-Oe[1])*Zt,dr=(dr=lr[0]-ut[0])*dr+(dr=lr[1]-ut[1])*dr;ge=k(ge,Math.sqrt(Zt/dr)),Ae=[(Oe[0]+lt[0])/2,(Oe[1]+lt[1])/2],Pe=[(ut[0]+lr[0])/2,(ut[1]+lr[1])/2]}else if($.touch0)Ae=$.touch0[0],Pe=$.touch0[1];else return;$.zoom("touch",t(P(ge,Ae,Pe),$.extent,s))}}function E(R,...N){if(this.__zooming){var $=z(this,N).event(R),J=R.changedTouches,ce=J.length,he,ge;for(Ay(R),p&&clearTimeout(p),p=setTimeout(function(){p=null},g),he=0;he<ce;++he)ge=J[he],$.touch0&&$.touch0[2]===ge.identifier?delete $.touch0:$.touch1&&$.touch1[2]===ge.identifier&&delete $.touch1;if($.touch1&&!$.touch0&&($.touch0=$.touch1,delete $.touch1),$.touch0)$.touch0[1]=this.__zoom.invert($.touch0[0]);else if($.end(),$.taps===2&&(ge=Bi(ge,this),Math.hypot(f[0]-ge[0],f[1]-ge[1])<C)){var Ae=tn(this).on("dblclick.zoom");Ae&&Ae.apply(this,arguments)}}}return S.wheelDelta=function(R){return arguments.length?(r=typeof R=="function"?R:rf(+R),S):r},S.filter=function(R){return arguments.length?(n=typeof R=="function"?R:rf(!!R),S):n},S.touchable=function(R){return arguments.length?(i=typeof R=="function"?R:rf(!!R),S):i},S.extent=function(R){return arguments.length?(e=typeof R=="function"?R:rf([[+R[0][0],+R[0][1]],[+R[1][0],+R[1][1]]]),S):e},S.scaleExtent=function(R){return arguments.length?(o[0]=+R[0],o[1]=+R[1],S):[o[0],o[1]]},S.translateExtent=function(R){return arguments.length?(s[0][0]=+R[0][0],s[1][0]=+R[1][0],s[0][1]=+R[0][1],s[1][1]=+R[1][1],S):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},S.constrain=function(R){return arguments.length?(t=R,S):t},S.duration=function(R){return arguments.length?(a=+R,S):a},S.interpolate=function(R){return arguments.length?(c=R,S):c},S.on=function(){var R=l.on.apply(l,arguments);return R===l?S:R},S.clickDistance=function(R){return arguments.length?(b=(R=+R)*R,S):Math.sqrt(b)},S.tapDistance=function(R){return arguments.length?(C=+R,S):C},S}function Ax(n){return n}function Py(n){if(n==null)return Ax;var e,t,r=n.scale[0],i=n.scale[1],o=n.translate[0],s=n.translate[1];return function(a,c){c||(e=t=0);var l=2,d=a.length,f=new Array(d);for(f[0]=(e+=a[0])*r+o,f[1]=(t+=a[1])*i+s;l<d;)f[l]=a[l],++l;return f}}function xV(n,e){for(var t,r=n.length,i=r-e;i<--r;)t=n[i],n[i++]=n[r],n[r]=t}function Px(n,e){return typeof e=="string"&&(e=n.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(t){return DV(n,t)})}:DV(n,e)}function DV(n,e){var t=e.id,r=e.bbox,i=e.properties==null?{}:e.properties,o=Ox(n,e);return t==null&&r==null?{type:"Feature",properties:i,geometry:o}:r==null?{type:"Feature",id:t,properties:i,geometry:o}:{type:"Feature",id:t,bbox:r,properties:i,geometry:o}}function Ox(n,e){var t=Py(n.transform),r=n.arcs;function i(d,f){f.length&&f.pop();for(var p=r[d<0?~d:d],g=0,y=p.length;g<y;++g)f.push(t(p[g],g));d<0&&xV(f,y)}function o(d){return t(d)}function s(d){for(var f=[],p=0,g=d.length;p<g;++p)i(d[p],f);return f.length<2&&f.push(f[0]),f}function a(d){for(var f=s(d);f.length<4;)f.push(f[0]);return f}function c(d){return d.map(a)}function l(d){var f=d.type,p;switch(f){case"GeometryCollection":return{type:f,geometries:d.geometries.map(l)};case"Point":p=o(d.coordinates);break;case"MultiPoint":p=d.coordinates.map(o);break;case"LineString":p=s(d.arcs);break;case"MultiLineString":p=d.arcs.map(s);break;case"Polygon":p=c(d.arcs);break;case"MultiPolygon":p=d.arcs.map(c);break;default:return null}return{type:f,coordinates:p}}return l(e)}var aW=["mapContainer"],Oy=class n{constructor(e){this.perfumeService=e}mapContainer;activeCountry=null;countrySelected=new He;mapWidth=800;mapHeight=500;MAP_PADDING=20;svg;countries;availableCountries=[];tooltip;zoom;projection;path;ngOnInit(){this.checkScreenSize(),this.loadCountries()}onResize(e){this.checkScreenSize(),this.svg&&this.updateMapSize()}checkScreenSize(){window.innerWidth<=768?(this.mapWidth=450,this.mapHeight=500):(this.mapWidth=800,this.mapHeight=500)}loadCountries(){this.perfumeService.getCountries().subscribe({next:e=>{console.log("Available countries:",e),this.availableCountries=e,this.initializeMap()},error:e=>console.error("Failed to load countries:",e)})}initializeMap(){this.clearMapContainer(),this.createSvgContainer(),this.createTooltip(),this.loadMapData()}clearMapContainer(){this.mapContainer.nativeElement.innerHTML=""}createSvgContainer(){this.svg=tn(this.mapContainer.nativeElement).append("svg").attr("width",this.mapWidth).attr("height",this.mapHeight).style("background","#f9f5f2").style("border-radius","12px").style("box-shadow","0 10px 30px rgba(0, 0, 0, 0.08)")}createTooltip(){this.tooltip=tn(this.mapContainer.nativeElement).append("div").attr("class","map-tooltip").style("opacity",0).style("background","#5d4037").style("color","#f9f5f2").style("border-left","3px solid #d4af37")}loadMapData(){JI("assets/world-map/countries-50m.json").then(e=>{this.validateMapData(e),this.processMapData(e),this.renderMap(),this.setupZoom()}).catch(this.handleMapError.bind(this))}validateMapData(e){if(!e?.objects?.countries)throw new Error("Invalid map data structure")}processMapData(e){let t=Px(e,e.objects.countries);this.countries=t.features}renderMap(){this.projection=this.createProjection(),this.path=wx().projection(this.projection);let t=this.svg.append("defs").append("filter").attr("id","glow").attr("width","150%").attr("height","150%");t.append("feGaussianBlur").attr("stdDeviation","3.5").attr("result","blur"),t.append("feComposite").attr("in","SourceGraphic").attr("in2","blur").attr("operator","over"),this.svg.selectAll(".country").data(this.countries).enter().append("path").attr("d",this.path).attr("class","country").attr("id",i=>this.getCountryId(i.properties.name)).style("fill",i=>this.getCountryColor(i.properties.name)).style("stroke","#ffffff").style("stroke-width",.8).on("mouseover",(i,o)=>this.onCountryHover(i,o)).on("mouseout",(i,o)=>this.onCountryHoverEnd(i,o)).on("click",(i,o)=>this.onCountryClick(i,o)),this.svg.append("rect").attr("width",this.mapWidth).attr("height",this.mapHeight).style("fill","url(#map-gradient)").style("pointer-events","none").lower();let r=this.svg.append("defs").append("linearGradient").attr("id","map-gradient").attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%");r.append("stop").attr("offset","0%").style("stop-color","#f9f5f2").style("stop-opacity",.8),r.append("stop").attr("offset","100%").style("stop-color","#d7ccc8").style("stop-opacity",.3)}createProjection(){return Dx().scale(this.getScale()).translate([this.mapWidth/2,this.mapHeight/1.5])}getScale(){return window.innerWidth<=768?100:130}setupZoom(){this.zoom=Sx().scaleExtent([1,8]).on("zoom",e=>{this.svg.selectAll(".country").attr("transform",e.transform).attr("stroke-width",.8/e.transform.k)}),this.svg.call(this.zoom)}updateMapSize(){this.svg.attr("width",this.mapWidth).attr("height",this.mapHeight),this.projection=this.createProjection(),this.path.projection(this.projection),this.svg.selectAll(".country").attr("d",this.path),this.svg.select("rect").attr("width",this.mapWidth).attr("height",this.mapHeight)}updateMapColors(){!this.countries||!this.svg||this.svg.selectAll(".country").style("fill",e=>this.getCountryColor(e.properties.name))}getCountryId(e){return"country-"+e.replace(/\s+/g,"-").toLowerCase()}getCountryColor(e){return this.isActiveCountry(e)?"#d4af37":this.isAvailableCountry(e)?"#8d6e63":"#d7ccc8"}isActiveCountry(e){return!!this.activeCountry&&e.toLowerCase()===this.activeCountry.toLowerCase()}isAvailableCountry(e){return this.availableCountries.includes(e)}onCountryHover(e,t){let r=t.properties.name,i=this.isAvailableCountry(r);tn(e.target).style("stroke-width",1.5).style("filter",i?"url(#glow)":""),i&&(tn(e.target).style("fill","#5d4037").style("cursor","pointer"),this.showTooltip(e,r))}onCountryHoverEnd(e,t){tn(e.target).style("fill",()=>this.getCountryColor(t.properties.name)).style("stroke-width",.8).style("filter",null).style("cursor","default"),this.hideTooltip()}onCountryClick(e,t){this.isAvailableCountry(t.properties.name)&&(tn(e.target).style("transform","scale(0.95)").transition().duration(300).style("transform","scale(1)"),this.countrySelected.emit(t.properties.name))}showTooltip(e,t){this.tooltip.html(`<strong>${t}</strong><br>Click to explore fragrances`).style("left",e.pageX+15+"px").style("top",e.pageY-28+"px").transition().duration(200).style("opacity",1).style("transform","translateY(0)")}hideTooltip(){this.tooltip.transition().duration(200).style("opacity",0).style("transform","translateY(10px)")}handleMapError(e){console.error("Error loading map data:",e),this.displayErrorMessage()}displayErrorMessage(){this.svg.append("text").attr("x",this.mapWidth/2).attr("y",this.mapHeight/2).attr("text-anchor","middle").style("font-size","16px").style("fill","#5d4037").text("Could not load map data. Please try again later.")}ngOnChanges(){this.updateMapColors()}static \u0275fac=function(t){return new(t||n)(re(Xr))};static \u0275cmp=Nt({type:n,selectors:[["app-country-map"]],viewQuery:function(t,r){if(t&1&&W1(aW,7),t&2){let i;xp(i=Dp())&&(r.mapContainer=i.first)}},hostBindings:function(t,r){t&1&&de("resize",function(o){return r.onResize(o)},!1,zS)},inputs:{activeCountry:"activeCountry"},outputs:{countrySelected:"countrySelected"},features:[Jn],decls:2,vars:0,consts:[["mapContainer",""],[1,"map-container"]],template:function(t,r){t&1&&oe(0,"div",1,0)},styles:[".map-container[_ngcontent-%COMP%]{width:100%;height:auto;min-height:300px;aspect-ratio:16/9;position:relative;border-radius:12px;overflow:hidden;box-shadow:0 15px 35px #0000001a;background:#f9f5f2;margin:2rem 0;border:1px solid #e0e0e0}@media (max-width: 768px){.map-container[_ngcontent-%COMP%]{aspect-ratio:9/10}}.map-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:100%;height:100%;display:block}.country[_ngcontent-%COMP%]{transition:all .3s ease;stroke-linejoin:round}.country[_ngcontent-%COMP%]:hover{stroke-width:1.5px!important}.map-tooltip[_ngcontent-%COMP%]{font-family:Arial,sans-serif;box-shadow:0 4px 12px #0003;padding:8px 16px;border-radius:4px;font-size:14px;pointer-events:none;z-index:10;transition:opacity .3s,transform .3s;transform:translateY(10px);opacity:0;position:absolute}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:.8}50%{opacity:1}to{opacity:.8}}.country-available[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}@media (max-width: 992px){.map-container[_ngcontent-%COMP%]{margin:1.5rem 0}}@media (max-width: 576px){.map-tooltip[_ngcontent-%COMP%]{font-size:12px;padding:6px 12px}}"]})};function uW(n,e){n&1&&(M(0,"section",17),oe(1,"div",18),M(2,"p"),U(3,"Loading fragrances..."),T()())}var Ry=class n{constructor(e,t){this.perfumeService=e;this.router=t}featuredPerfumes=[];isLoading=!0;ngOnInit(){this.perfumeService.getFeaturedPerfumes().subscribe(e=>{this.featuredPerfumes=e,this.isLoading=!1}),this.router.events.pipe(pt(e=>e instanceof $n)).subscribe(()=>{window.scrollTo({top:0,behavior:"smooth"}),window.location.hash&&setTimeout(()=>{document.querySelector(window.location.hash)?.scrollIntoView({behavior:"smooth"})},0)})}onCountrySelected(e){this.router.navigate(["/country",e])}exploreCollection(){this.router.navigate(["/products"])}exploreCollectionFor(e){this.router.navigate(["/products"],{queryParams:{type:e}})}static \u0275fac=function(t){return new(t||n)(re(Xr),re(Ut))};static \u0275cmp=Nt({type:n,selectors:[["app-home"]],decls:35,vars:1,consts:[[1,"landing-container"],[1,"background-image"],[1,"content"],[1,"heading"],[1,"subheading"],[1,"cta-button",3,"click"],[1,"home-container"],[1,"map-section"],[1,"section-description"],[1,"map-wrapper"],[3,"countrySelected"],[1,"gender-categories"],[1,"category-card","for-him"],[1,"category-content"],[1,"category-btn",3,"click"],[1,"category-card","for-her"],["class","loading-section",4,"ngIf"],[1,"loading-section"],[1,"spinner"]],template:function(t,r){t&1&&(M(0,"div",0),oe(1,"div",1),M(2,"div",2)(3,"h1",3),U(4,"Discover the World of Scents"),T(),M(5,"p",4),U(6,"Premium fragrances from around the globe"),T(),M(7,"button",5),de("click",function(){return r.exploreCollection()}),U(8," Explore Collection "),T()()(),M(9,"div",6)(10,"section",7)(11,"h2"),U(12,"Explore by Country"),T(),M(13,"p",8),U(14,"Click on a highlighted country to discover its unique fragrances"),T(),M(15,"div",9)(16,"app-country-map",10),de("countrySelected",function(o){return r.onCountrySelected(o)}),T()()(),M(17,"section",11)(18,"div",12)(19,"div",13)(20,"h3"),U(21,"For Him"),T(),M(22,"p"),U(23,"Discover masculine scents that command attention"),T(),M(24,"button",14),de("click",function(){return r.exploreCollectionFor("men")}),U(25,"Shop Men's Fragrances"),T()()(),M(26,"div",15)(27,"div",13)(28,"h3"),U(29,"For Her"),T(),M(30,"p"),U(31,"Explore feminine fragrances that captivate"),T(),M(32,"button",14),de("click",function(){return r.exploreCollectionFor("woman")}),U(33,"Shop Women's Fragrances"),T()()()(),Qe(34,uW,4,0,"section",16),T()),t&2&&(Q(34),ye("ngIf",r.isLoading))},dependencies:[fo,Oy],styles:['@import"https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css";.landing-container[_ngcontent-%COMP%], .home-container[_ngcontent-%COMP%]{position:relative;width:100%;overflow:hidden;color:#fff;text-align:center}.landing-container[_ngcontent-%COMP%]{height:100vh}.landing-container[_ngcontent-%COMP%]   .background-image[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:114%;background-image:url("./media/hero1-EFDDK7XE.jpg");background-size:cover;background-position:center;background-attachment:fixed;z-index:1;animation:_ngcontent-%COMP%_zoomEffect 15s ease infinite alternate}.content[_ngcontent-%COMP%]{position:relative;z-index:2;padding:20px;max-width:800px;margin:0 auto;display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%}.content[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font-size:4rem;font-weight:700;margin-bottom:1rem;text-shadow:2px 2px 8px rgba(0,0,0,.6);animation:fadeIn 2s ease-in-out}.content[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:15rem;text-shadow:1px 1px 4px rgba(0,0,0,.5);max-width:600px}.content[_ngcontent-%COMP%]   .cta-button[_ngcontent-%COMP%]{background:#fff3;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:2px solid white;color:#fff;padding:15px 40px;font-size:1.2rem;border-radius:50px;cursor:pointer;transition:all .3s ease}.content[_ngcontent-%COMP%]   .cta-button[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:translateY(-5px)}.map-section[_ngcontent-%COMP%]{padding:60px 20px;text-align:center;background:linear-gradient(135deg,#f5f7fa,#e4e8eb);border-radius:12px;margin:40px 20px;box-shadow:0 10px 30px #00000014;position:relative;overflow:hidden}.map-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#2c3e50;margin-bottom:15px;position:relative;z-index:1;font-weight:700}.map-section[_ngcontent-%COMP%]   .section-description[_ngcontent-%COMP%]{font-size:1.1rem;color:#7f8c8d;max-width:700px;margin:0 auto 40px;position:relative;z-index:1;line-height:1.6}.map-section[_ngcontent-%COMP%]   .map-wrapper[_ngcontent-%COMP%]{margin:40px auto;border:none;border-radius:12px;overflow:auto;box-shadow:0 8px 25px #00000026;max-width:1000px;position:relative;z-index:1;transition:transform .3s ease;background:#fff}.map-section[_ngcontent-%COMP%]   .map-wrapper[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.gender-categories[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:30px;padding:0 20px 60px;flex-wrap:wrap}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]{position:relative;width:100%;max-width:550px;height:400px;border-radius:16px;overflow:hidden;box-shadow:0 15px 35px #0000001a;transition:transform .4s ease,box-shadow .4s ease}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:0 20px 40px #00000026}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(to bottom,#0000001a,#000000b3);z-index:1}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%]{position:relative;z-index:2;height:100%;display:flex;flex-direction:column;justify-content:flex-end;padding:40px;text-align:left;color:#fff}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:10px;text-shadow:1px 1px 3px rgba(0,0,0,.5)}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:25px;text-shadow:1px 1px 2px rgba(0,0,0,.5)}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]   .category-btn[_ngcontent-%COMP%]{background:#fff3;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);border:1px solid white;color:#fff;padding:12px 30px;font-size:1rem;border-radius:30px;cursor:pointer;transition:all .3s ease;align-self:flex-start}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]   .category-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:translateY(-3px)}.gender-categories[_ngcontent-%COMP%]   .for-him[_ngcontent-%COMP%]{background:url("./media/mens-fragrances-XTLZYDQZ.jpg") center/cover no-repeat}.gender-categories[_ngcontent-%COMP%]   .for-her[_ngcontent-%COMP%]{background:url("./media/womens-fragrances-YR67AMWY.jpg") center/cover no-repeat}.loading-section[_ngcontent-%COMP%]{text-align:center;padding:60px 0}.loading-section[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{border:6px solid rgba(0,0,0,.1);border-radius:50%;border-top:6px solid #5F9EA0;width:60px;height:60px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_zoomEffect{0%{transform:scale(1)}to{transform:scale(1.1)}}@media (max-width: 1200px){.gender-categories[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]{max-width:700px}}@media (max-width: 768px){.content[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font-size:2.5rem!important}.content[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font-size:1.2rem}.content[_ngcontent-%COMP%]   .cta-button[_ngcontent-%COMP%]{padding:12px 30px;font-size:1rem}.map-section[_ngcontent-%COMP%]{margin:20px 10px;padding:30px 10px}.map-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]{height:350px}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%]{padding:30px}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2rem}}@media (max-width: 576px){.content[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font-size:2rem!important}.content[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{margin-bottom:10rem}.map-section[_ngcontent-%COMP%]{margin:15px 5px;padding:25px 5px}.map-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.map-section[_ngcontent-%COMP%]   .section-description[_ngcontent-%COMP%]{font-size:.9rem}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]{height:300px}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%]{padding:20px}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.8rem}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}}']})};var FV=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(re(_r),re(In))}}static{this.\u0275dir=Ct({type:n})}}return n})(),$y=(()=>{class n extends FV{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Cs(n)))(i||n)}})()}static{this.\u0275dir=Ct({type:n,features:[tr]})}}return n})(),hu=new X("");var lW={provide:hu,useExisting:jr(()=>zy),multi:!0};function dW(){let n=Br()?Br().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var fW=new X(""),zy=(()=>{class n extends FV{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!dW())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(re(_r),re(In),re(fW,8))}}static{this.\u0275dir=Ct({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&de("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[co([lW]),tr]})}}return n})();function Wo(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function VV(n){return n!=null&&typeof n.length=="number"}var jx=new X(""),Bx=new X(""),hW=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Wn=class{static min(e){return pW(e)}static max(e){return mW(e)}static required(e){return gW(e)}static requiredTrue(e){return yW(e)}static email(e){return vW(e)}static minLength(e){return _W(e)}static maxLength(e){return wW(e)}static pattern(e){return CW(e)}static nullValidator(e){return LV(e)}static compose(e){return qV(e)}static composeAsync(e){return GV(e)}};function pW(n){return e=>{if(Wo(e.value)||Wo(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function mW(n){return e=>{if(Wo(e.value)||Wo(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function gW(n){return Wo(n.value)?{required:!0}:null}function yW(n){return n.value===!0?null:{required:!0}}function vW(n){return Wo(n.value)||hW.test(n.value)?null:{email:!0}}function _W(n){return e=>Wo(e.value)||!VV(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function wW(n){return e=>VV(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function CW(n){if(!n)return LV;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Wo(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function LV(n){return null}function jV(n){return n!=null}function BV(n){return Ds(n)?Me(n):n}function UV(n){let e={};return n.forEach(t=>{e=t!=null?Y(Y({},e),t):e}),Object.keys(e).length===0?null:e}function $V(n,e){return e.map(t=>t(n))}function bW(n){return!n.validate}function zV(n){return n.map(e=>bW(e)?e:t=>e.validate(t))}function qV(n){if(!n)return null;let e=n.filter(jV);return e.length==0?null:function(t){return UV($V(t,e))}}function HV(n){return n!=null?qV(zV(n)):null}function GV(n){if(!n)return null;let e=n.filter(jV);return e.length==0?null:function(t){let r=$V(t,e).map(BV);return Jv(r).pipe(se(UV))}}function WV(n){return n!=null?GV(zV(n)):null}function MV(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function KV(n){return n._rawValidators}function QV(n){return n._rawAsyncValidators}function Rx(n){return n?Array.isArray(n)?n:[n]:[]}function ky(n,e){return Array.isArray(n)?n.includes(e):n===e}function TV(n,e){let t=Rx(e);return Rx(n).forEach(i=>{ky(t,i)||t.push(i)}),t}function SV(n,e){return Rx(e).filter(t=>!ky(n,t))}var Fy=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=HV(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=WV(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},ua=class extends Fy{get formDirective(){return null}get path(){return null}},Ko=class extends Fy{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Vy=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},EW={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},vpe=ve(Y({},EW),{"[class.ng-submitted]":"isSubmitted"}),qy=(()=>{class n extends Vy{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(re(Ko,2))}}static{this.\u0275dir=Ct({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Mt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[tr]})}}return n})(),YV=(()=>{class n extends Vy{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(re(ua,10))}}static{this.\u0275dir=Ct({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Mt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[tr]})}}return n})();var sf="VALID",Ny="INVALID",lu="PENDING",af="DISABLED",Qo=class{},Ly=class extends Qo{constructor(e,t){super(),this.value=e,this.source=t}},cf=class extends Qo{constructor(e,t){super(),this.pristine=e,this.source=t}},uf=class extends Qo{constructor(e,t){super(),this.touched=e,this.source=t}},du=class extends Qo{constructor(e,t){super(),this.status=e,this.source=t}},Nx=class extends Qo{constructor(e){super(),this.source=e}},kx=class extends Qo{constructor(e){super(),this.source=e}};function Ux(n){return(Hy(n)?n.validators:n)||null}function IW(n){return Array.isArray(n)?HV(n):n||null}function $x(n,e){return(Hy(e)?e.asyncValidators:n)||null}function xW(n){return Array.isArray(n)?WV(n):n||null}function Hy(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function ZV(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new ae(1e3,"");if(!r[t])throw new ae(1001,"")}function XV(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new ae(1002,"")})}var fu=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=ol(()=>this.statusReactive()),this.statusReactive=Ju(void 0),this._pristine=ol(()=>this.pristineReactive()),this.pristineReactive=Ju(!0),this._touched=ol(()=>this.touchedReactive()),this.touchedReactive=Ju(!1),this._events=new Ke,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Ci(this.statusReactive)}set status(e){Ci(()=>this.statusReactive.set(e))}get valid(){return this.status===sf}get invalid(){return this.status===Ny}get pending(){return this.status==lu}get disabled(){return this.status===af}get enabled(){return this.status!==af}get pristine(){return Ci(this.pristineReactive)}set pristine(e){Ci(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Ci(this.touchedReactive)}set touched(e){Ci(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(TV(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(TV(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(SV(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(SV(e,this._rawAsyncValidators))}hasValidator(e){return ky(this._rawValidators,e)}hasAsyncValidator(e){return ky(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ve(Y({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new uf(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new uf(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ve(Y({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new cf(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new cf(!0,r))}markAsPending(e={}){this.status=lu;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new du(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ve(Y({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=af,this.errors=null,this._forEachChild(i=>{i.disable(ve(Y({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ly(this.value,r)),this._events.next(new du(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ve(Y({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=sf,this._forEachChild(r=>{r.enable(ve(Y({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ve(Y({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===sf||this.status===lu)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ly(this.value,t)),this._events.next(new du(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ve(Y({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?af:sf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=lu,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=BV(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new du(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new He,this.statusChanges=new He}_calculateStatus(){return this._allControlsDisabled()?af:this.errors?Ny:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(lu)?lu:this._anyControlsHaveStatus(Ny)?Ny:sf}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new cf(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new uf(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Hy(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=IW(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=xW(this._rawAsyncValidators)}},jy=class extends fu{constructor(e,t,r){super(Ux(t),$x(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){XV(this,!0,e),Object.keys(e).forEach(r=>{ZV(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Fx=class extends jy{};var df=new X("CallSetDisabledState",{providedIn:"root",factory:()=>ff}),ff="always";function JV(n,e){return[...e.path,n]}function Vx(n,e,t=ff){zx(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),MW(n,e),SW(n,e),TW(n,e),DW(n,e)}function AV(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Uy(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function By(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function DW(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function zx(n,e){let t=KV(n);e.validator!==null?n.setValidators(MV(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=QV(n);e.asyncValidator!==null?n.setAsyncValidators(MV(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();By(e._rawValidators,i),By(e._rawAsyncValidators,i)}function Uy(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=KV(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=QV(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return By(e._rawValidators,r),By(e._rawAsyncValidators,r),t}function MW(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&eL(n,e)})}function TW(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&eL(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function eL(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function SW(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function AW(n,e){n==null,zx(n,e)}function PW(n,e){return Uy(n,e)}function tL(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function OW(n){return Object.getPrototypeOf(n.constructor)===$y}function RW(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function nL(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===zy?t=o:OW(o)?r=o:i=o}),i||r||t||null}function NW(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function PV(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function OV(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var lf=class extends fu{constructor(e=null,t,r){super(Ux(t),$x(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Hy(t)&&(t.nonNullable||t.initialValueIsDefault)&&(OV(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){PV(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){PV(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){OV(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var kW=n=>n instanceof lf;var FW={provide:Ko,useExisting:jr(()=>hf)},RV=Promise.resolve(),hf=(()=>{class n extends Ko{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new lf,this._registered=!1,this.name="",this.update=new He,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=nL(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),tL(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Vx(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){RV.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Ms(r);RV.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?JV(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(re(ua,9),re(jx,10),re(Bx,10),re(hu,10),re(uo,8),re(df,8))}}static{this.\u0275dir=Ct({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[co([FW]),tr,Jn]})}}return n})(),rL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ct({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var VW={provide:hu,useExisting:jr(()=>qx),multi:!0};var LW=(()=>{class n{constructor(){this._accessors=[]}add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t){this._accessors.splice(r,1);return}}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return t[0].control?t[0]._parent===r._control._parent&&t[1].name===r.name:!1}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),qx=(()=>{class n extends $y{constructor(t,r,i,o){super(t,r),this._registry=i,this._injector=o,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=H(df,{optional:!0})??ff}ngOnInit(){this._control=this._injector.get(Ko),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}setDisabledState(t){(this.setDisabledStateFired||t||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",t),this.setDisabledStateFired=!0}fireUncheck(t){this.writeValue(t)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}static{this.\u0275fac=function(r){return new(r||n)(re(_r),re(In),re(LW),re(Nn))}}static{this.\u0275dir=Ct({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(r,i){r&1&&de("change",function(){return i.onChange()})("blur",function(){return i.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[co([VW]),tr]})}}return n})();var iL=new X("");var jW={provide:ua,useExisting:jr(()=>Hx)},Hx=(()=>{class n extends ua{get submitted(){return Ci(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=ol(()=>this._submittedReactive()),this._submittedReactive=Ju(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new He,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Uy(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return Vx(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){AV(t.control||null,t,!1),NW(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),RW(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Nx(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new kx(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(AV(r||null,t),kW(i)&&(Vx(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);AW(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&PW(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){zx(this.form,this),this._oldForm&&Uy(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(r){return new(r||n)(re(jx,10),re(Bx,10),re(df,8))}}static{this.\u0275dir=Ct({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&de("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[co([jW]),tr,Jn]})}}return n})();var BW={provide:Ko,useExisting:jr(()=>Gx)},Gx=(()=>{class n extends Ko{set isDisabled(t){}static{this._ngModelWarningSentOnce=!1}constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new He,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=nL(this,o)}ngOnChanges(t){this._added||this._setUpControl(),tL(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return JV(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(r){return new(r||n)(re(ua,13),re(jx,10),re(Bx,10),re(hu,10),re(iL,8))}}static{this.\u0275dir=Ct({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[co([BW]),tr,Jn]})}}return n})(),UW={provide:hu,useExisting:jr(()=>Gy),multi:!0};function oL(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function $W(n){return n.split(":")[0]}var Gy=(()=>{class n extends $y{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=oL(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=$W(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Cs(n)))(i||n)}})()}static{this.\u0275dir=Ct({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&de("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[co([UW]),tr]})}}return n})(),sL=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(oL(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(re(In),re(_r),re(Gy,9))}}static{this.\u0275dir=Ct({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),zW={provide:hu,useExisting:jr(()=>aL),multi:!0};function NV(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function qW(n){return n.split(":")[0]}var aL=(()=>{class n extends $y{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],l=this._getOptionValue(c.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=qW(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Cs(n)))(i||n)}})()}static{this.\u0275dir=Ct({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&de("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[co([zW]),tr]})}}return n})(),cL=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(NV(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(NV(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(re(In),re(_r),re(aL,9))}}static{this.\u0275dir=Ct({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();var uL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=wt({type:n})}static{this.\u0275inj=_t({})}}return n})(),Lx=class extends fu{constructor(e,t,r){super(Ux(t),$x(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){XV(this,!1,e),e.forEach((r,i)=>{ZV(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function kV(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var lL=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return kV(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new jy(i,o)}record(t,r=null){let i=this._reduceControls(t);return new Fx(i,r)}control(t,r,i){let o={};return this.useNonNullable?(kV(r)?o=r:(o.validators=r,o.asyncValidators=i),new lf(t,ve(Y({},o),{nonNullable:!0}))):new lf(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new Lx(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof lf)return t;if(t instanceof fu)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var dL=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:df,useValue:t.callSetDisabledState??ff}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=wt({type:n})}static{this.\u0275inj=_t({imports:[uL]})}}return n})(),fL=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:iL,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:df,useValue:t.callSetDisabledState??ff}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=wt({type:n})}static{this.\u0275inj=_t({imports:[uL]})}}return n})();var Yo=class n{cartKey="fragrance_cart";cartSubject=new xt(this.getCart());cart$=this.cartSubject.asObservable();constructor(){}getCart(){let e=localStorage.getItem(this.cartKey);return e?JSON.parse(e):[]}saveCart(e){localStorage.setItem(this.cartKey,JSON.stringify(e)),this.cartSubject.next(e)}addToCart(e){let t=this.getCart(),r=t.find(i=>i.perfume.id===e.id);r?r.quantity+=1:t.push({perfume:e,quantity:1}),this.saveCart(t)}removeFromCart(e){let t=this.getCart().filter(r=>r.perfume.id!==e);this.saveCart(t)}updateQuantity(e,t){if(t<1)return;let r=this.getCart(),i=r.find(o=>o.perfume.id===e);i&&(i.quantity=t,this.saveCart(r))}clearCart(){localStorage.removeItem(this.cartKey),this.cartSubject.next([])}getCartItemCount(){return this.getCart().reduce((e,t)=>e+t.quantity,0)}getTotalPrice(){return this.getCart().reduce((e,t)=>e+t.perfume.price*t.quantity,0)}isInCart(e){return this.getCart().some(t=>t.perfume.id===e)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};var qi={_origin:"https://api.emailjs.com"};var pL=(n,e="https://api.emailjs.com")=>{qi._userID=n,qi._origin=e};var Wy=(n,e,t)=>{if(!n)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!e)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};var pf=class{constructor(e){this.status=e.status,this.text=e.responseText}};var Ky=(n,e,t={})=>new Promise((r,i)=>{let o=new XMLHttpRequest;o.addEventListener("load",({target:s})=>{let a=new pf(s);a.status===200||a.text==="OK"?r(a):i(a)}),o.addEventListener("error",({target:s})=>{i(new pf(s))}),o.open("POST",qi._origin+n,!0),Object.keys(t).forEach(s=>{o.setRequestHeader(s,t[s])}),o.send(e)});var mL=(n,e,t,r)=>{let i=r||qi._userID;return Wy(i,n,e),Ky("/api/v1.0/email/send",JSON.stringify({lib_version:"3.2.0",user_id:i,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"})};var GW=n=>{let e;if(typeof n=="string"?e=document.querySelector(n):e=n,!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return e},gL=(n,e,t,r)=>{let i=r||qi._userID,o=GW(t);Wy(i,n,e);let s=new FormData(o);return s.append("lib_version","3.2.0"),s.append("service_id",n),s.append("template_id",e),s.append("user_id",i),Ky("/api/v1.0/email/send-form",s)};var Qy={init:pL,send:mL,sendForm:gL};var Zo={production:!1,firebase:{apiKey:"AIzaSyCJhh6RhbGA52js5L1blEEU0EF_pTy1-JU",authDomain:"graduation-project-704b9.firebaseapp.com",projectId:"republic-1612b",storageBucket:"graduation-project-704b9.appspot.com",messagingSenderId:"159614579205",appId:"1:159614579205:web:c0dfd56cf057d7635ce26c"},firebaseConfig:{apiKey:"AIzaSyCcB66Mhf54_4bF0eI3sTDZJMl9eCIooqc",authDomain:"republic-1612b.firebaseapp.com",projectId:"republic-1612b",storageBucket:"republic-1612b.firebasestorage.app",messagingSenderId:"813696737012",appId:"1:813696737012:web:8f37e6b4af9add5b9a08a1",measurementId:"G-5FYGYGMB2Z"},emailjs:{userId:"vO8wiOaSbKIsBC4OA",serviceId:"service_id1",templateIdCustomer:"user_id1",templateIdAdmin:"admin_id1"}};var Yy=class n{constructor(e){this.firestore=e;Qy.init(Zo.emailjs.userId)}createOrder(e){return V(this,null,function*(){let t=this.generateOrderId(),r=ve(Y({id:t},e),{createdAt:new Date,status:"pending"});return yield this.firestore.collection("orders").doc(t).set(r),yield this.sendEmails(r),r})}sendEmails(e){return V(this,null,function*(){try{if(!e.email||!this.validateEmail(e.email))throw new Error(`Invalid email address: ${e.email}`);let t={email:e.email,name:`${e.firstName} ${e.lastName}`,order_id:e.id,order_items:e.items.map(i=>`${i.perfume.name} (Q: ${i.quantity}) = EGP ${i.perfume.price*i.quantity}`).join(`
`),total:e.total};yield Qy.send(Zo.emailjs.serviceId,Zo.emailjs.templateIdCustomer,t);let r={to_email:"farahatadel3@gmail.com",order_id:e.id,customer_name:`${e.firstName} ${e.lastName}`,customer_email:e.email,customer_phone:e.phone,delivery_address:`${e.address}, ${e.city}`,order_items:e.items.map(i=>`${i.perfume.name} (Q: ${i.quantity}) = EGP ${i.perfume.price*i.quantity}`).join(`
`),total:e.total,payment_method:e.paymentMethod==="cash"?"Cash on Delivery":"Credit Card"};yield Qy.send(Zo.emailjs.serviceId,Zo.emailjs.templateIdAdmin,r)}catch(t){throw t}})}validateEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}generateOrderId(){return`ORD-${Date.now()}-${Math.floor(Math.random()*1e3)}`}static \u0275fac=function(t){return new(t||n)(K(Md))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};var KW=()=>({standalone:!0});function QW(n,e){n&1&&(M(0,"div",8)(1,"div",9),mt(),M(2,"svg",10),oe(3,"circle",11)(4,"circle",12)(5,"path",13),T()(),Dt(),M(6,"h2"),U(7,"Your Fragrance Wardrobe is Empty"),T(),M(8,"p"),U(9,"Discover our exquisite collection to find your signature scent"),T(),M(10,"a",14),mt(),M(11,"svg",15),oe(12,"line",16)(13,"polyline",17),T(),U(14," Explore Our Collection "),T()())}function YW(n,e){if(n&1&&(M(0,"div",18)(1,"div",19)(2,"div",20),mt(),M(3,"svg",21),oe(4,"path",22)(5,"polyline",23),T()(),Dt(),M(6,"h2"),U(7,"Your Order is Complete!"),T(),M(8,"p",24),U(9),T(),M(10,"p",25),U(11,"We've sent a confirmation to your email. Our fragrance specialists will contact you shortly to finalize delivery details."),T(),M(12,"div",26)(13,"a",14),U(14,"Discover More Scents"),T()()()()),n&2){let t=Le();Q(9),Jt("Thank you for choosing our fragrances. Your order #",t.orderId," is being prepared.")}}function ZW(n,e){if(n&1){let t=jn();M(0,"div",79)(1,"div",80),oe(2,"img",81),M(3,"button",82),de("click",function(){let i=et(t).$implicit,o=Le(2);return tt(o.removeItem(i==null?null:i.perfume))}),mt(),M(4,"svg",15),oe(5,"line",83)(6,"line",84),T()()(),Dt(),M(7,"div",85)(8,"h4",86),U(9),T(),M(10,"p",87),U(11),T(),M(12,"p",88),U(13),T(),M(14,"p",89),U(15),nr(16,"currency"),T()(),M(17,"div",90)(18,"button",91),de("click",function(){let i=et(t).$implicit,o=Le(2);return tt(o.updateQuantity(i,i.quantity-1))}),U(19,"-"),T(),M(20,"span",92),U(21),T(),M(22,"button",93),de("click",function(){let i=et(t).$implicit,o=Le(2);return tt(o.updateQuantity(i,i.quantity+1))}),U(23,"+"),T()(),M(24,"div",94),U(25),nr(26,"currency"),T()()}if(n&2){let t=e.$implicit;Q(2),ye("src",t.perfume.images[1],Xu)("alt",t.perfume.name),Q(7),ot(t.perfume.name),Q(2),ot(t.perfume.category),Q(2),Jt("",t.perfume.price||"100","ml"),Q(2),ot(nl(16,9,t.perfume.price,"EGP ","symbol","1.2-2")),Q(3),ye("disabled",t.quantity<=1),Q(3),ot(t.quantity),Q(4),Jt(" ",nl(26,14,t.perfume.price*t.quantity,"EGP ","symbol","1.2-2")," ")}}function XW(n,e){n&1&&(M(0,"div",95),U(1," Please enter your first name "),T())}function JW(n,e){n&1&&(M(0,"div",95),U(1," Please enter your last name "),T())}function eK(n,e){n&1&&(M(0,"div",95),U(1," Please enter a valid email address "),T())}function tK(n,e){n&1&&(M(0,"div",95),U(1," Please enter a valid phone number "),T())}function nK(n,e){n&1&&(M(0,"div",95),U(1," Please enter your delivery address "),T())}function rK(n,e){n&1&&(M(0,"div",95),U(1," Please enter your city "),T())}function iK(n,e){n&1&&(M(0,"span"),U(1,"Complete Your Order"),T())}function oK(n,e){n&1&&oe(0,"span",96)}function sK(n,e){if(n&1){let t=jn();M(0,"div",27)(1,"div",28)(2,"div",29)(3,"h3"),U(4,"Your Selected Fragrances"),T(),M(5,"div",30)(6,"span"),U(7,"Q"),T(),M(8,"span"),U(9,"Total"),T()()(),M(10,"div",31),Qe(11,ZW,27,19,"div",32),T(),M(12,"div",33)(13,"a",34),mt(),M(14,"svg",15),oe(15,"line",16)(16,"polyline",17),T(),U(17," Continue Exploring "),T()()(),Dt(),M(18,"div",35)(19,"div",36)(20,"h3",37),U(21,"Order Summary"),T(),M(22,"div",38)(23,"span"),U(24),T(),M(25,"span"),U(26),nr(27,"currency"),T()(),M(28,"div",38)(29,"span"),U(30,"Shipping"),T(),M(31,"span",39),U(32,"Complimentary"),T()(),M(33,"div",38)(34,"span"),U(35,"Estimated Tax"),T(),M(36,"span"),U(37,"0"),T()(),M(38,"div",40)(39,"span"),U(40,"Total"),T(),M(41,"span",41),U(42),nr(43,"currency"),T()(),M(44,"form",42),de("ngSubmit",function(){et(t);let i=Le();return tt(i.onSubmit())}),M(45,"div",43)(46,"label",44),U(47,"First Name"),T(),oe(48,"input",45),Qe(49,XW,2,0,"div",46),T(),M(50,"div",43)(51,"label",47),U(52,"Last Name"),T(),oe(53,"input",48),Qe(54,JW,2,0,"div",46),T(),M(55,"div",43)(56,"label",49),U(57,"Email"),T(),oe(58,"input",50),Qe(59,eK,2,0,"div",46),T(),M(60,"div",43)(61,"label",51),U(62,"Phone Number"),T(),oe(63,"input",52),Qe(64,tK,2,0,"div",46),T(),M(65,"div",43)(66,"label",53),U(67,"Delivery Address"),T(),oe(68,"input",54),Qe(69,nK,2,0,"div",46),T(),M(70,"div",55)(71,"div",43)(72,"label",56),U(73,"City"),T(),oe(74,"input",57),Qe(75,rK,2,0,"div",46),T()(),M(76,"div",43)(77,"label",58),U(78,"Special Instructions (Optional)"),T(),oe(79,"textarea",59),T(),M(80,"div",60)(81,"h4"),U(82,"Payment Method"),T(),M(83,"div",61)(84,"label",62)(85,"input",63),xs("ngModelChange",function(i){et(t);let o=Le();return Wa(o.paymentMethod,i)||(o.paymentMethod=i),tt(i)}),T(),M(86,"div",64)(87,"span"),U(88,"Cash on Delivery"),T(),mt(),M(89,"svg",65),oe(90,"circle",66)(91,"path",67)(92,"line",68)(93,"line",69),T()()(),Dt(),M(94,"label",70),oe(95,"input",71),M(96,"div",64)(97,"span"),U(98,"Credit Card (Coming Soon)"),T(),mt(),M(99,"svg",65),oe(100,"rect",72)(101,"line",73),T()()()()(),Dt(),M(102,"button",74),Qe(103,iK,2,0,"span",75)(104,oK,1,0,"span",76),T(),M(105,"div",77),mt(),M(106,"svg",15),oe(107,"path",78),T(),Dt(),M(108,"span"),U(109,"Secure Checkout"),T()()()()()()}if(n&2){let t,r,i,o,s,a,c,l,d,f,p,g,y=Le();Q(11),ye("ngForOf",y.cartItems)("ngForTrackBy",y.trackByPerfumeId),Q(13),Jt("Subtotal (",y.cartItems.length," items)"),Q(2),ot(nl(27,31,y.totalPrice,"EGP ","symbol","1.2-2")),Q(16),ot(nl(43,36,y.totalPrice,"EGP ","symbol","1.2-2")),Q(2),ye("formGroup",y.checkoutForm),Q(4),Mt("invalid",((t=y.checkoutForm.get("firstName"))==null?null:t.invalid)&&((t=y.checkoutForm.get("firstName"))==null?null:t.touched)),Q(),ye("ngIf",((r=y.checkoutForm.get("firstName"))==null?null:r.invalid)&&((r=y.checkoutForm.get("firstName"))==null?null:r.touched)),Q(4),Mt("invalid",((i=y.checkoutForm.get("lastName"))==null?null:i.invalid)&&((i=y.checkoutForm.get("lastName"))==null?null:i.touched)),Q(),ye("ngIf",((o=y.checkoutForm.get("lastName"))==null?null:o.invalid)&&((o=y.checkoutForm.get("lastName"))==null?null:o.touched)),Q(4),Mt("invalid",((s=y.checkoutForm.get("email"))==null?null:s.invalid)&&((s=y.checkoutForm.get("email"))==null?null:s.touched)),Q(),ye("ngIf",((a=y.checkoutForm.get("email"))==null?null:a.invalid)&&((a=y.checkoutForm.get("email"))==null?null:a.touched)),Q(4),Mt("invalid",((c=y.checkoutForm.get("phone"))==null?null:c.invalid)&&((c=y.checkoutForm.get("phone"))==null?null:c.touched)),Q(),ye("ngIf",((l=y.checkoutForm.get("phone"))==null?null:l.invalid)&&((l=y.checkoutForm.get("phone"))==null?null:l.touched)),Q(4),Mt("invalid",((d=y.checkoutForm.get("address"))==null?null:d.invalid)&&((d=y.checkoutForm.get("address"))==null?null:d.touched)),Q(),ye("ngIf",((f=y.checkoutForm.get("address"))==null?null:f.invalid)&&((f=y.checkoutForm.get("address"))==null?null:f.touched)),Q(5),Mt("invalid",((p=y.checkoutForm.get("city"))==null?null:p.invalid)&&((p=y.checkoutForm.get("city"))==null?null:p.touched)),Q(),ye("ngIf",((g=y.checkoutForm.get("city"))==null?null:g.invalid)&&((g=y.checkoutForm.get("city"))==null?null:g.touched)),Q(9),Mt("selected",y.paymentMethod==="cash"),Q(),Is("ngModel",y.paymentMethod),ye("ngModelOptions",Z1(41,KW)),Q(17),ye("disabled",y.checkoutForm.invalid||y.isLoading),Q(),ye("ngIf",!y.isLoading),Q(),ye("ngIf",y.isLoading)}}var Zy=class n{constructor(e,t,r,i){this.cartService=e;this.orderService=t;this.fb=r;this.router=i;this.checkoutForm=this.fb.group({firstName:["",[Wn.required,Wn.minLength(2)]],lastName:["",[Wn.required,Wn.minLength(2)]],email:["",[Wn.required,Wn.email]],phone:["",[Wn.required,Wn.pattern(/^[0-9]{10,15}$/)]],address:["",Wn.required],city:["",Wn.required],notes:[""]})}cartItems=[];checkoutForm;paymentMethod="cash";orderSubmitted=!1;isLoading=!1;orderId="";destroy$=new Ke;ngOnInit(){this.cartService.cart$.pipe(fi(this.destroy$)).subscribe(e=>{this.cartItems=e})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}get totalPrice(){return this.cartService.getTotalPrice()}updateQuantity(e,t){this.cartService.updateQuantity(e.perfume.id,t)}removeItem(e){e.id&&this.cartService.removeFromCart(e.id)}onSubmit(){return V(this,null,function*(){if(!(this.checkoutForm.invalid||this.isLoading)){this.isLoading=!0;try{let e=ve(Y({},this.checkoutForm.value),{items:this.cartItems,subtotal:this.totalPrice,tax:0,total:this.totalPrice,paymentMethod:this.paymentMethod,status:"pending"});console.log("Order data before sending:",e);let t=yield this.orderService.createOrder(e);this.orderId=t.id,this.orderSubmitted=!0,this.cartService.clearCart()}catch(e){console.error("Checkout failed:",e)}finally{this.isLoading=!1}}})}continueShopping(){this.router.navigate(["/products"])}trackByPerfumeId(e,t){return t.perfume.id}static \u0275fac=function(t){return new(t||n)(re(Yo),re(Yy),re(lL),re(Ut))};static \u0275cmp=Nt({type:n,selectors:[["app-cart"]],decls:20,vars:3,consts:[[1,"cart-container"],[1,"cart-header"],[1,"cart-steps"],[1,"step","active"],[1,"step"],["class","empty-cart",4,"ngIf"],["class","order-confirmation",4,"ngIf"],["class","cart-content",4,"ngIf"],[1,"empty-cart"],[1,"empty-cart-icon"],["xmlns","http://www.w3.org/2000/svg","width","80","height","80","viewBox","0 0 24 24","fill","none","stroke","#d1a054","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["cx","10","cy","20.5","r","1"],["cx","18","cy","20.5","r","1"],["d","M2.5 2.5h3l2.7 12.4a2 2 0 0 0 2 1.6h7.7a2 2 0 0 0 2-1.6l1.6-8.4H7.1"],["routerLink","/products",1,"continue-shopping-btn"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x1","19","y1","12","x2","5","y2","12"],["points","12 19 5 12 12 5"],[1,"order-confirmation"],[1,"confirmation-card"],[1,"confirmation-icon","success"],["xmlns","http://www.w3.org/2000/svg","width","60","height","60","viewBox","0 0 24 24","fill","none","stroke","#4CAF50","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M22 11.08V12a10 10 0 1 1-5.93-9.14"],["points","22 4 12 14.01 9 11.01"],[1,"confirmation-text"],[1,"confirmation-details"],[1,"confirmation-actions"],[1,"cart-content"],[1,"cart-items-section"],[1,"cart-items-header"],[1,"header-details"],[1,"cart-items-list"],["class","cart-item-card",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cart-continue-shopping"],["routerLink","/products",1,"continue-shopping-link"],[1,"checkout-summary"],[1,"summary-card"],[1,"summary-title"],[1,"summary-row"],[1,"free-shipping"],[1,"summary-total"],[1,"total-amount"],[1,"checkout-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","firstName"],["type","text","id","firstName","formControlName","firstName"],["class","error-message",4,"ngIf"],["for","lastName"],["type","text","id","lastName","formControlName","lastName"],["for","email"],["type","email","id","email","formControlName","email"],["for","phone"],["type","tel","id","phone","formControlName","phone"],["for","address"],["type","text","id","address","formControlName","address"],[1,"form-row"],["for","city"],["type","text","id","city","formControlName","city"],["for","notes"],["id","notes","formControlName","notes","rows","3"],[1,"payment-methods"],[1,"payment-options"],[1,"payment-option"],["type","radio","name","payment","value","cash",3,"ngModelChange","ngModel","ngModelOptions"],[1,"payment-content"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["cx","12","cy","12","r","10"],["d","M8 14s1.5 2 4 2 4-2 4-2"],["x1","9","y1","9","x2","9.01","y2","9"],["x1","15","y1","9","x2","15.01","y2","9"],[1,"payment-option","disabled"],["type","radio","name","payment","value","card","disabled",""],["x","1","y","4","width","22","height","16","rx","2","ry","2"],["x1","1","y1","10","x2","23","y2","10"],["type","submit",1,"checkout-btn",3,"disabled"],[4,"ngIf"],["class","loading-spinner",4,"ngIf"],[1,"secure-checkout"],["d","M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"],[1,"cart-item-card"],[1,"item-image-container"],[1,"item-image",3,"src","alt"],["aria-label","Remove item",1,"remove-item-btn",3,"click"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"item-details"],[1,"item-name"],[1,"item-brand"],[1,"item-size"],[1,"item-price"],[1,"item-quantity-control"],[1,"quantity-btn","minus",3,"click","disabled"],[1,"quantity-value"],[1,"quantity-btn","plus",3,"click"],[1,"item-total-price"],[1,"error-message"],[1,"loading-spinner"]],template:function(t,r){t&1&&(M(0,"div",0)(1,"div",1)(2,"h1"),U(3,"Your Fragrance Collection"),T(),M(4,"div",2)(5,"div",3)(6,"span"),U(7,"1"),T(),U(8," Your Selection"),T(),M(9,"div",4)(10,"span"),U(11,"2"),T(),U(12," Checkout"),T(),M(13,"div",4)(14,"span"),U(15,"3"),T(),U(16," Confirmation"),T()()(),Qe(17,QW,15,0,"div",5)(18,YW,15,1,"div",6)(19,sK,110,42,"div",7),T()),t&2&&(Q(17),ye("ngIf",r.cartItems.length===0&&!r.orderSubmitted),Q(),ye("ngIf",r.orderSubmitted),Q(),ye("ngIf",r.cartItems.length>0&&!r.orderSubmitted))},dependencies:[lo,fo,cc,rL,zy,qx,qy,YV,hf,Hx,Gx,Za],styles:['.cart-container[_ngcontent-%COMP%]{max-width:1200px;margin:6rem auto;padding:0 1.5rem;font-family:Poppins,sans-serif;color:#5d4037}.cart-header[_ngcontent-%COMP%]{text-align:center;margin:6rem auto}.cart-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.8rem;font-weight:600;margin-bottom:1.5rem;letter-spacing:-.5px;color:#5d4037;text-transform:uppercase;font-family:Playfair Display,serif}.cart-steps[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:3rem;position:relative}.cart-steps[_ngcontent-%COMP%]:before{content:"";position:absolute;top:16px;left:50%;right:50%;height:1px;background:#e0e0e0;z-index:1}.cart-steps[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:0 3rem;position:relative;z-index:2;color:#999}.cart-steps[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:36px;height:36px;border-radius:50%;background:#f8f8f8;color:#999;margin-bottom:.75rem;font-weight:600;border:2px solid #e0e0e0;transition:all .3s ease}.cart-steps[_ngcontent-%COMP%]   .step.active[_ngcontent-%COMP%]{color:#5d4037}.cart-steps[_ngcontent-%COMP%]   .step.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#d4af37;color:#fff;border-color:#d4af37;box-shadow:0 4px 8px #d4af3733}.cart-steps[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]:not(:last-child):after{content:"";position:absolute;top:18px;right:0;width:6rem;height:1px;background:#e0e0e0}.empty-cart[_ngcontent-%COMP%]{text-align:center;padding:5rem 0;max-width:600px;margin:0 auto}.empty-cart[_ngcontent-%COMP%]   .empty-cart-icon[_ngcontent-%COMP%]{margin-bottom:2rem;opacity:.8}.empty-cart[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:1rem;color:#5d4037;font-weight:500}.empty-cart[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:1.2rem;margin-bottom:2.5rem;line-height:1.6}.continue-shopping-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:1rem 2rem;background:#d4af37;color:#fff;text-decoration:none;border-radius:30px;font-weight:500;transition:all .3s ease;font-size:1.1rem;box-shadow:0 4px 12px #d4af3733}.continue-shopping-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-right:.75rem;transition:transform .3s ease}.continue-shopping-btn[_ngcontent-%COMP%]:hover{background:#ba9828;transform:translateY(-2px);box-shadow:0 6px 16px #d4af374d}.continue-shopping-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:translate(-4px)}.order-confirmation[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:5rem 0;animation:_ngcontent-%COMP%_fadeIn .5s ease}.confirmation-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:4rem;text-align:center;max-width:700px;width:100%;box-shadow:0 15px 40px #00000014;border:1px solid rgba(212,175,55,.2)}.confirmation-card[_ngcontent-%COMP%]   .confirmation-icon[_ngcontent-%COMP%]{margin-bottom:2rem}.confirmation-card[_ngcontent-%COMP%]   .confirmation-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke-width:1.5}.confirmation-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.2rem;margin-bottom:1.5rem;color:#5d4037;font-weight:600}.confirmation-card[_ngcontent-%COMP%]   .confirmation-text[_ngcontent-%COMP%]{font-size:1.2rem;color:#444;margin-bottom:1rem;line-height:1.6}.confirmation-card[_ngcontent-%COMP%]   .confirmation-details[_ngcontent-%COMP%]{color:#666;margin-bottom:3rem;line-height:1.6;font-size:1.1rem}.confirmation-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1.5rem;margin-top:2rem}.confirmation-actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:.9rem 2rem;border-radius:30px;font-weight:500;text-decoration:none;transition:all .3s ease;font-size:1.05rem}.confirmation-actions[_ngcontent-%COMP%]   .view-orders-btn[_ngcontent-%COMP%]{background:#5d4037;color:#fff;box-shadow:0 4px 12px #5d403733}.confirmation-actions[_ngcontent-%COMP%]   .view-orders-btn[_ngcontent-%COMP%]:hover{background:#432e28;transform:translateY(-2px);box-shadow:0 6px 16px #5d40374d}.confirmation-actions[_ngcontent-%COMP%]   .continue-shopping-btn[_ngcontent-%COMP%]{background:#fff;color:#5d4037;border:1px solid #5d4037}.confirmation-actions[_ngcontent-%COMP%]   .continue-shopping-btn[_ngcontent-%COMP%]:hover{background:#5d40370d;transform:translateY(-2px)}.cart-content[_ngcontent-%COMP%]{display:flex;gap:3rem;animation:_ngcontent-%COMP%_fadeIn .5s ease}@media (max-width: 992px){.cart-content[_ngcontent-%COMP%]{flex-direction:column}}.cart-items-section[_ngcontent-%COMP%]{flex:2}.cart-items-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem 0;border-bottom:1px solid rgba(93,64,55,.1);margin-bottom:1rem}.cart-items-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:600;color:#5d4037}.cart-items-header[_ngcontent-%COMP%]   .header-details[_ngcontent-%COMP%]{display:flex;gap:4rem}.cart-items-header[_ngcontent-%COMP%]   .header-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#666;font-size:.95rem;min-width:70px;text-align:center;font-weight:500}.cart-items-list[_ngcontent-%COMP%]{margin-bottom:3rem}.cart-item-card[_ngcontent-%COMP%]{display:flex;align-items:center;padding:2rem 0;border-bottom:1px solid rgba(93,64,55,.05);transition:all .3s ease}.cart-item-card[_ngcontent-%COMP%]:hover{background:#d4af3708}.cart-item-card[_ngcontent-%COMP%]:last-child{border-bottom:none}.item-image-container[_ngcontent-%COMP%]{width:120px;height:120px;margin-right:2rem;position:relative;flex-shrink:0;border-radius:12px;overflow:hidden;background:#f9f9f9}.item-image-container[_ngcontent-%COMP%]   .item-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;mix-blend-mode:multiply;padding:1rem}.item-image-container[_ngcontent-%COMP%]   .remove-item-btn[_ngcontent-%COMP%]{position:absolute;top:-6px;right:-6px;width:28px;height:28px;background:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 3px 10px #0000001a;border:none;cursor:pointer;transition:all .2s ease;z-index:2}.item-image-container[_ngcontent-%COMP%]   .remove-item-btn[_ngcontent-%COMP%]:hover{background:#f8f8f8;transform:scale(1.1)}.item-image-container[_ngcontent-%COMP%]   .remove-item-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{stroke:#5d4037}.item-image-container[_ngcontent-%COMP%]   .remove-item-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px;stroke:#666;transition:stroke .2s ease}.item-details[_ngcontent-%COMP%]{flex:1;min-width:0}.item-details[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;margin-bottom:.5rem;color:#5d4037;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.item-details[_ngcontent-%COMP%]   .item-brand[_ngcontent-%COMP%]{color:#666;font-size:.95rem;margin-bottom:.75rem;text-transform:uppercase;letter-spacing:.5px}.item-details[_ngcontent-%COMP%]   .item-size[_ngcontent-%COMP%], .item-details[_ngcontent-%COMP%]   .item-price[_ngcontent-%COMP%]{color:#888;font-size:.95rem;margin-bottom:.25rem}.item-quantity-control[_ngcontent-%COMP%]{display:flex;align-items:center;margin:0 2rem}.item-quantity-control[_ngcontent-%COMP%]   .quantity-btn[_ngcontent-%COMP%]{width:36px;height:36px;background:#fff;border:1px solid #e0e0e0;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;font-size:1.1rem;font-weight:500}.item-quantity-control[_ngcontent-%COMP%]   .quantity-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#f8f8f8;border-color:#ccc}.item-quantity-control[_ngcontent-%COMP%]   .quantity-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.item-quantity-control[_ngcontent-%COMP%]   .quantity-btn.minus[_ngcontent-%COMP%]{color:#999}.item-quantity-control[_ngcontent-%COMP%]   .quantity-btn.plus[_ngcontent-%COMP%]{color:#d4af37;border-color:#d4af3780}.item-quantity-control[_ngcontent-%COMP%]   .quantity-value[_ngcontent-%COMP%]{margin:0 1rem;min-width:24px;text-align:center;font-weight:500;font-size:1.1rem}.item-total-price[_ngcontent-%COMP%]{min-width:100px;text-align:right;font-weight:600;color:#5d4037;font-size:1.1rem}.cart-continue-shopping[_ngcontent-%COMP%]{margin-top:3rem;text-align:center}.cart-continue-shopping[_ngcontent-%COMP%]   .continue-shopping-link[_ngcontent-%COMP%]{display:inline-flex;align-items:center;color:#d4af37;text-decoration:none;font-weight:500;font-size:1.1rem;transition:all .2s ease;padding:.5rem 1rem;border-radius:4px}.cart-continue-shopping[_ngcontent-%COMP%]   .continue-shopping-link[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-right:.75rem;transition:transform .2s ease}.cart-continue-shopping[_ngcontent-%COMP%]   .continue-shopping-link[_ngcontent-%COMP%]:hover{color:#b29126;background:#d4af371a}.cart-continue-shopping[_ngcontent-%COMP%]   .continue-shopping-link[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:translate(-5px)}.checkout-summary[_ngcontent-%COMP%]{flex:1;position:relative}.summary-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:2rem;box-shadow:0 10px 30px #0000000d;position:sticky;top:1rem;border:1px solid rgba(93,64,55,.1)}.summary-title[_ngcontent-%COMP%]{color:#5d4037;font-size:1.5rem;font-weight:600;margin-bottom:1.5rem;padding-bottom:1.5rem;border-bottom:1px solid rgba(93,64,55,.1)}.summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:1rem;color:#666;font-size:1rem}.summary-row[_ngcontent-%COMP%]   .free-shipping[_ngcontent-%COMP%]{color:#4caf50;font-weight:500}.summary-total[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:2rem 0;padding-top:1.5rem;border-top:1px solid rgba(93,64,55,.1);font-weight:600;font-size:1.1rem;color:#5d4037}.summary-total[_ngcontent-%COMP%]   .total-amount[_ngcontent-%COMP%]{font-size:1.3rem;color:#8d6e63}.checkout-form[_ngcontent-%COMP%]{margin-top:2rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem;position:relative}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.75rem;color:#5d4037;font-size:.95rem;font-weight:500}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.9rem 1.2rem;border:1px solid #e0e0e0;border-radius:8px;font-family:inherit;font-size:1rem;transition:all .3s ease;background:#f9f9f9}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#d4af37;box-shadow:0 0 0 3px #d4af371a;background:#fff}.form-group[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea.invalid[_ngcontent-%COMP%]{border-color:#e74c3c}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.form-row[_ngcontent-%COMP%]{display:flex;gap:1.5rem}.form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1}.error-message[_ngcontent-%COMP%]{color:#e74c3c;font-size:.85rem;margin-top:.5rem;animation:_ngcontent-%COMP%_fadeIn .3s ease}.payment-methods[_ngcontent-%COMP%]{margin:2.5rem 0}.payment-methods[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#5d4037;font-size:1.1rem;margin-bottom:1rem;font-weight:600}.payment-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.payment-option[_ngcontent-%COMP%]{position:relative;cursor:pointer}.payment-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{position:absolute;opacity:0;width:0;height:0}.payment-option[_ngcontent-%COMP%]   .payment-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.5rem;border:1px solid #e0e0e0;border-radius:8px;transition:all .3s ease;background:#f9f9f9}.payment-option[_ngcontent-%COMP%]   .payment-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#555;font-weight:500}.payment-option[_ngcontent-%COMP%]   .payment-content[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#999;transition:all .3s ease}.payment-option[_ngcontent-%COMP%]:hover   .payment-content[_ngcontent-%COMP%]{border-color:#ccc;background:#fff}.payment-option.selected[_ngcontent-%COMP%]   .payment-content[_ngcontent-%COMP%]{border-color:#d4af37;background:#d4af370d}.payment-option.selected[_ngcontent-%COMP%]   .payment-content[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#d4af37}.payment-option.disabled[_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed}.payment-option.disabled[_ngcontent-%COMP%]   .payment-content[_ngcontent-%COMP%]{background:#f5f5f5}.checkout-btn[_ngcontent-%COMP%]{width:100%;padding:1.2rem;background:#d4af37;color:#fff;border:none;border-radius:8px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:all .3s ease;margin-top:1rem;position:relative;overflow:hidden;box-shadow:0 4px 12px #d4af374d}.checkout-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#ba9828;transform:translateY(-2px);box-shadow:0 6px 16px #d4af3766}.checkout-btn[_ngcontent-%COMP%]:disabled{background:#ddd;cursor:not-allowed;box-shadow:none}.loading-spinner[_ngcontent-%COMP%]{display:inline-block;width:20px;height:20px;border:3px solid rgba(255,255,255,.3);border-radius:50%;border-top-color:#fff;animation:_ngcontent-%COMP%_spin 1s ease-in-out infinite}.secure-checkout[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;color:#666;font-size:.9rem;margin:1.5rem 0;padding-top:1.5rem;border-top:1px solid rgba(93,64,55,.1)}.secure-checkout[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-right:.5rem;color:#4caf50}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media (max-width: 768px){.cart-header[_ngcontent-%COMP%]{margin:2rem 0 3rem}.cart-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.2rem}.cart-steps[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]{padding:0 1.5rem;font-size:.9rem}.cart-steps[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:30px;height:30px}.cart-steps[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]:not(:last-child):after{width:3rem}.cart-item-card[_ngcontent-%COMP%]{flex-wrap:wrap;padding:1.5rem 0;position:relative}.item-image-container[_ngcontent-%COMP%]{width:80px;height:80px;margin-right:1rem}.item-details[_ngcontent-%COMP%]{flex:1 0 calc(100% - 100px);margin-bottom:1rem}.item-quantity-control[_ngcontent-%COMP%]{margin:.5rem 0 0;order:3;width:100%;justify-content:flex-start}.item-total-price[_ngcontent-%COMP%]{position:absolute;right:0;bottom:1.5rem}.confirmation-card[_ngcontent-%COMP%]{padding:2rem}.confirmation-actions[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}}@media (max-width: 576px){.cart-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem}.cart-steps[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]{padding:0 1rem}.cart-steps[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]:not(:last-child):after{width:2rem}.summary-card[_ngcontent-%COMP%], .confirmation-card[_ngcontent-%COMP%]{padding:1.5rem}.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}}']})};var pu=class n{static \u0275fac=function(t){return new(t||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};var Xo=class n{wishlistKey="wishlist";wishlistSubject=new xt(0);wishlistCount$=this.wishlistSubject.asObservable();constructor(){this.updateWishlistCount()}updateWishlistCount(){let e=this.getWishList().length;this.wishlistSubject.next(e)}getWishList(){return JSON.parse(localStorage.getItem("wishlist")||"[]")}addToWishList(e){let t=this.getWishList();t.push({perfumeId:e.id,perfume:e}),localStorage.setItem(this.wishlistKey,JSON.stringify(t)),this.updateWishlistCount()}removeFromWishList(e){let t=this.getWishList().filter(r=>r.perfumeId!==e);localStorage.setItem(this.wishlistKey,JSON.stringify(t)),this.updateWishlistCount()}isInWishList(e){return this.getWishList().some(t=>t.perfumeId===e)}clearWishList(){localStorage.removeItem(this.wishlistKey),this.updateWishlistCount()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};function aK(n,e){if(n&1){let t=jn();M(0,"div",27),de("click",function(){let i=et(t).$implicit,o=Le();return tt(o.selectImage(i))}),T()}if(n&2){let t=e.$implicit,r=Le();el("background-image","url("+t+")"),Mt("active",t===r.selectedImage)}}function cK(n,e){if(n&1&&(M(0,"span",28),oe(1,"i",29),U(2),T()),n&2){let t=e.$implicit;Q(2),Jt(" ",t," ")}}var Xy=class n{perfume;isOpen=!1;closed=new He;addToCart=new He;removeFromoCart=new He;addedToCart=!1;selectedImage="";selectedSize="";productSerivce=H(pu);wishlistService=H(Xo);ngOnInit(){this.perfume&&this.perfume.images&&this.perfume.images.length>0&&(this.selectedImage=this.perfume.images[0]),this.perfume&&this.perfume.sizes&&this.perfume.sizes.length>0&&(this.selectedSize=this.perfume.sizes[0])}closeDetails(){this.closed.emit()}selectImage(e){this.selectedImage=e}prevImage(){let t=(this.perfume.images.indexOf(this.selectedImage)-1+this.perfume.images.length)%this.perfume.images.length;this.selectedImage=this.perfume.images[t]}nextImage(){let t=(this.perfume.images.indexOf(this.selectedImage)+1)%this.perfume.images.length;this.selectedImage=this.perfume.images[t]}togleCart(){this.addedToCart=!this.addedToCart,this.addedToCart?this.addToCart.emit(this.perfume):this.removeFromoCart.emit(this.perfume)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Nt({type:n,selectors:[["app-perfume-details"]],inputs:{perfume:"perfume",isOpen:"isOpen"},outputs:{closed:"closed",addToCart:"addToCart",removeFromoCart:"removeFromoCart"},decls:39,vars:16,consts:[[1,"perfume-details-overlay",3,"click"],[1,"perfume-details-container",3,"click"],["aria-label","Close details",1,"close-button",3,"click"],["viewBox","0 0 24 24"],["d","M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"],[1,"perfume-images"],[1,"main-image"],[1,"image-nav"],["aria-label","Previous image",1,"nav-button","prev",3,"click"],["d","M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"],["aria-label","Next image",1,"nav-button","next",3,"click"],["d","M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"],[1,"thumbnail-container"],["class","thumbnail",3,"backgroundImage","active","click",4,"ngFor","ngForOf"],[1,"perfume-info"],[1,"perfume-header"],[1,"perfume-name"],[1,"perfume-brand"],[1,"perfume-description"],[1,"perfume-specs"],[1,"features"],["class","feature-tag",4,"ngFor","ngForOf"],[1,"price-section"],[1,"price"],[1,"action-buttons"],[1,"add-to-cart",3,"click"],["d","M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"],[1,"thumbnail",3,"click"],[1,"feature-tag"],[1,"feature-icon"]],template:function(t,r){t&1&&(M(0,"div",0),de("click",function(){return r.closeDetails()}),M(1,"div",1),de("click",function(o){return o.stopPropagation()}),M(2,"button",2),de("click",function(){return r.closeDetails()}),mt(),M(3,"svg",3),oe(4,"path",4),T()(),Dt(),M(5,"div",5)(6,"div",6)(7,"div",7)(8,"button",8),de("click",function(){return r.prevImage()}),mt(),M(9,"svg",3),oe(10,"path",9),T()(),Dt(),M(11,"button",10),de("click",function(){return r.nextImage()}),mt(),M(12,"svg",3),oe(13,"path",11),T()()()(),Dt(),M(14,"div",12),Qe(15,aK,1,4,"div",13),T()(),M(16,"div",14)(17,"div",15)(18,"h1",16),U(19),nr(20,"uppercase"),T(),M(21,"p",17),U(22),T()(),M(23,"div",18)(24,"p"),U(25),T()(),oe(26,"hr"),M(27,"div",19)(28,"div",20),Qe(29,cK,3,1,"span",21),T()(),M(30,"div",22)(31,"div",23),U(32),nr(33,"currency"),T()(),M(34,"div",24)(35,"button",25),de("click",function(){return r.togleCart()}),mt(),M(36,"svg",3),oe(37,"path",26),T(),U(38),T()()()()()),t&2&&(Mt("open",r.isOpen),Q(6),el("background-image","url("+r.selectedImage+")"),Q(9),ye("ngForOf",r.perfume.images),Q(4),ot(Mp(20,11,r.perfume.name)),Q(3),ot(r.perfume.category),Q(3),ot(r.perfume.details),Q(4),ye("ngForOf",r.perfume.features),Q(3),ot(tl(33,13,r.perfume.price,"EGP")),Q(6),Jt(" ",r.addedToCart?"Remove from Cart":"Add to Cart"," "))},dependencies:[lo,Lp,Za],styles:[".perfume-details-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#000c;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);z-index:1050;display:flex;justify-content:center;align-items:center;opacity:0;visibility:hidden;transition:all .4s cubic-bezier(.22,1,.36,1)}.perfume-details-overlay.open[_ngcontent-%COMP%]{opacity:1;visibility:visible}.perfume-details-container[_ngcontent-%COMP%]{position:relative;width:90%;max-width:1200px;max-height:90vh;background:linear-gradient(145deg,#fff,#f8f8f8);border-radius:20px;box-shadow:0 20px 50px #0000004d;display:grid;grid-template-columns:1fr 1fr;overflow:hidden;transform:translateY(20px);transition:transform .4s cubic-bezier(.22,1,.36,1)}.open[_ngcontent-%COMP%]   .perfume-details-container[_ngcontent-%COMP%]{transform:translateY(0)}@media (max-width: 992px){.perfume-details-container[_ngcontent-%COMP%]{grid-template-columns:1fr;max-height:90vh;overflow-y:auto}}.close-button[_ngcontent-%COMP%]{position:absolute;top:10px;right:5px;width:40px;height:40px;background:#0000001a;border:none;border-radius:50%;display:flex;justify-content:center;align-items:center;cursor:pointer;z-index:10;transition:all .3s ease}.close-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;fill:#333}.close-button[_ngcontent-%COMP%]:hover{background:#0003;transform:rotate(90deg)}.perfume-images[_ngcontent-%COMP%]{position:relative;padding:40px;display:flex;flex-direction:column;align-items:center;justify-content:center;background:linear-gradient(135deg,#f5f5f5,#e9e9e9)}.main-image[_ngcontent-%COMP%]{width:100%;height:400px;background-size:contain;background-position:center;background-repeat:no-repeat;position:relative;transition:background-image .5s ease-in-out;box-shadow:0 4px 20px #0000001a;border-radius:20px}@media (max-width: 768px){.main-image[_ngcontent-%COMP%]{height:300px}}.main-image[_ngcontent-%COMP%]:hover{box-shadow:0 8px 30px #0003;transform:scale(1.02)}.image-nav[_ngcontent-%COMP%]{position:absolute;top:50%;left:0;right:0;display:flex;justify-content:space-between;transform:translateY(-50%);padding:0 20px}.image-nav[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]{width:50px;height:50px;background:#fffc;border:none;border-radius:50%;display:flex;justify-content:center;align-items:center;cursor:pointer;box-shadow:0 4px 10px #0000001a;transition:all .3s ease}.image-nav[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;fill:#333}.image-nav[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]:hover{background:#fff;transform:scale(1.1)}.image-nav[_ngcontent-%COMP%]   .nav-button.prev[_ngcontent-%COMP%]{margin-left:-25px}.image-nav[_ngcontent-%COMP%]   .nav-button.next[_ngcontent-%COMP%]{margin-right:-25px}.thumbnail-container[_ngcontent-%COMP%]{display:flex;gap:15px;margin-top:30px;flex-wrap:wrap;justify-content:center;max-width:100%;overflow-x:auto;padding:10px 0}@media (max-width: 768px){.thumbnail-container[_ngcontent-%COMP%]{gap:10px;margin-top:20px}}.thumbnail[_ngcontent-%COMP%]{width:80px;height:80px;background-size:cover;background-position:center;border-radius:8px;cursor:pointer;border:2px solid transparent;transition:all .3s ease;box-shadow:0 4px 8px #0000001a}@media (max-width: 768px){.thumbnail[_ngcontent-%COMP%]{width:60px;height:60px}}.thumbnail[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 8px 15px #00000026}.thumbnail.active[_ngcontent-%COMP%]{border:2px solid #9b59b6;transform:scale(1.05)}.perfume-info[_ngcontent-%COMP%]{padding:40px;overflow-y:auto;display:flex;flex-direction:column}@media (max-width: 992px){.perfume-info[_ngcontent-%COMP%]{padding:30px}}@media (max-width: 768px){.perfume-info[_ngcontent-%COMP%]{padding:20px}}.perfume-header[_ngcontent-%COMP%]{margin-bottom:30px;border-bottom:1px solid #eee;padding-bottom:20px}.perfume-header[_ngcontent-%COMP%]   .perfume-name[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:700;color:#2c3e50;margin:0 0 5px;line-height:1.2}@media (max-width: 768px){.perfume-header[_ngcontent-%COMP%]   .perfume-name[_ngcontent-%COMP%]{font-size:1.8rem}}.perfume-header[_ngcontent-%COMP%]   .perfume-brand[_ngcontent-%COMP%]{position:absolute;background:#d4af37;color:#fff;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:1px;box-shadow:0 2px 8px #0000001a}.perfume-header[_ngcontent-%COMP%]   .perfume-origin[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#7f8c8d;font-size:.9rem}.perfume-header[_ngcontent-%COMP%]   .perfume-origin[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px;fill:#7f8c8d}.perfume-description[_ngcontent-%COMP%]{margin-bottom:30px;line-height:1.6;color:#555}.perfume-specs[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:30px}.perfume-specs[_ngcontent-%COMP%]   .features[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin:16px 0}.perfume-specs[_ngcontent-%COMP%]   .features[_ngcontent-%COMP%]   .feature-tag[_ngcontent-%COMP%]{display:flex;align-items:center;background:#f9f5f2;padding:6px 12px;border-radius:20px;font-size:.75rem;color:#5d4037}.perfume-specs[_ngcontent-%COMP%]   .features[_ngcontent-%COMP%]   .feature-tag[_ngcontent-%COMP%]   .feature-icon[_ngcontent-%COMP%]{margin-right:6px;font-size:.8rem}@media (max-width: 768px){.perfume-specs[_ngcontent-%COMP%]{grid-template-columns:1fr}}.perfume-specs[_ngcontent-%COMP%]   .spec-item[_ngcontent-%COMP%]   .spec-label[_ngcontent-%COMP%]{display:block;font-size:.8rem;text-transform:uppercase;color:#7f8c8d;letter-spacing:.5px;margin-bottom:5px}.perfume-specs[_ngcontent-%COMP%]   .spec-item[_ngcontent-%COMP%]   .spec-value[_ngcontent-%COMP%]{font-size:1rem;color:#2c3e50;font-weight:500}.price-section[_ngcontent-%COMP%]{margin-bottom:30px;display:flex;justify-content:space-between;align-items:center}.price-section[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#333}.price-section[_ngcontent-%COMP%]   .size-options[_ngcontent-%COMP%]{display:flex;gap:10px}.price-section[_ngcontent-%COMP%]   .size-options[_ngcontent-%COMP%]   .size-option[_ngcontent-%COMP%]{padding:8px 15px;background:#f5f5f5;border:none;border-radius:20px;cursor:pointer;transition:all .3s ease;font-size:.9rem}.price-section[_ngcontent-%COMP%]   .size-options[_ngcontent-%COMP%]   .size-option[_ngcontent-%COMP%]:hover{background:#e0e0e0}.price-section[_ngcontent-%COMP%]   .size-options[_ngcontent-%COMP%]   .size-option.selected[_ngcontent-%COMP%]{background:#9b59b6;color:#fff}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:15px;margin-top:auto}.action-buttons[_ngcontent-%COMP%]   .add-to-cart[_ngcontent-%COMP%]{flex:1;padding:15px;background:#5d4037;color:#fff;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:10px;transition:all .3s ease;box-shadow:0 4px 15px #9b59b64d}.action-buttons[_ngcontent-%COMP%]   .add-to-cart[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;fill:#fff}.action-buttons[_ngcontent-%COMP%]   .add-to-cart[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px #9b59b666}.action-buttons[_ngcontent-%COMP%]   .add-to-cart[_ngcontent-%COMP%]:active{transform:translateY(0)}.action-buttons[_ngcontent-%COMP%]   .wishlist[_ngcontent-%COMP%]{width:50px;background:#f5f5f5;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center}.action-buttons[_ngcontent-%COMP%]   .wishlist[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;fill:#7f8c8d;transition:fill .3s ease}.action-buttons[_ngcontent-%COMP%]   .wishlist[_ngcontent-%COMP%]:hover{background:#e0e0e0}.action-buttons[_ngcontent-%COMP%]   .wishlist[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{fill:#e74c3c}"]})};function lK(n,e){n&1&&(M(0,"div",29),U(1,"New"),T())}function dK(n,e){if(n&1&&(M(0,"span",30),oe(1,"i",31),U(2),T()),n&2){let t=e.$implicit,r=Le(2);Q(),L1(r.getFeatureIcon(t)),Q(),Jt(" ",t," ")}}function fK(n,e){if(n&1){let t=jn();M(0,"div")(1,"button",32),de("click",function(){et(t);let i=Le(2);return tt(i.addToCart(i.perfume))}),mt(),M(2,"svg",14),oe(3,"path",33),T(),Dt(),oe(4,"i",34),U(5," Add to Cart "),T()()}}function hK(n,e){if(n&1){let t=jn();M(0,"button",32),de("click",function(){et(t);let i=Le(2);return tt(i.removeFromCart(i.perfume))}),U(1,"Remove From the Cart"),T()}}function pK(n,e){if(n&1){let t=jn();M(0,"div",3)(1,"div",4),de("click",function(){et(t);let i=Le();return tt(i.openDetails(i.perfume))}),oe(2,"div",5),M(3,"span"),U(4,"open"),T(),oe(5,"img",6),Qe(6,lK,2,0,"div",7),T(),M(7,"div",8)(8,"div",9)(9,"div",10)(10,"h3"),U(11),nr(12,"uppercase"),T(),M(13,"div",11)(14,"div",12),U(15),T(),M(16,"button",13),de("click",function(){et(t);let i=Le();return tt(i.toggleWishlist(i.perfume))}),mt(),M(17,"svg",14),oe(18,"path",15),T()()()()(),Dt(),M(19,"p",16),U(20),T(),M(21,"div",17),Qe(22,dK,3,3,"span",18),T(),M(23,"div",19)(24,"div",20),de("click",function(){et(t);let i=Le();return tt(i.toggleNotes())}),M(25,"h4"),U(26,"Fragrance Notes "),M(27,"i",21),U(28),T()(),M(29,"div",22)(30,"div",23)(31,"span",24),U(32,"Top:"),T(),M(33,"span",25),U(34),T()(),M(35,"div",23)(36,"span",24),U(37,"Middle:"),T(),M(38,"span",25),U(39),T()(),M(40,"div",23)(41,"span",24),U(42,"Base:"),T(),M(43,"span",25),U(44),T()()()()(),M(45,"div",26)(46,"span",27),U(47),nr(48,"number"),nr(49,"currency"),T(),Qe(50,fK,6,0,"div",28)(51,hK,2,0,"ng-template",null,0,X1),T()()()}if(n&2){let t=K1(52),r=Le();Q(5),ye("src",r.perfume.images[0],Xu)("alt",r.perfume.name),Q(),ye("ngIf",r.perfume.isNew),Q(5),ot(Mp(12,18,r.perfume.name)),Q(4),ot(r.perfume.category),Q(),Mt("filled",r.isInWishlist),Q(4),ot(r.perfume.description),Q(2),ye("ngForOf",r.perfume.features),Q(6),ot(r.showNotes?"\u25B2":"\u25BC"),Q(),Mt("expanded",r.showNotes),Q(5),ot(r.perfume.notes.top.join(", ")),Q(5),ot(r.perfume.notes.middle.join(", ")),Q(5),ot(r.perfume.notes.base.join(", ")),Q(3),ot(tl(49,23,tl(48,20,+r.perfume.price,"1.2-2"),"EGP ")),Q(3),ye("ngIf",!r.addedToCart)("ngIfElse",t)}}var Jy=class n{perfume;showDetails=!1;showNotes=!1;addedToCart=!1;isInWishlist=!1;selectedSize="50";availableSizes=["30","50","100"];router=H(Ut);cartService=H(Yo);perfumeService=H(Xr);productSerivce=H(pu);wishListService=H(Xo);ngOnInit(){this.perfume?.id&&(this.addedToCart=this.cartService.isInCart(this.perfume.id),this.isInWishlist=this.wishListService.isInWishList(this.perfume.id))}toggleNotes(){this.showNotes=!this.showNotes}addToCart(e){this.cartService.addToCart(e),this.addedToCart=!0}removeFromCart(e){e.id&&this.cartService.removeFromCart(e.id),this.addedToCart=!1}toggleWishlist(e){e.id&&(this.isInWishlist=!this.isInWishlist,this.isInWishlist?this.wishListService.addToWishList(e):this.wishListService.removeFromWishList(e.id))}navigateToCart(){this.router.navigate(["/cart"])}getFeatureIcon(e){return{Lemon:"icon-droplet",top:"icon-clock",Unisex:"icon-genderless",Organic:"icon-leaf",Vegan:"icon-seedling","Limited Edition":"icon-star"}[e]||"icon-circle"}openDetails(e){this.showDetails=!this.showDetails}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Nt({type:n,selectors:[["perfume-card"]],inputs:{perfume:"perfume"},decls:2,vars:3,consts:[["addedState",""],["class","perfume-card",4,"ngIf"],[3,"closed","addToCart","removeFromoCart","perfume","isOpen"],[1,"perfume-card"],[1,"perfume-image",3,"click"],[1,"image-overlay"],["loading","lazy",3,"src","alt"],["class","perfume-badge",4,"ngIf"],[1,"perfume-details"],[1,"header-section"],[1,"perfume-type"],[1,"category","d-flex","align-items-center","gap-2"],[1,"category-badge"],[1,"wishlist",3,"click"],["viewBox","0 0 24 24"],["d",`M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5
         2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81
         14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55
         11.54L12 21.35z`],[1,"description"],[1,"features"],["class","feature-tag",4,"ngFor","ngForOf"],[1,"notes-accordion"],[1,"note-section",3,"click"],[1,"toggle-icon"],[1,"note-content"],[1,"note-group"],[1,"note-label"],[1,"note-values"],[1,"price-section"],[1,"price"],[4,"ngIf","ngIfElse"],[1,"perfume-badge"],[1,"feature-tag"],[1,"feature-icon"],["type","button",1,"add-to-cart",3,"click"],["d","M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"],[1,"cart-icon"]],template:function(t,r){t&1&&(Qe(0,pK,53,26,"div",1),M(1,"app-perfume-details",2),de("closed",function(){return r.showDetails=!1})("addToCart",function(o){return r.addToCart(o)})("removeFromoCart",function(o){return r.removeFromCart(o)}),T()),t&2&&(ye("ngIf",r.perfume),Q(),ye("perfume",r.perfume)("isOpen",r.showDetails))},dependencies:[lo,fo,Xy,Lp,DA,Za],styles:[".perfume-card[_ngcontent-%COMP%]{min-width:320px;background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 8px 24px #00000014;transition:all .3s cubic-bezier(.25,.8,.25,1);position:relative;margin:16px}.perfume-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 12px 32px #0000001f}.perfume-image[_ngcontent-%COMP%]{position:relative;max-height:350px;overflow:hidden}.perfume-image[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;top:36%;background-color:#0000007a;width:100%;text-align:center;color:#eee;padding:20px;font-size:1.2rem;font-weight:600;text-transform:uppercase;letter-spacing:1px;animation:_ngcontent-%COMP%_fadeIn .3s ease forwards}.perfume-image[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.1)}.perfume-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .6s ease}.perfume-image[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(to bottom,#0003 60%,#000000e6)}.perfume-image[_ngcontent-%COMP%]   .perfume-badge[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px;background:#d4af37;color:#fff;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:1px;box-shadow:0 2px 8px #0000001a}.perfume-details[_ngcontent-%COMP%]{padding:20px}.perfume-details[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]{margin-bottom:12px}.perfume-details[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.4rem;font-weight:600;color:#5d4037;letter-spacing:.5px}.perfume-details[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .perfume-type[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:6px}.perfume-details[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .perfume-type[_ngcontent-%COMP%]   .category-badge[_ngcontent-%COMP%]{background:#5d4037;color:#fff;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:1px;box-shadow:0 2px 8px #0000001a}.perfume-details[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .perfume-type[_ngcontent-%COMP%]   .wishlist[_ngcontent-%COMP%]{width:50px;height:35px;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center}.perfume-details[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .perfume-type[_ngcontent-%COMP%]   .wishlist[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;fill:none;stroke:#5d4037;stroke-width:2;transition:fill .3s,stroke .3s}.perfume-details[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .perfume-type[_ngcontent-%COMP%]   .wishlist.filled[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#e74c3c;stroke:#e74c3c}.perfume-details[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .perfume-type[_ngcontent-%COMP%]   .wishlist[_ngcontent-%COMP%]:hover{background:#f0f0f0}.perfume-details[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#333;font-size:.9rem;line-height:1.5;margin:12px 0}.perfume-details[_ngcontent-%COMP%]   .features[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin:16px 0}.perfume-details[_ngcontent-%COMP%]   .features[_ngcontent-%COMP%]   .feature-tag[_ngcontent-%COMP%]{display:flex;align-items:center;background:#f9f5f2;padding:6px 12px;border-radius:20px;font-size:.75rem;color:#5d4037}.perfume-details[_ngcontent-%COMP%]   .features[_ngcontent-%COMP%]   .feature-tag[_ngcontent-%COMP%]   .feature-icon[_ngcontent-%COMP%]{margin-right:6px;font-size:.8rem}.perfume-details[_ngcontent-%COMP%]   .notes-accordion[_ngcontent-%COMP%]{margin:16px 0;border-top:1px solid #e0e0e0;padding-top:12px}.perfume-details[_ngcontent-%COMP%]   .notes-accordion[_ngcontent-%COMP%]   .note-section[_ngcontent-%COMP%]{cursor:pointer}.perfume-details[_ngcontent-%COMP%]   .notes-accordion[_ngcontent-%COMP%]   .note-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin:0 0 8px;font-size:.9rem;color:#5d4037}.perfume-details[_ngcontent-%COMP%]   .notes-accordion[_ngcontent-%COMP%]   .note-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%]{font-size:.8rem;transition:transform .3s ease}.perfume-details[_ngcontent-%COMP%]   .notes-accordion[_ngcontent-%COMP%]   .note-section[_ngcontent-%COMP%]   .note-content[_ngcontent-%COMP%]{max-height:0;overflow:hidden;transition:max-height .3s ease}.perfume-details[_ngcontent-%COMP%]   .notes-accordion[_ngcontent-%COMP%]   .note-section[_ngcontent-%COMP%]   .note-content.expanded[_ngcontent-%COMP%]{max-height:200px}.perfume-details[_ngcontent-%COMP%]   .notes-accordion[_ngcontent-%COMP%]   .note-section[_ngcontent-%COMP%]   .note-content[_ngcontent-%COMP%]   .note-group[_ngcontent-%COMP%]{margin-bottom:8px}.perfume-details[_ngcontent-%COMP%]   .notes-accordion[_ngcontent-%COMP%]   .note-section[_ngcontent-%COMP%]   .note-content[_ngcontent-%COMP%]   .note-group[_ngcontent-%COMP%]   .note-label[_ngcontent-%COMP%]{font-weight:500;font-size:.8rem;color:#5d4037;margin-right:6px}.perfume-details[_ngcontent-%COMP%]   .notes-accordion[_ngcontent-%COMP%]   .note-section[_ngcontent-%COMP%]   .note-content[_ngcontent-%COMP%]   .note-group[_ngcontent-%COMP%]   .note-values[_ngcontent-%COMP%]{font-size:.8rem;color:#777}.perfume-details[_ngcontent-%COMP%]   .price-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:.5rem}.perfume-details[_ngcontent-%COMP%]   .price-section[_ngcontent-%COMP%]   .add-to-cart[_ngcontent-%COMP%]{background:#5d4037;color:#fff;border:none;padding:.5rem 1rem;border-radius:4px;cursor:pointer;transition:background .3s}.perfume-details[_ngcontent-%COMP%]   .price-section[_ngcontent-%COMP%]   .add-to-cart[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;fill:#eee}.perfume-details[_ngcontent-%COMP%]   .price-section[_ngcontent-%COMP%]   .add-to-cart[_ngcontent-%COMP%]:hover{background:#3d2a24}.perfume-details[_ngcontent-%COMP%]   .price-section[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;color:#d4af37}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1)}50%{transform:scale(1.05)}to{transform:scale(1)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.note-content.expanded[_ngcontent-%COMP%]   .note-group[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease forwards;opacity:0}.note-content.expanded[_ngcontent-%COMP%]   .note-group[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.note-content.expanded[_ngcontent-%COMP%]   .note-group[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.note-content.expanded[_ngcontent-%COMP%]   .note-group[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}"]})};function gK(n,e){if(n&1&&(M(0,"option",48),U(1),T()),n&2){let t=e.$implicit;ye("value",t),Q(),ot(t)}}function yK(n,e){if(n&1&&(M(0,"option",48),U(1),T()),n&2){let t=e.$implicit;ye("value",t),Q(),ot(t)}}function vK(n,e){if(n&1){let t=jn();M(0,"div",16)(1,"div",17),de("click",function(){et(t);let i=Le();return tt(i.toggleShowFilter())}),M(2,"h2",18),mt(),M(3,"svg",19),oe(4,"path",20)(5,"path",21),T(),Dt(),M(6,"span"),U(7,"Filter & Sort"),T()(),M(8,"button",22),de("click",function(i){et(t);let o=Le();return tt(o.resetFilters(i))}),mt(),M(9,"svg",23),oe(10,"path",24),T(),U(11," Reset All "),T()(),Dt(),M(12,"div",25)(13,"div",26)(14,"div",27)(15,"div",28),mt(),M(16,"svg",29),oe(17,"path",30),T()(),Dt(),M(18,"label",31),U(19,"Fragrance Family"),T()(),M(20,"div",32)(21,"select",33),xs("ngModelChange",function(i){et(t);let o=Le();return Wa(o.selectedCategory,i)||(o.selectedCategory=i),tt(i)}),de("change",function(){et(t);let i=Le();return tt(i.applyFilters())}),Qe(22,gK,2,2,"option",34),T(),oe(23,"div",35),T()(),M(24,"div",26)(25,"div",27)(26,"div",28),mt(),M(27,"svg",29),oe(28,"path",36)(29,"circle",37),T()(),Dt(),M(30,"label",38),U(31,"Origin Country"),T()(),M(32,"div",32)(33,"select",39),xs("ngModelChange",function(i){et(t);let o=Le();return Wa(o.selectedCountry,i)||(o.selectedCountry=i),tt(i)}),de("change",function(){et(t);let i=Le();return tt(i.applyFilters())}),Qe(34,yK,2,2,"option",34),T(),oe(35,"div",35),T()(),M(36,"div",26)(37,"div",27)(38,"div",28),mt(),M(39,"svg",29),oe(40,"path",40),T()(),Dt(),M(41,"label",41),U(42,"Sort Options"),T()(),M(43,"div",32)(44,"select",42),xs("ngModelChange",function(i){et(t);let o=Le();return Wa(o.sortOption,i)||(o.sortOption=i),tt(i)}),de("change",function(){et(t);let i=Le();return tt(i.applyFilters())}),M(45,"option",43),U(46,"Featured"),T(),M(47,"option",44),U(48,"Price: Low to High"),T(),M(49,"option",45),U(50,"Price: High to Low"),T(),M(51,"option",46),U(52,"Name: A-Z"),T(),M(53,"option",47),U(54,"Name: Z-A"),T()(),oe(55,"div",35),T()()()()}if(n&2){let t=Le();Q(3),Mt("open",t.showFilter),Q(9),Mt("open",t.showFilter),Q(9),Is("ngModel",t.selectedCategory),Q(),ye("ngForOf",t.categories),Q(11),Is("ngModel",t.selectedCountry),Q(),ye("ngForOf",t.countries),Q(10),Is("ngModel",t.sortOption)}}function _K(n,e){n&1&&(M(0,"div",49),oe(1,"div",50),M(2,"p"),U(3,"Loading fragrances..."),T()())}function wK(n,e){if(n&1&&oe(0,"perfume-card",52),n&2){let t=e.$implicit;ye("perfume",t)}}function CK(n,e){if(n&1&&(M(0,"div",13),Qe(1,wK,1,1,"perfume-card",51),T()),n&2){let t=Le();Q(),ye("ngForOf",t.displayedProducts)("ngForTrackBy",t.trackById)}}function bK(n,e){if(n&1){let t=jn();M(0,"div",53)(1,"div",54),U(2,"\u{1F615}"),T(),M(3,"h3",55),U(4,"No fragrances match your filters"),T(),M(5,"p",56),U(6,"Try adjusting your search criteria"),T(),M(7,"button",22),de("click",function(i){et(t);let o=Le();return tt(o.resetFilters(i))}),U(8," Reset All Filters "),T()()}}function EK(n,e){if(n&1){let t=jn();M(0,"nav",57)(1,"button",58),de("click",function(){et(t);let i=Le();return tt(i.previousPage())}),M(2,"span",59),U(3,"\u2190"),T(),U(4," Previous "),T(),M(5,"span",60),U(6),T(),M(7,"button",61),de("click",function(){et(t);let i=Le();return tt(i.nextPage())}),U(8," Next "),M(9,"span",62),U(10,"\u2192"),T()()()}if(n&2){let t=Le();Q(),ye("disabled",t.currentPage===1),Q(5),tw(" Page ",t.currentPage," of ",t.totalPages," "),Q(),ye("disabled",t.currentPage===t.totalPages)}}var ev=class n{constructor(e){this.route=e}allProducts=[];displayedProducts=[];filteredProducts=[];isLoading=!0;categories=[];countries=[];currentPage=1;productsPerPage=4;totalPages=1;selectedCategory="ALL";selectedCountry="ALL";sortOption="featured";showFilter=!1;perfumeService=H(Xr);ngOnInit(){this.route.queryParamMap.subscribe(e=>{e.has("type")&&(this.selectedCategory=e.get("type")||"ALL"),this.loadProducts()})}loadProducts(){this.isLoading=!0,setTimeout(()=>{this.perfumeService.getAllPerfumes().subscribe(e=>{this.allProducts=e,this.filteredProducts=[...this.allProducts],this.categories=["ALL",...new Set(this.allProducts.map(t=>t.category))],this.countries=["ALL",...new Set(this.allProducts.map(t=>t.country))],this.applyFilters(),this.isLoading=!1}),this.filteredProducts=[...this.allProducts],this.categories=["ALL",...new Set(this.allProducts.map(e=>e.category))],this.countries=["ALL",...new Set(this.allProducts.map(e=>e.country))],this.applyFilters(),this.isLoading=!1},1e3)}applyFilters(){let e=this.allProducts;switch(this.selectedCategory!=="ALL"&&(e=e.filter(t=>t.category===this.selectedCategory)),this.selectedCountry!=="ALL"&&(e=e.filter(t=>t.country===this.selectedCountry)),this.sortOption){case"price-low":e.sort((t,r)=>t.price-r.price);break;case"price-high":e.sort((t,r)=>r.price-t.price);break;case"name-asc":e.sort((t,r)=>t.name.localeCompare(r.name));break;case"name-desc":e.sort((t,r)=>r.name.localeCompare(t.name));break;default:break}this.filteredProducts=e,this.currentPage=1,this.updatePagination(),this.updateDisplayedProducts()}updatePagination(){this.totalPages=Math.ceil(this.filteredProducts.length/this.productsPerPage),this.currentPage>this.totalPages&&this.totalPages>0&&(this.currentPage=this.totalPages)}updateDisplayedProducts(){let e=(this.currentPage-1)*this.productsPerPage;this.displayedProducts=this.filteredProducts.slice(e,e+this.productsPerPage)}nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.updateDisplayedProducts())}previousPage(){this.currentPage>1&&(this.currentPage--,this.updateDisplayedProducts())}addToCart(e){console.log("Added to cart:",e)}toggleShowFilter(){this.showFilter=!this.showFilter}resetFilters(e){e.stopPropagation(),this.selectedCategory="ALL",this.selectedCountry="ALL",this.sortOption="featured",this.applyFilters()}scrollToContent(){window.scrollTo({top:0,behavior:"smooth"})}trackById(e,t){return t.id||""}static \u0275fac=function(t){return new(t||n)(re(Mi))};static \u0275cmp=Nt({type:n,selectors:[["app-products"]],decls:19,vars:5,consts:[[1,"products-page"],["aria-label","Fragrance Collection Introduction",1,"products-hero"],[1,"img-overlay"],[1,"hero-overlay"],[1,"hero-content","container"],[1,"hero-title"],[1,"hero-subtitle"],["class","filter-controls",4,"ngIf"],[1,"products-main-content"],[1,"container-fluid"],["aria-labelledby","products-grid-heading"],["id","products-grid-heading",1,"sr-only"],["class","loading-state","aria-live","polite","aria-busy","true",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center","flex-wrap"],["class","empty-state","aria-live","polite",4,"ngIf"],["class","pagination","aria-label","Products pagination",4,"ngIf"],[1,"filter-controls"],[1,"filter-header",3,"click"],[1,"filter-title"],["viewBox","0 0 24 24","aria-hidden","true",1,"toggle-icon"],["d","M12 5v14",1,"vertical"],["d","M5 12h14",1,"horizontal"],["aria-label","Reset all filters",1,"reset-filters-button",3,"click"],["viewBox","0 0 24 24","aria-hidden","true"],["d","M19 7l-.867 12.142A2 2 0 0 1 16.138 21H7.862a2 2 0 0 1-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v3m4.5-3.5l-5 5m5-5l-5-5"],[1,"filter-grid"],[1,"filter-group"],[1,"filter-label"],[1,"filter-icon-container"],["viewBox","0 0 24 24","aria-hidden","true",1,"filter-icon"],["d","M4 6h16M4 12h16M4 18h16","stroke-width","2","stroke-linecap","round"],["for","category-filter"],[1,"select-wrapper"],["id","category-filter",1,"styled-select",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"select-arrow"],["d","M12 2a8 8 0 0 0-8 8c0 7 8 12 8 12s8-5 8-12a8 8 0 0 0-8-8z","stroke-width","2"],["cx","12","cy","10","r","3","stroke-width","2"],["for","country-filter"],["id","country-filter",1,"styled-select",3,"ngModelChange","change","ngModel"],["d","M3 6h18M7 12h10M5 18h14","stroke-width","2","stroke-linecap","round"],["for","sort-filter"],["id","sort-filter",1,"styled-select",3,"ngModelChange","change","ngModel"],["value","featured"],["value","price-low"],["value","price-high"],["value","name-asc"],["value","name-desc"],[3,"value"],["aria-live","polite","aria-busy","true",1,"loading-state"],["aria-hidden","true",1,"spinner"],["class","col-md-6 col-lg-4 col-xl-3",3,"perfume",4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-md-6","col-lg-4","col-xl-3",3,"perfume"],["aria-live","polite",1,"empty-state"],["aria-hidden","true",1,"empty-state-icon"],[1,"empty-state-title"],[1,"empty-state-message"],["aria-label","Products pagination",1,"pagination"],["aria-label","Go to previous page",1,"pagination-button","pagination-prev",3,"click","disabled"],["aria-hidden","true",1,"pagination-icon","pagination-icon-prev"],["aria-live","polite",1,"pagination-status"],["aria-label","Go to next page",1,"pagination-button","pagination-next",3,"click","disabled"],["aria-hidden","true",1,"pagination-icon","pagination-icon-next"]],template:function(t,r){t&1&&(M(0,"div",0)(1,"section",1),oe(2,"div",2),M(3,"div",3)(4,"div",4)(5,"h1",5),U(6,"Our Fragrance Collection"),T(),M(7,"p",6),U(8,"Discover exquisite scents from around the world"),T()()()(),Qe(9,vK,56,9,"div",7),M(10,"main",8)(11,"div",9)(12,"section",10)(13,"h2",11),U(14,"Fragrance Products"),T(),Qe(15,_K,4,0,"div",12)(16,CK,2,2,"div",13)(17,bK,9,0,"div",14),T(),Qe(18,EK,11,4,"nav",15),T()()()),t&2&&(Q(9),ye("ngIf",!r.isLoading),Q(6),ye("ngIf",r.isLoading),Q(),q1(!r.isLoading&&r.displayedProducts.length>0?16:-1),Q(),ye("ngIf",!r.isLoading&&r.filteredProducts.length===0),Q(),ye("ngIf",!r.isLoading&&r.filteredProducts.length>0))},dependencies:[lo,fo,sL,cL,Gy,qy,hf,Jy],styles:[`.products-page[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;color:#333;background-color:#f9f5f2}.products-page[_ngcontent-%COMP%]   .img-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(to bottom,#0000004d 60%,#000000e6);z-index:1}.products-hero[_ngcontent-%COMP%]{height:400px;background:linear-gradient(#0006,#0006),url("./media/hero1-EFDDK7XE.jpg") center/cover;display:flex;align-items:center;position:relative;margin-bottom:3rem}.products-hero[_ngcontent-%COMP%]   .hero-overlay[_ngcontent-%COMP%]{width:100%;padding:0 2rem}.products-hero[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;color:#fff;text-align:center}.products-hero[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%]{font-size:3.5rem;font-weight:300;margin-bottom:1rem;letter-spacing:2px;text-transform:uppercase}.products-hero[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]   .hero-subtitle[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:300;letter-spacing:1px}.filter-controls[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#f9f9f9);border-radius:16px;padding:2rem;margin:1rem;box-shadow:0 8px 32px #00000014;border:1px solid rgba(255,255,255,.3);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);position:relative;overflow:hidden}.filter-controls[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,#e67e22,#e74c3c,#9b59b6,#3498db);background-size:300% 300%;animation:_ngcontent-%COMP%_gradientBG 8s ease infinite}.filter-controls[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:0;cursor:pointer;transition:margin-bottom .3s ease}.filter-controls[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]:hover   .toggle-icon[_ngcontent-%COMP%]   .horizontal[_ngcontent-%COMP%], .filter-controls[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]:hover   .toggle-icon[_ngcontent-%COMP%]   .vertical[_ngcontent-%COMP%]{stroke:#9b59b6}.filter-controls[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   .filter-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#2c3e50;margin:0;display:flex;align-items:center;gap:.75rem}.filter-controls[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   .filter-title[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%]{width:24px;height:24px;stroke-width:2;stroke-linecap:round;transition:transform .4s cubic-bezier(.68,-.55,.27,1.55)}.filter-controls[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   .filter-title[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%]   .vertical[_ngcontent-%COMP%]{stroke:#7f8c8d;transition:opacity .3s ease,stroke .2s ease}.filter-controls[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   .filter-title[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%]   .horizontal[_ngcontent-%COMP%]{stroke:#7f8c8d;transition:transform .4s cubic-bezier(.68,-.55,.27,1.55),stroke .2s ease}.filter-controls[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   .filter-title[_ngcontent-%COMP%]   .toggle-icon.open[_ngcontent-%COMP%], .filter-controls[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   .filter-title[_ngcontent-%COMP%]   .toggle-icon.open[_ngcontent-%COMP%]   .horizontal[_ngcontent-%COMP%]{transform:rotate(90deg)}.filter-controls[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   .reset-filters-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background:#e74c3c1a;border:none;color:#e74c3c;font-size:.9rem;font-weight:600;cursor:pointer;padding:.5rem 1rem;border-radius:8px;transition:all .3s cubic-bezier(.25,.8,.25,1);position:relative;z-index:2}.filter-controls[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   .reset-filters-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px;stroke:currentColor;stroke-width:2}.filter-controls[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   .reset-filters-button[_ngcontent-%COMP%]:hover{background:#e74c3c33;transform:translateY(-1px);box-shadow:0 2px 8px #e74c3c26}.filter-controls[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   .reset-filters-button[_ngcontent-%COMP%]:active{transform:translateY(0)}.filter-controls[_ngcontent-%COMP%]   .filter-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1.75rem;max-height:0;overflow:hidden;transition:max-height .5s cubic-bezier(.22,1,.36,1),padding-top .4s ease,opacity .3s ease;opacity:0}.filter-controls[_ngcontent-%COMP%]   .filter-grid.open[_ngcontent-%COMP%]{max-height:500px;padding-top:2rem;margin-bottom:1rem;opacity:1}@media (max-width: 768px){.filter-controls[_ngcontent-%COMP%]   .filter-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.filter-controls[_ngcontent-%COMP%]   .filter-grid.open[_ngcontent-%COMP%]{max-height:800px}}.filter-controls[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.filter-controls[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-label[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:.75rem}.filter-controls[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-label[_ngcontent-%COMP%]   .filter-icon-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px;background:linear-gradient(135deg,#3498db1a,#9b59b61a);border-radius:8px;margin-right:12px}.filter-controls[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-label[_ngcontent-%COMP%]   .filter-icon-container[_ngcontent-%COMP%]   .filter-icon[_ngcontent-%COMP%]{width:18px;height:18px;stroke:#9b59b6;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;fill:none}.filter-controls[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-label[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;color:#7f8c8d;text-transform:uppercase;letter-spacing:.5px}.filter-controls[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .select-wrapper[_ngcontent-%COMP%]{position:relative}.filter-controls[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .select-wrapper[_ngcontent-%COMP%]   .styled-select[_ngcontent-%COMP%]{width:100%;padding:1rem 1.25rem;border:1px solid rgba(189,195,199,.5);border-radius:12px;background-color:#fff;font-size:.95rem;transition:all .3s cubic-bezier(.25,.8,.25,1);appearance:none;cursor:pointer;box-shadow:0 2px 8px #0000000d;color:#2c3e50;font-weight:500}.filter-controls[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .select-wrapper[_ngcontent-%COMP%]   .styled-select[_ngcontent-%COMP%]:hover{border-color:#3498db;box-shadow:0 4px 12px #3498db26}.filter-controls[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .select-wrapper[_ngcontent-%COMP%]   .styled-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#9b59b6;box-shadow:0 0 0 3px #9b59b633}.filter-controls[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .select-wrapper[_ngcontent-%COMP%]   .select-arrow[_ngcontent-%COMP%]{position:absolute;top:50%;right:1.25rem;transform:translateY(-50%);width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:6px solid #7f8c8d;pointer-events:none;transition:all .3s ease}.filter-controls[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .select-wrapper[_ngcontent-%COMP%]:hover   .select-arrow[_ngcontent-%COMP%]{border-top-color:#3498db}@keyframes _ngcontent-%COMP%_gradientBG{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.reset-filters-button[_ngcontent-%COMP%]{pointer-events:auto}.products-main-content[_ngcontent-%COMP%]{padding-bottom:4rem}.products-main-content[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:2rem;margin-bottom:3rem}.products-main-content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;overflow:hidden;transition:transform .3s ease,box-shadow .3s ease;position:relative;box-shadow:0 2px 8px #00000014}.products-main-content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 20px #0000001f}.products-main-content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]:hover   .quick-view-button[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}.products-main-content[_ngcontent-%COMP%]   .product-image-container[_ngcontent-%COMP%]{position:relative;overflow:hidden;aspect-ratio:1/1}.products-main-content[_ngcontent-%COMP%]   .product-image-figure[_ngcontent-%COMP%]{margin:0;height:100%;width:100%}.products-main-content[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .5s ease;cursor:pointer}.products-main-content[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.products-main-content[_ngcontent-%COMP%]   .quick-view-button[_ngcontent-%COMP%]{position:absolute;bottom:1rem;left:50%;transform:translate(-50%) translateY(20px);background-color:#5d4037e6;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:50px;font-weight:500;cursor:pointer;opacity:0;transition:all .3s ease;z-index:2;white-space:nowrap}.products-main-content[_ngcontent-%COMP%]   .quick-view-button[_ngcontent-%COMP%]:hover{background-color:#5d4037}.products-main-content[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]{padding:1.5rem}.products-main-content[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:500;margin:0 0 .5rem;cursor:pointer;transition:color .2s ease}.products-main-content[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]:hover{color:#5d4037}.products-main-content[_ngcontent-%COMP%]   .product-country[_ngcontent-%COMP%]{color:#666;font-size:.9rem;margin:0 0 1rem}.products-main-content[_ngcontent-%COMP%]   .price-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.products-main-content[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:600;color:#5d4037}.products-main-content[_ngcontent-%COMP%]   .add-to-cart-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background-color:#5d4037;color:#fff;border:none;padding:.75rem 1.25rem;border-radius:6px;font-weight:500;cursor:pointer;transition:all .3s ease}.products-main-content[_ngcontent-%COMP%]   .add-to-cart-button[_ngcontent-%COMP%]:hover{background-color:#3d2a24;transform:translateY(-2px)}.products-main-content[_ngcontent-%COMP%]   .add-to-cart-button[_ngcontent-%COMP%]   .cart-icon[_ngcontent-%COMP%]{display:inline-block;width:16px;height:16px;background-image:url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3ccircle cx='9' cy='21' r='1'%3e%3c/circle%3e%3ccircle cx='20' cy='21' r='1'%3e%3c/circle%3e%3cpath d='M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6'%3e%3c/path%3e%3c/svg%3e");background-repeat:no-repeat;background-position:center}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem;text-align:center}.loading-state[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:4px solid rgba(93,64,55,.2);border-radius:50%;border-top-color:#5d4037;animation:_ngcontent-%COMP%_spin 1s ease-in-out infinite;margin-bottom:1rem}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:1.1rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;background:#fff;border-radius:8px;box-shadow:0 4px 12px #0000000d}.empty-state[_ngcontent-%COMP%]   .empty-state-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1.5rem}.empty-state[_ngcontent-%COMP%]   .empty-state-title[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem;color:#333}.empty-state[_ngcontent-%COMP%]   .empty-state-message[_ngcontent-%COMP%]{color:#666;margin-bottom:1.5rem}.empty-state[_ngcontent-%COMP%]   .reset-filters-button[_ngcontent-%COMP%]{background-color:#5d4037;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:6px;font-weight:500;cursor:pointer;transition:all .3s ease}.empty-state[_ngcontent-%COMP%]   .reset-filters-button[_ngcontent-%COMP%]:hover{background-color:#3d2a24}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:1.5rem;margin-top:3rem}.pagination[_ngcontent-%COMP%]   .pagination-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background-color:#fff;color:#333;border:1px solid #e0e0e0;padding:.75rem 1.5rem;border-radius:6px;font-weight:500;cursor:pointer;transition:all .3s ease}.pagination[_ngcontent-%COMP%]   .pagination-button[_ngcontent-%COMP%]:hover:not([disabled]){border-color:#5d4037;color:#5d4037}.pagination[_ngcontent-%COMP%]   .pagination-button[disabled][_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.pagination[_ngcontent-%COMP%]   .pagination-status[_ngcontent-%COMP%]{font-size:.9rem;color:#666}@media (max-width: 992px){.container-fluid[_ngcontent-%COMP%]{padding:0}.filter-controls[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.filter-controls[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]{min-width:auto}.products-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(240px,1fr))!important}}@media (max-width: 768px){.products-hero[_ngcontent-%COMP%]{height:300px}.products-hero[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%]{font-size:1.5rem!important;margin-top:3rem}.products-hero[_ngcontent-%COMP%]   .hero-subtitle[_ngcontent-%COMP%]{font-size:1rem!important}.products-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(200px,1fr))!important;gap:1.5rem!important}}@media (max-width: 576px){.filter-controls[_ngcontent-%COMP%]{padding:1rem}.filter-controls[_ngcontent-%COMP%]   .filters-wrapper[_ngcontent-%COMP%]{grid-template-columns:1fr}}`]})};var IK=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:Ry},{path:"products",component:ev},{path:"cart",component:Zy},{path:"**",redirectTo:""}],tv=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=wt({type:n});static \u0275inj=_t({imports:[yC.forRoot(IK),yC]})};var nv=class n{cartItemCount=0;wishlistItemCount=0;router=H(Ut);cartService=H(Yo);wishlistService=H(Xo);destroy$=new Ke;ngOnInit(){this.getCartItemCount(),this.getWishlistItemCount()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getCartItemCount(){this.cartService.cart$.pipe(fi(this.destroy$)).subscribe(e=>{this.cartItemCount=this.cartService.getCartItemCount()})}getWishlistItemCount(){this.wishlistService.wishlistCount$.pipe(fi(this.destroy$)).subscribe(e=>{this.wishlistItemCount=e})}collapseNavbar(){let e=document.getElementById("navbarNav");e?.classList.contains("show")&&new window.bootstrap.Collapse(e).hide()}openCart(){this.router.navigate(["/cart"])}exploreCollectionFor(e){this.router.navigate(["/products"],{queryParams:{type:e}})}openWishList(){this.router.navigate(["/wishlist"])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Nt({type:n,selectors:[["custom-navbar"]],decls:34,vars:2,consts:[[1,"navbar","navbar-expand-sm","bg-transparent","shadow-lg","custom-navbar","fixed-top"],[1,"container-fluid"],["src","assets/images/logo.jpg","alt","RePublic",1,"logo"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon","custom-navbar-toggler-icon",3,"click"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","mb-2","mb-lg-0"],[1,"nav-item"],["routerLink","/home","routerLinkActive","active",1,"nav-link","active",3,"click"],["routerLink","/products","routerLinkActive","active",1,"nav-link",3,"click"],[1,"dropdown","me-3"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","dropdown-toggle"],["aria-labelledby","dropdownMenuButton1",1,"dropdown-menu"],[3,"click"],["routerLink","/home","routerLinkActive","active",1,"dropdown-item",3,"click"],[1,"d-flex","align-items-center"],[1,"cart-icon","ms-2","m-2"],[1,"btn","position-relative",3,"click"],[1,"bi","bi-cart3","fs-4","text-light"],[1,"position-absolute","top-0","start-100","translate-middle","badge","rounded-pill","bg-danger"],[1,"bi","bi-heart-fill","fs-4","text-light"]],template:function(t,r){t&1&&(M(0,"nav",0)(1,"div",1),oe(2,"img",2),M(3,"button",3)(4,"span",4),de("click",function(){return r.collapseNavbar()}),T()(),M(5,"div",5)(6,"ul",6)(7,"li",7)(8,"a",8),de("click",function(){return r.collapseNavbar()}),U(9,"Home"),T()(),M(10,"li",7)(11,"a",9),de("click",function(){return r.collapseNavbar()}),U(12,"Products"),T()()(),M(13,"div",10)(14,"button",11),U(15," Categories "),T(),M(16,"ul",12)(17,"li",13),de("click",function(){return r.exploreCollectionFor("men")}),M(18,"a",14),de("click",function(){return r.collapseNavbar()}),U(19,"For Him"),T()(),M(20,"li",13),de("click",function(){return r.exploreCollectionFor("woman")}),M(21,"a",14),de("click",function(){return r.collapseNavbar()}),U(22,"For Her"),T()()()()(),M(23,"div",15)(24,"div",16)(25,"button",17),de("click",function(){return r.openCart()}),oe(26,"i",18),M(27,"span",19),U(28),T()()(),M(29,"div",16)(30,"button",17),de("click",function(){return r.openWishList()}),oe(31,"i",20),M(32,"span",19),U(33),T()()()()()()),t&2&&(Q(28),Jt(" ",r.cartItemCount," "),Q(5),Jt(" ",r.wishlistItemCount," "))},dependencies:[cc,zP],styles:[".custom-navbar[_ngcontent-%COMP%]{background-color:#000000a6!important;-webkit-backdrop-filter:blur(10px)!important;backdrop-filter:blur(10px)!important;box-shadow:0 4px 12px #0000001a!important}.custom-navbar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;margin:0 20px;border-radius:50%;transition:all .3s ease-in-out}.custom-navbar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.custom-navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 10px;font-size:16px;font-weight:500;text-transform:uppercase;transition:all .3s ease-in-out}.custom-navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.custom-navbar[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{color:#f8f9fa!important;transform:scale(1.1)}.custom-navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .custom-navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#f8f9fa!important;text-decoration:none}.custom-navbar[_ngcontent-%COMP%]   .navbar-toggler[_ngcontent-%COMP%]{border:none!important}.custom-navbar[_ngcontent-%COMP%]   .navbar-toggler[_ngcontent-%COMP%]:focus{outline:none!important;box-shadow:none!important}.custom-navbar[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000!important;background-color:#f8f9fa!important}.dropdown-toggle[_ngcontent-%COMP%]{color:beige!important}.dropdown-toggle[_ngcontent-%COMP%]   .dropdown-item.active[_ngcontent-%COMP%]{background-color:#000!important;color:#f8f9fa!important}.custom-navbar-toggler-icon[_ngcontent-%COMP%]{border:1px solid wheat}.cart-icon[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{color:#f8f9fa;padding:.3rem .6rem}.cart-icon[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .3s ease}.cart-icon[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.2)}.cart-icon[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.6rem}@media (max-width: 768px){.custom-navbar[_ngcontent-%COMP%]   #navbarNav[_ngcontent-%COMP%]{padding:20px;border-radius:15px}.logo[_ngcontent-%COMP%]{display:none}}"]})};var rv=class n{currentYear=new Date().getFullYear();router=H(Ut);exploreCollectionFor(e){this.router.navigate(["/products"],{queryParams:{type:e}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Nt({type:n,selectors:[["custom-footer"]],decls:29,vars:1,consts:[[1,"site-footer"],[1,"footer-container"],[1,"footer-main"],[1,"footer-brand"],[1,"footer-logo"],[1,"footer-tagline"],[1,"social-links"],["href","https://www.facebook.com/share/19D416MMYu/","target","_blank","aria-label","Facebook"],[1,"bi","bi-facebook"],["href","https://www.instagram.com/republic_fragrances_?igsh=YXVid3B2MHN4N3k1","target","_blank","aria-label","Instagram"],[1,"bi","bi-instagram"],["href","https://www.tiktok.com/@republic.fragranc?_t=ZS-8u55Lb146it&_r=1","target","_blank","aria-label","Instagram"],[1,"bi","bi-tiktok"],[1,"footer-links"],[1,"links-column"],[1,"links-title"],[3,"click"],[1,"footer-bottom"],[1,"copyright"]],template:function(t,r){t&1&&(M(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),U(5,"Scents of the World"),T(),M(6,"p",5),U(7,"Discover premium fragrances from every corner of the globe"),T(),M(8,"div",6)(9,"a",7),oe(10,"i",8),T(),M(11,"a",9),oe(12,"i",10),T(),M(13,"a",11),oe(14,"i",12),T()()(),M(15,"div",13)(16,"div",14)(17,"h4",15),U(18,"Shop"),T(),M(19,"ul")(20,"li",16),de("click",function(){return r.exploreCollectionFor("men")}),M(21,"a"),U(22,"For Men"),T()(),M(23,"li",16),de("click",function(){return r.exploreCollectionFor("woman")}),M(24,"a"),U(25,"For Women"),T()()()()()(),M(26,"div",17)(27,"div",18),U(28),T()()()()),t&2&&(Q(28),Jt(" \xA9 ",r.currentYear," Scents of the World. All rights reserved. "))},styles:['.footer-brand[_ngcontent-%COMP%]   .footer-logo[_ngcontent-%COMP%]{color:#fff;font-size:1.8rem;font-weight:300;margin-bottom:15px;letter-spacing:1px}.footer-brand[_ngcontent-%COMP%]   .footer-logo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#b8860b;font-weight:600}.footer-brand[_ngcontent-%COMP%]   .footer-tagline[_ngcontent-%COMP%]{font-size:.95rem;line-height:1.6;margin-bottom:25px;color:#aaa}.footer-brand[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{display:flex;gap:15px}.footer-brand[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#ccc;width:36px;height:36px;border-radius:50%;border:1px solid #444;display:flex;align-items:center;justify-content:center;transition:all .3s ease}.footer-brand[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff;background:#b8860b;border-color:#b8860b;transform:translateY(-3px)}.footer-links[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:30px}.links-column[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;font-size:1.1rem;font-weight:600;margin-bottom:20px;letter-spacing:.5px;position:relative;padding-bottom:10px}.links-column[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;width:40px;height:2px;background:#b8860b}.links-column[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.links-column[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:12px}.links-column[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#aaa;text-decoration:none;font-size:.9rem;transition:color .3s ease}.links-column[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#b8860b;padding-left:5px}.footer-newsletter[_ngcontent-%COMP%]   .newsletter-title[_ngcontent-%COMP%]{color:#fff;font-size:1.1rem;font-weight:600;margin-bottom:15px;letter-spacing:.5px}.footer-newsletter[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#aaa;font-size:.9rem;margin-bottom:20px;line-height:1.6}.footer-newsletter[_ngcontent-%COMP%]   .newsletter-form[_ngcontent-%COMP%]{display:flex}.footer-newsletter[_ngcontent-%COMP%]   .newsletter-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:12px 15px;border:1px solid #444;background:#2a2a2a;color:#fff;font-size:.9rem;border-radius:4px 0 0 4px}.footer-newsletter[_ngcontent-%COMP%]   .newsletter-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#777}.footer-newsletter[_ngcontent-%COMP%]   .newsletter-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#b8860b}.footer-newsletter[_ngcontent-%COMP%]   .newsletter-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#b8860b;color:#fff;border:none;padding:0 20px;font-size:.9rem;font-weight:600;cursor:pointer;transition:background .3s ease;border-radius:0 4px 4px 0}.footer-newsletter[_ngcontent-%COMP%]   .newsletter-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#daa520}.footer-bottom[_ngcontent-%COMP%]{border-top:1px solid #333;padding:25px 0;display:flex;flex-direction:column;align-items:center;gap:20px;text-align:center}.footer-bottom[_ngcontent-%COMP%]   .payment-methods[_ngcontent-%COMP%]{display:flex;gap:15px;font-size:1.8rem;color:#777}.footer-bottom[_ngcontent-%COMP%]   .payment-methods[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:color .3s ease}.footer-bottom[_ngcontent-%COMP%]   .payment-methods[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:#b8860b}.footer-bottom[_ngcontent-%COMP%]   .legal-links[_ngcontent-%COMP%]{display:flex;gap:20px}.footer-bottom[_ngcontent-%COMP%]   .legal-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#aaa;font-size:.8rem;text-decoration:none;transition:color .3s ease}.footer-bottom[_ngcontent-%COMP%]   .legal-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#b8860b}.footer-bottom[_ngcontent-%COMP%]   .copyright[_ngcontent-%COMP%]{font-size:.8rem;color:#777}@media (max-width: 768px){.footer-main[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:30px}.footer-links[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.footer-newsletter[_ngcontent-%COMP%]   .newsletter-form[_ngcontent-%COMP%]{flex-direction:column}.footer-newsletter[_ngcontent-%COMP%]   .newsletter-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:4px;margin-bottom:10px}.footer-newsletter[_ngcontent-%COMP%]   .newsletter-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:4px;padding:12px}.footer-bottom[_ngcontent-%COMP%]   .legal-links[_ngcontent-%COMP%]{flex-direction:column;gap:10px}}.site-footer[_ngcontent-%COMP%]{background:#1a1a1a;color:#e0e0e0;padding:60px 0 0;font-family:Helvetica Neue,Arial,sans-serif;position:relative}.site-footer[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:2px;background:linear-gradient(90deg,#b8860b,#8b6914,#b8860b)}.footer-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 20px}.footer-main[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:40px;margin-bottom:60px}']})};var iv=class n{title="perfume-brand";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Nt({type:n,selectors:[["app-root"]],decls:4,vars:0,template:function(t,r){t&1&&(oe(0,"custom-navbar"),M(1,"div"),oe(2,"router-outlet"),T(),oe(3,"custom-footer"))},dependencies:[dC,nv,rv]})};var ov=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=wt({type:n,bootstrap:[iv]});static \u0275inj=_t({imports:[JA,tv,qA,dL,fL,lO.initializeApp(Zo.firebaseConfig),Qk]})};XA().bootstrapModule(ov,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
