import{A as Pn,a as Q,b as ve,c as Lv,d as V,e as sT,f as aT,g as Fh,h as cT,i as uT,j as lT,k as jv,l as dT,m as Ru,n as Bv,o as Vh,p as hT,q as fT,r as Uv,s as dt,t as rs,u as Rr,v as Lh,w as Nu,x as pT,y as mT,z as Ki}from"./chunk-S7MIF4KJ.js";function gT(n,e){return Object.is(n,e)}var Bt=null,jh=!1,Bh=1,oi=Symbol("SIGNAL");function Ne(n){let e=Bt;return Bt=n,e}function yT(){return Bt}var ku={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function qv(n){if(jh)throw new Error("");if(Bt===null)return;Bt.consumerOnSignalRead(n);let e=Bt.nextProducerIndex++;if(qh(Bt),e<Bt.producerNode.length&&Bt.producerNode[e]!==n&&Ou(Bt)){let t=Bt.producerNode[e];zh(t,Bt.producerIndexOfThis[e])}Bt.producerNode[e]!==n&&(Bt.producerNode[e]=n,Bt.producerIndexOfThis[e]=Ou(Bt)?CT(n,Bt,e):0),Bt.producerLastReadVersion[e]=n.version}function ij(){Bh++}function vT(n){if(!(Ou(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Bh)){if(!n.producerMustRecompute(n)&&!Gv(n)){n.dirty=!1,n.lastCleanEpoch=Bh;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Bh}}function _T(n){if(n.liveConsumerNode===void 0)return;let e=jh;jh=!0;try{for(let t of n.liveConsumerNode)t.dirty||oj(t)}finally{jh=e}}function wT(){return Bt?.consumerAllowSignalWrites!==!1}function oj(n){n.dirty=!0,_T(n),n.consumerMarkedDirty?.(n)}function $h(n){return n&&(n.nextProducerIndex=0),Ne(n)}function Hv(n,e){if(Ne(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Ou(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)zh(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Gv(n){qh(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(vT(t),r!==t.version))return!0}return!1}function Wv(n){if(qh(n),Ou(n))for(let e=0;e<n.producerNode.length;e++)zh(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function CT(n,e,t){if(ET(n),n.liveConsumerNode.length===0&&IT(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=CT(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function zh(n,e){if(ET(n),n.liveConsumerNode.length===1&&IT(n))for(let r=0;r<n.producerNode.length;r++)zh(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];qh(i),i.producerIndexOfThis[r]=e}}function Ou(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function qh(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function ET(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function IT(n){return n.producerNode!==void 0}function bT(n){let e=Object.create(sj);e.computation=n;let t=()=>{if(vT(e),qv(e),e.value===Uh)throw e.error;return e.value};return t[oi]=e,t}var $v=Symbol("UNSET"),zv=Symbol("COMPUTING"),Uh=Symbol("ERRORED"),sj=ve(Q({},ku),{value:$v,dirty:!0,error:null,equal:gT,producerMustRecompute(n){return n.value===$v||n.value===zv},producerRecomputeValue(n){if(n.value===zv)throw new Error("Detected cycle in computations.");let e=n.value;n.value=zv;let t=$h(n),r;try{r=n.computation()}catch(i){r=Uh,n.error=i}finally{Hv(n,t)}if(e!==$v&&e!==Uh&&r!==Uh&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function aj(){throw new Error}var DT=aj;function xT(){DT()}function TT(n){DT=n}var cj=null;function ST(n){let e=Object.create(AT);e.value=n;let t=()=>(qv(e),e.value);return t[oi]=e,t}function Kv(n,e){wT()||xT(),n.equal(n.value,e)||(n.value=e,uj(n))}function MT(n,e){wT()||xT(),Kv(n,e(n.value))}var AT=ve(Q({},ku),{equal:gT,value:void 0});function uj(n){n.version++,ij(),_T(n),cj?.()}function me(n){return typeof n=="function"}function fa(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Hh=fa(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function is(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var gt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(me(r))try{r()}catch(o){e=o instanceof Hh?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{PT(o)}catch(s){e=e??[],s instanceof Hh?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Hh(e)}}add(e){var t;if(e&&e!==this)if(this.closed)PT(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&is(t,e)}remove(e){let{_finalizers:t}=this;t&&is(t,e),e instanceof n&&e._removeParent(this)}};gt.EMPTY=(()=>{let n=new gt;return n.closed=!0,n})();var Qv=gt.EMPTY;function Gh(n){return n instanceof gt||n&&"closed"in n&&me(n.remove)&&me(n.add)&&me(n.unsubscribe)}function PT(n){me(n)?n():n.unsubscribe()}var fr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var pa={setTimeout(n,e,...t){let{delegate:r}=pa;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=pa;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Wh(n){pa.setTimeout(()=>{let{onUnhandledError:e}=fr;if(e)e(n);else throw n})}function Fu(){}var RT=Yv("C",void 0,void 0);function NT(n){return Yv("E",void 0,n)}function OT(n){return Yv("N",n,void 0)}function Yv(n,e,t){return{kind:n,value:e,error:t}}var os=null;function ma(n){if(fr.useDeprecatedSynchronousErrorHandling){let e=!os;if(e&&(os={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=os;if(os=null,t)throw r}}else n()}function kT(n){fr.useDeprecatedSynchronousErrorHandling&&os&&(os.errorThrown=!0,os.error=n)}var ss=class extends gt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Gh(e)&&e.add(this)):this.destination=hj}static create(e,t,r){return new si(e,t,r)}next(e){this.isStopped?Xv(OT(e),this):this._next(e)}error(e){this.isStopped?Xv(NT(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Xv(RT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},lj=Function.prototype.bind;function Zv(n,e){return lj.call(n,e)}var Jv=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Kh(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Kh(r)}else Kh(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Kh(t)}}},si=class extends ss{constructor(e,t,r){super();let i;if(me(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&fr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Zv(e.next,o),error:e.error&&Zv(e.error,o),complete:e.complete&&Zv(e.complete,o)}):i=e}this.destination=new Jv(i)}};function Kh(n){fr.useDeprecatedSynchronousErrorHandling?kT(n):Wh(n)}function dj(n){throw n}function Xv(n,e){let{onStoppedNotification:t}=fr;t&&pa.setTimeout(()=>t(n,e))}var hj={closed:!0,next:Fu,error:dj,complete:Fu};var ga=typeof Symbol=="function"&&Symbol.observable||"@@observable";function wn(n){return n}function e0(...n){return t0(n)}function t0(n){return n.length===0?wn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Ie=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=pj(t)?t:new si(t,r,i);return ma(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=FT(r),new r((i,o)=>{let s=new si({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[ga](){return this}pipe(...t){return t0(t)(this)}toPromise(t){return t=FT(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function FT(n){var e;return(e=n??fr.Promise)!==null&&e!==void 0?e:Promise}function fj(n){return n&&me(n.next)&&me(n.error)&&me(n.complete)}function pj(n){return n&&n instanceof ss||fj(n)&&Gh(n)}function n0(n){return me(n?.lift)}function be(n){return e=>{if(n0(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function De(n,e,t,r,i){return new r0(n,e,t,r,i)}var r0=class extends ss{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ya(){return be((n,e)=>{let t=null;n._refCount++;let r=De(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var va=class extends Ie{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,n0(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new gt;let t=this.getSubject();e.add(this.source.subscribe(De(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=gt.EMPTY)}return e}refCount(){return ya()(this)}};var VT=fa(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ze=(()=>{class n extends Ie{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Qh(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new VT}next(t){ma(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){ma(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ma(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Qv:(this.currentObservers=null,o.push(t),new gt(()=>{this.currentObservers=null,is(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Ie;return t.source=this,t}}return n.create=(e,t)=>new Qh(e,t),n})(),Qh=class extends ze{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Qv}};var It=class extends ze{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Vu={now(){return(Vu.delegate||Date).now()},delegate:void 0};var Yh=class extends ze{constructor(e=1/0,t=1/0,r=Vu){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var Zh=class extends gt{constructor(e,t){super()}schedule(e,t=0){return this}};var Lu={setInterval(n,e,...t){let{delegate:r}=Lu;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Lu;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var _a=class extends Zh{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Lu.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Lu.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,is(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var wa=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};wa.now=Vu.now;var Ca=class extends wa{constructor(e,t=wa.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var ju=new Ca(_a);var Xh=class extends _a{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Jh=class extends Ca{};var i0=new Jh(Xh);var Cn=new Ie(n=>n.complete());function LT(n){return n&&me(n.schedule)}function o0(n){return n[n.length-1]}function ef(n){return me(o0(n))?n.pop():void 0}function Nr(n){return LT(o0(n))?n.pop():void 0}function jT(n,e){return typeof o0(n)=="number"?n.pop():e}var tf=n=>n&&typeof n.length=="number"&&typeof n!="function";function nf(n){return me(n?.then)}function rf(n){return me(n[ga])}function of(n){return Symbol.asyncIterator&&me(n?.[Symbol.asyncIterator])}function sf(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function mj(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var af=mj();function cf(n){return me(n?.[af])}function uf(n){return cT(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Fh(t.read());if(i)return yield Fh(void 0);yield yield Fh(r)}}finally{t.releaseLock()}})}function lf(n){return me(n?.getReader)}function tt(n){if(n instanceof Ie)return n;if(n!=null){if(rf(n))return gj(n);if(tf(n))return yj(n);if(nf(n))return vj(n);if(of(n))return BT(n);if(cf(n))return _j(n);if(lf(n))return wj(n)}throw sf(n)}function gj(n){return new Ie(e=>{let t=n[ga]();if(me(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function yj(n){return new Ie(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function vj(n){return new Ie(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Wh)})}function _j(n){return new Ie(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function BT(n){return new Ie(e=>{Cj(n,e).catch(t=>e.error(t))})}function wj(n){return BT(uf(n))}function Cj(n,e){var t,r,i,o;return aT(this,void 0,void 0,function*(){try{for(t=uT(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Rn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Wn(n,e=0){return be((t,r)=>{t.subscribe(De(r,i=>Rn(r,n,()=>r.next(i),e),()=>Rn(r,n,()=>r.complete(),e),i=>Rn(r,n,()=>r.error(i),e)))})}function pr(n,e=0){return be((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function UT(n,e){return tt(n).pipe(pr(e),Wn(e))}function $T(n,e){return tt(n).pipe(pr(e),Wn(e))}function zT(n,e){return new Ie(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function qT(n,e){return new Ie(t=>{let r;return Rn(t,e,()=>{r=n[af](),Rn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>me(r?.return)&&r.return()})}function df(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ie(t=>{Rn(t,e,()=>{let r=n[Symbol.asyncIterator]();Rn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function HT(n,e){return df(uf(n),e)}function GT(n,e){if(n!=null){if(rf(n))return UT(n,e);if(tf(n))return zT(n,e);if(nf(n))return $T(n,e);if(of(n))return df(n,e);if(cf(n))return qT(n,e);if(lf(n))return HT(n,e)}throw sf(n)}function Te(n,e){return e?GT(n,e):tt(n)}function ue(...n){let e=Nr(n);return Te(n,e)}function Ea(n,e){let t=me(n)?n:()=>n,r=i=>i.error(t());return new Ie(e?i=>e.schedule(r,0,i):r)}function s0(n){return!!n&&(n instanceof Ie||me(n.lift)&&me(n.subscribe))}var ai=fa(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function oe(n,e){return be((t,r)=>{let i=0;t.subscribe(De(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:Ej}=Array;function Ij(n,e){return Ej(e)?n(...e):n(e)}function hf(n){return oe(e=>Ij(n,e))}var{isArray:bj}=Array,{getPrototypeOf:Dj,prototype:xj,keys:Tj}=Object;function ff(n){if(n.length===1){let e=n[0];if(bj(e))return{args:e,keys:null};if(Sj(e)){let t=Tj(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function Sj(n){return n&&typeof n=="object"&&Dj(n)===xj}function pf(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Bu(...n){let e=Nr(n),t=ef(n),{args:r,keys:i}=ff(n);if(r.length===0)return Te([],e);let o=new Ie(Mj(r,e,i?s=>pf(i,s):wn));return t?o.pipe(hf(t)):o}function Mj(n,e,t=wn){return r=>{WT(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)WT(e,()=>{let l=Te(n[c],e),d=!1;l.subscribe(De(r,h=>{o[c]=h,d||(d=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function WT(n,e,t){n?Rn(t,n,e):e()}function KT(n,e,t,r,i,o,s,a){let c=[],l=0,d=0,h=!1,p=()=>{h&&!c.length&&!l&&e.complete()},g=E=>l<r?y(E):c.push(E),y=E=>{o&&e.next(E),l++;let w=!1;tt(t(E,d++)).subscribe(De(e,T=>{i?.(T),o?g(T):e.next(T)},()=>{w=!0},void 0,()=>{if(w)try{for(l--;c.length&&l<r;){let T=c.shift();s?Rn(e,s,()=>y(T)):y(T)}p()}catch(T){e.error(T)}}))};return n.subscribe(De(e,g,()=>{h=!0,p()})),()=>{a?.()}}function St(n,e,t=1/0){return me(e)?St((r,i)=>oe((o,s)=>e(r,o,i,s))(tt(n(r,i))),t):(typeof e=="number"&&(t=e),be((r,i)=>KT(r,i,n,t)))}function Or(n=1/0){return St(wn,n)}function QT(){return Or(1)}function Ia(...n){return QT()(Te(n,Nr(n)))}function mf(n){return new Ie(e=>{tt(n()).subscribe(e)})}function a0(...n){let e=ef(n),{args:t,keys:r}=ff(n),i=new Ie(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let d=0;d<s;d++){let h=!1;tt(t[d]).subscribe(De(o,p=>{h||(h=!0,l--),a[d]=p},()=>c--,void 0,()=>{(!c||!h)&&(l||o.next(r?pf(r,a):a),o.complete())}))}});return e?i.pipe(hf(e)):i}function c0(...n){let e=Nr(n),t=jT(n,1/0),r=n;return r.length?r.length===1?tt(r[0]):Or(t)(Te(r,e)):Cn}function Mt(n,e){return be((t,r)=>{let i=0;t.subscribe(De(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Qi(n){return be((e,t)=>{let r=null,i=!1,o;r=e.subscribe(De(t,void 0,void 0,s=>{o=tt(n(s,Qi(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function YT(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(De(s,d=>{let h=l++;c=a?n(c,d,h):(a=!0,d),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function ci(n,e){return me(e)?St(n,e,1):St(n,1)}function Yi(n){return be((e,t)=>{let r=!1;e.subscribe(De(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ui(n){return n<=0?()=>Cn:be((e,t)=>{let r=0;e.subscribe(De(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function u0(n){return oe(()=>n)}function l0(n,e=wn){return n=n??Aj,be((t,r)=>{let i,o=!0;t.subscribe(De(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function Aj(n,e){return n===e}function gf(n=Pj){return be((e,t)=>{let r=!1;e.subscribe(De(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Pj(){return new ai}function Zi(n){return be((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Kn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Mt((i,o)=>n(i,o,r)):wn,ui(1),t?Yi(e):gf(()=>new ai))}function ba(n){return n<=0?()=>Cn:be((e,t)=>{let r=[];e.subscribe(De(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function d0(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Mt((i,o)=>n(i,o,r)):wn,ba(1),t?Yi(e):gf(()=>new ai))}function as(){return be((n,e)=>{let t,r=!1;n.subscribe(De(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function li(n,e){return be(YT(n,e,arguments.length>=2,!0))}function ZT(n={}){let{connector:e=()=>new ze,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,l=0,d=!1,h=!1,p=()=>{a?.unsubscribe(),a=void 0},g=()=>{p(),s=c=void 0,d=h=!1},y=()=>{let E=s;g(),E?.unsubscribe()};return be((E,w)=>{l++,!h&&!d&&p();let T=c=c??e();w.add(()=>{l--,l===0&&!h&&!d&&(a=h0(y,i))}),T.subscribe(w),!s&&l>0&&(s=new si({next:O=>T.next(O),error:O=>{h=!0,p(),a=h0(g,t,O),T.error(O)},complete:()=>{d=!0,p(),a=h0(g,r),T.complete()}}),tt(E).subscribe(s))})(o)}}function h0(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new si({next:()=>{r.unsubscribe(),n()}});return tt(e(...t)).subscribe(r)}function yf(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,ZT({connector:()=>new Yh(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function di(...n){let e=Nr(n);return be((t,r)=>{(e?Ia(n,t,e):Ia(n,t)).subscribe(r)})}function st(n,e){return be((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(De(r,c=>{i?.unsubscribe();let l=0,d=o++;tt(n(c,d)).subscribe(i=De(r,h=>r.next(e?e(c,h,d,l++):h),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function vf(n,e){return me(e)?st(()=>n,e):st(()=>n)}function Qn(n){return be((e,t)=>{tt(n).subscribe(De(t,()=>t.complete(),Fu)),!t.closed&&e.subscribe(t)})}function At(n,e,t){let r=me(n)||e||t?{next:n,error:e,complete:t}:n;return r?be((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(De(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):wn}var FS="https://g.co/ng/security#xss",se=class extends Error{constructor(e,t){super(sp(e,t)),this.code=e}};function sp(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function el(n){return{toString:n}.toString()}var _f="__parameters__";function Rj(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function VS(n,e,t){return el(()=>{let r=Rj(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,d){let h=c.hasOwnProperty(_f)?c[_f]:Object.defineProperty(c,_f,{value:[]})[_f];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var En=globalThis;function Qe(n){for(let e in n)if(n[e]===Qe)return e;throw Error("Could not find renamed property on target object.")}function Nj(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function bn(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(bn).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function S0(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var Oj=Qe({__forward_ref__:Qe});function Br(n){return n.__forward_ref__=Br,n.toString=function(){return bn(this())},n}function In(n){return LS(n)?n():n}function LS(n){return typeof n=="function"&&n.hasOwnProperty(Oj)&&n.__forward_ref__===Br}function ne(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function yt(n){return{providers:n.providers||[],imports:n.imports||[]}}function ap(n){return XT(n,BS)||XT(n,US)}function jS(n){return ap(n)!==null}function XT(n,e){return n.hasOwnProperty(e)?n[e]:null}function kj(n){let e=n&&(n[BS]||n[US]);return e||null}function JT(n){return n&&(n.hasOwnProperty(eS)||n.hasOwnProperty(Fj))?n[eS]:null}var BS=Qe({\u0275prov:Qe}),eS=Qe({\u0275inj:Qe}),US=Qe({ngInjectableDef:Qe}),Fj=Qe({ngInjectorDef:Qe}),X=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=ne({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function $S(n){return n&&!!n.\u0275providers}var Vj=Qe({\u0275cmp:Qe}),Lj=Qe({\u0275dir:Qe}),jj=Qe({\u0275pipe:Qe}),Bj=Qe({\u0275mod:Qe}),Af=Qe({\u0275fac:Qe}),$u=Qe({__NG_ELEMENT_ID__:Qe}),tS=Qe({__NG_ENV_ID__:Qe});function Pa(n){return typeof n=="string"?n:n==null?"":String(n)}function Uj(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Pa(n)}function $j(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new se(-200,n)}function M_(n,e){throw new se(-201,!1)}var Se=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Se||{}),M0;function zS(){return M0}function Nn(n){let e=M0;return M0=n,e}function qS(n,e,t){let r=ap(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&Se.Optional)return null;if(e!==void 0)return e;M_(n,"Injector")}var zj={},qu=zj,A0="__NG_DI_FLAG__",Pf="ngTempTokenPath",qj="ngTokenPath",Hj=/\n/gm,Gj="\u0275",nS="__source",Ma;function Wj(){return Ma}function Xi(n){let e=Ma;return Ma=n,e}function Kj(n,e=Se.Default){if(Ma===void 0)throw new se(-203,!1);return Ma===null?qS(n,void 0,e):Ma.get(n,e&Se.Optional?null:void 0,e)}function K(n,e=Se.Default){return(zS()||Kj)(In(n),e)}function H(n,e=Se.Default){return K(n,cp(e))}function cp(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function P0(n){let e=[];for(let t=0;t<n.length;t++){let r=In(n[t]);if(Array.isArray(r)){if(r.length===0)throw new se(900,!1);let i,o=Se.Default;for(let s=0;s<r.length;s++){let a=r[s],c=Qj(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(K(i,o))}else e.push(K(r))}return e}function HS(n,e){return n[A0]=e,n.prototype[A0]=e,n}function Qj(n){return n[A0]}function Yj(n,e,t,r){let i=n[Pf];throw e[nS]&&i.unshift(e[nS]),n.message=Zj(`
`+n.message,i,t,r),n[qj]=i,n[Pf]=null,n}function Zj(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==Gj?n.slice(2):n;let i=bn(e);if(Array.isArray(e))i=e.map(bn).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):bn(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Hj,`
  `)}`}var za=HS(VS("Optional"),8);var A_=HS(VS("SkipSelf"),4);function ls(n,e){let t=n.hasOwnProperty(Af);return t?n[Af]:null}function Xj(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function Jj(n){return n.flat(Number.POSITIVE_INFINITY)}function P_(n,e){n.forEach(t=>Array.isArray(t)?P_(t,e):e(t))}function GS(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Rf(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function eB(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function R_(n,e,t){let r=tl(n,e);return r>=0?n[r|1]=t:(r=~r,eB(n,r,e,t)),r}function f0(n,e){let t=tl(n,e);if(t>=0)return n[t|1]}function tl(n,e){return tB(n,e,1)}function tB(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Ra={},On=[],Na=new X(""),WS=new X("",-1),KS=new X(""),Nf=class{get(e,t=qu){if(t===qu){let r=new Error(`NullInjectorError: No provider for ${bn(e)}!`);throw r.name="NullInjectorError",r}return t}},QS=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(QS||{}),Vr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Vr||{}),to=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(to||{});function nB(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function R0(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];rB(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function YS(n){return n===3||n===4||n===6}function rB(n){return n.charCodeAt(0)===64}function Hu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?rS(n,t,i,null,e[++r]):rS(n,t,i,null,null))}}return n}function rS(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var ZS="ng-template";function iB(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&nB(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(N_(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function N_(n){return n.type===4&&n.value!==ZS}function oB(n,e,t){let r=n.type===4&&!t?ZS:n.value;return e===r}function sB(n,e,t){let r=4,i=n.attrs,o=i!==null?uB(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!mr(r)&&!mr(c))return!1;if(s&&mr(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!oB(n,c,t)||c===""&&e.length===1){if(mr(r))return!1;s=!0}}else if(r&8){if(i===null||!iB(n,i,c,t)){if(mr(r))return!1;s=!0}}else{let l=e[++a],d=aB(c,i,N_(n),t);if(d===-1){if(mr(r))return!1;s=!0;continue}if(l!==""){let h;if(d>o?h="":h=i[d+1].toLowerCase(),r&2&&l!==h){if(mr(r))return!1;s=!0}}}}return mr(r)||s}function mr(n){return(n&1)===0}function aB(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return lB(e,n)}function cB(n,e,t=!1){for(let r=0;r<e.length;r++)if(sB(n,e[r],t))return!0;return!1}function uB(n){for(let e=0;e<n.length;e++){let t=n[e];if(YS(t))return e}return n.length}function lB(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function iS(n,e){return n?":not("+e.trim()+")":e}function dB(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!mr(s)&&(e+=iS(o,i),i=""),r=s,o=o||!mr(r);t++}return i!==""&&(e+=iS(o,i)),e}function hB(n){return n.map(dB).join(",")}function fB(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!mr(i))break;i=o}r++}return{attrs:e,classes:t}}function Rt(n){return el(()=>{let e=nM(n),t=ve(Q({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===QS.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Vr.Emulated,styles:n.styles||On,_:null,schemas:n.schemas||null,tView:null,id:""});rM(t);let r=n.dependencies;return t.directiveDefs=sS(r,!1),t.pipeDefs=sS(r,!0),t.id=gB(t),t})}function pB(n){return no(n)||XS(n)}function mB(n){return n!==null}function vt(n){return el(()=>({type:n.type,bootstrap:n.bootstrap||On,declarations:n.declarations||On,imports:n.imports||On,exports:n.exports||On,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function oS(n,e){if(n==null)return Ra;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=to.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==to.None?[r,a]:r,e[o]=s):t[o]=r}return t}function _t(n){return el(()=>{let e=nM(n);return rM(e),e})}function up(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function no(n){return n[Vj]||null}function XS(n){return n[Lj]||null}function JS(n){return n[jj]||null}function eM(n){let e=no(n)||XS(n)||JS(n);return e!==null?e.standalone:!1}function tM(n,e){let t=n[Bj]||null;if(!t&&e===!0)throw new Error(`Type ${bn(n)} does not have '\u0275mod' property.`);return t}function nM(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Ra,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||On,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:oS(n.inputs,e),outputs:oS(n.outputs),debugInfo:null}}function rM(n){n.features?.forEach(e=>e(n))}function sS(n,e){if(!n)return null;let t=e?JS:pB;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(mB)}function gB(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function lp(n){return{\u0275providers:n}}function yB(...n){return{\u0275providers:iM(!0,n),\u0275fromNgModule:!0}}function iM(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return P_(e,s=>{let a=s;N0(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&oM(i,o),t}function oM(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];O_(i,o=>{e(o,r)})}}function N0(n,e,t,r){if(n=In(n),!n)return!1;let i=null,o=JT(n),s=!o&&no(n);if(!o&&!s){let c=n.ngModule;if(o=JT(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)N0(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{P_(o.imports,d=>{N0(d,e,t,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&oM(l,e)}if(!a){let l=ls(i)||(()=>new i);e({provide:i,useFactory:l,deps:On},i),e({provide:KS,useValue:i,multi:!0},i),e({provide:Na,useValue:()=>K(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;O_(c,d=>{e(d,l)})}}else return!1;return i!==n&&n.providers!==void 0}function O_(n,e){for(let t of n)$S(t)&&(t=t.\u0275providers),Array.isArray(t)?O_(t,e):e(t)}var vB=Qe({provide:String,useValue:Qe});function sM(n){return n!==null&&typeof n=="object"&&vB in n}function _B(n){return!!(n&&n.useExisting)}function wB(n){return!!(n&&n.useFactory)}function Oa(n){return typeof n=="function"}function CB(n){return!!n.useClass}var dp=new X(""),Df={},EB={},p0;function k_(){return p0===void 0&&(p0=new Nf),p0}var Dn=class{},Gu=class extends Dn{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,k0(e,s=>this.processProvider(s)),this.records.set(WS,Da(void 0,this)),i.has("environment")&&this.records.set(Dn,Da(void 0,this));let o=this.records.get(dp);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(KS,On,Se.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ne(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ne(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Xi(this),r=Nn(void 0),i;try{return e()}finally{Xi(t),Nn(r)}}get(e,t=qu,r=Se.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(tS))return e[tS](this);r=cp(r);let i,o=Xi(this),s=Nn(void 0);try{if(!(r&Se.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=TB(e)&&ap(e);l&&this.injectableDefInScope(l)?c=Da(O0(e),Df):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&Se.Self?k_():this.parent;return t=r&Se.Optional&&t===qu?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Pf]=a[Pf]||[]).unshift(bn(e)),o)throw a;return Yj(a,e,"R3InjectorError",this.source)}else throw a}finally{Nn(s),Xi(o)}}resolveInjectorInitializers(){let e=Ne(null),t=Xi(this),r=Nn(void 0),i;try{let o=this.get(Na,On,Se.Self);for(let s of o)s()}finally{Xi(t),Nn(r),Ne(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(bn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new se(205,!1)}processProvider(e){e=In(e);let t=Oa(e)?e:In(e&&e.provide),r=bB(e);if(!Oa(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Da(void 0,Df,!0),i.factory=()=>P0(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Ne(null);try{return t.value===Df&&(t.value=EB,t.value=t.factory()),typeof t.value=="object"&&t.value&&xB(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ne(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=In(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function O0(n){let e=ap(n),t=e!==null?e.factory:ls(n);if(t!==null)return t;if(n instanceof X)throw new se(204,!1);if(n instanceof Function)return IB(n);throw new se(204,!1)}function IB(n){if(n.length>0)throw new se(204,!1);let t=kj(n);return t!==null?()=>t.factory(n):()=>new n}function bB(n){if(sM(n))return Da(void 0,n.useValue);{let e=aM(n);return Da(e,Df)}}function aM(n,e,t){let r;if(Oa(n)){let i=In(n);return ls(i)||O0(i)}else if(sM(n))r=()=>In(n.useValue);else if(wB(n))r=()=>n.useFactory(...P0(n.deps||[]));else if(_B(n))r=()=>K(In(n.useExisting));else{let i=In(n&&(n.useClass||n.provide));if(DB(n))r=()=>new i(...P0(n.deps));else return ls(i)||O0(i)}return r}function Da(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function DB(n){return!!n.deps}function xB(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function TB(n){return typeof n=="function"||typeof n=="object"&&n instanceof X}function k0(n,e){for(let t of n)Array.isArray(t)?k0(t,e):t&&$S(t)?k0(t.\u0275providers,e):e(t)}function Zn(n,e){n instanceof Gu&&n.assertNotDestroyed();let t,r=Xi(n),i=Nn(void 0);try{return e()}finally{Xi(r),Nn(i)}}function cM(){return zS()!==void 0||Wj()!=null}function SB(n){if(!cM())throw new se(-203,!1)}function MB(n){let e=En.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function AB(n){return typeof n=="function"}var gi=0,ge=1,pe=2,an=3,yr=4,wr=5,Wu=6,Of=7,on=8,ka=9,Lr=10,Pt=11,Ku=12,aS=13,qa=14,vr=15,ds=16,xa=17,hi=18,hp=19,uM=20,Ji=21,m0=22,Yn=23,cn=25,lM=1;var hs=7,kf=8,Fa=9,sn=10,Ff=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Ff||{});function eo(n){return Array.isArray(n)&&typeof n[lM]=="object"}function yi(n){return Array.isArray(n)&&n[lM]===!0}function dM(n){return(n.flags&4)!==0}function fp(n){return n.componentOffset>-1}function F_(n){return(n.flags&1)===1}function ro(n){return!!n.template}function F0(n){return(n[pe]&512)!==0}var V0=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function hM(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Xn(){return fM}function fM(n){return n.type.prototype.ngOnChanges&&(n.setInput=RB),PB}Xn.ngInherit=!0;function PB(){let n=mM(this),e=n?.current;if(e){let t=n.previous;if(t===Ra)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function RB(n,e,t,r,i){let o=this.declaredInputs[r],s=mM(n)||NB(n,{previous:Ra,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new V0(l&&l.currentValue,t,c===Ra),hM(n,e,i,t)}var pM="__ngSimpleChanges__";function mM(n){return n[pM]||null}function NB(n,e){return n[pM]=e}var cS=null;var kr=function(n,e,t){cS?.(n,e,t)},gM="svg",OB="math";function jr(n){for(;Array.isArray(n);)n=n[gi];return n}function yM(n,e){return jr(e[n])}function Jn(n,e){return jr(e[n.index])}function V_(n,e){return n.data[e]}function pp(n,e){return n[e]}function oo(n,e){let t=e[n];return eo(t)?t:t[gi]}function kB(n){return(n[pe]&4)===4}function L_(n){return(n[pe]&128)===128}function FB(n){return yi(n[an])}function Va(n,e){return e==null?null:n[e]}function vM(n){n[xa]=0}function _M(n){n[pe]&1024||(n[pe]|=1024,L_(n)&&gp(n))}function VB(n,e){for(;n>0;)e=e[qa],n--;return e}function mp(n){return!!(n[pe]&9216||n[Yn]?.dirty)}function L0(n){n[Lr].changeDetectionScheduler?.notify(8),n[pe]&64&&(n[pe]|=1024),mp(n)&&gp(n)}function gp(n){n[Lr].changeDetectionScheduler?.notify(0);let e=fs(n);for(;e!==null&&!(e[pe]&8192||(e[pe]|=8192,!L_(e)));)e=fs(e)}function wM(n,e){if((n[pe]&256)===256)throw new se(911,!1);n[Ji]===null&&(n[Ji]=[]),n[Ji].push(e)}function LB(n,e){if(n[Ji]===null)return;let t=n[Ji].indexOf(e);t!==-1&&n[Ji].splice(t,1)}function fs(n){let e=n[an];return yi(e)?e[an]:e}var we={lFrame:MM(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var CM=!1;function jB(){return we.lFrame.elementDepthCount}function BB(){we.lFrame.elementDepthCount++}function UB(){we.lFrame.elementDepthCount--}function EM(){return we.bindingsEnabled}function $B(){return we.skipHydrationRootTNode!==null}function zB(n){return we.skipHydrationRootTNode===n}function qB(){we.skipHydrationRootTNode=null}function xe(){return we.lFrame.lView}function Ut(){return we.lFrame.tView}function Nt(n){return we.lFrame.contextLView=n,n[on]}function Ot(n){return we.lFrame.contextLView=null,n}function un(){let n=IM();for(;n!==null&&n.type===64;)n=n.parent;return n}function IM(){return we.lFrame.currentTNode}function HB(){let n=we.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function nl(n,e){let t=we.lFrame;t.currentTNode=n,t.isParent=e}function bM(){return we.lFrame.isParent}function GB(){we.lFrame.isParent=!1}function WB(){return we.lFrame.contextLView}function DM(){return CM}function uS(n){CM=n}function yp(){let n=we.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function KB(){return we.lFrame.bindingIndex}function QB(n){return we.lFrame.bindingIndex=n}function Ha(){return we.lFrame.bindingIndex++}function j_(n){let e=we.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function YB(){return we.lFrame.inI18n}function ZB(n,e){let t=we.lFrame;t.bindingIndex=t.bindingRootIndex=n,j0(e)}function XB(){return we.lFrame.currentDirectiveIndex}function j0(n){we.lFrame.currentDirectiveIndex=n}function JB(n){let e=we.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function xM(){return we.lFrame.currentQueryIndex}function B_(n){we.lFrame.currentQueryIndex=n}function eU(n){let e=n[ge];return e.type===2?e.declTNode:e.type===1?n[wr]:null}function TM(n,e,t){if(t&Se.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&Se.Host);)if(i=eU(o),i===null||(o=o[qa],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=we.lFrame=SM();return r.currentTNode=e,r.lView=n,!0}function U_(n){let e=SM(),t=n[ge];we.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function SM(){let n=we.lFrame,e=n===null?null:n.child;return e===null?MM(n):e}function MM(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function AM(){let n=we.lFrame;return we.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var PM=AM;function $_(){let n=AM();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function tU(n){return(we.lFrame.contextLView=VB(n,we.lFrame.contextLView))[on]}function vi(){return we.lFrame.selectedIndex}function ps(n){we.lFrame.selectedIndex=n}function z_(){let n=we.lFrame;return V_(n.tView,n.selectedIndex)}function ht(){we.lFrame.currentNamespace=gM}function bt(){nU()}function nU(){we.lFrame.currentNamespace=null}function rU(){return we.lFrame.currentNamespace}var RM=!0;function q_(){return RM}function H_(n){RM=n}function iU(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=fM(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function G_(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function xf(n,e,t){NM(n,e,3,t)}function Tf(n,e,t,r){(n[pe]&3)===t&&NM(n,e,t,r)}function g0(n,e){let t=n[pe];(t&3)===e&&(t&=16383,t+=1,n[pe]=t)}function NM(n,e,t,r){let i=r!==void 0?n[xa]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[xa]+=65536),(a<o||o==-1)&&(oU(n,t,e,c),n[xa]=(n[xa]&4294901760)+c+2),c++}function lS(n,e){kr(4,n,e);let t=Ne(null);try{e.call(n)}finally{Ne(t),kr(5,n,e)}}function oU(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[pe]>>14<n[xa]>>16&&(n[pe]&3)===e&&(n[pe]+=16384,lS(a,o)):lS(a,o)}var Aa=-1,ms=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function sU(n){return n instanceof ms}function aU(n){return(n.flags&8)!==0}function cU(n){return(n.flags&16)!==0}var y0={},B0=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=cp(r);let i=this.injector.get(e,y0,r);return i!==y0||t===y0?i:this.parentInjector.get(e,t,r)}};function OM(n){return n!==Aa}function Vf(n){return n&32767}function uU(n){return n>>16}function Lf(n,e){let t=uU(n),r=e;for(;t>0;)r=r[qa],t--;return r}var U0=!0;function jf(n){let e=U0;return U0=n,e}var lU=256,kM=lU-1,FM=5,dU=0,Fr={};function hU(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty($u)&&(r=t[$u]),r==null&&(r=t[$u]=dU++);let i=r&kM,o=1<<i;e.data[n+(i>>FM)]|=o}function Bf(n,e){let t=VM(n,e);if(t!==-1)return t;let r=e[ge];r.firstCreatePass&&(n.injectorIndex=e.length,v0(r.data,n),v0(e,null),v0(r.blueprint,null));let i=W_(n,e),o=n.injectorIndex;if(OM(i)){let s=Vf(i),a=Lf(i,e),c=a[ge].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function v0(n,e){n.push(0,0,0,0,0,0,0,0,e)}function VM(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function W_(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=$M(i),r===null)return Aa;if(t++,i=i[qa],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Aa}function $0(n,e,t){hU(n,e,t)}function fU(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(YS(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function LM(n,e,t){if(t&Se.Optional||n!==void 0)return n;M_(e,"NodeInjector")}function jM(n,e,t,r){if(t&Se.Optional&&r===void 0&&(r=null),!(t&(Se.Self|Se.Host))){let i=n[ka],o=Nn(void 0);try{return i?i.get(e,r,t&Se.Optional):qS(e,r,t&Se.Optional)}finally{Nn(o)}}return LM(r,e,t)}function BM(n,e,t,r=Se.Default,i){if(n!==null){if(e[pe]&2048&&!(r&Se.Self)){let s=yU(n,e,t,r,Fr);if(s!==Fr)return s}let o=UM(n,e,t,r,Fr);if(o!==Fr)return o}return jM(e,t,r,i)}function UM(n,e,t,r,i){let o=mU(t);if(typeof o=="function"){if(!TM(e,n,r))return r&Se.Host?LM(i,t,r):jM(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&Se.Optional))M_(t);else return s}finally{PM()}}else if(typeof o=="number"){let s=null,a=VM(n,e),c=Aa,l=r&Se.Host?e[vr][wr]:null;for((a===-1||r&Se.SkipSelf)&&(c=a===-1?W_(n,e):e[a+8],c===Aa||!hS(r,!1)?a=-1:(s=e[ge],a=Vf(c),e=Lf(c,e)));a!==-1;){let d=e[ge];if(dS(o,a,d.data)){let h=pU(a,e,t,s,r,l);if(h!==Fr)return h}c=e[a+8],c!==Aa&&hS(r,e[ge].data[a+8]===l)&&dS(o,a,e)?(s=d,a=Vf(c),e=Lf(c,e)):a=-1}}return i}function pU(n,e,t,r,i,o){let s=e[ge],a=s.data[n+8],c=r==null?fp(a)&&U0:r!=s&&(a.type&3)!==0,l=i&Se.Host&&o===a,d=Sf(a,s,t,c,l);return d!==null?gs(e,s,d,a):Fr}function Sf(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,d=o>>20,h=r?a:a+d,p=i?a+d:l;for(let g=h;g<p;g++){let y=s[g];if(g<c&&t===y||g>=c&&y.type===t)return g}if(i){let g=s[c];if(g&&ro(g)&&g.type===t)return c}return null}function gs(n,e,t,r){let i=n[t],o=e.data;if(sU(i)){let s=i;s.resolving&&$j(Uj(o[t]));let a=jf(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?Nn(s.injectImpl):null,d=TM(n,r,Se.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&iU(t,o[t],e)}finally{l!==null&&Nn(l),jf(a),s.resolving=!1,PM()}}return i}function mU(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty($u)?n[$u]:void 0;return typeof e=="number"?e>=0?e&kM:gU:e}function dS(n,e,t){let r=1<<n;return!!(t[e+(n>>FM)]&r)}function hS(n,e){return!(n&Se.Self)&&!(n&Se.Host&&e)}var us=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return BM(this._tNode,this._lView,e,cp(r),t)}};function gU(){return new us(un(),xe())}function Cs(n){return el(()=>{let e=n.prototype.constructor,t=e[Af]||z0(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Af]||z0(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function z0(n){return LS(n)?()=>{let e=z0(In(n));return e&&e()}:ls(n)}function yU(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[pe]&2048&&!(s[pe]&512);){let a=UM(o,s,t,r|Se.Self,Fr);if(a!==Fr)return a;let c=o.parent;if(!c){let l=s[uM];if(l){let d=l.get(t,Fr,r);if(d!==Fr)return d}c=$M(s),s=s[qa]}o=c}return i}function $M(n){let e=n[ge],t=e.type;return t===2?e.declTNode:t===1?n[wr]:null}function K_(n){return fU(un(),n)}function fS(n,e=null,t=null,r){let i=zM(n,e,t,r);return i.resolveInjectorInitializers(),i}function zM(n,e=null,t=null,r,i=new Set){let o=[t||On,yB(n)];return r=r||(typeof n=="object"?void 0:bn(n)),new Gu(o,e||k_(),r||null,i)}var kn=class n{static{this.THROW_IF_NOT_FOUND=qu}static{this.NULL=new Nf}static create(e,t){if(Array.isArray(e))return fS({name:""},t,e,"");{let r=e.name??"";return fS({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=ne({token:n,providedIn:"any",factory:()=>K(WS)})}static{this.__NG_ELEMENT_ID__=-1}};var vU=new X("");vU.__NG_ELEMENT_ID__=n=>{let e=un();if(e===null)throw new se(204,!1);if(e.type&2)return e.value;if(n&Se.Optional)return null;throw new se(204,!1)};var _U="ngOriginalError";function _0(n){return n[_U]}var qM=!0,Q_=(()=>{class n{static{this.__NG_ELEMENT_ID__=wU}static{this.__NG_ENV_ID__=t=>t}}return n})(),q0=class extends Q_{constructor(e){super(),this._lView=e}onDestroy(e){return wM(this._lView,e),()=>LB(this._lView,e)}};function wU(){return new q0(xe())}var _i=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new It(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=ne({token:n,providedIn:"root",factory:()=>new n})}}return n})();var H0=class extends ze{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,cM()&&(this.destroyRef=H(Q_,{optional:!0})??void 0,this.pendingTasks=H(_i,{optional:!0})??void 0)}emit(e){let t=Ne(null);try{super.next(e)}finally{Ne(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof gt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},He=H0;function Uf(...n){}function HM(n){let e,t;function r(){n=Uf;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function pS(n){return queueMicrotask(()=>n()),()=>{n=Uf}}var Y_="isAngularZone",$f=Y_+"_ID",CU=0,Oe=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new He(!1),this.onMicrotaskEmpty=new He(!1),this.onStable=new He(!1),this.onError=new He(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=qM}=e;if(typeof Zone>"u")throw new se(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,bU(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Y_)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new se(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new se(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,EU,Uf,Uf);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},EU={};function Z_(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function IU(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){HM(()=>{n.callbackScheduled=!1,G0(n),n.isCheckStableRunning=!0,Z_(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),G0(n)}function bU(n){let e=()=>{IU(n)},t=CU++;n._inner=n._inner.fork({name:"angular",properties:{[Y_]:!0,[$f]:t,[$f+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(DU(c))return r.invokeTask(o,s,a,c);try{return mS(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),gS(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return mS(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!xU(c)&&e(),gS(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,G0(n),Z_(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function G0(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function mS(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function gS(n){n._nesting--,Z_(n)}var zf=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new He,this.onMicrotaskEmpty=new He,this.onStable=new He,this.onError=new He}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function DU(n){return GM(n,"__ignore_ng_zone__")}function xU(n){return GM(n,"__scheduler_tick__")}function GM(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function TU(n="zone.js",e){return n==="noop"?new zf:n==="zone.js"?new Oe(e):n}var fi=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&_0(e);for(;t&&_0(t);)t=_0(t);return t||null}},SU=new X("",{providedIn:"root",factory:()=>{let n=H(Oe),e=H(fi);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function MU(){return Ga(un(),xe())}function Ga(n,e){return new xn(Jn(n,e))}var xn=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=MU}}return n})();function AU(n){return n instanceof xn?n.nativeElement:n}function PU(){return this._results[Symbol.iterator]()}var W0=class n{get changes(){return this._changes??=new He}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=PU)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=Jj(e);(this._changesDetected=!Xj(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function WM(n){return(n.flags&128)===128}var KM=new Map,RU=0;function NU(){return RU++}function OU(n){KM.set(n[hp],n)}function K0(n){KM.delete(n[hp])}var yS="__ngContext__";function ys(n,e){eo(e)?(n[yS]=e[hp],OU(e)):n[yS]=e}function QM(n){return ZM(n[Ku])}function YM(n){return ZM(n[yr])}function ZM(n){for(;n!==null&&!yi(n);)n=n[yr];return n}var Q0;function XM(n){Q0=n}function kU(){if(Q0!==void 0)return Q0;if(typeof document<"u")return document;throw new se(210,!1)}var vp=new X("",{providedIn:"root",factory:()=>FU}),FU="ng",X_=new X(""),ln=new X("",{providedIn:"platform",factory:()=>"unknown"});var J_=new X("",{providedIn:"root",factory:()=>kU().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var VU="h",LU="b";var jU=()=>null;function ew(n,e,t=!1){return jU(n,e,t)}var JM=!1,BU=new X("",{providedIn:"root",factory:()=>JM});var wf;function UU(){if(wf===void 0&&(wf=null,En.trustedTypes))try{wf=En.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return wf}function vS(n){return UU()?.createScriptURL(n)||n}var qf=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${FS})`}};function Wa(n){return n instanceof qf?n.changingThisBreaksApplicationSecurity:n}function tw(n,e){let t=$U(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${FS})`)}return t===e}function $U(n){return n instanceof qf&&n.getTypeName()||null}var zU=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function e1(n){return n=String(n),n.match(zU)?n:"unsafe:"+n}var _p=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(_p||{});function rl(n){let e=n1();return e?e.sanitize(_p.URL,n)||"":tw(n,"URL")?Wa(n):e1(Pa(n))}function qU(n){let e=n1();if(e)return vS(e.sanitize(_p.RESOURCE_URL,n)||"");if(tw(n,"ResourceURL"))return vS(Wa(n));throw new se(904,!1)}function HU(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?qU:rl}function t1(n,e,t){return HU(e,t)(n)}function n1(){let n=xe();return n&&n[Lr].sanitizer}function r1(n){return n.ownerDocument.defaultView}function i1(n){return n instanceof Function?n():n}function GU(n){return(n??H(kn)).get(ln)==="browser"}var pi=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(pi||{}),WU;function nw(n,e){return WU(n,e)}function Ta(n,e,t,r,i){if(r!=null){let o,s=!1;yi(r)?o=r:eo(r)&&(s=!0,r=r[gi]);let a=jr(r);n===0&&t!==null?i==null?c1(e,t,a):Hf(e,t,a,i||null,!0):n===1&&t!==null?Hf(e,t,a,i||null,!0):n===2?c4(e,a,s):n===3&&e.destroyNode(a),o!=null&&l4(e,n,o,t,i)}}function KU(n,e){return n.createText(e)}function QU(n,e,t){n.setValue(e,t)}function o1(n,e,t){return n.createElement(e,t)}function YU(n,e){s1(n,e),e[gi]=null,e[wr]=null}function ZU(n,e,t,r,i,o){r[gi]=i,r[wr]=e,Cp(n,r,t,1,i,o)}function s1(n,e){e[Lr].changeDetectionScheduler?.notify(9),Cp(n,e,e[Pt],2,null,null)}function XU(n){let e=n[Ku];if(!e)return w0(n[ge],n);for(;e;){let t=null;if(eo(e))t=e[Ku];else{let r=e[sn];r&&(t=r)}if(!t){for(;e&&!e[yr]&&e!==n;)eo(e)&&w0(e[ge],e),e=e[an];e===null&&(e=n),eo(e)&&w0(e[ge],e),t=e&&e[yr]}e=t}}function JU(n,e,t,r){let i=sn+r,o=t.length;r>0&&(t[i-1][yr]=e),r<o-sn?(e[yr]=t[i],GS(t,sn+r,e)):(t.push(e),e[yr]=null),e[an]=t;let s=e[ds];s!==null&&t!==s&&a1(s,e);let a=e[hi];a!==null&&a.insertView(n),L0(e),e[pe]|=128}function a1(n,e){let t=n[Fa],r=e[an];if(eo(r))n[pe]|=Ff.HasTransplantedViews;else{let i=r[an][vr];e[vr]!==i&&(n[pe]|=Ff.HasTransplantedViews)}t===null?n[Fa]=[e]:t.push(e)}function rw(n,e){let t=n[Fa],r=t.indexOf(e);t.splice(r,1)}function Qu(n,e){if(n.length<=sn)return;let t=sn+e,r=n[t];if(r){let i=r[ds];i!==null&&i!==n&&rw(i,r),e>0&&(n[t-1][yr]=r[yr]);let o=Rf(n,sn+e);YU(r[ge],r);let s=o[hi];s!==null&&s.detachView(o[ge]),r[an]=null,r[yr]=null,r[pe]&=-129}return r}function wp(n,e){if(!(e[pe]&256)){let t=e[Pt];t.destroyNode&&Cp(n,e,t,3,null,null),XU(e)}}function w0(n,e){if(e[pe]&256)return;let t=Ne(null);try{e[pe]&=-129,e[pe]|=256,e[Yn]&&Wv(e[Yn]),t4(n,e),e4(n,e),e[ge].type===1&&e[Pt].destroy();let r=e[ds];if(r!==null&&yi(e[an])){r!==e[an]&&rw(r,e);let i=e[hi];i!==null&&i.detachView(n)}K0(e)}finally{Ne(t)}}function e4(n,e){let t=n.cleanup,r=e[Of];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[Of]=null);let i=e[Ji];if(i!==null){e[Ji]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function t4(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof ms)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];kr(4,a,c);try{c.call(a)}finally{kr(5,a,c)}}else{kr(4,i,o);try{o.call(i)}finally{kr(5,i,o)}}}}}function n4(n,e,t){return r4(n,e.parent,t)}function r4(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[gi];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Vr.None||o===Vr.Emulated)return null}return Jn(r,t)}}function Hf(n,e,t,r,i){n.insertBefore(e,t,r,i)}function c1(n,e,t){n.appendChild(e,t)}function _S(n,e,t,r,i){r!==null?Hf(n,e,t,r,i):c1(n,e,t)}function u1(n,e){return n.parentNode(e)}function i4(n,e){return n.nextSibling(e)}function o4(n,e,t){return a4(n,e,t)}function s4(n,e,t){return n.type&40?Jn(n,t):null}var a4=s4,wS;function iw(n,e,t,r){let i=n4(n,r,e),o=e[Pt],s=r.parent||e[wr],a=o4(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)_S(o,i,t[c],a,!1);else _S(o,i,t,a,!1);wS!==void 0&&wS(o,r,e,t,i)}function Uu(n,e){if(e!==null){let t=e.type;if(t&3)return Jn(e,n);if(t&4)return Y0(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Uu(n,r);{let i=n[e.index];return yi(i)?Y0(-1,i):jr(i)}}else{if(t&128)return Uu(n,e.next);if(t&32)return nw(e,n)()||jr(n[e.index]);{let r=l1(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=fs(n[vr]);return Uu(i,r)}else return Uu(n,e.next)}}}return null}function l1(n,e){if(e!==null){let r=n[vr][wr],i=e.projection;return r.projection[i]}return null}function Y0(n,e){let t=sn+n+1;if(t<e.length){let r=e[t],i=r[ge].firstChild;if(i!==null)return Uu(r,i)}return e[hs]}function c4(n,e,t){n.removeChild(null,e,t)}function ow(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&ys(jr(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)ow(n,e,t.child,r,i,o,!1),Ta(e,n,i,a,o);else if(c&32){let l=nw(t,r),d;for(;d=l();)Ta(e,n,i,d,o);Ta(e,n,i,a,o)}else c&16?u4(n,e,r,t,i,o):Ta(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Cp(n,e,t,r,i,o){ow(t,r,n.firstChild,e,i,o,!1)}function u4(n,e,t,r,i,o){let s=t[vr],c=s[wr].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];Ta(e,n,i,d,o)}else{let l=c,d=s[an];WM(r)&&(l.flags|=128),ow(n,e,l,d,i,o,!0)}}function l4(n,e,t,r,i){let o=t[hs],s=jr(t);o!==s&&Ta(e,n,r,o,i);for(let a=sn;a<t.length;a++){let c=t[a];Cp(c[ge],c,n,e,r,o)}}function d4(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:pi.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=pi.Important),n.setStyle(t,r,i,o))}}function h4(n,e,t){n.setAttribute(e,"style",t)}function d1(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function h1(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&R0(n,e,r),i!==null&&d1(n,e,i),o!==null&&h4(n,e,o)}var jn={};function Y(n=1){f1(Ut(),xe(),vi()+n,!1)}function f1(n,e,t,r){if(!r)if((e[pe]&3)===3){let o=n.preOrderCheckHooks;o!==null&&xf(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Tf(e,o,0,t)}ps(t)}function re(n,e=Se.Default){let t=xe();if(t===null)return K(n,e);let r=un();return BM(r,t,In(n),e)}function p1(){let n="invalid";throw new Error(n)}function m1(n,e,t,r,i,o){let s=Ne(null);try{let a=null;i&to.SignalBased&&(a=e[r][oi]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&to.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):hM(e,a,r,o)}finally{Ne(s)}}function f4(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)ps(~i);else{let o=i,s=t[++r],a=t[++r];ZB(s,o);let c=e[o];a(2,c)}}}finally{ps(-1)}}function Ep(n,e,t,r,i,o,s,a,c,l,d){let h=e.blueprint.slice();return h[gi]=i,h[pe]=r|4|128|8|64,(l!==null||n&&n[pe]&2048)&&(h[pe]|=2048),vM(h),h[an]=h[qa]=n,h[on]=t,h[Lr]=s||n&&n[Lr],h[Pt]=a||n&&n[Pt],h[ka]=c||n&&n[ka]||null,h[wr]=o,h[hp]=NU(),h[Wu]=d,h[uM]=l,h[vr]=e.type==2?n[vr]:h,h}function Ip(n,e,t,r,i){let o=n.data[e];if(o===null)o=p4(n,e,t,r,i),YB()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=HB();o.injectorIndex=s===null?-1:s.injectorIndex}return nl(o,!0),o}function p4(n,e,t,r,i){let o=IM(),s=bM(),a=s?o:o&&o.parent,c=n.data[e]=w4(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function g1(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function y1(n,e,t,r,i){let o=vi(),s=r&2;try{ps(-1),s&&e.length>cn&&f1(n,e,cn,!1),kr(s?2:0,i),t(r,i)}finally{ps(o),kr(s?3:1,i)}}function v1(n,e,t){if(dM(e)){let r=Ne(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{Ne(r)}}}function _1(n,e,t){EM()&&(x4(n,e,t,Jn(t,e)),(t.flags&64)===64&&D1(n,e,t))}function w1(n,e,t=Jn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function C1(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=sw(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function sw(n,e,t,r,i,o,s,a,c,l,d){let h=cn+r,p=h+i,g=m4(h,p),y=typeof l=="function"?l():l;return g[ge]={type:n,blueprint:g,template:t,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:y,incompleteFirstPass:!1,ssrId:d}}function m4(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:jn);return t}function g4(n,e,t,r){let o=r.get(BU,JM)||t===Vr.ShadowDom,s=n.selectRootElement(e,o);return y4(s),s}function y4(n){v4(n)}var v4=()=>null;function _4(n,e,t,r){let i=S1(e);i.push(t),n.firstCreatePass&&M1(n).push(r,i.length-1)}function w4(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return $B()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function CS(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=to.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?ES(r,t,l,a,c):ES(r,t,l,a)}return r}function ES(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function C4(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],c=null,l=null;for(let d=r;d<i;d++){let h=o[d],p=t?t.get(h):null,g=p?p.inputs:null,y=p?p.outputs:null;c=CS(0,h.inputs,d,c,g),l=CS(1,h.outputs,d,l,y);let E=c!==null&&s!==null&&!N_(e)?V4(c,d,s):null;a.push(E)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function E4(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function E1(n,e,t,r,i,o,s,a){let c=Jn(e,t),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(aw(n,t,d,r,i),fp(e)&&I4(t,e.index)):e.type&3?(r=E4(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function I4(n,e){let t=oo(e,n);t[pe]&16||(t[pe]|=64)}function I1(n,e,t,r){if(EM()){let i=r===null?null:{"":-1},o=S4(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&b1(n,e,t,s,i,a),i&&M4(t,r,i)}t.mergedAttrs=Hu(t.mergedAttrs,t.attrs)}function b1(n,e,t,r,i,o){for(let l=0;l<r.length;l++)$0(Bf(t,e),n,r[l].type);P4(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,c=g1(n,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];t.mergedAttrs=Hu(t.mergedAttrs,d.hostAttrs),R4(n,t,e,c,d),A4(c,d,i),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let h=d.type.prototype;!s&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}C4(n,t,o)}function b4(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;D4(s)!=a&&s.push(a),s.push(t,r,o)}}function D4(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function x4(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;fp(t)&&N4(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Bf(t,e),ys(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let c=n.data[a],l=gs(e,n,a,t);if(ys(l,e),s!==null&&F4(e,a-i,l,c,t,s),ro(c)){let d=oo(t.index,e);d[on]=gs(e,n,a,t)}}}function D1(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=XB();try{ps(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];j0(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&T4(c,l)}}finally{ps(-1),j0(s)}}function T4(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function S4(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(cB(e,s.selectors,!1))if(r||(r=[]),ro(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;Z0(n,e,c)}else r.unshift(s),Z0(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Z0(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function M4(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new se(-301,!1);r.push(e[i],o)}}}function A4(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;ro(e)&&(t[""]=n)}}function P4(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function R4(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ls(i.type,!0)),s=new ms(o,ro(i),re);n.blueprint[r]=s,t[r]=s,b4(n,e,r,g1(n,t,i.hostVars,jn),i)}function N4(n,e,t){let r=Jn(e,n),i=C1(t),o=n[Lr].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=bp(n,Ep(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function O4(n,e,t,r,i,o){let s=Jn(n,e);k4(e[Pt],s,o,n.value,t,r,i)}function k4(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Pa(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function F4(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],d=s[a++],h=s[a++];m1(r,t,c,l,d,h)}}function V4(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function x1(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function T1(n,e){let t=n.contentQueries;if(t!==null){let r=Ne(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];B_(o),a.contentQueries(2,e[s],s)}}}finally{Ne(r)}}}function bp(n,e){return n[Ku]?n[aS][yr]=e:n[Ku]=e,n[aS]=e,e}function X0(n,e,t){B_(0);let r=Ne(null);try{e(n,t)}finally{Ne(r)}}function S1(n){return n[Of]??=[]}function M1(n){return n.cleanup??=[]}function A1(n,e){let t=n[ka],r=t?t.get(fi,null):null;r&&r.handleError(e)}function aw(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],c=t[o++],l=e[s],d=n.data[s];m1(d,l,r,a,c,i)}}function P1(n,e,t){let r=yM(e,n);QU(n[Pt],r,t)}function L4(n,e){let t=oo(e,n),r=t[ge];j4(r,t);let i=t[gi];i!==null&&t[Wu]===null&&(t[Wu]=ew(i,t[ka])),cw(r,t,t[on])}function j4(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function cw(n,e,t){U_(e);try{let r=n.viewQuery;r!==null&&X0(1,r,t);let i=n.template;i!==null&&y1(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[hi]?.finishViewCreation(n),n.staticContentQueries&&T1(n,e),n.staticViewQueries&&X0(2,n.viewQuery,t);let o=n.components;o!==null&&B4(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[pe]&=-5,$_()}}function B4(n,e){for(let t=0;t<e.length;t++)L4(n,e[t])}function Dp(n,e,t,r){let i=Ne(null);try{let o=e.tView,a=n[pe]&4096?4096:16,c=Ep(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[ds]=l;let d=n[hi];return d!==null&&(c[hi]=d.createEmbeddedView(o)),cw(o,c,t),c}finally{Ne(i)}}function R1(n,e){let t=sn+e;if(t<n.length)return n[t]}function Yu(n,e){return!e||e.firstChild===null||WM(n)}function xp(n,e,t,r=!0){let i=e[ge];if(JU(i,e,n,t),r){let s=Y0(t,n),a=e[Pt],c=u1(a,n[hs]);c!==null&&ZU(i,n[wr],a,e,c,s)}let o=e[Wu];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function N1(n,e){let t=Qu(n,e);return t!==void 0&&wp(t[ge],t),t}function Gf(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(jr(o)),yi(o)&&U4(o,r);let s=t.type;if(s&8)Gf(n,e,t.child,r);else if(s&32){let a=nw(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=l1(e,t);if(Array.isArray(a))r.push(...a);else{let c=fs(e[vr]);Gf(c[ge],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function U4(n,e){for(let t=sn;t<n.length;t++){let r=n[t],i=r[ge].firstChild;i!==null&&Gf(r[ge],r,i,e)}n[hs]!==n[gi]&&e.push(n[hs])}var O1=[];function $4(n){return n[Yn]??z4(n)}function z4(n){let e=O1.pop()??Object.create(H4);return e.lView=n,e}function q4(n){n.lView[Yn]!==n&&(n.lView=null,O1.push(n))}var H4=ve(Q({},ku),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{gp(n.lView)},consumerOnSignalRead(){this.lView[Yn]=this}});function G4(n){let e=n[Yn]??Object.create(W4);return e.lView=n,e}var W4=ve(Q({},ku),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=fs(n.lView);for(;e&&!k1(e[ge]);)e=fs(e);e&&_M(e)},consumerOnSignalRead(){this.lView[Yn]=this}});function k1(n){return n.type!==2}var K4=100;function F1(n,e=!0,t=0){let r=n[Lr],i=r.rendererFactory,o=!1;o||i.begin?.();try{Q4(n,t)}catch(s){throw e&&A1(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function Q4(n,e){let t=DM();try{uS(!0),J0(n,e);let r=0;for(;mp(n);){if(r===K4)throw new se(103,!1);r++,J0(n,1)}}finally{uS(t)}}function Y4(n,e,t,r){let i=e[pe];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Lr].inlineEffectRunner?.flush(),U_(e);let a=!0,c=null,l=null;o||(k1(n)?(l=$4(e),c=$h(l)):yT()===null?(a=!1,l=G4(e),c=$h(l)):e[Yn]&&(Wv(e[Yn]),e[Yn]=null));try{vM(e),QB(n.bindingStartIndex),t!==null&&y1(n,e,t,2,r);let d=(i&3)===3;if(!o)if(d){let g=n.preOrderCheckHooks;g!==null&&xf(e,g,null)}else{let g=n.preOrderHooks;g!==null&&Tf(e,g,0,null),g0(e,0)}if(s||Z4(e),V1(e,0),n.contentQueries!==null&&T1(n,e),!o)if(d){let g=n.contentCheckHooks;g!==null&&xf(e,g)}else{let g=n.contentHooks;g!==null&&Tf(e,g,1),g0(e,1)}f4(n,e);let h=n.components;h!==null&&j1(e,h,0);let p=n.viewQuery;if(p!==null&&X0(2,p,r),!o)if(d){let g=n.viewCheckHooks;g!==null&&xf(e,g)}else{let g=n.viewHooks;g!==null&&Tf(e,g,2),g0(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[m0]){for(let g of e[m0])g();e[m0]=null}o||(e[pe]&=-73)}catch(d){throw o||gp(e),d}finally{l!==null&&(Hv(l,c),a&&q4(l)),$_()}}function V1(n,e){for(let t=QM(n);t!==null;t=YM(t))for(let r=sn;r<t.length;r++){let i=t[r];L1(i,e)}}function Z4(n){for(let e=QM(n);e!==null;e=YM(e)){if(!(e[pe]&Ff.HasTransplantedViews))continue;let t=e[Fa];for(let r=0;r<t.length;r++){let i=t[r];_M(i)}}}function X4(n,e,t){let r=oo(e,n);L1(r,t)}function L1(n,e){L_(n)&&J0(n,e)}function J0(n,e){let r=n[ge],i=n[pe],o=n[Yn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Gv(o)),s||=!1,o&&(o.dirty=!1),n[pe]&=-9217,s)Y4(r,n,r.template,n[on]);else if(i&8192){V1(n,1);let a=r.components;a!==null&&j1(n,a,1)}}function j1(n,e,t){for(let r=0;r<e.length;r++)X4(n,e[r],t)}function uw(n,e){let t=DM()?64:1088;for(n[Lr].changeDetectionScheduler?.notify(e);n;){n[pe]|=t;let r=fs(n);if(F0(n)&&!r)return n;n=r}return null}var vs=class{get rootNodes(){let e=this._lView,t=e[ge];return Gf(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[on]}set context(e){this._lView[on]=e}get destroyed(){return(this._lView[pe]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[an];if(yi(e)){let t=e[kf],r=t?t.indexOf(this):-1;r>-1&&(Qu(e,r),Rf(t,r))}this._attachedToViewContainer=!1}wp(this._lView[ge],this._lView)}onDestroy(e){wM(this._lView,e)}markForCheck(){uw(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[pe]&=-129}reattach(){L0(this._lView),this._lView[pe]|=128}detectChanges(){this._lView[pe]|=1024,F1(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=F0(this._lView),t=this._lView[ds];t!==null&&!e&&rw(t,this._lView),s1(this._lView[ge],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new se(902,!1);this._appRef=e;let t=F0(this._lView),r=this._lView[ds];r!==null&&!t&&a1(r,this._lView),L0(this._lView)}},_s=(()=>{class n{static{this.__NG_ELEMENT_ID__=t3}}return n})(),J4=_s,e3=class extends J4{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=Dp(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new vs(i)}};function t3(){return Tp(un(),xe())}function Tp(n,e){return n.type&4?new e3(e,n,Ga(n,e)):null}var kte=new RegExp(`^(\\d+)*(${LU}|${VU})*(.*)`);var n3=()=>null;function Zu(n,e){return n3(n,e)}var La=class{},lw=new X("",{providedIn:"root",factory:()=>!1});var B1=new X(""),U1=new X(""),e_=class{},Wf=class{};function r3(n){let e=Error(`No component factory found for ${bn(n)}.`);return e[i3]=n,e}var i3="ngComponent";var t_=class{resolveComponentFactory(e){throw r3(e)}},ja=class{static{this.NULL=new t_}},Ba=class{},Cr=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>o3()}}return n})();function o3(){let n=xe(),e=un(),t=oo(e.index,n);return(eo(t)?t:n)[Pt]}var s3=(()=>{class n{static{this.\u0275prov=ne({token:n,providedIn:"root",factory:()=>null})}}return n})();function n_(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=S0(i,a);else if(o==2){let c=a,l=e[++s];r=S0(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Kf=class extends ja{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=no(e);return new Ua(t,this.ngModule)}};function IS(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:to.None;e?t.push({propName:s,templateName:r,isSignal:(a&to.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function a3(n){let e=n.toLowerCase();return e==="svg"?gM:e==="math"?OB:null}var Ua=class extends Wf{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=IS(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return IS(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=hB(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Ne(null);try{i=i||this.ngModule;let s=i instanceof Dn?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new B0(e,s):e,c=a.get(Ba,null);if(c===null)throw new se(407,!1);let l=a.get(s3,null),d=a.get(La,null),h={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:d},p=c.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",y=r?g4(p,r,this.componentDef.encapsulation,a):o1(p,g,a3(g)),E=512;this.componentDef.signals?E|=4096:this.componentDef.onPush||(E|=16);let w=null;y!==null&&(w=ew(y,a,!0));let T=sw(0,null,null,1,0,null,null,null,null,null,null),O=Ep(null,T,null,E,null,null,h,p,a,null,w);U_(O);let P,B,q=null;try{let z=this.componentDef,b,_=null;z.findHostDirectiveDefs?(b=[],_=new Map,z.findHostDirectiveDefs(z,b,_),b.push(z)):b=[z];let C=c3(O,y);q=u3(C,y,z,b,O,h,p),B=V_(T,cn),y&&h3(p,z,y,r),t!==void 0&&f3(B,this.ngContentSelectors,t),P=d3(q,z,b,_,O,[p3]),cw(T,O,null)}catch(z){throw q!==null&&K0(q),K0(O),z}finally{$_()}return new r_(this.componentType,P,Ga(B,O),O,B)}finally{Ne(o)}}},r_=class extends e_{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new vs(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;aw(o[ge],o,i,e,t),this.previousInputValues.set(e,t);let s=oo(this._tNode.index,o);uw(s,1)}}get injector(){return new us(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function c3(n,e){let t=n[ge],r=cn;return n[r]=e,Ip(t,r,2,"#host",null)}function u3(n,e,t,r,i,o,s){let a=i[ge];l3(r,n,e,s);let c=null;e!==null&&(c=ew(e,i[ka]));let l=o.rendererFactory.createRenderer(e,t),d=16;t.signals?d=4096:t.onPush&&(d=64);let h=Ep(i,C1(t),null,d,i[n.index],n,o,l,null,null,c);return a.firstCreatePass&&Z0(a,n,r.length-1),bp(i,h),i[n.index]=h}function l3(n,e,t,r){for(let i of n)e.mergedAttrs=Hu(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(n_(e,e.mergedAttrs,!0),t!==null&&h1(r,t,e))}function d3(n,e,t,r,i,o){let s=un(),a=i[ge],c=Jn(s,i);b1(a,i,s,t,null,r);for(let d=0;d<t.length;d++){let h=s.directiveStart+d,p=gs(i,a,h,s);ys(p,i)}D1(a,i,s),c&&ys(c,i);let l=gs(i,a,s.directiveStart+s.componentOffset,s);if(n[on]=i[on]=l,o!==null)for(let d of o)d(l,e);return v1(a,s,i),l}function h3(n,e,t,r){if(r)R0(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=fB(e.selectors[0]);i&&R0(n,t,i),o&&o.length>0&&d1(n,t,o.join(" "))}}function f3(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function p3(){let n=un();G_(xe()[ge],n)}var so=(()=>{class n{static{this.__NG_ELEMENT_ID__=m3}}return n})();function m3(){let n=un();return z1(n,xe())}var g3=so,$1=class extends g3{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Ga(this._hostTNode,this._hostLView)}get injector(){return new us(this._hostTNode,this._hostLView)}get parentInjector(){let e=W_(this._hostTNode,this._hostLView);if(OM(e)){let t=Lf(e,this._hostLView),r=Vf(e),i=t[ge].data[r+8];return new us(i,t)}else return new us(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=bS(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-sn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Zu(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,Yu(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!AB(e),a;if(s)a=t;else{let y=t||{};a=y.index,r=y.injector,i=y.projectableNodes,o=y.environmentInjector||y.ngModuleRef}let c=s?e:new Ua(no(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let E=(s?l:this.parentInjector).get(Dn,null);E&&(o=E)}let d=no(c.componentType??{}),h=Zu(this._lContainer,d?.id??null),p=h?.firstChild??null,g=c.create(l,i,p,o);return this.insertImpl(g.hostView,a,Yu(this._hostTNode,h)),g}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(FB(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[an],l=new $1(c,c[wr],c[an]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return xp(s,i,o,r),e.attachToViewContainerRef(),GS(C0(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=bS(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Qu(this._lContainer,t);r&&(Rf(C0(this._lContainer),t),wp(r[ge],r))}detach(e){let t=this._adjustIndex(e,-1),r=Qu(this._lContainer,t);return r&&Rf(C0(this._lContainer),t)!=null?new vs(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function bS(n){return n[kf]}function C0(n){return n[kf]||(n[kf]=[])}function z1(n,e){let t,r=e[n.index];return yi(r)?t=r:(t=x1(r,e,null,n),e[n.index]=t,bp(e,t)),v3(t,e,n,r),new $1(t,n,e)}function y3(n,e){let t=n[Pt],r=t.createComment(""),i=Jn(e,n),o=u1(t,i);return Hf(t,o,r,i4(t,i),!1),r}var v3=C3,_3=()=>!1;function w3(n,e,t){return _3(n,e,t)}function C3(n,e,t,r){if(n[hs])return;let i;t.type&8?i=jr(r):i=y3(e,t),n[hs]=i}var i_=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},o_=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)dw(e,t).matches!==null&&this.queries[t].setDirty()}},Qf=class{constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=M3(e):this.predicate=e}},s_=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},a_=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,E3(t,o)),this.matchTNodeWithReadOption(e,t,Sf(t,e,o,!1,!1))}else r===_s?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Sf(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===xn||i===so||i===_s&&t.type&4)this.addMatch(t.index,-2);else{let o=Sf(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function E3(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function I3(n,e){return n.type&11?Ga(n,e):n.type&4?Tp(n,e):null}function b3(n,e,t,r){return t===-1?I3(e,n):t===-2?D3(n,e,r):gs(n,n[ge],t,e)}function D3(n,e,t){if(t===xn)return Ga(e,n);if(t===_s)return Tp(e,n);if(t===so)return z1(e,n)}function q1(n,e,t,r){let i=e[hi].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let d=o[l];a.push(b3(e,d,s[c+1],t.metadata.read))}}i.matches=a}return i.matches}function c_(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=q1(n,e,i,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let l=o[a+1],d=e[-c];for(let h=sn;h<d.length;h++){let p=d[h];p[ds]===p[an]&&c_(p[ge],p,l,r)}if(d[Fa]!==null){let h=d[Fa];for(let p=0;p<h.length;p++){let g=h[p];c_(g[ge],g,l,r)}}}}}return r}function x3(n,e){return n[hi].queries[e].queryList}function H1(n,e,t){let r=new W0((t&4)===4);return _4(n,e,r,r.destroy),(e[hi]??=new o_).queries.push(new i_(r))-1}function T3(n,e,t){let r=Ut();return r.firstCreatePass&&(G1(r,new Qf(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),H1(r,xe(),e)}function S3(n,e,t,r){let i=Ut();if(i.firstCreatePass){let o=un();G1(i,new Qf(e,t,r),o.index),A3(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return H1(i,xe(),t)}function M3(n){return n.split(",").map(e=>e.trim())}function G1(n,e,t){n.queries===null&&(n.queries=new s_),n.queries.track(new a_(e,t))}function A3(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function dw(n,e){return n.queries.getByIndex(e)}function P3(n,e){let t=n[ge],r=dw(t,e);return r.crossesNgTemplate?c_(t,n,e,[]):q1(t,n,r,e)}var DS=new Set;function ao(n){DS.has(n)||(DS.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function R3(n){return typeof n=="function"&&n[oi]!==void 0}function il(n,e){ao("NgSignals");let t=ST(n),r=t[oi];return e?.equal&&(r.equal=e.equal),t.set=i=>Kv(r,i),t.update=i=>MT(r,i),t.asReadonly=N3.bind(t),t}function N3(){let n=this[oi];if(n.readonlyFn===void 0){let e=()=>this();e[oi]=n,n.readonlyFn=e}return n.readonlyFn}function W1(n){return R3(n)&&typeof n.set=="function"}function O3(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(L3))}return o}return Yf.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,d=i.styleUrls;i.styleUrls.forEach((h,p)=>{a.push(""),s.push(r(h).then(g=>{a[l+p]=g,d.splice(d.indexOf(h),1),d.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>j3(o));e.push(c)}),F3(),Promise.all(e).then(()=>{})}var Yf=new Map,k3=new Set;function F3(){let n=Yf;return Yf=new Map,n}function V3(){return Yf.size===0}function L3(n){return typeof n=="string"?n:n.text()}function j3(n){k3.delete(n)}function B3(n){return Object.getPrototypeOf(n.prototype).constructor}function er(n){let e=B3(n.type),t=!0,r=[n];for(;e;){let i;if(ro(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new se(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Cf(n.inputs),s.inputTransforms=Cf(n.inputTransforms),s.declaredInputs=Cf(n.declaredInputs),s.outputs=Cf(n.outputs);let a=i.hostBindings;a&&H3(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&z3(n,c),l&&q3(n,l),U3(n,i),Nj(n.outputs,i.outputs),ro(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===er&&(t=!1)}}e=Object.getPrototypeOf(e)}$3(r)}function U3(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function $3(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Hu(i.hostAttrs,t=Hu(t,i.hostAttrs))}}function Cf(n){return n===Ra?{}:n===On?[]:n}function z3(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function q3(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function H3(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function hw(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var io=class{},Xu=class{};var Zf=class extends io{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Kf(this);let o=tM(e);this._bootstrapComponents=i1(o.bootstrap),this._r3Injector=zM(e,t,[{provide:io,useValue:this},{provide:ja,useValue:this.componentFactoryResolver},...r],bn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Xf=class extends Xu{constructor(e){super(),this.moduleType=e}create(e){return new Zf(this.moduleType,e,[])}};function G3(n,e,t){return new Zf(n,e,t,!1)}var u_=class extends io{constructor(e){super(),this.componentFactoryResolver=new Kf(this),this.instance=null;let t=new Gu([...e.providers,{provide:io,useValue:this},{provide:ja,useValue:this.componentFactoryResolver}],e.parent||k_(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Sp(n,e,t=null){return new u_({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function K1(n){return K3(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function W3(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function K3(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Mp(n,e,t){return n[e]=t}function Q3(n,e){return n[e]}function _r(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Jf(n,e,t,r){let i=_r(n,e,t);return _r(n,e+1,r)||i}function Y3(n,e,t,r,i,o){let s=Jf(n,e,t,r);return Jf(n,e+2,i,o)||s}function Z3(n){return(n.flags&32)===32}function X3(n,e,t,r,i,o,s,a,c){let l=e.consts,d=Ip(e,n,4,s||null,a||null);I1(e,t,d,Va(l,c)),G_(e,d);let h=d.tView=sw(2,d,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),h.queries=e.queries.embeddedTView(d)),d}function l_(n,e,t,r,i,o,s,a,c,l){let d=t+cn,h=e.firstCreatePass?X3(d,e,n,r,i,o,s,a,c):e.data[d];nl(h,!1);let p=J3(e,n,h,t);q_()&&iw(e,n,p,h),ys(p,n);let g=x1(p,n,p,h);return n[d]=g,bp(n,g),w3(g,h,n),F_(h)&&_1(e,n,h),c!=null&&w1(n,h,l),h}function ft(n,e,t,r,i,o,s,a){let c=xe(),l=Ut(),d=Va(l.consts,o);return l_(c,l,n,e,t,r,i,d,s,a),ft}var J3=e$;function e$(n,e,t,r){return H_(!0),e[Pt].createComment("")}var Sa=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Sa||{}),Q1=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=ne({token:n,providedIn:"root",factory:()=>new n})}}return n})(),d_=class n{constructor(){this.ngZone=H(Oe),this.scheduler=H(La),this.errorHandler=H(fi,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Sa.EarlyRead,Sa.Write,Sa.MixedReadWrite,Sa.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=ne({token:n,providedIn:"root",factory:()=>new n})}},h_=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function fw(n,e){!e?.injector&&SB(fw);let t=e?.injector??H(kn);return GU(t)?(ao("NgAfterNextRender"),n$(n,t,e,!0)):r$}function t$(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function n$(n,e,t,r){let i=e.get(Q1);i.impl??=e.get(d_);let o=t?.phase??Sa.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(Q_):null,a=new h_(i.impl,t$(n,o),r,s);return i.impl.register(a),a}var r$={destroy(){}};function Ap(n,e,t,r){let i=xe(),o=Ha();if(_r(i,o,e)){let s=Ut(),a=z_();O4(a,i,n,e,t,r)}return Ap}function i$(n,e,t,r){return _r(n,Ha(),t)?e+Pa(t)+r:jn}function o$(n,e,t,r,i,o){let s=KB(),a=Jf(n,s,t,i);return j_(2),a?e+Pa(t)+r+Pa(i)+o:jn}function Ef(n,e){return n<<17|e<<2}function ws(n){return n>>17&32767}function s$(n){return(n&2)==2}function a$(n,e){return n&131071|e<<17}function f_(n){return n|2}function $a(n){return(n&131068)>>2}function E0(n,e){return n&-131069|e<<2}function c$(n){return(n&1)===1}function p_(n){return n|1}function u$(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ws(s),c=$a(s);n[r]=t;let l=!1,d;if(Array.isArray(t)){let h=t;d=h[1],(d===null||tl(h,d)>0)&&(l=!0)}else d=t;if(i)if(c!==0){let p=ws(n[a+1]);n[r+1]=Ef(p,a),p!==0&&(n[p+1]=E0(n[p+1],r)),n[a+1]=a$(n[a+1],r)}else n[r+1]=Ef(a,0),a!==0&&(n[a+1]=E0(n[a+1],r)),a=r;else n[r+1]=Ef(c,0),a===0?a=r:n[c+1]=E0(n[c+1],r),c=r;l&&(n[r+1]=f_(n[r+1])),xS(n,d,r,!0),xS(n,d,r,!1),l$(e,d,n,r,o),s=Ef(a,c),o?e.classBindings=s:e.styleBindings=s}function l$(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&tl(o,e)>=0&&(t[r+1]=p_(t[r+1]))}function xS(n,e,t,r){let i=n[t+1],o=e===null,s=r?ws(i):$a(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];d$(c,e)&&(a=!0,n[s+1]=r?p_(l):f_(l)),s=r?ws(l):$a(l)}a&&(n[t+1]=r?f_(i):p_(i))}function d$(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?tl(n,e)>=0:!1}var gr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function h$(n){return n.substring(gr.key,gr.keyEnd)}function f$(n){return p$(n),Y1(n,Z1(n,0,gr.textEnd))}function Y1(n,e){let t=gr.textEnd;return t===e?-1:(e=gr.keyEnd=m$(n,gr.key=e,t),Z1(n,e,t))}function p$(n){gr.key=0,gr.keyEnd=0,gr.value=0,gr.valueEnd=0,gr.textEnd=n.length}function Z1(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function m$(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function ke(n,e,t){let r=xe(),i=Ha();if(_r(r,i,e)){let o=Ut(),s=z_();E1(o,s,r,n,e,r[Pt],t,!1)}return ke}function m_(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";aw(n,t,o[s],s,r)}function ol(n,e,t){return J1(n,e,t,!1),ol}function at(n,e){return J1(n,e,null,!0),at}function X1(n){y$(I$,g$,n,!0)}function g$(n,e){for(let t=f$(e);t>=0;t=Y1(e,t))R_(n,h$(e),!0)}function J1(n,e,t,r){let i=xe(),o=Ut(),s=j_(2);if(o.firstUpdatePass&&tA(o,n,s,r),e!==jn&&_r(i,s,e)){let a=o.data[vi()];nA(o,a,i,i[Pt],n,i[s+1]=D$(e,t),r,s)}}function y$(n,e,t,r){let i=Ut(),o=j_(2);i.firstUpdatePass&&tA(i,null,o,r);let s=xe();if(t!==jn&&_r(s,o,t)){let a=i.data[vi()];if(rA(a,r)&&!eA(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=S0(c,t||"")),m_(i,a,s,t,r)}else b$(i,a,s,s[Pt],s[o+1],s[o+1]=E$(n,e,t),r,o)}}function eA(n,e){return e>=n.expandoStartIndex}function tA(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[vi()],s=eA(n,t);rA(o,r)&&e===null&&!s&&(e=!1),e=v$(i,o,e,r),u$(i,o,e,t,s,r)}}function v$(n,e,t,r){let i=JB(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=I0(null,n,e,t,r),t=Ju(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=I0(i,n,e,t,r),o===null){let c=_$(n,e,r);c!==void 0&&Array.isArray(c)&&(c=I0(null,n,e,c[1],r),c=Ju(c,e.attrs,r),w$(n,e,r,c))}else o=C$(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function _$(n,e,t){let r=t?e.classBindings:e.styleBindings;if($a(r)!==0)return n[ws(r)]}function w$(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[ws(i)]=r}function C$(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Ju(r,s,t)}return Ju(r,e.attrs,t)}function I0(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Ju(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ju(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),R_(n,s,t?!0:e[++o]))}return n===void 0?null:n}function E$(n,e,t){if(t==null||t==="")return On;let r=[],i=Wa(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function I$(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&R_(n,r,t)}function b$(n,e,t,r,i,o,s,a){i===jn&&(i=On);let c=0,l=0,d=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;d!==null||h!==null;){let p=c<i.length?i[c+1]:void 0,g=l<o.length?o[l+1]:void 0,y=null,E;d===h?(c+=2,l+=2,p!==g&&(y=h,E=g)):h===null||d!==null&&d<h?(c+=2,y=d):(l+=2,y=h,E=g),y!==null&&nA(n,e,t,r,y,E,s,a),d=c<i.length?i[c]:null,h=l<o.length?o[l]:null}}function nA(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],d=c$(l)?TS(c,e,t,i,$a(l),s):void 0;if(!ep(d)){ep(o)||s$(l)&&(o=TS(c,null,t,i,a,s));let h=yM(vi(),t);d4(r,s,h,i,o)}}function TS(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),d=l?c[1]:c,h=d===null,p=t[i+1];p===jn&&(p=h?On:void 0);let g=h?f0(p,r):d===r?p:void 0;if(l&&!ep(g)&&(g=f0(c,r)),ep(g)&&(a=g,s))return a;let y=n[i+1];i=s?ws(y):$a(y)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=f0(c,r))}return a}function ep(n){return n!==void 0}function D$(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=bn(Wa(n)))),n}function rA(n,e){return(n.flags&(e?8:16))!==0}var g_=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}};function b0(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function x$(n,e,t){let r,i,o=0,s=n.length-1,a=void 0;if(Array.isArray(e)){let c=e.length-1;for(;o<=s&&o<=c;){let l=n.at(o),d=e[o],h=b0(o,l,o,d,t);if(h!==0){h<0&&n.updateValue(o,d),o++;continue}let p=n.at(s),g=e[c],y=b0(s,p,c,g,t);if(y!==0){y<0&&n.updateValue(s,g),s--,c--;continue}let E=t(o,l),w=t(s,p),T=t(o,d);if(Object.is(T,w)){let O=t(c,g);Object.is(O,E)?(n.swap(o,s),n.updateValue(s,g),c--,s--):n.move(s,o),n.updateValue(o,d),o++;continue}if(r??=new tp,i??=MS(n,o,s,t),y_(n,r,o,T))n.updateValue(o,d),o++,s++;else if(i.has(T))r.set(E,n.detach(o)),s--;else{let O=n.create(o,e[o]);n.attach(o,O),o++,s++}}for(;o<=c;)SS(n,r,t,o,e[o]),o++}else if(e!=null){let c=e[Symbol.iterator](),l=c.next();for(;!l.done&&o<=s;){let d=n.at(o),h=l.value,p=b0(o,d,o,h,t);if(p!==0)p<0&&n.updateValue(o,h),o++,l=c.next();else{r??=new tp,i??=MS(n,o,s,t);let g=t(o,h);if(y_(n,r,o,g))n.updateValue(o,h),o++,s++,l=c.next();else if(!i.has(g))n.attach(o,n.create(o,h)),o++,s++,l=c.next();else{let y=t(o,d);r.set(y,n.detach(o)),s--}}}for(;!l.done;)SS(n,r,t,n.length,l.value),l=c.next()}for(;o<=s;)n.destroy(n.detach(s--));r?.forEach(c=>{n.destroy(c)})}function y_(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function SS(n,e,t,r,i){if(y_(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function MS(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var tp=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function Pp(n,e){ao("NgControlFlow");let t=xe(),r=Ha(),i=t[r]!==jn?t[r]:-1,o=i!==-1?np(t,cn+i):void 0,s=0;if(_r(t,r,n)){let a=Ne(null);try{if(o!==void 0&&N1(o,s),n!==-1){let c=cn+n,l=np(t,c),d=C_(t[ge],c),h=Zu(l,d.tView.ssrId),p=Dp(t,d,e,{dehydratedView:h});xp(l,p,s,Yu(d,h))}}finally{Ne(a)}}else if(o!==void 0){let a=R1(o,s);a!==void 0&&(a[on]=e)}}var v_=class{constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-sn}};var __=class{constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function iA(n,e,t,r,i,o,s,a,c,l,d,h,p){ao("NgControlFlow");let g=xe(),y=Ut(),E=c!==void 0,w=xe(),T=a?s.bind(w[vr][on]):s,O=new __(E,T);w[cn+n]=O,l_(g,y,n+1,e,t,r,i,Va(y.consts,o)),E&&l_(g,y,n+2,c,l,d,h,Va(y.consts,p))}var w_=class extends g_{constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-sn}at(e){return this.getLView(e)[on].$implicit}attach(e,t){let r=t[Wu];this.needsIndexUpdate||=e!==this.length,xp(this.lContainer,t,e,Yu(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,T$(this.lContainer,e)}create(e,t){let r=Zu(this.lContainer,this.templateTNode.tView.ssrId),i=Dp(this.hostLView,this.templateTNode,new v_(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){wp(e[ge],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[on].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[on].$index=e}getLView(e){return S$(this.lContainer,e)}};function oA(n){let e=Ne(null),t=vi();try{let r=xe(),i=r[ge],o=r[t],s=t+1,a=np(r,s);if(o.liveCollection===void 0){let l=C_(i,s);o.liveCollection=new w_(a,r,l)}else o.liveCollection.reset();let c=o.liveCollection;if(x$(c,n,o.trackByFn),c.updateIndexes(),o.hasEmptyBlock){let l=Ha(),d=c.length===0;if(_r(r,l,d)){let h=t+2,p=np(r,h);if(d){let g=C_(i,h),y=Zu(p,g.tView.ssrId),E=Dp(r,g,void 0,{dehydratedView:y});xp(p,E,0,Yu(g,y))}else N1(p,0)}}}finally{Ne(e)}}function np(n,e){return n[e]}function T$(n,e){return Qu(n,e)}function S$(n,e){return R1(n,e)}function C_(n,e){return V_(n,e)}function M$(n,e,t,r,i,o){let s=e.consts,a=Va(s,i),c=Ip(e,n,2,r,a);return I1(e,t,c,Va(s,o)),c.attrs!==null&&n_(c,c.attrs,!1),c.mergedAttrs!==null&&n_(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function S(n,e,t,r){let i=xe(),o=Ut(),s=cn+n,a=i[Pt],c=o.firstCreatePass?M$(s,o,i,e,t,r):o.data[s],l=A$(o,i,c,a,e,n);i[s]=l;let d=F_(c);return nl(c,!0),h1(a,l,c),!Z3(c)&&q_()&&iw(o,i,l,c),jB()===0&&ys(l,i),BB(),d&&(_1(o,i,c),v1(o,c,i)),r!==null&&w1(i,c),S}function A(){let n=un();bM()?GB():(n=n.parent,nl(n,!1));let e=n;zB(e)&&qB(),UB();let t=Ut();return t.firstCreatePass&&(G_(t,n),dM(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&aU(e)&&m_(t,e,xe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&cU(e)&&m_(t,e,xe(),e.stylesWithoutHost,!1),A}function ce(n,e,t,r){return S(n,e,t,r),A(),ce}var A$=(n,e,t,r,i,o)=>(H_(!0),o1(r,i,rU()));function tr(){return xe()}var cs=void 0;function P$(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var R$=["en",[["a","p"],["AM","PM"],cs],[["AM","PM"],cs,cs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],cs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],cs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",cs,"{1} 'at' {0}",cs],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",P$],D0={};function Rp(n){let e=N$(n),t=AS(e);if(t)return t;let r=e.split("-")[0];if(t=AS(r),t)return t;if(r==="en")return R$;throw new se(701,!1)}function AS(n){return n in D0||(D0[n]=En.ng&&En.ng.common&&En.ng.common.locales&&En.ng.common.locales[n]),D0[n]}var Es=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Es||{});function N$(n){return n.toLowerCase().replace(/_/g,"-")}var rp="en-US",O$="USD";var k$=rp;function F$(n){typeof n=="string"&&(k$=n.toLowerCase().replace(/_/g,"-"))}var V$=(n,e,t)=>{};function le(n,e,t,r){let i=xe(),o=Ut(),s=un();return sA(o,i,i[Pt],s,n,e,r),le}function L$(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Of],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function sA(n,e,t,r,i,o,s){let a=F_(r),l=n.firstCreatePass&&M1(n),d=e[on],h=S1(e),p=!0;if(r.type&3||s){let E=Jn(r,e),w=s?s(E):E,T=h.length,O=s?B=>s(jr(B[r.index])):r.index,P=null;if(!s&&a&&(P=L$(n,e,i,r.index)),P!==null){let B=P.__ngLastListenerFn__||P;B.__ngNextListenerFn__=o,P.__ngLastListenerFn__=o,p=!1}else{o=RS(r,e,d,o),V$(E,i,o);let B=t.listen(w,i,o);h.push(o,B),l&&l.push(i,O,T,T+1)}}else o=RS(r,e,d,o);let g=r.outputs,y;if(p&&g!==null&&(y=g[i])){let E=y.length;if(E)for(let w=0;w<E;w+=2){let T=y[w],O=y[w+1],q=e[T][O].subscribe(o),z=h.length;h.push(o,q),l&&l.push(i,r.index,z,-(z+1))}}}function PS(n,e,t,r){let i=Ne(null);try{return kr(6,e,t),t(r)!==!1}catch(o){return A1(n,o),!1}finally{kr(7,e,t),Ne(i)}}function RS(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?oo(n.index,e):e;uw(s,5);let a=PS(e,t,r,o),c=i.__ngNextListenerFn__;for(;c;)a=PS(e,t,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function Ye(n=1){return tU(n)}function aA(n,e,t,r){S3(n,e,t,r)}function cA(n,e,t){T3(n,e,t)}function Np(n){let e=xe(),t=Ut(),r=xM();B_(r+1);let i=dw(t,r);if(n.dirty&&kB(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=P3(e,r);n.reset(o,AU),n.notifyOnChanges()}return!0}return!1}function Op(){return x3(xe(),xM())}function j$(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function uA(n){let e=WB();return pp(e,cn+n)}function $(n,e=""){let t=xe(),r=Ut(),i=n+cn,o=r.firstCreatePass?Ip(r,i,1,e,null):r.data[i],s=B$(r,t,o,e,n);t[i]=s,q_()&&iw(r,t,s,o),nl(o,!1)}var B$=(n,e,t,r,i)=>(H_(!0),KU(e[Pt],r));function ct(n){return dn("",n,""),ct}function dn(n,e,t){let r=xe(),i=i$(r,n,e,t);return i!==jn&&P1(r,vi(),i),dn}function pw(n,e,t,r,i){let o=xe(),s=o$(o,n,e,t,r,i);return s!==jn&&P1(o,vi(),s),pw}function Is(n,e,t){W1(e)&&(e=e());let r=xe(),i=Ha();if(_r(r,i,e)){let o=Ut(),s=z_();E1(o,s,r,n,e,r[Pt],t,!1)}return Is}function Ka(n,e){let t=W1(n);return t&&n.set(e),t}function bs(n,e){let t=xe(),r=Ut(),i=un();return sA(r,t,t[Pt],i,n,e),bs}function U$(n,e,t){let r=Ut();if(r.firstCreatePass){let i=ro(n);E_(t,r.data,r.blueprint,i,!0),E_(e,r.data,r.blueprint,i,!1)}}function E_(n,e,t,r,i){if(n=In(n),Array.isArray(n))for(let o=0;o<n.length;o++)E_(n[o],e,t,r,i);else{let o=Ut(),s=xe(),a=un(),c=Oa(n)?n:In(n.provide),l=aM(n),d=a.providerIndexes&1048575,h=a.directiveStart,p=a.providerIndexes>>20;if(Oa(n)||!n.multi){let g=new ms(l,i,re),y=T0(c,e,i?d:d+p,h);y===-1?($0(Bf(a,s),o,c),x0(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(g),s.push(g)):(t[y]=g,s[y]=g)}else{let g=T0(c,e,d+p,h),y=T0(c,e,d,d+p),E=g>=0&&t[g],w=y>=0&&t[y];if(i&&!w||!i&&!E){$0(Bf(a,s),o,c);let T=q$(i?z$:$$,t.length,i,r,l);!i&&w&&(t[y].providerFactory=T),x0(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(T),s.push(T)}else{let T=lA(t[i?y:g],l,!i&&r);x0(o,n,g>-1?g:y,T)}!i&&r&&w&&t[y].componentProviders++}}}function x0(n,e,t,r){let i=Oa(e),o=CB(e);if(i||o){let c=(o?In(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(t);d===-1?l.push(t,[r,c]):l[d+1].push(r,c)}else l.push(t,c)}}}function lA(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function T0(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function $$(n,e,t,r){return I_(this.multi,[])}function z$(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=gs(t,t[ge],this.providerFactory.index,r);o=a.slice(0,s),I_(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],I_(i,o);return o}function I_(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function q$(n,e,t,r,i){let o=new ms(n,t,re);return o.multi=[],o.index=e,o.componentProviders=0,lA(o,i,r&&!t),o}function co(n,e=[]){return t=>{t.providersResolver=(r,i)=>U$(r,i?i(n):n,e)}}var H$=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=iM(!1,t.type),i=r.length>0?Sp([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=ne({token:n,providedIn:"environment",factory:()=>new n(K(Dn))})}}return n})();function dA(n){ao("NgStandalone"),n.getStandaloneInjector=e=>e.get(H$).getOrCreateStandaloneInjector(n)}function hA(n,e,t){let r=yp()+n,i=xe();return i[r]===jn?Mp(i,r,t?e.call(t):e()):Q3(i,r)}function mw(n,e){let t=n[e];return t===jn?void 0:t}function G$(n,e,t,r,i,o){let s=e+t;return _r(n,s,i)?Mp(n,s+1,o?r.call(o,i):r(i)):mw(n,s+1)}function W$(n,e,t,r,i,o,s){let a=e+t;return Jf(n,a,i,o)?Mp(n,a+2,s?r.call(s,i,o):r(i,o)):mw(n,a+2)}function K$(n,e,t,r,i,o,s,a,c){let l=e+t;return Y3(n,l,i,o,s,a)?Mp(n,l+4,c?r.call(c,i,o,s,a):r(i,o,s,a)):mw(n,l+4)}function nr(n,e){let t=Ut(),r,i=n+cn;t.firstCreatePass?(r=Q$(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=ls(r.type,!0)),s,a=Nn(re);try{let c=jf(!1),l=o();return jf(c),j$(t,xe(),i,l),l}finally{Nn(a)}}function Q$(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function kp(n,e,t){let r=n+cn,i=xe(),o=pp(i,r);return gw(i,r)?G$(i,yp(),e,o.transform,t,o):o.transform(t)}function sl(n,e,t,r){let i=n+cn,o=xe(),s=pp(o,i);return gw(o,i)?W$(o,yp(),e,s.transform,t,r,s):s.transform(t,r)}function al(n,e,t,r,i,o){let s=n+cn,a=xe(),c=pp(a,s);return gw(a,s)?K$(a,yp(),e,c.transform,t,r,i,o,c):c.transform(t,r,i,o)}function gw(n,e){return n[ge].data[e].pure}function fA(n,e){return Tp(n,e)}var If=null;function Y$(n){If!==null&&(n.defaultEncapsulation!==If.defaultEncapsulation||n.preserveWhitespaces!==If.preserveWhitespaces)||(If=n)}var mi=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},pA=new mi("18.2.13");var Fp=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var yw=new X(""),cl=new X(""),Vp=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,vw||(Z$(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Oe.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(K(Oe),K(Lp),K(cl))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})(),Lp=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return vw?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function Z$(n){vw=n}var vw;function Ds(n){return!!n&&typeof n.then=="function"}function mA(n){return!!n&&typeof n.subscribe=="function"}var jp=new X(""),gA=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=H(jp,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Ds(o))t.push(o);else if(mA(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Bp=new X("");function X$(){TT(()=>{throw new se(600,!1)})}function J$(n){return n.isBoundToModule}var e5=10;function t5(n,e,t){try{let r=t();return Ds(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function yA(n,e){return Array.isArray(e)?e.reduce(yA,n):Q(Q({},n),e)}var wi=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=H(SU),this.afterRenderManager=H(Q1),this.zonelessEnabled=H(lw),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new ze,this.afterTick=new ze,this.componentTypes=[],this.components=[],this.isStable=H(_i).hasPendingTasks.pipe(oe(t=>!t)),this._injector=H(Dn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Wf;if(!this._injector.get(gA).done){let p=!i&&eM(t),g=!1;throw new se(405,g)}let s;i?s=t:s=this._injector.get(ja).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=J$(s)?void 0:this._injector.get(io),c=r||s.selector,l=s.create(kn.NULL,[],c,a),d=l.location.nativeElement,h=l.injector.get(yw,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),Mf(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new se(101,!1);let t=Ne(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Ne(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Ba,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<e5;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)n5(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>mp(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Mf(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Bp,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Mf(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new se(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Mf(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function n5(n,e,t,r){if(!t&&!mp(n))return;F1(n,e,t&&!r?0:1)}var b_=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Up=(()=>{class n{compileModuleSync(t){return new Xf(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=tM(t),o=i1(i.declarations).reduce((s,a)=>{let c=no(a);return c&&s.push(new Ua(c)),s},[]);return new b_(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),r5=new X("");function i5(n,e,t){let r=new Xf(t);return Promise.resolve(r)}function NS(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var o5=(()=>{class n{constructor(){this.zone=H(Oe),this.changeDetectionScheduler=H(La),this.applicationRef=H(wi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function s5({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Oe(ve(Q({},vA()),{scheduleInRootZone:t})),[{provide:Oe,useFactory:n},{provide:Na,multi:!0,useFactory:()=>{let r=H(o5,{optional:!0});return()=>r.initialize()}},{provide:Na,multi:!0,useFactory:()=>{let r=H(a5);return()=>{r.initialize()}}},e===!0?{provide:B1,useValue:!0}:[],{provide:U1,useValue:t??qM}]}function vA(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var a5=(()=>{class n{constructor(){this.subscription=new gt,this.initialized=!1,this.zone=H(Oe),this.pendingTasks=H(_i)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Oe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Oe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var c5=(()=>{class n{constructor(){this.appRef=H(wi),this.taskService=H(_i),this.ngZone=H(Oe),this.zonelessEnabled=H(lw),this.disableScheduling=H(B1,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new gt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get($f):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(H(U1,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof zf||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?pS:HM;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get($f+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,pS(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function u5(){return typeof $localize<"u"&&$localize.locale||rp}var ul=new X("",{providedIn:"root",factory:()=>H(ul,Se.Optional|Se.SkipSelf)||u5()}),_A=new X("",{providedIn:"root",factory:()=>O$});var ip=new X("");function bf(n){return!n.moduleRef}function l5(n){let e=bf(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Oe);return t.run(()=>{bf(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(fi,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),bf(n)){let o=()=>e.destroy(),s=n.platformInjector.get(ip);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(ip);s.add(o),n.moduleRef.onDestroy(()=>{Mf(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return t5(r,t,()=>{let o=e.get(gA);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(ul,rp);if(F$(s||rp),bf(n)){let a=e.get(wi);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return d5(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function d5(n,e){let t=n.injector.get(wi);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new se(-403,!1);e.push(n)}var wA=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>TU(r?.ngZone,ve(Q({},vA({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[s5({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:La,useExisting:c5}],c=G3(t.moduleType,this.injector,a);return l5({moduleRef:c,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=yA({},r);return i5(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new se(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(ip,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(K(kn))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),zu=null,CA=new X("");function h5(n){if(zu&&!zu.get(CA,!1))throw new se(400,!1);X$(),zu=n;let e=n.get(wA);return m5(n),e}function _w(n,e,t=[]){let r=`Platform: ${e}`,i=new X(r);return(o=[])=>{let s=EA();if(!s||s.injector.get(CA,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):h5(f5(a,r))}return p5(i)}}function f5(n=[],e){return kn.create({name:e,providers:[{provide:dp,useValue:"platform"},{provide:ip,useValue:new Set([()=>zu=null])},...n]})}function p5(n){let e=EA();if(!e)throw new se(401,!1);return e}function EA(){return zu?.get(wA)??null}function m5(n){n.get(X_,null)?.forEach(t=>t())}function $p(){return!1}var uo=(()=>{class n{static{this.__NG_ELEMENT_ID__=g5}}return n})();function g5(n){return y5(un(),xe(),(n&16)===16)}function y5(n,e,t){if(fp(n)&&!t){let r=oo(n.index,e);return new vs(r,r)}else if(n.type&175){let r=e[vr];return new vs(r,e)}return null}var D_=class{constructor(){}supports(e){return K1(e)}create(e){return new x_(e)}},v5=(n,e)=>e,x_=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||v5}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<OS(r,i,o)?t:r,a=OS(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,d=c-i;if(l!=d){for(let p=0;p<l;p++){let g=p<o.length?o[p]:o[p]=0,y=g+p;d<=y&&y<l&&(o[p]=g+1)}let h=s.previousIndex;o[h]=d-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!K1(e))throw new se(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,W3(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new T_(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new op),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new op),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},T_=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},S_=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},op=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new S_,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function OS(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function kS(){return new ww([new D_])}var ww=(()=>{class n{static{this.\u0275prov=ne({token:n,providedIn:"root",factory:kS})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||kS()),deps:[[n,new A_,new za]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new se(901,!1)}}return n})();var IA=_w(null,"core",[]),bA=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(K(wi))}}static{this.\u0275mod=vt({type:n})}static{this.\u0275inj=yt({})}}return n})();function xs(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function ll(n,e){ao("NgSignals");let t=bT(n);return e?.equal&&(t[oi].equal=e.equal),t}function Ci(n){let e=Ne(null);try{return n()}finally{Ne(e)}}function DA(n){let e=no(n);if(!e)return null;let t=new Ua(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var RA=null;function Ur(){return RA}function NA(n){RA??=n}var zp=class{};var hn=new X(""),Tw=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:()=>H(w5),providedIn:"platform"})}}return n})(),OA=new X(""),w5=(()=>{class n extends Tw{constructor(){super(),this._doc=H(hn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ur().getBaseHref(this._doc)}onPopState(t){let r=Ur().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Ur().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function Sw(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function xA(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Ei(n){return n&&n[0]!=="?"?"?"+n:n}var Ii=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:()=>H(Mw),providedIn:"root"})}}return n})(),kA=new X(""),Mw=(()=>{class n extends Ii{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??H(hn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Sw(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Ei(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Ei(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Ei(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(K(Tw),K(kA,8))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),FA=(()=>{class n extends Ii{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Sw(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Ei(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Ei(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(K(Tw),K(kA,8))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})(),Za=(()=>{class n{constructor(t){this._subject=new He,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=I5(xA(TA(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ei(r))}normalize(t){return n.stripTrailingSlash(E5(this._basePath,TA(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ei(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ei(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Ei}static{this.joinWithSlash=Sw}static{this.stripTrailingSlash=xA}static{this.\u0275fac=function(r){return new(r||n)(K(Ii))}}static{this.\u0275prov=ne({token:n,factory:()=>C5(),providedIn:"root"})}}return n})();function C5(){return new Za(K(Ii))}function E5(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function TA(n){return n.replace(/\/index.html$/,"")}function I5(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var VA={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},Aw=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(Aw||{});var rr={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Qa(n,e){let t=Rp(n),r=t[Es.NumberSymbols][e];if(typeof r>"u"){if(e===rr.CurrencyDecimal)return t[Es.NumberSymbols][rr.Decimal];if(e===rr.CurrencyGroup)return t[Es.NumberSymbols][rr.Group]}return r}function LA(n,e){return Rp(n)[Es.NumberFormats][e]}function b5(n){return Rp(n)[Es.Currencies]}function D5(n,e,t="en"){let r=b5(t)[n]||VA[n]||[],i=r[1];return e==="narrow"&&typeof i=="string"?i:r[0]||n}var x5=2;function T5(n){let e,t=VA[n];return t&&(e=t[2]),typeof e=="number"?e:x5}var S5=/^(\d+)?\.((\d+)(-(\d+))?)?$/,SA=22,qp=".",dl="0",M5=";",A5=",",Cw="#",MA="\xA4";function jA(n,e,t,r,i,o,s=!1){let a="",c=!1;if(!isFinite(n))a=Qa(t,rr.Infinity);else{let l=O5(n);s&&(l=N5(l));let d=e.minInt,h=e.minFrac,p=e.maxFrac;if(o){let O=o.match(S5);if(O===null)throw new Error(`${o} is not a valid digit info`);let P=O[1],B=O[3],q=O[5];P!=null&&(d=Ew(P)),B!=null&&(h=Ew(B)),q!=null?p=Ew(q):B!=null&&h>p&&(p=h)}k5(l,h,p);let g=l.digits,y=l.integerLen,E=l.exponent,w=[];for(c=g.every(O=>!O);y<d;y++)g.unshift(0);for(;y<0;y++)g.unshift(0);y>0?w=g.splice(y,g.length):(w=g,g=[0]);let T=[];for(g.length>=e.lgSize&&T.unshift(g.splice(-e.lgSize,g.length).join(""));g.length>e.gSize;)T.unshift(g.splice(-e.gSize,g.length).join(""));g.length&&T.unshift(g.join("")),a=T.join(Qa(t,r)),w.length&&(a+=Qa(t,i)+w.join("")),E&&(a+=Qa(t,rr.Exponential)+"+"+E)}return n<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function P5(n,e,t,r,i){let o=LA(e,Aw.Currency),s=BA(o,Qa(e,rr.MinusSign));return s.minFrac=T5(r),s.maxFrac=s.minFrac,jA(n,s,e,rr.CurrencyGroup,rr.CurrencyDecimal,i).replace(MA,t).replace(MA,"").trim()}function R5(n,e,t){let r=LA(e,Aw.Decimal),i=BA(r,Qa(e,rr.MinusSign));return jA(n,i,e,rr.Group,rr.Decimal,t)}function BA(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(M5),i=r[0],o=r[1],s=i.indexOf(qp)!==-1?i.split(qp):[i.substring(0,i.lastIndexOf(dl)+1),i.substring(i.lastIndexOf(dl)+1)],a=s[0],c=s[1]||"";t.posPre=a.substring(0,a.indexOf(Cw));for(let d=0;d<c.length;d++){let h=c.charAt(d);h===dl?t.minFrac=t.maxFrac=d+1:h===Cw?t.maxFrac=d+1:t.posSuf+=h}let l=a.split(A5);if(t.gSize=l[1]?l[1].length:0,t.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let d=i.length-t.posPre.length-t.posSuf.length,h=o.indexOf(Cw);t.negPre=o.substring(0,h).replace(/'/g,""),t.negSuf=o.slice(h+d).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function N5(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function O5(n){let e=Math.abs(n)+"",t=0,r,i,o,s,a;for((i=e.indexOf(qp))>-1&&(e=e.replace(qp,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===dl;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===dl;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>SA&&(r=r.splice(0,SA-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function k5(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(e,i),t),s=o+n.integerLen,a=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let h=s;h<r.length;h++)r[h]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let h=1;h<s;h++)r[h]=0}if(a>=5)if(s-1<0){for(let h=0;h>s;h--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let c=o!==0,l=e+n.integerLen,d=r.reduceRight(function(h,p,g,y){return p=p+h,y[g]=p<10?p:p-10,c&&(y[g]===0&&g>=l?y.pop():c=!1),p>=10?1:0},0);d&&(r.unshift(d),n.integerLen++)}function Ew(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function Hp(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Iw=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},lo=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Iw(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),AA(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);AA(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(re(so),re(_s),re(ww))}}static{this.\u0275dir=_t({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function AA(n,e){n.context.$implicit=e.item}var Xa=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new bw,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){PA("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){PA("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(re(so),re(_s))}}static{this.\u0275dir=_t({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),bw=class{constructor(){this.$implicit=null,this.ngIf=null}};function PA(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${bn(e)}'.`)}function Pw(n,e){return new se(2100,!1)}var Gp=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw Pw(n,t);return t.toUpperCase()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=up({name:"uppercase",type:n,pure:!0,standalone:!0})}}return n})();var UA=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!$A(t))return null;i||=this._locale;try{let o=zA(t);return R5(o,i,r)}catch(o){throw Pw(n,o.message)}}static{this.\u0275fac=function(r){return new(r||n)(re(ul,16))}}static{this.\u0275pipe=up({name:"number",type:n,pure:!0,standalone:!0})}}return n})();var Ja=(()=>{class n{constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,i="symbol",o,s){if(!$A(t))return null;s||=this._locale,typeof i=="boolean"&&(i=i?"symbol":"code");let a=r||this._defaultCurrencyCode;i!=="code"&&(i==="symbol"||i==="symbol-narrow"?a=D5(a,i==="symbol"?"wide":"narrow",s):a=i);try{let c=zA(t);return P5(c,s,a,r,o)}catch(c){throw Pw(n,c.message)}}static{this.\u0275fac=function(r){return new(r||n)(re(ul,16),re(_A,16))}}static{this.\u0275pipe=up({name:"currency",type:n,pure:!0,standalone:!0})}}return n})();function $A(n){return!(n==null||n===""||n!==n)}function zA(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var qA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=vt({type:n})}static{this.\u0275inj=yt({})}}return n})(),Rw="browser",F5="server";function V5(n){return n===Rw}function ho(n){return n===F5}var ec=(()=>{class n{static{this.\u0275prov=ne({token:n,providedIn:"root",factory:()=>V5(H(ln))?new Dw(H(hn),window):new xw})}}return n})(),Dw=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=L5(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function L5(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var xw=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Ya=class{};var fl=class{},Kp=class{},bi=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Ow=class{encodeKey(e){return HA(e)}encodeValue(e){return HA(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function j5(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}var B5=/%(\d[a-f0-9])/gi,U5={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function HA(n){return encodeURIComponent(n).replace(B5,(e,t)=>U5[t]??e)}function Wp(n){return`${n}`}var po=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Ow,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=j5(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Wp):[Wp(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Wp(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Wp(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var kw=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function $5(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function GA(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function WA(n){return typeof Blob<"u"&&n instanceof Blob}function KA(n){return typeof FormData<"u"&&n instanceof FormData}function z5(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var hl=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if($5(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new bi,this.context??=new kw,!this.params)this.params=new po,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||GA(this.body)||WA(this.body)||KA(this.body)||z5(this.body)?this.body:this.body instanceof po?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||KA(this.body)?null:WA(this.body)?this.body.type||null:GA(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof po?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,d=e.params||this.params,h=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((p,g)=>p.set(g,e.setHeaders[g]),l)),e.setParams&&(d=Object.keys(e.setParams).reduce((p,g)=>p.set(g,e.setParams[g]),d)),new n(t,r,s,{params:d,headers:l,context:h,reportProgress:c,responseType:i,withCredentials:a,transferCache:o})}},mo=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(mo||{}),pl=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new bi,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Qp=class n extends pl{constructor(e={}){super(e),this.type=mo.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ml=class n extends pl{constructor(e={}){super(e),this.type=mo.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},fo=class extends pl{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},JA=200,q5=204;function Nw(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var H5=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof hl)o=t;else{let c;i.headers instanceof bi?c=i.headers:c=new bi(i.headers);let l;i.params&&(i.params instanceof po?l=i.params:l=new po({fromObject:i.params})),o=new hl(t,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=ue(o).pipe(ci(c=>this.handler.handle(c)));if(t instanceof hl||i.observe==="events")return s;let a=s.pipe(Mt(c=>c instanceof ml));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(oe(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(oe(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(oe(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return a.pipe(oe(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new po().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Nw(i,r))}post(t,r,i={}){return this.request("POST",t,Nw(i,r))}put(t,r,i={}){return this.request("PUT",t,Nw(i,r))}static{this.\u0275fac=function(r){return new(r||n)(K(fl))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})(),G5=/^\)\]\}',?\n/,W5="X-Request-URL";function QA(n){if(n.url)return n.url;let e=W5.toLocaleLowerCase();return n.headers.get(e)}var K5=(()=>{class n{constructor(){this.fetchImpl=H(Fw,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=H(Oe)}handle(t){return new Ie(r=>{let i=new AbortController;return this.doRequest(t,i.signal,r).then(Vw,o=>r.error(new fo({error:o}))),()=>i.abort()})}doRequest(t,r,i){return V(this,null,function*(){let o=this.createRequestInit(t),s;try{let g=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,Q({signal:r},o)));Q5(g),i.next({type:mo.Sent}),s=yield g}catch(g){i.error(new fo({error:g,status:g.status??0,statusText:g.statusText,url:t.urlWithParams,headers:g.headers}));return}let a=new bi(s.headers),c=s.statusText,l=QA(s)??t.urlWithParams,d=s.status,h=null;if(t.reportProgress&&i.next(new Qp({headers:a,status:d,statusText:c,url:l})),s.body){let g=s.headers.get("content-length"),y=[],E=s.body.getReader(),w=0,T,O,P=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>V(this,null,function*(){for(;;){let{done:q,value:z}=yield E.read();if(q)break;if(y.push(z),w+=z.length,t.reportProgress){O=t.responseType==="text"?(O??"")+(T??=new TextDecoder).decode(z,{stream:!0}):void 0;let b=()=>i.next({type:mo.DownloadProgress,total:g?+g:void 0,loaded:w,partialText:O});P?P.run(b):b()}}}));let B=this.concatChunks(y,w);try{let q=s.headers.get("Content-Type")??"";h=this.parseBody(t,B,q)}catch(q){i.error(new fo({error:q,headers:new bi(s.headers),status:s.status,statusText:s.statusText,url:QA(s)??t.urlWithParams}));return}}d===0&&(d=h?JA:0),d>=200&&d<300?(i.next(new ml({body:h,headers:a,status:d,statusText:c,url:l})),i.complete()):i.error(new fo({error:h,headers:a,status:d,statusText:c,url:l}))})}parseBody(t,r,i){switch(t.responseType){case"json":let o=new TextDecoder().decode(r).replace(G5,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(t){let r={},i=t.withCredentials?"include":void 0;if(t.headers.forEach((o,s)=>r[o]=s.join(",")),t.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){let o=t.detectContentTypeHeader();o!==null&&(r["Content-Type"]=o)}return{body:t.serializeBody(),method:t.method,headers:r,credentials:i}}concatChunks(t,r){let i=new Uint8Array(r),o=0;for(let s of t)i.set(s,o),o+=s.length;return i}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})(),Fw=class{};function Vw(){}function Q5(n){n.then(Vw,Vw)}function eP(n,e){return e(n)}function Y5(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}function Z5(n,e,t){return(r,i)=>Zn(t,()=>e(r,o=>n(o,i)))}var X5=new X(""),Lw=new X(""),J5=new X(""),tP=new X("",{providedIn:"root",factory:()=>!0});function ez(){let n=null;return(e,t)=>{n===null&&(n=(H(X5,{optional:!0})??[]).reduceRight(Y5,eP));let r=H(_i);if(H(tP)){let o=r.add();return n(e,t).pipe(Zi(()=>r.remove(o)))}else return n(e,t)}}var YA=(()=>{class n extends fl{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=H(_i),this.contributeToStability=H(tP)}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(Lw),...this.injector.get(J5,[])]));this.chain=r.reduceRight((i,o)=>Z5(i,o,this.injector),eP)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Zi(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}static{this.\u0275fac=function(r){return new(r||n)(K(Kp),K(Dn))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})();var tz=/^\)\]\}',?\n/;function nz(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var ZA=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new se(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Te(r.\u0275loadImpl()):ue(null)).pipe(st(()=>new Ie(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((E,w)=>s.setRequestHeader(E,w.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let E=t.detectContentTypeHeader();E!==null&&s.setRequestHeader("Content-Type",E)}if(t.responseType){let E=t.responseType.toLowerCase();s.responseType=E!=="json"?E:"text"}let a=t.serializeBody(),c=null,l=()=>{if(c!==null)return c;let E=s.statusText||"OK",w=new bi(s.getAllResponseHeaders()),T=nz(s)||t.url;return c=new Qp({headers:w,status:s.status,statusText:E,url:T}),c},d=()=>{let{headers:E,status:w,statusText:T,url:O}=l(),P=null;w!==q5&&(P=typeof s.response>"u"?s.responseText:s.response),w===0&&(w=P?JA:0);let B=w>=200&&w<300;if(t.responseType==="json"&&typeof P=="string"){let q=P;P=P.replace(tz,"");try{P=P!==""?JSON.parse(P):null}catch(z){P=q,B&&(B=!1,P={error:z,text:P})}}B?(o.next(new ml({body:P,headers:E,status:w,statusText:T,url:O||void 0})),o.complete()):o.error(new fo({error:P,headers:E,status:w,statusText:T,url:O||void 0}))},h=E=>{let{url:w}=l(),T=new fo({error:E,status:s.status||0,statusText:s.statusText||"Unknown Error",url:w||void 0});o.error(T)},p=!1,g=E=>{p||(o.next(l()),p=!0);let w={type:mo.DownloadProgress,loaded:E.loaded};E.lengthComputable&&(w.total=E.total),t.responseType==="text"&&s.responseText&&(w.partialText=s.responseText),o.next(w)},y=E=>{let w={type:mo.UploadProgress,loaded:E.loaded};E.lengthComputable&&(w.total=E.total),o.next(w)};return s.addEventListener("load",d),s.addEventListener("error",h),s.addEventListener("timeout",h),s.addEventListener("abort",h),t.reportProgress&&(s.addEventListener("progress",g),a!==null&&s.upload&&s.upload.addEventListener("progress",y)),s.send(a),o.next({type:mo.Sent}),()=>{s.removeEventListener("error",h),s.removeEventListener("abort",h),s.removeEventListener("load",d),s.removeEventListener("timeout",h),t.reportProgress&&(s.removeEventListener("progress",g),a!==null&&s.upload&&s.upload.removeEventListener("progress",y)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(K(Ya))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})(),nP=new X(""),rz="XSRF-TOKEN",iz=new X("",{providedIn:"root",factory:()=>rz}),oz="X-XSRF-TOKEN",sz=new X("",{providedIn:"root",factory:()=>oz}),Yp=class{},az=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Hp(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(K(hn),K(ln),K(iz))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})();function cz(n,e){let t=n.url.toLowerCase();if(!H(nP)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=H(Yp).getToken(),i=H(sz);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var rP=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(rP||{});function uz(n,e){return{\u0275kind:n,\u0275providers:e}}function lz(...n){let e=[H5,ZA,YA,{provide:fl,useExisting:YA},{provide:Kp,useFactory:()=>H(K5,{optional:!0})??H(ZA)},{provide:Lw,useValue:cz,multi:!0},{provide:nP,useValue:!0},{provide:Yp,useClass:az}];for(let t of n)e.push(...t.\u0275providers);return lp(e)}var XA=new X("");function dz(){return uz(rP.LegacyInterceptors,[{provide:XA,useFactory:ez},{provide:Lw,useExisting:XA,multi:!0}])}var iP=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=vt({type:n})}static{this.\u0275inj=yt({providers:[lz(dz())]})}}return n})();var Uw=class extends zp{constructor(){super(...arguments),this.supportsDOMEvents=!0}},$w=class n extends Uw{static makeCurrent(){NA(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=hz();return t==null?null:fz(t)}resetBaseElement(){gl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Hp(document.cookie,e)}},gl=null;function hz(){return gl=gl||document.querySelector("base"),gl?gl.getAttribute("href"):null}function fz(n){return new URL(n,document.baseURI).pathname}var zw=class{addToWindow(e){En.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new se(5103,!1);return o},En.getAllAngularTestabilities=()=>e.getAllTestabilities(),En.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=En.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};En.frameworkStabilizers||(En.frameworkStabilizers=[]),En.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Ur().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},pz=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})(),qw=new X(""),cP=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new se(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(K(qw),K(Oe))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})(),Zp=class{constructor(e){this._doc=e}},jw="ng-app-id",uP=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ho(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${jw}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(jw),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(jw,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(K(hn),K(vp),K(J_,8),K(ln))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})(),Bw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Gw=/%COMP%/g,lP="%COMP%",mz=`_nghost-${lP}`,gz=`_ngcontent-${lP}`,yz=!0,vz=new X("",{providedIn:"root",factory:()=>yz});function _z(n){return gz.replace(Gw,n)}function wz(n){return mz.replace(Gw,n)}function dP(n,e){return e.map(t=>t.replace(Gw,n))}var oP=(()=>{class n{constructor(t,r,i,o,s,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=ho(a),this.defaultRenderer=new yl(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Vr.ShadowDom&&(r=ve(Q({},r),{encapsulation:Vr.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Xp?i.applyToHost(t):i instanceof vl&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case Vr.Emulated:o=new Xp(c,l,r,this.appId,d,s,a,h);break;case Vr.ShadowDom:return new Hw(c,l,t,r,s,a,this.nonce,h);default:o=new vl(c,l,r,d,s,a,h);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(K(cP),K(uP),K(vp),K(vz),K(hn),K(ln),K(Oe),K(J_))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})(),yl=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Bw[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(sP(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(sP(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new se(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Bw[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Bw[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(pi.DashCase|pi.Important)?e.style.setProperty(t,r,i&pi.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&pi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Ur().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function sP(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Hw=class extends yl{constructor(e,t,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=dP(i.id,i.styles);for(let d of l){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=d,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},vl=class extends yl{constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?dP(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Xp=class extends vl{constructor(e,t,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,t,r,o,s,a,c,l),this.contentAttr=_z(l),this.hostAttr=wz(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},Cz=(()=>{class n extends Zp{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(K(hn))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})(),aP=["alt","control","meta","shift"],Ez={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Iz={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},bz=(()=>{class n extends Zp{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ur().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),aP.forEach(l=>{let d=r.indexOf(l);d>-1&&(r.splice(d,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=Ez[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),aP.forEach(s=>{if(s!==i){let a=Iz[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(K(hn))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})();function Dz(){$w.makeCurrent()}function xz(){return new fi}function Tz(){return XM(document),document}var Sz=[{provide:ln,useValue:Rw},{provide:X_,useValue:Dz,multi:!0},{provide:hn,useFactory:Tz,deps:[]}],hP=_w(IA,"browser",Sz),Mz=new X(""),Az=[{provide:cl,useClass:zw,deps:[]},{provide:yw,useClass:Vp,deps:[Oe,Lp,cl]},{provide:Vp,useClass:Vp,deps:[Oe,Lp,cl]}],Pz=[{provide:dp,useValue:"root"},{provide:fi,useFactory:xz,deps:[]},{provide:qw,useClass:Cz,multi:!0,deps:[hn,Oe,ln]},{provide:qw,useClass:bz,multi:!0,deps:[hn]},oP,uP,cP,{provide:Ba,useExisting:oP},{provide:Ya,useClass:pz,deps:[]},[]],fP=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:vp,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(K(Mz,12))}}static{this.\u0275mod=vt({type:n})}static{this.\u0275inj=yt({providers:[...Pz,...Az],imports:[qA,bA]})}}return n})();var pP=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(K(hn))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ee="primary",Rl=Symbol("RouteTitle"),Zw=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function sc(n){return new Zw(n)}function Rz(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Nz(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!$r(n[t],e[t]))return!1;return!0}function $r(n,e){let t=n?Xw(n):void 0,r=e?Xw(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!xP(n[i],e[i]))return!1;return!0}function Xw(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function xP(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function TP(n){return n.length>0?n[n.length-1]:null}function yo(n){return s0(n)?n:Ds(n)?Te(Promise.resolve(n)):ue(n)}var Oz={exact:MP,subset:AP},SP={exact:kz,subset:Fz,ignored:()=>!0};function gP(n,e,t){return Oz[t.paths](n.root,e.root,t.matrixParams)&&SP[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function kz(n,e){return $r(n,e)}function MP(n,e,t){if(!Ms(n.segments,e.segments)||!tm(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!MP(n.children[r],e.children[r],t))return!1;return!0}function Fz(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>xP(n[t],e[t]))}function AP(n,e,t){return PP(n,e,e.segments,t)}function PP(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ms(i,t)||e.hasChildren()||!tm(i,t,r))}else if(n.segments.length===t.length){if(!Ms(n.segments,t)||!tm(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!AP(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Ms(n.segments,i)||!tm(n.segments,i,r)||!n.children[Ee]?!1:PP(n.children[Ee],e,o,r)}}function tm(n,e,t){return e.every((r,i)=>SP[t](n[i].parameters,r.parameters))}var xi=class{constructor(e=new qe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=sc(this.queryParams),this._queryParamMap}toString(){return jz.serialize(this)}},qe=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return nm(this)}},Ss=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=sc(this.parameters),this._parameterMap}toString(){return NP(this)}};function Vz(n,e){return Ms(n,e)&&n.every((t,r)=>$r(t.parameters,e[r].parameters))}function Ms(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function Lz(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Ee&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Ee&&(t=t.concat(e(i,r)))}),t}var Nl=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:()=>new ac,providedIn:"root"})}}return n})(),ac=class{parse(e){let t=new eC(e);return new xi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${_l(e.root,!0)}`,r=$z(e.queryParams),i=typeof e.fragment=="string"?`#${Bz(e.fragment)}`:"";return`${t}${r}${i}`}},jz=new ac;function nm(n){return n.segments.map(e=>NP(e)).join("/")}function _l(n,e){if(!n.hasChildren())return nm(n);if(e){let t=n.children[Ee]?_l(n.children[Ee],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==Ee&&r.push(`${i}:${_l(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=Lz(n,(r,i)=>i===Ee?[_l(n.children[Ee],!1)]:[`${i}:${_l(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Ee]!=null?`${nm(n)}/${t[0]}`:`${nm(n)}/(${t.join("//")})`}}function RP(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Jp(n){return RP(n).replace(/%3B/gi,";")}function Bz(n){return encodeURI(n)}function Jw(n){return RP(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rm(n){return decodeURIComponent(n)}function yP(n){return rm(n.replace(/\+/g,"%20"))}function NP(n){return`${Jw(n.path)}${Uz(n.parameters)}`}function Uz(n){return Object.entries(n).map(([e,t])=>`;${Jw(e)}=${Jw(t)}`).join("")}function $z(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Jp(t)}=${Jp(i)}`).join("&"):`${Jp(t)}=${Jp(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var zz=/^[^\/()?;#]+/;function Ww(n){let e=n.match(zz);return e?e[0]:""}var qz=/^[^\/()?;=#]+/;function Hz(n){let e=n.match(qz);return e?e[0]:""}var Gz=/^[^=?&#]+/;function Wz(n){let e=n.match(Gz);return e?e[0]:""}var Kz=/^[^&#]+/;function Qz(n){let e=n.match(Kz);return e?e[0]:""}var eC=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new qe([],{}):new qe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ee]=new qe(e,t)),r}parseSegment(){let e=Ww(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new se(4009,!1);return this.capture(e),new Ss(rm(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Hz(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Ww(this.remaining);i&&(r=i,this.capture(r))}e[rm(t)]=rm(r)}parseQueryParam(e){let t=Wz(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=Qz(this.remaining);s&&(r=s,this.capture(r))}let i=yP(t),o=yP(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Ww(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new se(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Ee);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[Ee]:new qe([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new se(4011,!1)}};function OP(n){return n.segments.length>0?new qe([],{[Ee]:n}):n}function kP(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=kP(i);if(r===Ee&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new qe(n.segments,e);return Yz(t)}function Yz(n){if(n.numberOfChildren===1&&n.children[Ee]){let e=n.children[Ee];return new qe(n.segments.concat(e.segments),e.children)}return n}function As(n){return n instanceof xi}function Zz(n,e,t=null,r=null){let i=FP(n);return VP(i,e,t,r)}function FP(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new qe(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=OP(r);return e??i}function VP(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Kw(i,i,i,t,r);let o=Xz(e);if(o.toRoot())return Kw(i,i,new qe([],{}),t,r);let s=Jz(o,i,n),a=s.processChildren?El(s.segmentGroup,s.index,o.commands):jP(s.segmentGroup,s.index,o.commands);return Kw(i,s.segmentGroup,a,t,r)}function im(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Dl(n){return typeof n=="object"&&n!=null&&n.outlets}function Kw(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let s;n===e?s=t:s=LP(n,e,t);let a=OP(kP(s));return new xi(a,o,i)}function LP(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=LP(o,e,t)}),new qe(n.segments,r)}var om=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&im(r[0]))throw new se(4003,!1);let i=r.find(Dl);if(i&&i!==TP(r))throw new se(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Xz(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new om(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new om(t,e,r)}var rc=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function Jz(n,e,t){if(n.isAbsolute)return new rc(e,!0,0);if(!t)return new rc(e,!1,NaN);if(t.parent===null)return new rc(t,!0,0);let r=im(n.commands[0])?0:1,i=t.segments.length-1+r;return e9(t,i,n.numberOfDoubleDots)}function e9(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new se(4005,!1);i=r.segments.length}return new rc(r,!1,i-o)}function t9(n){return Dl(n[0])?n[0].outlets:{[Ee]:n}}function jP(n,e,t){if(n??=new qe([],{}),n.segments.length===0&&n.hasChildren())return El(n,e,t);let r=n9(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new qe(n.segments.slice(0,r.pathIndex),{});return o.children[Ee]=new qe(n.segments.slice(r.pathIndex),n.children),El(o,0,i)}else return r.match&&i.length===0?new qe(n.segments,{}):r.match&&!n.hasChildren()?tC(n,e,t):r.match?El(n,0,i):tC(n,e,t)}function El(n,e,t){if(t.length===0)return new qe(n.segments,{});{let r=t9(t),i={};if(Object.keys(r).some(o=>o!==Ee)&&n.children[Ee]&&n.numberOfChildren===1&&n.children[Ee].segments.length===0){let o=El(n.children[Ee],e,t);return new qe(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=jP(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new qe(n.segments,i)}}function n9(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Dl(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!_P(c,l,s))return o;r+=2}else{if(!_P(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function tC(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Dl(o)){let c=r9(o.outlets);return new qe(r,c)}if(i===0&&im(t[0])){let c=n.segments[e];r.push(new Ss(c.path,vP(t[0]))),i++;continue}let s=Dl(o)?o.outlets[Ee]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&im(a)?(r.push(new Ss(s,vP(a))),i+=2):(r.push(new Ss(s,{})),i++)}return new qe(r,{})}function r9(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=tC(new qe([],{}),0,r))}),e}function vP(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function _P(n,e,t){return n==t.path&&$r(e,t.parameters)}var Il="imperative",Ht=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Ht||{}),ir=class{constructor(e,t){this.id=e,this.url=t}},cc=class extends ir{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Ht.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ir=class extends ir{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Ht.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Un=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Un||{}),sm=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(sm||{}),Di=class extends ir{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Ht.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},go=class extends ir{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Ht.NavigationSkipped}},xl=class extends ir{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Ht.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},am=class extends ir{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ht.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nC=class extends ir{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ht.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rC=class extends ir{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Ht.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},iC=class extends ir{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ht.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},oC=class extends ir{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ht.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sC=class{constructor(e){this.route=e,this.type=Ht.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},aC=class{constructor(e){this.route=e,this.type=Ht.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},cC=class{constructor(e){this.snapshot=e,this.type=Ht.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},uC=class{constructor(e){this.snapshot=e,this.type=Ht.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},lC=class{constructor(e){this.snapshot=e,this.type=Ht.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dC=class{constructor(e){this.snapshot=e,this.type=Ht.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},cm=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=Ht.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Tl=class{},uc=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function i9(n,e){return n.providers&&!n._injector&&(n._injector=Sp(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Er(n){return n.outlet||Ee}function o9(n,e){let t=n.filter(r=>Er(r)===e);return t.push(...n.filter(r=>Er(r)!==e)),t}function Ol(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var hC=class{get injector(){return Ol(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new kl(this.rootInjector),this.attachRef=null}},kl=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new hC(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(K(Dn))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),um=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=fC(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=fC(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=pC(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return pC(e,this._root).map(t=>t.value)}};function fC(n,e){if(n===e.value)return e;for(let t of e.children){let r=fC(n,t);if(r)return r}return null}function pC(n,e){if(n===e.value)return[e];for(let t of e.children){let r=pC(n,t);if(r.length)return r.unshift(e),r}return[]}var Bn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function nc(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var lm=class extends um{constructor(e,t){super(e),this.snapshot=t,IC(this,e)}toString(){return this.snapshot.toString()}};function BP(n){let e=s9(n),t=new It([new Ss("",{})]),r=new It({}),i=new It({}),o=new It({}),s=new It(""),a=new Ti(t,r,o,s,i,Ee,n,e.root);return a.snapshot=e.root,new lm(new Bn(a,[]),e)}function s9(n){let e={},t={},r={},i="",o=new ic([],e,r,i,t,Ee,n,null,{});return new hm("",new Bn(o,[]))}var Ti=class{constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(oe(l=>l[Rl]))??ue(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(oe(e=>sc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(oe(e=>sc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function dm(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:Q(Q({},e.params),n.params),data:Q(Q({},e.data),n.data),resolve:Q(Q(Q(Q({},n.data),e.data),i?.data),n._resolvedData)}:r={params:Q({},n.params),data:Q({},n.data),resolve:Q(Q({},n.data),n._resolvedData??{})},i&&$P(i)&&(r.resolve[Rl]=i.title),r}var ic=class{get title(){return this.data?.[Rl]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=sc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=sc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},hm=class extends um{constructor(e,t){super(t),this.url=e,IC(this,t)}toString(){return UP(this._root)}};function IC(n,e){e.value._routerState=n,e.children.forEach(t=>IC(n,t))}function UP(n){let e=n.children.length>0?` { ${n.children.map(UP).join(", ")} } `:"";return`${n.value}${e}`}function Qw(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,$r(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),$r(e.params,t.params)||n.paramsSubject.next(t.params),Nz(e.url,t.url)||n.urlSubject.next(t.url),$r(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function mC(n,e){let t=$r(n.params,e.params)&&Vz(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||mC(n.parent,e.parent))}function $P(n){return typeof n.title=="string"||n.title===null}var bC=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ee,this.activateEvents=new He,this.deactivateEvents=new He,this.attachEvents=new He,this.detachEvents=new He,this.parentContexts=H(kl),this.location=H(so),this.changeDetector=H(uo),this.inputBinder=H(ym,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new se(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new se(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new se(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new se(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new gC(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=_t({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Xn]})}}return n})(),gC=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ti?this.route:e===kl?this.childContexts:this.parent.get(e,t)}},ym=new X(""),wP=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Bu([r.queryParams,r.params,r.data]).pipe(st(([o,s,a],c)=>(a=Q(Q(Q({},o),s),a),c===0?ue(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=DA(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})();function a9(n,e,t){let r=Sl(n,e._root,t?t._root:void 0);return new lm(r,e)}function Sl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=c9(n,e,t);return new Bn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Sl(n,a)),s}}let r=u9(e.value),i=e.children.map(o=>Sl(n,o));return new Bn(r,i)}}function c9(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Sl(n,r,i);return Sl(n,r)})}function u9(n){return new Ti(new It(n.url),new It(n.params),new It(n.queryParams),new It(n.fragment),new It(n.data),n.outlet,n.component,n)}var Ml=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},zP="ngNavigationCancelingError";function fm(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=As(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=qP(!1,Un.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function qP(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[zP]=!0,t.cancellationCode=e,t}function l9(n){return HP(n)&&As(n.url)}function HP(n){return!!n&&n[zP]}var d9=(n,e,t,r)=>oe(i=>(new yC(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),yC=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Qw(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=nc(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=nc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=nc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=nc(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new dC(o.value.snapshot))}),e.children.length&&this.forwardEvent(new uC(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Qw(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Qw(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},pm=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},oc=class{constructor(e,t){this.component=e,this.route=t}};function h9(n,e,t){let r=n._root,i=e?e._root:null;return wl(r,i,t,[r.value])}function f9(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function hc(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!jS(n)?n:e.get(n):r}function wl(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=nc(e);return n.children.forEach(s=>{p9(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>bl(a,t.getContext(s),i)),i}function p9(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=m9(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new pm(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?wl(n,e,a?a.children:null,r,i):wl(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new oc(a.outlet.component,s))}else s&&bl(e,a,i),i.canActivateChecks.push(new pm(r)),o.component?wl(n,null,a?a.children:null,r,i):wl(n,null,t,r,i);return i}function m9(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ms(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ms(n.url,e.url)||!$r(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!mC(n,e)||!$r(n.queryParams,e.queryParams);case"paramsChange":default:return!mC(n,e)}}function bl(n,e,t){let r=nc(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?bl(s,e.children.getContext(o),t):bl(s,null,t):bl(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new oc(e.outlet.component,i)):t.canDeactivateChecks.push(new oc(null,i)):t.canDeactivateChecks.push(new oc(null,i))}function Fl(n){return typeof n=="function"}function g9(n){return typeof n=="boolean"}function y9(n){return n&&Fl(n.canLoad)}function v9(n){return n&&Fl(n.canActivate)}function _9(n){return n&&Fl(n.canActivateChild)}function w9(n){return n&&Fl(n.canDeactivate)}function C9(n){return n&&Fl(n.canMatch)}function GP(n){return n instanceof ai||n?.name==="EmptyError"}var em=Symbol("INITIAL_VALUE");function lc(){return st(n=>Bu(n.map(e=>e.pipe(ui(1),di(em)))).pipe(oe(e=>{for(let t of e)if(t!==!0){if(t===em)return em;if(t===!1||E9(t))return t}return!0}),Mt(e=>e!==em),ui(1)))}function E9(n){return As(n)||n instanceof Ml}function I9(n,e){return St(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ue(ve(Q({},t),{guardsResult:!0})):b9(s,r,i,n).pipe(St(a=>a&&g9(a)?D9(r,o,n,e):ue(a)),oe(a=>ve(Q({},t),{guardsResult:a})))})}function b9(n,e,t,r){return Te(n).pipe(St(i=>A9(i.component,i.route,t,e,r)),Kn(i=>i!==!0,!0))}function D9(n,e,t,r){return Te(e).pipe(ci(i=>Ia(T9(i.route.parent,r),x9(i.route,r),M9(n,i.path,t),S9(n,i.route,t))),Kn(i=>i!==!0,!0))}function x9(n,e){return n!==null&&e&&e(new lC(n)),ue(!0)}function T9(n,e){return n!==null&&e&&e(new cC(n)),ue(!0)}function S9(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ue(!0);let i=r.map(o=>mf(()=>{let s=Ol(e)??t,a=hc(o,s),c=v9(a)?a.canActivate(e,n):Zn(s,()=>a(e,n));return yo(c).pipe(Kn())}));return ue(i).pipe(lc())}function M9(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>f9(s)).filter(s=>s!==null).map(s=>mf(()=>{let a=s.guards.map(c=>{let l=Ol(s.node)??t,d=hc(c,l),h=_9(d)?d.canActivateChild(r,n):Zn(l,()=>d(r,n));return yo(h).pipe(Kn())});return ue(a).pipe(lc())}));return ue(o).pipe(lc())}function A9(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ue(!0);let s=o.map(a=>{let c=Ol(e)??i,l=hc(a,c),d=w9(l)?l.canDeactivate(n,e,t,r):Zn(c,()=>l(n,e,t,r));return yo(d).pipe(Kn())});return ue(s).pipe(lc())}function P9(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ue(!0);let o=i.map(s=>{let a=hc(s,n),c=y9(a)?a.canLoad(e,t):Zn(n,()=>a(e,t));return yo(c)});return ue(o).pipe(lc(),WP(r))}function WP(n){return e0(At(e=>{if(typeof e!="boolean")throw fm(n,e)}),oe(e=>e===!0))}function R9(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ue(!0);let o=i.map(s=>{let a=hc(s,n),c=C9(a)?a.canMatch(e,t):Zn(n,()=>a(e,t));return yo(c)});return ue(o).pipe(lc(),WP(r))}var Al=class{constructor(e){this.segmentGroup=e||null}},Pl=class extends Error{constructor(e){super(),this.urlTree=e}};function tc(n){return Ea(new Al(n))}function N9(n){return Ea(new se(4e3,!1))}function O9(n){return Ea(qP(!1,Un.GuardRejected))}var vC=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ue(r);if(i.numberOfChildren>1||!i.children[Ee])return N9(`${e.redirectTo}`);i=i.children[Ee]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:d,url:h,outlet:p,params:g,data:y,title:E}=i,w=Zn(o,()=>a({params:g,data:y,queryParams:c,fragment:l,routeConfig:d,url:h,outlet:p,title:E}));if(w instanceof xi)throw new Pl(w);t=w}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Pl(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new xi(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new qe(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new se(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},_C={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function k9(n,e,t,r,i){let o=KP(n,e,t);return o.matched?(r=i9(e,r),R9(r,e,t,i).pipe(oe(s=>s===!0?o:Q({},_C)))):ue(o)}function KP(n,e,t){if(e.path==="**")return F9(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?Q({},_C):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Rz)(t,n,e);if(!i)return Q({},_C);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?Q(Q({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function F9(n){return{matched:!0,parameters:n.length>0?TP(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function CP(n,e,t,r){return t.length>0&&j9(n,t,r)?{segmentGroup:new qe(e,L9(r,new qe(t,n.children))),slicedSegments:[]}:t.length===0&&B9(n,t,r)?{segmentGroup:new qe(n.segments,V9(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new qe(n.segments,n.children),slicedSegments:t}}function V9(n,e,t,r){let i={};for(let o of t)if(vm(n,e,o)&&!r[Er(o)]){let s=new qe([],{});i[Er(o)]=s}return Q(Q({},r),i)}function L9(n,e){let t={};t[Ee]=e;for(let r of n)if(r.path===""&&Er(r)!==Ee){let i=new qe([],{});t[Er(r)]=i}return t}function j9(n,e,t){return t.some(r=>vm(n,e,r)&&Er(r)!==Ee)}function B9(n,e,t){return t.some(r=>vm(n,e,r))}function vm(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function U9(n,e,t){return e.length===0&&!n.children[t]}var wC=class{};function $9(n,e,t,r,i,o,s="emptyOnly"){return new CC(n,e,t,r,i,s,o).recognize()}var z9=31,CC=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new vC(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new se(4002,`'${e.segmentGroup}'`)}recognize(){let e=CP(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(oe(({children:t,rootSnapshot:r})=>{let i=new Bn(r,t),o=new hm("",i),s=Zz(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new ic([],Object.freeze({}),Object.freeze(Q({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Ee,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Ee,t).pipe(oe(r=>({children:r,rootSnapshot:t})),Qi(r=>{if(r instanceof Pl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Al?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(oe(s=>s instanceof Bn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Te(o).pipe(ci(s=>{let a=r.children[s],c=o9(t,s);return this.processSegmentGroup(e,c,a,s,i)}),li((s,a)=>(s.push(...a),s)),Yi(null),d0(),St(s=>{if(s===null)return tc(r);let a=QP(s);return q9(a),ue(a)}))}processSegment(e,t,r,i,o,s,a){return Te(t).pipe(ci(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(Qi(l=>{if(l instanceof Al)return ue(null);throw l}))),Kn(c=>!!c),Qi(c=>{if(GP(c))return U9(r,i,o)?ue(new wC):tc(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return Er(r)!==s&&(s===Ee||!vm(i,o,r))?tc(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):tc(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:h,remainingSegments:p}=KP(t,i,o);if(!c)return tc(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>z9&&(this.allowRedirects=!1));let g=new ic(o,l,Object.freeze(Q({},this.urlTree.queryParams)),this.urlTree.fragment,EP(i),Er(i),i.component??i._loadedComponent??null,i,IP(i)),y=dm(g,a,this.paramsInheritanceStrategy);g.params=Object.freeze(y.params),g.data=Object.freeze(y.data);let E=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,h,g,e);return this.applyRedirects.lineralizeSegments(i,E).pipe(St(w=>this.processSegment(e,r,t,w.concat(p),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=k9(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(st(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(st(({routes:l})=>{let d=r._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:g}=c,y=new ic(p,h,Object.freeze(Q({},this.urlTree.queryParams)),this.urlTree.fragment,EP(r),Er(r),r.component??r._loadedComponent??null,r,IP(r)),E=dm(y,s,this.paramsInheritanceStrategy);y.params=Object.freeze(E.params),y.data=Object.freeze(E.data);let{segmentGroup:w,slicedSegments:T}=CP(t,p,g,l);if(T.length===0&&w.hasChildren())return this.processChildren(d,l,w,y).pipe(oe(P=>new Bn(y,P)));if(l.length===0&&T.length===0)return ue(new Bn(y,[]));let O=Er(r)===o;return this.processSegment(d,l,w,T,O?Ee:o,!0,y).pipe(oe(P=>new Bn(y,P instanceof Bn?[P]:[])))}))):tc(t)))}getChildConfig(e,t,r){return t.children?ue({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ue({routes:t._loadedRoutes,injector:t._loadedInjector}):P9(e,t,r,this.urlSerializer).pipe(St(i=>i?this.configLoader.loadChildren(e,t).pipe(At(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):O9(t))):ue({routes:[],injector:e})}};function q9(n){n.sort((e,t)=>e.value.outlet===Ee?-1:t.value.outlet===Ee?1:e.value.outlet.localeCompare(t.value.outlet))}function H9(n){let e=n.value.routeConfig;return e&&e.path===""}function QP(n){let e=[],t=new Set;for(let r of n){if(!H9(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=QP(r.children);e.push(new Bn(r.value,i))}return e.filter(r=>!t.has(r))}function EP(n){return n.data||{}}function IP(n){return n.resolve||{}}function G9(n,e,t,r,i,o){return St(s=>$9(n,e,t,r,s.extractedUrl,i,o).pipe(oe(({state:a,tree:c})=>ve(Q({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function W9(n,e){return St(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ue(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of YP(c))s.add(l);let a=0;return Te(s).pipe(ci(c=>o.has(c)?K9(c,r,n,e):(c.data=dm(c,c.parent,n).resolve,ue(void 0))),At(()=>a++),ba(1),St(c=>a===s.size?ue(t):Cn))})}function YP(n){let e=n.children.map(t=>YP(t)).flat();return[n,...e]}function K9(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!$P(i)&&(o[Rl]=i.title),Q9(o,n,e,r).pipe(oe(s=>(n._resolvedData=s,n.data=dm(n,n.parent,t).resolve,null)))}function Q9(n,e,t,r){let i=Xw(n);if(i.length===0)return ue({});let o={};return Te(i).pipe(St(s=>Y9(n[s],e,t,r).pipe(Kn(),At(a=>{if(a instanceof Ml)throw fm(new ac,a);o[s]=a}))),ba(1),u0(o),Qi(s=>GP(s)?Cn:Ea(s)))}function Y9(n,e,t,r){let i=Ol(e)??r,o=hc(n,i),s=o.resolve?o.resolve(e,t):Zn(i,()=>o(e,t));return yo(s)}function Yw(n){return st(e=>{let t=n(e);return t?Te(t).pipe(oe(()=>e)):ue(e)})}var ZP=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Ee);return r}getResolvedTitleForRoute(t){return t.data[Rl]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:()=>H(Z9),providedIn:"root"})}}return n})(),Z9=(()=>{class n extends ZP{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(K(pP))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Vl=new X("",{providedIn:"root",factory:()=>({})}),X9=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Rt({type:n,selectors:[["ng-component"]],standalone:!0,features:[dA],decls:1,vars:0,template:function(r,i){r&1&&ce(0,"router-outlet")},dependencies:[bC],encapsulation:2})}}return n})();function DC(n){let e=n.children&&n.children.map(DC),t=e?ve(Q({},n),{children:e}):Q({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ee&&(t.component=X9),t}var mm=new X(""),xC=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=H(Up)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ue(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=yo(t.loadComponent()).pipe(oe(XP),At(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Zi(()=>{this.componentLoaders.delete(t)})),i=new va(r,()=>new ze).pipe(ya());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ue({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=J9(r,this.compiler,t,this.onLoadEndListener).pipe(Zi(()=>{this.childrenLoaders.delete(r)})),s=new va(o,()=>new ze).pipe(ya());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function J9(n,e,t,r){return yo(n.loadChildren()).pipe(oe(XP),St(i=>i instanceof Xu||Array.isArray(i)?ue(i):Te(e.compileModuleAsync(i))),oe(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(mm,[],{optional:!0,self:!0}).flat()),{routes:s.map(DC),injector:o}}))}function e6(n){return n&&typeof n=="object"&&"default"in n}function XP(n){return e6(n)?n.default:n}var TC=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:()=>H(t6),providedIn:"root"})}}return n})(),t6=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),JP=new X(""),eR=new X("");function n6(n,e,t){let r=n.get(eR),i=n.get(hn);return n.get(Oe).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),r6(n))),{onViewTransitionCreated:c}=r;return c&&Zn(n,()=>c({transition:a,from:e,to:t})),s})}function r6(n){return new Promise(e=>{fw({read:()=>setTimeout(e)},{injector:n})})}var i6=new X(""),SC=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ze,this.transitionAbortSubject=new ze,this.configLoader=H(xC),this.environmentInjector=H(Dn),this.urlSerializer=H(Nl),this.rootContexts=H(kl),this.location=H(Za),this.inputBindingEnabled=H(ym,{optional:!0})!==null,this.titleStrategy=H(ZP),this.options=H(Vl,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=H(TC),this.createViewTransition=H(JP,{optional:!0}),this.navigationErrorHandler=H(i6,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ue(void 0),this.rootComponentType=null;let t=i=>this.events.next(new sC(i)),r=i=>this.events.next(new aC(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(ve(Q(Q({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new It({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Il,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Mt(o=>o.id!==0),oe(o=>ve(Q({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),st(o=>{let s=!1,a=!1;return ue(o).pipe(st(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Un.SupersededByNewNavigation),Cn;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?ve(Q({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&d!=="reload"){let h="";return this.events.next(new go(c.id,this.urlSerializer.serialize(c.rawUrl),h,sm.IgnoredSameUrlNavigation)),c.resolve(!1),Cn}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return ue(c).pipe(st(h=>{let p=this.transitions?.getValue();return this.events.next(new cc(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),p!==this.transitions?.getValue()?Cn:Promise.resolve(h)}),G9(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),At(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=ve(Q({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let p=new am(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:h,extractedUrl:p,source:g,restoredState:y,extras:E}=c,w=new cc(h,this.urlSerializer.serialize(p),g,y);this.events.next(w);let T=BP(this.rootComponentType).snapshot;return this.currentTransition=o=ve(Q({},c),{targetSnapshot:T,urlAfterRedirects:p,extras:ve(Q({},E),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=p,ue(o)}else{let h="";return this.events.next(new go(c.id,this.urlSerializer.serialize(c.extractedUrl),h,sm.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Cn}}),At(c=>{let l=new nC(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),oe(c=>(this.currentTransition=o=ve(Q({},c),{guards:h9(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),I9(this.environmentInjector,c=>this.events.next(c)),At(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw fm(this.urlSerializer,c.guardsResult);let l=new rC(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),Mt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Un.GuardRejected),!1)),Yw(c=>{if(c.guards.canActivateChecks.length)return ue(c).pipe(At(l=>{let d=new iC(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),st(l=>{let d=!1;return ue(l).pipe(W9(this.paramsInheritanceStrategy,this.environmentInjector),At({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",Un.NoDataFromResolver)}}))}),At(l=>{let d=new oC(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),Yw(c=>{let l=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(At(p=>{d.component=p}),oe(()=>{})));for(let p of d.children)h.push(...l(p));return h};return Bu(l(c.targetSnapshot.root)).pipe(Yi(null),ui(1))}),Yw(()=>this.afterPreactivation()),st(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,d=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return d?Te(d).pipe(oe(()=>o)):ue(o)}),oe(c=>{let l=a9(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=ve(Q({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),At(()=>{this.events.next(new Tl)}),d9(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),ui(1),At({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ir(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),Qn(this.transitionAbortSubject.pipe(At(c=>{throw c}))),Zi(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Un.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Qi(c=>{if(a=!0,HP(c))this.events.next(new Di(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),l9(c)?this.events.next(new uc(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let l=new xl(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let d=Zn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(d instanceof Ml){let{message:h,cancellationCode:p}=fm(this.urlSerializer,d);this.events.next(new Di(o.id,this.urlSerializer.serialize(o.extractedUrl),h,p)),this.events.next(new uc(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(l);let h=t.errorHandler(c);o.resolve(!!h)}}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return Cn}))}))}cancelNavigationTransition(t,r,i){let o=new Di(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function o6(n){return n!==Il}var s6=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:()=>H(a6),providedIn:"root"})}}return n})(),EC=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},a6=(()=>{class n extends EC{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Cs(n)))(i||n)}})()}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),tR=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:()=>H(c6),providedIn:"root"})}}return n})(),c6=(()=>{class n extends tR{constructor(){super(...arguments),this.location=H(Za),this.urlSerializer=H(Nl),this.options=H(Vl,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=H(TC),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new xi,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=BP(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof cc)this.stateMemento=this.createStateMemento();else if(t instanceof go)this.rawUrlTree=r.initialUrl;else if(t instanceof am){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Tl?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Di&&(t.code===Un.GuardRejected||t.code===Un.NoDataFromResolver)?this.restoreHistory(r):t instanceof xl?this.restoreHistory(r,!0):t instanceof Ir&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof xi?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=Q(Q({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=Q(Q({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Cs(n)))(i||n)}})()}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Cl=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Cl||{});function nR(n,e){n.events.pipe(Mt(t=>t instanceof Ir||t instanceof Di||t instanceof xl||t instanceof go),oe(t=>t instanceof Ir||t instanceof go?Cl.COMPLETE:(t instanceof Di?t.code===Un.Redirect||t.code===Un.SupersededByNewNavigation:!1)?Cl.REDIRECTING:Cl.FAILED),Mt(t=>t!==Cl.REDIRECTING),ui(1)).subscribe(()=>{e()})}function u6(n){throw n}var l6={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},d6={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},$t=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=H(Fp),this.stateManager=H(tR),this.options=H(Vl,{optional:!0})||{},this.pendingTasks=H(_i),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=H(SC),this.urlSerializer=H(Nl),this.location=H(Za),this.urlHandlingStrategy=H(TC),this._events=new ze,this.errorHandler=this.options.errorHandler||u6,this.navigated=!1,this.routeReuseStrategy=H(s6),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=H(mm,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!H(ym,{optional:!0}),this.eventsSubscription=new gt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Di&&r.code!==Un.Redirect&&r.code!==Un.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ir)this.navigated=!0;else if(r instanceof uc){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=Q({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||o6(i.source)},s);this.scheduleNavigation(a,Il,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}f6(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Il,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=Q({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(DC),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=Q(Q({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let p=i?i.snapshot:this.routerState.snapshot.root;h=FP(p)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),h=this.currentUrlTree.root}return VP(h,t,d,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=As(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Il,null,r)}navigate(t,r={skipLocationChange:!1}){return h6(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=Q({},l6):r===!1?i=Q({},d6):i=r,As(t))return gP(this.currentUrlTree,t,i);let o=this.parseUrl(t);return gP(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((h,p)=>{a=h,c=p});let d=this.pendingTasks.add();return nR(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function h6(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new se(4008,!1)}function f6(n){return!(n instanceof Tl)&&!(n instanceof uc)}var dc=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new ze,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Ir&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(As(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:t1(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:As(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(re($t),re(Ti),K_("tabindex"),re(Cr),re(xn),re(Ii))}}static{this.\u0275dir=_t({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&le("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Ap("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",xs],skipLocationChange:[2,"skipLocationChange","skipLocationChange",xs],replaceUrl:[2,"replaceUrl","replaceUrl",xs],routerLink:"routerLink"},standalone:!0,features:[hw,Xn]})}}return n})(),rR=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new He,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof Ir&&this.update()})}ngAfterContentInit(){ue(this.links.changes,ue(null)).pipe(Or()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Te(t).pipe(Or()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=p6(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static{this.\u0275fac=function(r){return new(r||n)(re($t),re(xn),re(Cr),re(uo),re(dc,8))}}static{this.\u0275dir=_t({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&aA(o,dc,5),r&2){let s;Np(s=Op())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Xn]})}}return n})();function p6(n){return!!n.paths}var gm=class{};var m6=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Mt(t=>t instanceof Ir),ci(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Sp(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Te(i).pipe(Or())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=ue(null);let o=i.pipe(St(s=>s===null?ue(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Te([o,s]).pipe(Or())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(K($t),K(Up),K(Dn),K(gm),K(xC))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),iR=new X(""),g6=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof cc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ir?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof go&&t.code===sm.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof cm&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new cm(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){p1()}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})();function y6(n){return n.routerState.root}function Ll(n,e){return{\u0275kind:n,\u0275providers:e}}function v6(){let n=H(kn);return e=>{let t=n.get(wi);if(e!==t.components[0])return;let r=n.get($t),i=n.get(oR);n.get(MC)===1&&r.initialNavigation(),n.get(sR,null,Se.Optional)?.setUpPreloading(),n.get(iR,null,Se.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var oR=new X("",{factory:()=>new ze}),MC=new X("",{providedIn:"root",factory:()=>1});function _6(){return Ll(2,[{provide:MC,useValue:0},{provide:jp,multi:!0,deps:[kn],useFactory:e=>{let t=e.get(OA,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get($t),o=e.get(oR);nR(i,()=>{r(!0)}),e.get(SC).afterPreactivation=()=>(r(!0),o.closed?ue(void 0):o),i.initialNavigation()}))}}])}function w6(){return Ll(3,[{provide:jp,multi:!0,useFactory:()=>{let e=H($t);return()=>{e.setUpLocationChangeListener()}}},{provide:MC,useValue:2}])}var sR=new X("");function C6(n){return Ll(0,[{provide:sR,useExisting:m6},{provide:gm,useExisting:n}])}function E6(){return Ll(8,[wP,{provide:ym,useExisting:wP}])}function I6(n){let e=[{provide:JP,useValue:n6},{provide:eR,useValue:Q({skipNextTransition:!!n?.skipInitialTransition},n)}];return Ll(9,e)}var bP=new X("ROUTER_FORROOT_GUARD"),b6=[Za,{provide:Nl,useClass:ac},$t,kl,{provide:Ti,useFactory:y6,deps:[$t]},xC,[]],AC=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[b6,[],{provide:mm,multi:!0,useValue:t},{provide:bP,useFactory:S6,deps:[[$t,new za,new A_]]},{provide:Vl,useValue:r||{}},r?.useHash?x6():T6(),D6(),r?.preloadingStrategy?C6(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?M6(r):[],r?.bindToComponentInputs?E6().\u0275providers:[],r?.enableViewTransitions?I6().\u0275providers:[],A6()]}}static forChild(t){return{ngModule:n,providers:[{provide:mm,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(K(bP,8))}}static{this.\u0275mod=vt({type:n})}static{this.\u0275inj=yt({})}}return n})();function D6(){return{provide:iR,useFactory:()=>{let n=H(ec),e=H(Oe),t=H(Vl),r=H(SC),i=H(Nl);return t.scrollOffset&&n.setOffset(t.scrollOffset),new g6(i,r,n,e,t)}}}function x6(){return{provide:Ii,useClass:FA}}function T6(){return{provide:Ii,useClass:Mw}}function S6(n){return"guarded"}function M6(n){return[n.initialNavigation==="disabled"?w6().\u0275providers:[],n.initialNavigation==="enabledBlocking"?_6().\u0275providers:[]]}var DP=new X("");function A6(){return[{provide:DP,useFactory:v6},{provide:Bp,multi:!0,useExisting:DP}]}var $n=class{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){let t=this._partials,r=0;for(let i=0;i<this._n&&i<32;i++){let o=t[i],s=e+o,a=Math.abs(e)<Math.abs(o)?e-(s-o):o-(s-e);a&&(t[r++]=a),e=s}return t[r]=e,this._n=r+1,this}valueOf(){let e=this._partials,t=this._n,r,i,o,s=0;if(t>0){for(s=e[--t];t>0&&(r=s,i=e[--t],s=r+i,o=i-(s-r),!o););t>0&&(o<0&&e[t-1]<0||o>0&&e[t-1]>0)&&(i=o*2,r=s+i,i==r-s&&(s=r))}return s}};function*P6(n){for(let e of n)yield*sT(e)}function fc(n){return Array.from(P6(n))}var R6={value:()=>{}};function cR(){for(var n=0,e=arguments.length,t={},r;n<e;++n){if(!(r=arguments[n]+"")||r in t||/[\s.]/.test(r))throw new Error("illegal type: "+r);t[r]=[]}return new _m(t)}function _m(n){this._=n}function N6(n,e){return n.trim().split(/^|\s+/).map(function(t){var r="",i=t.indexOf(".");if(i>=0&&(r=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}})}_m.prototype=cR.prototype={constructor:_m,on:function(n,e){var t=this._,r=N6(n+"",t),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(n=r[o]).type)&&(i=O6(t[i],n.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(i=(n=r[o]).type)t[i]=aR(t[i],n.name,e);else if(e==null)for(i in t)t[i]=aR(t[i],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new _m(n)},call:function(n,e){if((i=arguments.length-2)>0)for(var t=new Array(i),r=0,i,o;r<i;++r)t[r]=arguments[r+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(o=this._[n],r=0,i=o.length;r<i;++r)o[r].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],i=0,o=r.length;i<o;++i)r[i].value.apply(e,t)}};function O6(n,e){for(var t=0,r=n.length,i;t<r;++t)if((i=n[t]).name===e)return i.value}function aR(n,e,t){for(var r=0,i=n.length;r<i;++r)if(n[r].name===e){n[r]=R6,n=n.slice(0,r).concat(n.slice(r+1));break}return t!=null&&n.push({name:e,value:t}),n}var Bl=cR;var wm="http://www.w3.org/1999/xhtml",PC={svg:"http://www.w3.org/2000/svg",xhtml:wm,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Si(n){var e=n+="",t=e.indexOf(":");return t>=0&&(e=n.slice(0,t))!=="xmlns"&&(n=n.slice(t+1)),PC.hasOwnProperty(e)?{space:PC[e],local:n}:n}function k6(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===wm&&e.documentElement.namespaceURI===wm?e.createElement(n):e.createElementNS(t,n)}}function F6(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function Cm(n){var e=Si(n);return(e.local?F6:k6)(e)}function V6(){}function Ps(n){return n==null?V6:function(){return this.querySelector(n)}}function uR(n){typeof n!="function"&&(n=Ps(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var o=e[i],s=o.length,a=r[i]=new Array(s),c,l,d=0;d<s;++d)(c=o[d])&&(l=n.call(c,c.__data__,d,o))&&("__data__"in c&&(l.__data__=c.__data__),a[d]=l);return new wt(r,this._parents)}function RC(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function L6(){return[]}function Ul(n){return n==null?L6:function(){return this.querySelectorAll(n)}}function j6(n){return function(){return RC(n.apply(this,arguments))}}function lR(n){typeof n=="function"?n=j6(n):n=Ul(n);for(var e=this._groups,t=e.length,r=[],i=[],o=0;o<t;++o)for(var s=e[o],a=s.length,c,l=0;l<a;++l)(c=s[l])&&(r.push(n.call(c,c.__data__,l,s)),i.push(c));return new wt(r,i)}function $l(n){return function(){return this.matches(n)}}function Em(n){return function(e){return e.matches(n)}}var B6=Array.prototype.find;function U6(n){return function(){return B6.call(this.children,n)}}function $6(){return this.firstElementChild}function dR(n){return this.select(n==null?$6:U6(typeof n=="function"?n:Em(n)))}var z6=Array.prototype.filter;function q6(){return Array.from(this.children)}function H6(n){return function(){return z6.call(this.children,n)}}function hR(n){return this.selectAll(n==null?q6:H6(typeof n=="function"?n:Em(n)))}function fR(n){typeof n!="function"&&(n=$l(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var o=e[i],s=o.length,a=r[i]=[],c,l=0;l<s;++l)(c=o[l])&&n.call(c,c.__data__,l,o)&&a.push(c);return new wt(r,this._parents)}function Im(n){return new Array(n.length)}function pR(){return new wt(this._enter||this._groups.map(Im),this._parents)}function zl(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}zl.prototype={constructor:zl,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function mR(n){return function(){return n}}function G6(n,e,t,r,i,o){for(var s=0,a,c=e.length,l=o.length;s<l;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):t[s]=new zl(n,o[s]);for(;s<c;++s)(a=e[s])&&(i[s]=a)}function W6(n,e,t,r,i,o,s){var a,c,l=new Map,d=e.length,h=o.length,p=new Array(d),g;for(a=0;a<d;++a)(c=e[a])&&(p[a]=g=s.call(c,c.__data__,a,e)+"",l.has(g)?i[a]=c:l.set(g,c));for(a=0;a<h;++a)g=s.call(n,o[a],a,o)+"",(c=l.get(g))?(r[a]=c,c.__data__=o[a],l.delete(g)):t[a]=new zl(n,o[a]);for(a=0;a<d;++a)(c=e[a])&&l.get(p[a])===c&&(i[a]=c)}function K6(n){return n.__data__}function gR(n,e){if(!arguments.length)return Array.from(this,K6);var t=e?W6:G6,r=this._parents,i=this._groups;typeof n!="function"&&(n=mR(n));for(var o=i.length,s=new Array(o),a=new Array(o),c=new Array(o),l=0;l<o;++l){var d=r[l],h=i[l],p=h.length,g=Q6(n.call(d,d&&d.__data__,l,r)),y=g.length,E=a[l]=new Array(y),w=s[l]=new Array(y),T=c[l]=new Array(p);t(d,h,E,w,T,g,e);for(var O=0,P=0,B,q;O<y;++O)if(B=E[O]){for(O>=P&&(P=O+1);!(q=w[P])&&++P<y;);B._next=q||null}}return s=new wt(s,r),s._enter=a,s._exit=c,s}function Q6(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function yR(){return new wt(this._exit||this._groups.map(Im),this._parents)}function vR(n,e,t){var r=this.enter(),i=this,o=this.exit();return typeof n=="function"?(r=n(r),r&&(r=r.selection())):r=r.append(n+""),e!=null&&(i=e(i),i&&(i=i.selection())),t==null?o.remove():t(o),r&&i?r.merge(i).order():i}function _R(n){for(var e=n.selection?n.selection():n,t=this._groups,r=e._groups,i=t.length,o=r.length,s=Math.min(i,o),a=new Array(i),c=0;c<s;++c)for(var l=t[c],d=r[c],h=l.length,p=a[c]=new Array(h),g,y=0;y<h;++y)(g=l[y]||d[y])&&(p[y]=g);for(;c<i;++c)a[c]=t[c];return new wt(a,this._parents)}function wR(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var r=n[e],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function CR(n){n||(n=Y6);function e(h,p){return h&&p?n(h.__data__,p.__data__):!h-!p}for(var t=this._groups,r=t.length,i=new Array(r),o=0;o<r;++o){for(var s=t[o],a=s.length,c=i[o]=new Array(a),l,d=0;d<a;++d)(l=s[d])&&(c[d]=l);c.sort(e)}return new wt(i,this._parents).order()}function Y6(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function ER(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function IR(){return Array.from(this)}function bR(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function DR(){let n=0;for(let e of this)++n;return n}function xR(){return!this.node()}function TR(n){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var i=e[t],o=0,s=i.length,a;o<s;++o)(a=i[o])&&n.call(a,a.__data__,o,i);return this}function Z6(n){return function(){this.removeAttribute(n)}}function X6(n){return function(){this.removeAttributeNS(n.space,n.local)}}function J6(n,e){return function(){this.setAttribute(n,e)}}function e8(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function t8(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(n):this.setAttribute(n,t)}}function n8(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function SR(n,e){var t=Si(n);if(arguments.length<2){var r=this.node();return t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}return this.each((e==null?t.local?X6:Z6:typeof e=="function"?t.local?n8:t8:t.local?e8:J6)(t,e))}function bm(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function r8(n){return function(){this.style.removeProperty(n)}}function i8(n,e,t){return function(){this.style.setProperty(n,e,t)}}function o8(n,e,t){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(n):this.style.setProperty(n,r,t)}}function MR(n,e,t){return arguments.length>1?this.each((e==null?r8:typeof e=="function"?o8:i8)(n,e,t??"")):vo(this.node(),n)}function vo(n,e){return n.style.getPropertyValue(e)||bm(n).getComputedStyle(n,null).getPropertyValue(e)}function s8(n){return function(){delete this[n]}}function a8(n,e){return function(){this[n]=e}}function c8(n,e){return function(){var t=e.apply(this,arguments);t==null?delete this[n]:this[n]=t}}function AR(n,e){return arguments.length>1?this.each((e==null?s8:typeof e=="function"?c8:a8)(n,e)):this.node()[n]}function PR(n){return n.trim().split(/^|\s+/)}function NC(n){return n.classList||new RR(n)}function RR(n){this._node=n,this._names=PR(n.getAttribute("class")||"")}RR.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function NR(n,e){for(var t=NC(n),r=-1,i=e.length;++r<i;)t.add(e[r])}function OR(n,e){for(var t=NC(n),r=-1,i=e.length;++r<i;)t.remove(e[r])}function u8(n){return function(){NR(this,n)}}function l8(n){return function(){OR(this,n)}}function d8(n,e){return function(){(e.apply(this,arguments)?NR:OR)(this,n)}}function kR(n,e){var t=PR(n+"");if(arguments.length<2){for(var r=NC(this.node()),i=-1,o=t.length;++i<o;)if(!r.contains(t[i]))return!1;return!0}return this.each((typeof e=="function"?d8:e?u8:l8)(t,e))}function h8(){this.textContent=""}function f8(n){return function(){this.textContent=n}}function p8(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function FR(n){return arguments.length?this.each(n==null?h8:(typeof n=="function"?p8:f8)(n)):this.node().textContent}function m8(){this.innerHTML=""}function g8(n){return function(){this.innerHTML=n}}function y8(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function VR(n){return arguments.length?this.each(n==null?m8:(typeof n=="function"?y8:g8)(n)):this.node().innerHTML}function v8(){this.nextSibling&&this.parentNode.appendChild(this)}function LR(){return this.each(v8)}function _8(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function jR(){return this.each(_8)}function BR(n){var e=typeof n=="function"?n:Cm(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function w8(){return null}function UR(n,e){var t=typeof n=="function"?n:Cm(n),r=e==null?w8:typeof e=="function"?e:Ps(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),r.apply(this,arguments)||null)})}function C8(){var n=this.parentNode;n&&n.removeChild(this)}function $R(){return this.each(C8)}function E8(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function I8(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function zR(n){return this.select(n?I8:E8)}function qR(n){return arguments.length?this.property("__data__",n):this.node().__data__}function b8(n){return function(e){n.call(this,e,this.__data__)}}function D8(n){return n.trim().split(/^|\s+/).map(function(e){var t="",r=e.indexOf(".");return r>=0&&(t=e.slice(r+1),e=e.slice(0,r)),{type:e,name:t}})}function x8(n){return function(){var e=this.__on;if(e){for(var t=0,r=-1,i=e.length,o;t<i;++t)o=e[t],(!n.type||o.type===n.type)&&o.name===n.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function T8(n,e,t){return function(){var r=this.__on,i,o=b8(e);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===n.type&&i.name===n.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=t),i.value=e;return}}this.addEventListener(n.type,o,t),i={type:n.type,name:n.name,value:e,listener:o,options:t},r?r.push(i):this.__on=[i]}}function HR(n,e,t){var r=D8(n+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,l=a.length,d;c<l;++c)for(i=0,d=a[c];i<o;++i)if((s=r[i]).type===d.type&&s.name===d.name)return d.value}return}for(a=e?T8:x8,i=0;i<o;++i)this.each(a(r[i],e,t));return this}function GR(n,e,t){var r=bm(n),i=r.CustomEvent;typeof i=="function"?i=new i(e,t):(i=r.document.createEvent("Event"),t?(i.initEvent(e,t.bubbles,t.cancelable),i.detail=t.detail):i.initEvent(e,!1,!1)),n.dispatchEvent(i)}function S8(n,e){return function(){return GR(this,n,e)}}function M8(n,e){return function(){return GR(this,n,e.apply(this,arguments))}}function WR(n,e){return this.each((typeof e=="function"?M8:S8)(n,e))}function*KR(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var OC=[null];function wt(n,e){this._groups=n,this._parents=e}function QR(){return new wt([[document.documentElement]],OC)}function A8(){return this}wt.prototype=QR.prototype={constructor:wt,select:uR,selectAll:lR,selectChild:dR,selectChildren:hR,filter:fR,data:gR,enter:pR,exit:yR,join:vR,merge:_R,selection:A8,order:wR,sort:CR,call:ER,nodes:IR,node:bR,size:DR,empty:xR,each:TR,attr:SR,style:MR,property:AR,classed:kR,text:FR,html:VR,raise:LR,lower:jR,append:BR,insert:UR,remove:$R,clone:zR,datum:qR,on:HR,dispatch:WR,[Symbol.iterator]:KR};var Mi=QR;function fn(n){return typeof n=="string"?new wt([[document.querySelector(n)]],[document.documentElement]):new wt([[n]],OC)}function YR(n){let e;for(;e=n.sourceEvent;)n=e;return n}function Ai(n,e){if(n=YR(n),e===void 0&&(e=n.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var r=t.createSVGPoint();return r.x=n.clientX,r.y=n.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[n.clientX-i.left-e.clientLeft,n.clientY-i.top-e.clientTop]}}return[n.pageX,n.pageY]}var Dm={capture:!0,passive:!1};function xm(n){n.preventDefault(),n.stopImmediatePropagation()}function kC(n){var e=n.document.documentElement,t=fn(n).on("dragstart.drag",xm,Dm);"onselectstart"in e?t.on("selectstart.drag",xm,Dm):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function FC(n,e){var t=n.document.documentElement,r=fn(n).on("dragstart.drag",null);e&&(r.on("click.drag",xm,Dm),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in t?r.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}function Tm(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function VC(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function Gl(){}var ql=.7,Am=1/ql,pc="\\s*([+-]?\\d+)\\s*",Hl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",zr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",P8=/^#([0-9a-f]{3,8})$/,R8=new RegExp(`^rgb\\(${pc},${pc},${pc}\\)$`),N8=new RegExp(`^rgb\\(${zr},${zr},${zr}\\)$`),O8=new RegExp(`^rgba\\(${pc},${pc},${pc},${Hl}\\)$`),k8=new RegExp(`^rgba\\(${zr},${zr},${zr},${Hl}\\)$`),F8=new RegExp(`^hsl\\(${Hl},${zr},${zr}\\)$`),V8=new RegExp(`^hsla\\(${Hl},${zr},${zr},${Hl}\\)$`),ZR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Tm(Gl,_o,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:XR,formatHex:XR,formatHex8:L8,formatHsl:j8,formatRgb:JR,toString:JR});function XR(){return this.rgb().formatHex()}function L8(){return this.rgb().formatHex8()}function j8(){return oN(this).formatHsl()}function JR(){return this.rgb().formatRgb()}function _o(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=P8.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?eN(e):t===3?new Fn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Sm(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Sm(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=R8.exec(n))?new Fn(e[1],e[2],e[3],1):(e=N8.exec(n))?new Fn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=O8.exec(n))?Sm(e[1],e[2],e[3],e[4]):(e=k8.exec(n))?Sm(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=F8.exec(n))?rN(e[1],e[2]/100,e[3]/100,1):(e=V8.exec(n))?rN(e[1],e[2]/100,e[3]/100,e[4]):ZR.hasOwnProperty(n)?eN(ZR[n]):n==="transparent"?new Fn(NaN,NaN,NaN,0):null}function eN(n){return new Fn(n>>16&255,n>>8&255,n&255,1)}function Sm(n,e,t,r){return r<=0&&(n=e=t=NaN),new Fn(n,e,t,r)}function B8(n){return n instanceof Gl||(n=_o(n)),n?(n=n.rgb(),new Fn(n.r,n.g,n.b,n.opacity)):new Fn}function mc(n,e,t,r){return arguments.length===1?B8(n):new Fn(n,e,t,r??1)}function Fn(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}Tm(Fn,mc,VC(Gl,{brighter(n){return n=n==null?Am:Math.pow(Am,n),new Fn(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?ql:Math.pow(ql,n),new Fn(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Fn(Ns(this.r),Ns(this.g),Ns(this.b),Pm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:tN,formatHex:tN,formatHex8:U8,formatRgb:nN,toString:nN}));function tN(){return`#${Rs(this.r)}${Rs(this.g)}${Rs(this.b)}`}function U8(){return`#${Rs(this.r)}${Rs(this.g)}${Rs(this.b)}${Rs((isNaN(this.opacity)?1:this.opacity)*255)}`}function nN(){let n=Pm(this.opacity);return`${n===1?"rgb(":"rgba("}${Ns(this.r)}, ${Ns(this.g)}, ${Ns(this.b)}${n===1?")":`, ${n})`}`}function Pm(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Ns(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Rs(n){return n=Ns(n),(n<16?"0":"")+n.toString(16)}function rN(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new br(n,e,t,r)}function oN(n){if(n instanceof br)return new br(n.h,n.s,n.l,n.opacity);if(n instanceof Gl||(n=_o(n)),!n)return new br;if(n instanceof br)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),o=Math.max(e,t,r),s=NaN,a=o-i,c=(o+i)/2;return a?(e===o?s=(t-r)/a+(t<r)*6:t===o?s=(r-e)/a+2:s=(e-t)/a+4,a/=c<.5?o+i:2-o-i,s*=60):a=c>0&&c<1?0:s,new br(s,a,c,n.opacity)}function sN(n,e,t,r){return arguments.length===1?oN(n):new br(n,e,t,r??1)}function br(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}Tm(br,sN,VC(Gl,{brighter(n){return n=n==null?Am:Math.pow(Am,n),new br(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?ql:Math.pow(ql,n),new br(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new Fn(LC(n>=240?n-240:n+120,i,r),LC(n,i,r),LC(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new br(iN(this.h),Mm(this.s),Mm(this.l),Pm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let n=Pm(this.opacity);return`${n===1?"hsl(":"hsla("}${iN(this.h)}, ${Mm(this.s)*100}%, ${Mm(this.l)*100}%${n===1?")":`, ${n})`}`}}));function iN(n){return n=(n||0)%360,n<0?n+360:n}function Mm(n){return Math.max(0,Math.min(1,n||0))}function LC(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}function jC(n,e,t,r,i){var o=n*n,s=o*n;return((1-3*n+3*o-s)*e+(4-6*o+3*s)*t+(1+3*n+3*o-3*s)*r+s*i)/6}function aN(n){var e=n.length-1;return function(t){var r=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),i=n[r],o=n[r+1],s=r>0?n[r-1]:2*i-o,a=r<e-1?n[r+2]:2*o-i;return jC((t-r/e)*e,s,i,o,a)}}function cN(n){var e=n.length;return function(t){var r=Math.floor(((t%=1)<0?++t:t)*e),i=n[(r+e-1)%e],o=n[r%e],s=n[(r+1)%e],a=n[(r+2)%e];return jC((t-r/e)*e,i,o,s,a)}}var BC=n=>()=>n;function $8(n,e){return function(t){return n+t*e}}function z8(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function uN(n){return(n=+n)==1?Rm:function(e,t){return t-e?z8(e,t,n):BC(isNaN(e)?t:e)}}function Rm(n,e){var t=e-n;return t?$8(n,t):BC(isNaN(n)?e:n)}var Nm=function n(e){var t=uN(e);function r(i,o){var s=t((i=mc(i)).r,(o=mc(o)).r),a=t(i.g,o.g),c=t(i.b,o.b),l=Rm(i.opacity,o.opacity);return function(d){return i.r=s(d),i.g=a(d),i.b=c(d),i.opacity=l(d),i+""}}return r.gamma=n,r}(1);function lN(n){return function(e){var t=e.length,r=new Array(t),i=new Array(t),o=new Array(t),s,a;for(s=0;s<t;++s)a=mc(e[s]),r[s]=a.r||0,i[s]=a.g||0,o[s]=a.b||0;return r=n(r),i=n(i),o=n(o),a.opacity=1,function(c){return a.r=r(c),a.g=i(c),a.b=o(c),a+""}}}var q8=lN(aN),H8=lN(cN);function or(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var $C=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,UC=new RegExp($C.source,"g");function G8(n){return function(){return n}}function W8(n){return function(e){return n(e)+""}}function zC(n,e){var t=$C.lastIndex=UC.lastIndex=0,r,i,o,s=-1,a=[],c=[];for(n=n+"",e=e+"";(r=$C.exec(n))&&(i=UC.exec(e));)(o=i.index)>t&&(o=e.slice(t,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,c.push({i:s,x:or(r,i)})),t=UC.lastIndex;return t<e.length&&(o=e.slice(t),a[s]?a[s]+=o:a[++s]=o),a.length<2?c[0]?W8(c[0].x):G8(e):(e=c.length,function(l){for(var d=0,h;d<e;++d)a[(h=c[d]).i]=h.x(l);return a.join("")})}var dN=180/Math.PI,Om={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function qC(n,e,t,r,i,o){var s,a,c;return(s=Math.sqrt(n*n+e*e))&&(n/=s,e/=s),(c=n*t+e*r)&&(t-=n*c,r-=e*c),(a=Math.sqrt(t*t+r*r))&&(t/=a,r/=a,c/=a),n*r<e*t&&(n=-n,e=-e,c=-c,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,n)*dN,skewX:Math.atan(c)*dN,scaleX:s,scaleY:a}}var km;function hN(n){let e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?Om:qC(e.a,e.b,e.c,e.d,e.e,e.f)}function fN(n){return n==null?Om:(km||(km=document.createElementNS("http://www.w3.org/2000/svg","g")),km.setAttribute("transform",n),(n=km.transform.baseVal.consolidate())?(n=n.matrix,qC(n.a,n.b,n.c,n.d,n.e,n.f)):Om)}function pN(n,e,t,r){function i(l){return l.length?l.pop()+" ":""}function o(l,d,h,p,g,y){if(l!==h||d!==p){var E=g.push("translate(",null,e,null,t);y.push({i:E-4,x:or(l,h)},{i:E-2,x:or(d,p)})}else(h||p)&&g.push("translate("+h+e+p+t)}function s(l,d,h,p){l!==d?(l-d>180?d+=360:d-l>180&&(l+=360),p.push({i:h.push(i(h)+"rotate(",null,r)-2,x:or(l,d)})):d&&h.push(i(h)+"rotate("+d+r)}function a(l,d,h,p){l!==d?p.push({i:h.push(i(h)+"skewX(",null,r)-2,x:or(l,d)}):d&&h.push(i(h)+"skewX("+d+r)}function c(l,d,h,p,g,y){if(l!==h||d!==p){var E=g.push(i(g)+"scale(",null,",",null,")");y.push({i:E-4,x:or(l,h)},{i:E-2,x:or(d,p)})}else(h!==1||p!==1)&&g.push(i(g)+"scale("+h+","+p+")")}return function(l,d){var h=[],p=[];return l=n(l),d=n(d),o(l.translateX,l.translateY,d.translateX,d.translateY,h,p),s(l.rotate,d.rotate,h,p),a(l.skewX,d.skewX,h,p),c(l.scaleX,l.scaleY,d.scaleX,d.scaleY,h,p),l=d=null,function(g){for(var y=-1,E=p.length,w;++y<E;)h[(w=p[y]).i]=w.x(g);return h.join("")}}}var HC=pN(hN,"px, ","px)","deg)"),GC=pN(fN,", ",")",")");var K8=1e-12;function mN(n){return((n=Math.exp(n))+1/n)/2}function Q8(n){return((n=Math.exp(n))-1/n)/2}function Y8(n){return((n=Math.exp(2*n))-1)/(n+1)}var WC=function n(e,t,r){function i(o,s){var a=o[0],c=o[1],l=o[2],d=s[0],h=s[1],p=s[2],g=d-a,y=h-c,E=g*g+y*y,w,T;if(E<K8)T=Math.log(p/l)/e,w=function(b){return[a+b*g,c+b*y,l*Math.exp(e*b*T)]};else{var O=Math.sqrt(E),P=(p*p-l*l+r*E)/(2*l*t*O),B=(p*p-l*l-r*E)/(2*p*t*O),q=Math.log(Math.sqrt(P*P+1)-P),z=Math.log(Math.sqrt(B*B+1)-B);T=(z-q)/e,w=function(b){var _=b*T,C=mN(q),x=l/(t*O)*(C*Y8(e*_+q)-Q8(q));return[a+x*g,c+x*y,l*C/mN(e*_+q)]}}return w.duration=T*1e3*e/Math.SQRT2,w}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,c=a*a;return n(s,a,c)},i}(Math.SQRT2,2,4);var gc=0,Kl=0,Wl=0,yN=1e3,Fm,Ql,Vm=0,Os=0,Lm=0,Yl=typeof performance=="object"&&performance.now?performance:Date,vN=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Xl(){return Os||(vN(Z8),Os=Yl.now()+Lm)}function Z8(){Os=0}function Zl(){this._call=this._time=this._next=null}Zl.prototype=jm.prototype={constructor:Zl,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?Xl():+t)+(e==null?0:+e),!this._next&&Ql!==this&&(Ql?Ql._next=this:Fm=this,Ql=this),this._call=n,this._time=t,KC()},stop:function(){this._call&&(this._call=null,this._time=1/0,KC())}};function jm(n,e,t){var r=new Zl;return r.restart(n,e,t),r}function _N(){Xl(),++gc;for(var n=Fm,e;n;)(e=Os-n._time)>=0&&n._call.call(void 0,e),n=n._next;--gc}function gN(){Os=(Vm=Yl.now())+Lm,gc=Kl=0;try{_N()}finally{gc=0,J8(),Os=0}}function X8(){var n=Yl.now(),e=n-Vm;e>yN&&(Lm-=e,Vm=n)}function J8(){for(var n,e=Fm,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:Fm=t);Ql=n,KC(r)}function KC(n){if(!gc){Kl&&(Kl=clearTimeout(Kl));var e=n-Os;e>24?(n<1/0&&(Kl=setTimeout(gN,n-Yl.now()-Lm)),Wl&&(Wl=clearInterval(Wl))):(Wl||(Vm=Yl.now(),Wl=setInterval(X8,yN)),gc=1,vN(gN))}}function Bm(n,e,t){var r=new Zl;return e=e==null?0:+e,r.restart(i=>{r.stop(),n(i+e)},e,t),r}var eq=Bl("start","end","cancel","interrupt"),tq=[],EN=0,wN=1,$m=2,Um=3,CN=4,zm=5,Jl=6;function wo(n,e,t,r,i,o){var s=n.__transition;if(!s)n.__transition={};else if(t in s)return;nq(n,t,{name:e,index:r,group:i,on:eq,tween:tq,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:EN})}function ed(n,e){var t=zt(n,e);if(t.state>EN)throw new Error("too late; already scheduled");return t}function Jt(n,e){var t=zt(n,e);if(t.state>Um)throw new Error("too late; already running");return t}function zt(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function nq(n,e,t){var r=n.__transition,i;r[e]=t,t.timer=jm(o,0,t.time);function o(l){t.state=wN,t.timer.restart(s,t.delay,t.time),t.delay<=l&&s(l-t.delay)}function s(l){var d,h,p,g;if(t.state!==wN)return c();for(d in r)if(g=r[d],g.name===t.name){if(g.state===Um)return Bm(s);g.state===CN?(g.state=Jl,g.timer.stop(),g.on.call("interrupt",n,n.__data__,g.index,g.group),delete r[d]):+d<e&&(g.state=Jl,g.timer.stop(),g.on.call("cancel",n,n.__data__,g.index,g.group),delete r[d])}if(Bm(function(){t.state===Um&&(t.state=CN,t.timer.restart(a,t.delay,t.time),a(l))}),t.state=$m,t.on.call("start",n,n.__data__,t.index,t.group),t.state===$m){for(t.state=Um,i=new Array(p=t.tween.length),d=0,h=-1;d<p;++d)(g=t.tween[d].value.call(n,n.__data__,t.index,t.group))&&(i[++h]=g);i.length=h+1}}function a(l){for(var d=l<t.duration?t.ease.call(null,l/t.duration):(t.timer.restart(c),t.state=zm,1),h=-1,p=i.length;++h<p;)i[h].call(n,d);t.state===zm&&(t.on.call("end",n,n.__data__,t.index,t.group),c())}function c(){t.state=Jl,t.timer.stop(),delete r[e];for(var l in r)return;delete n.__transition}}function Co(n,e){var t=n.__transition,r,i,o=!0,s;if(t){e=e==null?null:e+"";for(s in t){if((r=t[s]).name!==e){o=!1;continue}i=r.state>$m&&r.state<zm,r.state=Jl,r.timer.stop(),r.on.call(i?"interrupt":"cancel",n,n.__data__,r.index,r.group),delete t[s]}o&&delete n.__transition}}function IN(n){return this.each(function(){Co(this,n)})}function rq(n,e){var t,r;return function(){var i=Jt(this,n),o=i.tween;if(o!==t){r=t=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function iq(n,e,t){var r,i;if(typeof t!="function")throw new Error;return function(){var o=Jt(this,n),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:e,value:t},c=0,l=i.length;c<l;++c)if(i[c].name===e){i[c]=a;break}c===l&&i.push(a)}o.tween=i}}function bN(n,e){var t=this._id;if(n+="",arguments.length<2){for(var r=zt(this.node(),t).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===n)return s.value;return null}return this.each((e==null?rq:iq)(t,n,e))}function yc(n,e,t){var r=n._id;return n.each(function(){var i=Jt(this,r);(i.value||(i.value={}))[e]=t.apply(this,arguments)}),function(i){return zt(i,r).value[e]}}function qm(n,e){var t;return(typeof e=="number"?or:e instanceof _o?Nm:(t=_o(e))?(e=t,Nm):zC)(n,e)}function oq(n){return function(){this.removeAttribute(n)}}function sq(n){return function(){this.removeAttributeNS(n.space,n.local)}}function aq(n,e,t){var r,i=t+"",o;return function(){var s=this.getAttribute(n);return s===i?null:s===r?o:o=e(r=s,t)}}function cq(n,e,t){var r,i=t+"",o;return function(){var s=this.getAttributeNS(n.space,n.local);return s===i?null:s===r?o:o=e(r=s,t)}}function uq(n,e,t){var r,i,o;return function(){var s,a=t(this),c;return a==null?void this.removeAttribute(n):(s=this.getAttribute(n),c=a+"",s===c?null:s===r&&c===i?o:(i=c,o=e(r=s,a)))}}function lq(n,e,t){var r,i,o;return function(){var s,a=t(this),c;return a==null?void this.removeAttributeNS(n.space,n.local):(s=this.getAttributeNS(n.space,n.local),c=a+"",s===c?null:s===r&&c===i?o:(i=c,o=e(r=s,a)))}}function DN(n,e){var t=Si(n),r=t==="transform"?GC:qm;return this.attrTween(n,typeof e=="function"?(t.local?lq:uq)(t,r,yc(this,"attr."+n,e)):e==null?(t.local?sq:oq)(t):(t.local?cq:aq)(t,r,e))}function dq(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function hq(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function fq(n,e){var t,r;function i(){var o=e.apply(this,arguments);return o!==r&&(t=(r=o)&&hq(n,o)),t}return i._value=e,i}function pq(n,e){var t,r;function i(){var o=e.apply(this,arguments);return o!==r&&(t=(r=o)&&dq(n,o)),t}return i._value=e,i}function xN(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var r=Si(n);return this.tween(t,(r.local?fq:pq)(r,e))}function mq(n,e){return function(){ed(this,n).delay=+e.apply(this,arguments)}}function gq(n,e){return e=+e,function(){ed(this,n).delay=e}}function TN(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?mq:gq)(e,n)):zt(this.node(),e).delay}function yq(n,e){return function(){Jt(this,n).duration=+e.apply(this,arguments)}}function vq(n,e){return e=+e,function(){Jt(this,n).duration=e}}function SN(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?yq:vq)(e,n)):zt(this.node(),e).duration}function _q(n,e){if(typeof e!="function")throw new Error;return function(){Jt(this,n).ease=e}}function MN(n){var e=this._id;return arguments.length?this.each(_q(e,n)):zt(this.node(),e).ease}function wq(n,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;Jt(this,n).ease=t}}function AN(n){if(typeof n!="function")throw new Error;return this.each(wq(this._id,n))}function PN(n){typeof n!="function"&&(n=$l(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var o=e[i],s=o.length,a=r[i]=[],c,l=0;l<s;++l)(c=o[l])&&n.call(c,c.__data__,l,o)&&a.push(c);return new Tn(r,this._parents,this._name,this._id)}function RN(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,r=e.length,i=t.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var c=e[a],l=t[a],d=c.length,h=s[a]=new Array(d),p,g=0;g<d;++g)(p=c[g]||l[g])&&(h[g]=p);for(;a<r;++a)s[a]=e[a];return new Tn(s,this._parents,this._name,this._id)}function Cq(n){return(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function Eq(n,e,t){var r,i,o=Cq(e)?ed:Jt;return function(){var s=o(this,n),a=s.on;a!==r&&(i=(r=a).copy()).on(e,t),s.on=i}}function NN(n,e){var t=this._id;return arguments.length<2?zt(this.node(),t).on.on(n):this.each(Eq(t,n,e))}function Iq(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}function ON(){return this.on("end.remove",Iq(this._id))}function kN(n){var e=this._name,t=this._id;typeof n!="function"&&(n=Ps(n));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],c=a.length,l=o[s]=new Array(c),d,h,p=0;p<c;++p)(d=a[p])&&(h=n.call(d,d.__data__,p,a))&&("__data__"in d&&(h.__data__=d.__data__),l[p]=h,wo(l[p],e,t,p,l,zt(d,t)));return new Tn(o,this._parents,e,t)}function FN(n){var e=this._name,t=this._id;typeof n!="function"&&(n=Ul(n));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var c=r[a],l=c.length,d,h=0;h<l;++h)if(d=c[h]){for(var p=n.call(d,d.__data__,h,c),g,y=zt(d,t),E=0,w=p.length;E<w;++E)(g=p[E])&&wo(g,e,t,E,p,y);o.push(p),s.push(d)}return new Tn(o,s,e,t)}var bq=Mi.prototype.constructor;function VN(){return new bq(this._groups,this._parents)}function Dq(n,e){var t,r,i;return function(){var o=vo(this,n),s=(this.style.removeProperty(n),vo(this,n));return o===s?null:o===t&&s===r?i:i=e(t=o,r=s)}}function LN(n){return function(){this.style.removeProperty(n)}}function xq(n,e,t){var r,i=t+"",o;return function(){var s=vo(this,n);return s===i?null:s===r?o:o=e(r=s,t)}}function Tq(n,e,t){var r,i,o;return function(){var s=vo(this,n),a=t(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(n),vo(this,n))),s===c?null:s===r&&c===i?o:(i=c,o=e(r=s,a))}}function Sq(n,e){var t,r,i,o="style."+e,s="end."+o,a;return function(){var c=Jt(this,n),l=c.on,d=c.value[o]==null?a||(a=LN(e)):void 0;(l!==t||i!==d)&&(r=(t=l).copy()).on(s,i=d),c.on=r}}function jN(n,e,t){var r=(n+="")=="transform"?HC:qm;return e==null?this.styleTween(n,Dq(n,r)).on("end.style."+n,LN(n)):typeof e=="function"?this.styleTween(n,Tq(n,r,yc(this,"style."+n,e))).each(Sq(this._id,n)):this.styleTween(n,xq(n,r,e),t).on("end.style."+n,null)}function Mq(n,e,t){return function(r){this.style.setProperty(n,e.call(this,r),t)}}function Aq(n,e,t){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&Mq(n,s,t)),r}return o._value=e,o}function BN(n,e,t){var r="style."+(n+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Aq(n,e,t??""))}function Pq(n){return function(){this.textContent=n}}function Rq(n){return function(){var e=n(this);this.textContent=e??""}}function UN(n){return this.tween("text",typeof n=="function"?Rq(yc(this,"text",n)):Pq(n==null?"":n+""))}function Nq(n){return function(e){this.textContent=n.call(this,e)}}function Oq(n){var e,t;function r(){var i=n.apply(this,arguments);return i!==t&&(e=(t=i)&&Nq(i)),e}return r._value=n,r}function $N(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,Oq(n))}function zN(){for(var n=this._name,e=this._id,t=Hm(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,c,l=0;l<a;++l)if(c=s[l]){var d=zt(c,e);wo(c,n,t,l,s,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Tn(r,this._parents,n,t)}function qN(){var n,e,t=this,r=t._id,i=t.size();return new Promise(function(o,s){var a={value:s},c={value:function(){--i===0&&o()}};t.each(function(){var l=Jt(this,r),d=l.on;d!==n&&(e=(n=d).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(c)),l.on=e}),i===0&&o()})}var kq=0;function Tn(n,e,t,r){this._groups=n,this._parents=e,this._name=t,this._id=r}function HN(n){return Mi().transition(n)}function Hm(){return++kq}var Pi=Mi.prototype;Tn.prototype=HN.prototype={constructor:Tn,select:kN,selectAll:FN,selectChild:Pi.selectChild,selectChildren:Pi.selectChildren,filter:PN,merge:RN,selection:VN,transition:zN,call:Pi.call,nodes:Pi.nodes,node:Pi.node,size:Pi.size,empty:Pi.empty,each:Pi.each,on:NN,attr:DN,attrTween:xN,style:jN,styleTween:BN,text:UN,textTween:$N,remove:ON,tween:bN,delay:TN,duration:SN,ease:MN,easeVarying:AN,end:qN,[Symbol.iterator]:Pi[Symbol.iterator]};function Gm(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var Fq={time:null,delay:0,duration:250,ease:Gm};function Vq(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}function GN(n){var e,t;n instanceof Tn?(e=n._id,n=n._name):(e=Hm(),(t=Fq).time=Xl(),n=n==null?null:n+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,c,l=0;l<a;++l)(c=s[l])&&wo(c,n,e,l,s,t||Vq(c,e));return new Tn(r,this._parents,n,e)}Mi.prototype.interrupt=IN;Mi.prototype.transition=GN;var{abs:pce,max:mce,min:gce}=Math;function WN(n){return[+n[0],+n[1]]}function Lq(n){return[WN(n[0]),WN(n[1])]}var yce={name:"x",handles:["w","e"].map(QC),input:function(n,e){return n==null?null:[[+n[0],e[0][1]],[+n[1],e[1][1]]]},output:function(n){return n&&[n[0][0],n[1][0]]}},vce={name:"y",handles:["n","s"].map(QC),input:function(n,e){return n==null?null:[[e[0][0],+n[0]],[e[1][0],+n[1]]]},output:function(n){return n&&[n[0][1],n[1][1]]}},_ce={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(QC),input:function(n){return n==null?null:Lq(n)},output:function(n){return n}};function QC(n){return{type:n}}function jq(n){if(!n.ok)throw new Error(n.status+" "+n.statusText);if(!(n.status===204||n.status===205))return n.json()}function YC(n,e){return fetch(n,e).then(jq)}var Ve=1e-6,KN=1e-12,Me=Math.PI,Gt=Me/2,ZC=Me/4,Wt=Me*2,pn=180/Me,nt=Me/180,$e=Math.abs,Wm=Math.atan,Ri=Math.atan2,Ge=Math.cos;var QN=Math.exp;var YN=Math.log;var Ze=Math.sin,ZN=Math.sign||function(n){return n>0?1:n<0?-1:0},zn=Math.sqrt,XN=Math.tan;function JN(n){return n>1?0:n<-1?Me:Math.acos(n)}function Ni(n){return n>1?Gt:n<-1?-Gt:Math.asin(n)}function Kt(){}function Km(n,e){n&&tO.hasOwnProperty(n.type)&&tO[n.type](n,e)}var eO={Feature:function(n,e){Km(n.geometry,e)},FeatureCollection:function(n,e){for(var t=n.features,r=-1,i=t.length;++r<i;)Km(t[r].geometry,e)}},tO={Sphere:function(n,e){e.sphere()},Point:function(n,e){n=n.coordinates,e.point(n[0],n[1],n[2])},MultiPoint:function(n,e){for(var t=n.coordinates,r=-1,i=t.length;++r<i;)n=t[r],e.point(n[0],n[1],n[2])},LineString:function(n,e){XC(n.coordinates,e,0)},MultiLineString:function(n,e){for(var t=n.coordinates,r=-1,i=t.length;++r<i;)XC(t[r],e,0)},Polygon:function(n,e){nO(n.coordinates,e)},MultiPolygon:function(n,e){for(var t=n.coordinates,r=-1,i=t.length;++r<i;)nO(t[r],e)},GeometryCollection:function(n,e){for(var t=n.geometries,r=-1,i=t.length;++r<i;)Km(t[r],e)}};function XC(n,e,t){var r=-1,i=n.length-t,o;for(e.lineStart();++r<i;)o=n[r],e.point(o[0],o[1],o[2]);e.lineEnd()}function nO(n,e){var t=-1,r=n.length;for(e.polygonStart();++t<r;)XC(n[t],e,1);e.polygonEnd()}function Eo(n,e){n&&eO.hasOwnProperty(n.type)?eO[n.type](n,e):Km(n,e)}function td(n){return[Ri(n[1],n[0]),Ni(n[2])]}function qr(n){var e=n[0],t=n[1],r=Ge(t);return[r*Ge(e),r*Ze(e),Ze(t)]}function nd(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function vc(n,e){return[n[1]*e[2]-n[2]*e[1],n[2]*e[0]-n[0]*e[2],n[0]*e[1]-n[1]*e[0]]}function Qm(n,e){n[0]+=e[0],n[1]+=e[1],n[2]+=e[2]}function rd(n,e){return[n[0]*e,n[1]*e,n[2]*e]}function id(n){var e=zn(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=e,n[1]/=e,n[2]/=e}function od(n,e){function t(r,i){return r=n(r,i),e(r[0],r[1])}return n.invert&&e.invert&&(t.invert=function(r,i){return r=e.invert(r,i),r&&n.invert(r[0],r[1])}),t}function JC(n,e){return $e(n)>Me&&(n-=Math.round(n/Wt)*Wt),[n,e]}JC.invert=JC;function eE(n,e,t){return(n%=Wt)?e||t?od(iO(n),oO(e,t)):iO(n):e||t?oO(e,t):JC}function rO(n){return function(e,t){return e+=n,$e(e)>Me&&(e-=Math.round(e/Wt)*Wt),[e,t]}}function iO(n){var e=rO(n);return e.invert=rO(-n),e}function oO(n,e){var t=Ge(n),r=Ze(n),i=Ge(e),o=Ze(e);function s(a,c){var l=Ge(c),d=Ge(a)*l,h=Ze(a)*l,p=Ze(c),g=p*t+d*r;return[Ri(h*i-g*o,d*t-p*r),Ni(g*i+h*o)]}return s.invert=function(a,c){var l=Ge(c),d=Ge(a)*l,h=Ze(a)*l,p=Ze(c),g=p*i-h*o;return[Ri(h*i+p*o,d*t+g*r),Ni(g*t-d*r)]},s}function sO(n){n=eE(n[0]*nt,n[1]*nt,n.length>2?n[2]*nt:0);function e(t){return t=n(t[0]*nt,t[1]*nt),t[0]*=pn,t[1]*=pn,t}return e.invert=function(t){return t=n.invert(t[0]*nt,t[1]*nt),t[0]*=pn,t[1]*=pn,t},e}function cO(n,e,t,r,i,o){if(t){var s=Ge(e),a=Ze(e),c=r*t;i==null?(i=e+r*Wt,o=e-c/2):(i=aO(s,i),o=aO(s,o),(r>0?i<o:i>o)&&(i+=r*Wt));for(var l,d=i;r>0?d>o:d<o;d-=c)l=td([s,-a*Ge(d),-a*Ze(d)]),n.point(l[0],l[1])}}function aO(n,e){e=qr(e),e[0]-=n,id(e);var t=JN(-e[1]);return((-e[2]<0?-t:t)+Wt-Ve)%Wt}function Ym(){var n=[],e;return{point:function(t,r,i){e.push([t,r,i])},lineStart:function(){n.push(e=[])},lineEnd:Kt,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var t=n;return n=[],e=null,t}}}function _c(n,e){return $e(n[0]-e[0])<Ve&&$e(n[1]-e[1])<Ve}function Zm(n,e,t,r){this.x=n,this.z=e,this.o=t,this.e=r,this.v=!1,this.n=this.p=null}function Xm(n,e,t,r,i){var o=[],s=[],a,c;if(n.forEach(function(y){if(!((E=y.length-1)<=0)){var E,w=y[0],T=y[E],O;if(_c(w,T)){if(!w[2]&&!T[2]){for(i.lineStart(),a=0;a<E;++a)i.point((w=y[a])[0],w[1]);i.lineEnd();return}T[0]+=2*Ve}o.push(O=new Zm(w,y,null,!0)),s.push(O.o=new Zm(w,null,O,!1)),o.push(O=new Zm(T,y,null,!1)),s.push(O.o=new Zm(T,null,O,!0))}}),!!o.length){for(s.sort(e),uO(o),uO(s),a=0,c=s.length;a<c;++a)s[a].e=t=!t;for(var l=o[0],d,h;;){for(var p=l,g=!0;p.v;)if((p=p.n)===l)return;d=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(g)for(a=0,c=d.length;a<c;++a)i.point((h=d[a])[0],h[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(g)for(d=p.p.z,a=d.length-1;a>=0;--a)i.point((h=d[a])[0],h[1]);else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,d=p.z,g=!g}while(!p.v);i.lineEnd()}}}function uO(n){if(e=n.length){for(var e,t=0,r=n[0],i;++t<e;)r.n=i=n[t],i.p=r,r=i;r.n=i=n[0],i.p=r}}function tE(n){return $e(n[0])<=Me?n[0]:ZN(n[0])*(($e(n[0])+Me)%Wt-Me)}function lO(n,e){var t=tE(e),r=e[1],i=Ze(r),o=[Ze(t),-Ge(t),0],s=0,a=0,c=new $n;i===1?r=Gt+Ve:i===-1&&(r=-Gt-Ve);for(var l=0,d=n.length;l<d;++l)if(p=(h=n[l]).length)for(var h,p,g=h[p-1],y=tE(g),E=g[1]/2+ZC,w=Ze(E),T=Ge(E),O=0;O<p;++O,y=B,w=z,T=b,g=P){var P=h[O],B=tE(P),q=P[1]/2+ZC,z=Ze(q),b=Ge(q),_=B-y,C=_>=0?1:-1,x=C*_,D=x>Me,M=w*z;if(c.add(Ri(M*C*Ze(x),T*b+M*Ge(x))),s+=D?_+C*Wt:_,D^y>=t^B>=t){var I=vc(qr(g),qr(P));id(I);var N=vc(o,I);id(N);var k=(D^_>=0?-1:1)*Ni(N[2]);(r>k||r===k&&(I[0]||I[1]))&&(a+=D^_>=0?1:-1)}}return(s<-Ve||s<Ve&&c<-KN)^a&1}function Jm(n,e,t,r){return function(i){var o=e(i),s=Ym(),a=e(s),c=!1,l,d,h,p={point:g,lineStart:E,lineEnd:w,polygonStart:function(){p.point=T,p.lineStart=O,p.lineEnd=P,d=[],l=[]},polygonEnd:function(){p.point=g,p.lineStart=E,p.lineEnd=w,d=fc(d);var B=lO(l,r);d.length?(c||(i.polygonStart(),c=!0),Xm(d,Uq,B,t,i)):B&&(c||(i.polygonStart(),c=!0),i.lineStart(),t(null,null,1,i),i.lineEnd()),c&&(i.polygonEnd(),c=!1),d=l=null},sphere:function(){i.polygonStart(),i.lineStart(),t(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function g(B,q){n(B,q)&&i.point(B,q)}function y(B,q){o.point(B,q)}function E(){p.point=y,o.lineStart()}function w(){p.point=g,o.lineEnd()}function T(B,q){h.push([B,q]),a.point(B,q)}function O(){a.lineStart(),h=[]}function P(){T(h[0][0],h[0][1]),a.lineEnd();var B=a.clean(),q=s.result(),z,b=q.length,_,C,x;if(h.pop(),l.push(h),h=null,!!b){if(B&1){if(C=q[0],(_=C.length-1)>0){for(c||(i.polygonStart(),c=!0),i.lineStart(),z=0;z<_;++z)i.point((x=C[z])[0],x[1]);i.lineEnd()}return}b>1&&B&2&&q.push(q.pop().concat(q.shift())),d.push(q.filter(Bq))}}return p}}function Bq(n){return n.length>1}function Uq(n,e){return((n=n.x)[0]<0?n[1]-Gt-Ve:Gt-n[1])-((e=e.x)[0]<0?e[1]-Gt-Ve:Gt-e[1])}var nE=Jm(function(){return!0},$q,qq,[-Me,-Gt]);function $q(n){var e=NaN,t=NaN,r=NaN,i;return{lineStart:function(){n.lineStart(),i=1},point:function(o,s){var a=o>0?Me:-Me,c=$e(o-e);$e(c-Me)<Ve?(n.point(e,t=(t+s)/2>0?Gt:-Gt),n.point(r,t),n.lineEnd(),n.lineStart(),n.point(a,t),n.point(o,t),i=0):r!==a&&c>=Me&&($e(e-r)<Ve&&(e-=r*Ve),$e(o-a)<Ve&&(o-=a*Ve),t=zq(e,t,o,s),n.point(r,t),n.lineEnd(),n.lineStart(),n.point(a,t),i=0),n.point(e=o,t=s),r=a},lineEnd:function(){n.lineEnd(),e=t=NaN},clean:function(){return 2-i}}}function zq(n,e,t,r){var i,o,s=Ze(n-t);return $e(s)>Ve?Wm((Ze(e)*(o=Ge(r))*Ze(t)-Ze(r)*(i=Ge(e))*Ze(n))/(i*o*s)):(e+r)/2}function qq(n,e,t,r){var i;if(n==null)i=t*Gt,r.point(-Me,i),r.point(0,i),r.point(Me,i),r.point(Me,0),r.point(Me,-i),r.point(0,-i),r.point(-Me,-i),r.point(-Me,0),r.point(-Me,i);else if($e(n[0]-e[0])>Ve){var o=n[0]<e[0]?Me:-Me;i=t*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}function dO(n){var e=Ge(n),t=2*nt,r=e>0,i=$e(e)>Ve;function o(d,h,p,g){cO(g,n,t,p,d,h)}function s(d,h){return Ge(d)*Ge(h)>e}function a(d){var h,p,g,y,E;return{lineStart:function(){y=g=!1,E=1},point:function(w,T){var O=[w,T],P,B=s(w,T),q=r?B?0:l(w,T):B?l(w+(w<0?Me:-Me),T):0;if(!h&&(y=g=B)&&d.lineStart(),B!==g&&(P=c(h,O),(!P||_c(h,P)||_c(O,P))&&(O[2]=1)),B!==g)E=0,B?(d.lineStart(),P=c(O,h),d.point(P[0],P[1])):(P=c(h,O),d.point(P[0],P[1],2),d.lineEnd()),h=P;else if(i&&h&&r^B){var z;!(q&p)&&(z=c(O,h,!0))&&(E=0,r?(d.lineStart(),d.point(z[0][0],z[0][1]),d.point(z[1][0],z[1][1]),d.lineEnd()):(d.point(z[1][0],z[1][1]),d.lineEnd(),d.lineStart(),d.point(z[0][0],z[0][1],3)))}B&&(!h||!_c(h,O))&&d.point(O[0],O[1]),h=O,g=B,p=q},lineEnd:function(){g&&d.lineEnd(),h=null},clean:function(){return E|(y&&g)<<1}}}function c(d,h,p){var g=qr(d),y=qr(h),E=[1,0,0],w=vc(g,y),T=nd(w,w),O=w[0],P=T-O*O;if(!P)return!p&&d;var B=e*T/P,q=-e*O/P,z=vc(E,w),b=rd(E,B),_=rd(w,q);Qm(b,_);var C=z,x=nd(b,C),D=nd(C,C),M=x*x-D*(nd(b,b)-1);if(!(M<0)){var I=zn(M),N=rd(C,(-x-I)/D);if(Qm(N,b),N=td(N),!p)return N;var k=d[0],U=h[0],J=d[1],ae=h[1],fe;U<k&&(fe=k,k=U,U=fe);var ye=U-k,Ae=$e(ye-Me)<Ve,Pe=Ae||ye<Ve;if(!Ae&&ae<J&&(fe=J,J=ae,ae=fe),Pe?Ae?J+ae>0^N[1]<($e(N[0]-k)<Ve?J:ae):J<=N[1]&&N[1]<=ae:ye>Me^(k<=N[0]&&N[0]<=U)){var Re=rd(C,(-x+I)/D);return Qm(Re,b),[N,td(Re)]}}}function l(d,h){var p=r?n:Me-n,g=0;return d<-p?g|=1:d>p&&(g|=2),h<-p?g|=4:h>p&&(g|=8),g}return Jm(s,a,o,r?[0,-n]:[-Me,n-Me])}function hO(n,e,t,r,i,o){var s=n[0],a=n[1],c=e[0],l=e[1],d=0,h=1,p=c-s,g=l-a,y;if(y=t-s,!(!p&&y>0)){if(y/=p,p<0){if(y<d)return;y<h&&(h=y)}else if(p>0){if(y>h)return;y>d&&(d=y)}if(y=i-s,!(!p&&y<0)){if(y/=p,p<0){if(y>h)return;y>d&&(d=y)}else if(p>0){if(y<d)return;y<h&&(h=y)}if(y=r-a,!(!g&&y>0)){if(y/=g,g<0){if(y<d)return;y<h&&(h=y)}else if(g>0){if(y>h)return;y>d&&(d=y)}if(y=o-a,!(!g&&y<0)){if(y/=g,g<0){if(y>h)return;y>d&&(d=y)}else if(g>0){if(y<d)return;y<h&&(h=y)}return d>0&&(n[0]=s+d*p,n[1]=a+d*g),h<1&&(e[0]=s+h*p,e[1]=a+h*g),!0}}}}}var sd=1e9,eg=-sd;function rE(n,e,t,r){function i(l,d){return n<=l&&l<=t&&e<=d&&d<=r}function o(l,d,h,p){var g=0,y=0;if(l==null||(g=s(l,h))!==(y=s(d,h))||c(l,d)<0^h>0)do p.point(g===0||g===3?n:t,g>1?r:e);while((g=(g+h+4)%4)!==y);else p.point(d[0],d[1])}function s(l,d){return $e(l[0]-n)<Ve?d>0?0:3:$e(l[0]-t)<Ve?d>0?2:1:$e(l[1]-e)<Ve?d>0?1:0:d>0?3:2}function a(l,d){return c(l.x,d.x)}function c(l,d){var h=s(l,1),p=s(d,1);return h!==p?h-p:h===0?d[1]-l[1]:h===1?l[0]-d[0]:h===2?l[1]-d[1]:d[0]-l[0]}return function(l){var d=l,h=Ym(),p,g,y,E,w,T,O,P,B,q,z,b={point:_,lineStart:M,lineEnd:I,polygonStart:x,polygonEnd:D};function _(k,U){i(k,U)&&d.point(k,U)}function C(){for(var k=0,U=0,J=g.length;U<J;++U)for(var ae=g[U],fe=1,ye=ae.length,Ae=ae[0],Pe,Re,it=Ae[0],ot=Ae[1];fe<ye;++fe)Pe=it,Re=ot,Ae=ae[fe],it=Ae[0],ot=Ae[1],Re<=r?ot>r&&(it-Pe)*(r-Re)>(ot-Re)*(n-Pe)&&++k:ot<=r&&(it-Pe)*(r-Re)<(ot-Re)*(n-Pe)&&--k;return k}function x(){d=h,p=[],g=[],z=!0}function D(){var k=C(),U=z&&k,J=(p=fc(p)).length;(U||J)&&(l.polygonStart(),U&&(l.lineStart(),o(null,null,1,l),l.lineEnd()),J&&Xm(p,a,k,o,l),l.polygonEnd()),d=l,p=g=y=null}function M(){b.point=N,g&&g.push(y=[]),q=!0,B=!1,O=P=NaN}function I(){p&&(N(E,w),T&&B&&h.rejoin(),p.push(h.result())),b.point=_,B&&d.lineEnd()}function N(k,U){var J=i(k,U);if(g&&y.push([k,U]),q)E=k,w=U,T=J,q=!1,J&&(d.lineStart(),d.point(k,U));else if(J&&B)d.point(k,U);else{var ae=[O=Math.max(eg,Math.min(sd,O)),P=Math.max(eg,Math.min(sd,P))],fe=[k=Math.max(eg,Math.min(sd,k)),U=Math.max(eg,Math.min(sd,U))];hO(ae,fe,n,e,t,r)?(B||(d.lineStart(),d.point(ae[0],ae[1])),d.point(fe[0],fe[1]),J||d.lineEnd(),z=!1):J&&(d.lineStart(),d.point(k,U),z=!1)}O=k,P=U,B=J}return b}}var ad=n=>n;var iE=new $n,oE=new $n,fO,pO,sE,aE,Io={point:Kt,lineStart:Kt,lineEnd:Kt,polygonStart:function(){Io.lineStart=Hq,Io.lineEnd=Wq},polygonEnd:function(){Io.lineStart=Io.lineEnd=Io.point=Kt,iE.add($e(oE)),oE=new $n},result:function(){var n=iE/2;return iE=new $n,n}};function Hq(){Io.point=Gq}function Gq(n,e){Io.point=mO,fO=sE=n,pO=aE=e}function mO(n,e){oE.add(aE*n-sE*e),sE=n,aE=e}function Wq(){mO(fO,pO)}var cE=Io;var wc=1/0,tg=wc,cd=-wc,ng=cd,Kq={point:Qq,lineStart:Kt,lineEnd:Kt,polygonStart:Kt,polygonEnd:Kt,result:function(){var n=[[wc,tg],[cd,ng]];return cd=ng=-(tg=wc=1/0),n}};function Qq(n,e){n<wc&&(wc=n),n>cd&&(cd=n),e<tg&&(tg=e),e>ng&&(ng=e)}var Cc=Kq;var uE=0,lE=0,ud=0,rg=0,ig=0,Ec=0,dE=0,hE=0,ld=0,vO,_O,Hr,Gr,Dr={point:ks,lineStart:gO,lineEnd:yO,polygonStart:function(){Dr.lineStart=Xq,Dr.lineEnd=Jq},polygonEnd:function(){Dr.point=ks,Dr.lineStart=gO,Dr.lineEnd=yO},result:function(){var n=ld?[dE/ld,hE/ld]:Ec?[rg/Ec,ig/Ec]:ud?[uE/ud,lE/ud]:[NaN,NaN];return uE=lE=ud=rg=ig=Ec=dE=hE=ld=0,n}};function ks(n,e){uE+=n,lE+=e,++ud}function gO(){Dr.point=Yq}function Yq(n,e){Dr.point=Zq,ks(Hr=n,Gr=e)}function Zq(n,e){var t=n-Hr,r=e-Gr,i=zn(t*t+r*r);rg+=i*(Hr+n)/2,ig+=i*(Gr+e)/2,Ec+=i,ks(Hr=n,Gr=e)}function yO(){Dr.point=ks}function Xq(){Dr.point=eH}function Jq(){wO(vO,_O)}function eH(n,e){Dr.point=wO,ks(vO=Hr=n,_O=Gr=e)}function wO(n,e){var t=n-Hr,r=e-Gr,i=zn(t*t+r*r);rg+=i*(Hr+n)/2,ig+=i*(Gr+e)/2,Ec+=i,i=Gr*n-Hr*e,dE+=i*(Hr+n),hE+=i*(Gr+e),ld+=i*3,ks(Hr=n,Gr=e)}var fE=Dr;function og(n){this._context=n}og.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,e){switch(this._point){case 0:{this._context.moveTo(n,e),this._point=1;break}case 1:{this._context.lineTo(n,e);break}default:{this._context.moveTo(n+this._radius,e),this._context.arc(n,e,this._radius,0,Wt);break}}},result:Kt};var mE=new $n,pE,CO,EO,dd,hd,sg={point:Kt,lineStart:function(){sg.point=tH},lineEnd:function(){pE&&IO(CO,EO),sg.point=Kt},polygonStart:function(){pE=!0},polygonEnd:function(){pE=null},result:function(){var n=+mE;return mE=new $n,n}};function tH(n,e){sg.point=IO,CO=dd=n,EO=hd=e}function IO(n,e){dd-=n,hd-=e,mE.add(zn(dd*dd+hd*hd)),dd=n,hd=e}var gE=sg;var bO,ag,DO,xO,fd=class{constructor(e){this._append=e==null?TO:nH(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,t){switch(this._point){case 0:{this._append`M${e},${t}`,this._point=1;break}case 1:{this._append`L${e},${t}`;break}default:{if(this._append`M${e},${t}`,this._radius!==DO||this._append!==ag){let r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,DO=r,ag=this._append,xO=this._,this._=i}this._+=xO;break}}}result(){let e=this._;return this._="",e.length?e:null}};function TO(n){let e=1;this._+=n[0];for(let t=n.length;e<t;++e)this._+=arguments[e]+n[e]}function nH(n){let e=Math.floor(n);if(!(e>=0))throw new RangeError(`invalid digits: ${n}`);if(e>15)return TO;if(e!==bO){let t=10**e;bO=e,ag=function(i){let o=1;this._+=i[0];for(let s=i.length;o<s;++o)this._+=Math.round(arguments[o]*t)/t+i[o]}}return ag}function yE(n,e){let t=3,r=4.5,i,o;function s(a){return a&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),Eo(a,i(o))),o.result()}return s.area=function(a){return Eo(a,i(cE)),cE.result()},s.measure=function(a){return Eo(a,i(gE)),gE.result()},s.bounds=function(a){return Eo(a,i(Cc)),Cc.result()},s.centroid=function(a){return Eo(a,i(fE)),fE.result()},s.projection=function(a){return arguments.length?(i=a==null?(n=null,ad):(n=a).stream,s):n},s.context=function(a){return arguments.length?(o=a==null?(e=null,new fd(t)):new og(e=a),typeof r!="function"&&o.pointRadius(r),s):e},s.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(o.pointRadius(+a),+a),s):r},s.digits=function(a){if(!arguments.length)return t;if(a==null)t=null;else{let c=Math.floor(a);if(!(c>=0))throw new RangeError(`invalid digits: ${a}`);t=c}return e===null&&(o=new fd(t)),s},s.projection(n).digits(t).context(e)}function pd(n){return function(e){var t=new vE;for(var r in n)t[r]=n[r];return t.stream=e,t}}function vE(){}vE.prototype={constructor:vE,point:function(n,e){this.stream.point(n,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function _E(n,e,t){var r=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),r!=null&&n.clipExtent(null),Eo(t,n.stream(Cc)),e(Cc.result()),r!=null&&n.clipExtent(r),n}function wE(n,e,t){return _E(n,function(r){var i=e[1][0]-e[0][0],o=e[1][1]-e[0][1],s=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),a=+e[0][0]+(i-s*(r[1][0]+r[0][0]))/2,c=+e[0][1]+(o-s*(r[1][1]+r[0][1]))/2;n.scale(150*s).translate([a,c])},t)}function SO(n,e,t){return wE(n,[[0,0],e],t)}function MO(n,e,t){return _E(n,function(r){var i=+e,o=i/(r[1][0]-r[0][0]),s=(i-o*(r[1][0]+r[0][0]))/2,a=-o*r[0][1];n.scale(150*o).translate([s,a])},t)}function AO(n,e,t){return _E(n,function(r){var i=+e,o=i/(r[1][1]-r[0][1]),s=-o*r[0][0],a=(i-o*(r[1][1]+r[0][1]))/2;n.scale(150*o).translate([s,a])},t)}var PO=16,rH=Ge(30*nt);function CE(n,e){return+e?oH(n,e):iH(n)}function iH(n){return pd({point:function(e,t){e=n(e,t),this.stream.point(e[0],e[1])}})}function oH(n,e){function t(r,i,o,s,a,c,l,d,h,p,g,y,E,w){var T=l-r,O=d-i,P=T*T+O*O;if(P>4*e&&E--){var B=s+p,q=a+g,z=c+y,b=zn(B*B+q*q+z*z),_=Ni(z/=b),C=$e($e(z)-1)<Ve||$e(o-h)<Ve?(o+h)/2:Ri(q,B),x=n(C,_),D=x[0],M=x[1],I=D-r,N=M-i,k=O*I-T*N;(k*k/P>e||$e((T*I+O*N)/P-.5)>.3||s*p+a*g+c*y<rH)&&(t(r,i,o,s,a,c,D,M,C,B/=b,q/=b,z,E,w),w.point(D,M),t(D,M,C,B,q,z,l,d,h,p,g,y,E,w))}}return function(r){var i,o,s,a,c,l,d,h,p,g,y,E,w={point:T,lineStart:O,lineEnd:B,polygonStart:function(){r.polygonStart(),w.lineStart=q},polygonEnd:function(){r.polygonEnd(),w.lineStart=O}};function T(_,C){_=n(_,C),r.point(_[0],_[1])}function O(){h=NaN,w.point=P,r.lineStart()}function P(_,C){var x=qr([_,C]),D=n(_,C);t(h,p,d,g,y,E,h=D[0],p=D[1],d=_,g=x[0],y=x[1],E=x[2],PO,r),r.point(h,p)}function B(){w.point=T,r.lineEnd()}function q(){O(),w.point=z,w.lineEnd=b}function z(_,C){P(i=_,C),o=h,s=p,a=g,c=y,l=E,w.point=P}function b(){t(h,p,d,g,y,E,o,s,i,a,c,l,PO,r),w.lineEnd=B,B()}return w}}var sH=pd({point:function(n,e){this.stream.point(n*nt,e*nt)}});function aH(n){return pd({point:function(e,t){var r=n(e,t);return this.stream.point(r[0],r[1])}})}function cH(n,e,t,r,i){function o(s,a){return s*=r,a*=i,[e+n*s,t-n*a]}return o.invert=function(s,a){return[(s-e)/n*r,(t-a)/n*i]},o}function RO(n,e,t,r,i,o){if(!o)return cH(n,e,t,r,i);var s=Ge(o),a=Ze(o),c=s*n,l=a*n,d=s/n,h=a/n,p=(a*t-s*e)/n,g=(a*e+s*t)/n;function y(E,w){return E*=r,w*=i,[c*E-l*w+e,t-l*E-c*w]}return y.invert=function(E,w){return[r*(d*E-h*w+p),i*(g-h*E-d*w)]},y}function EE(n){return uH(function(){return n})()}function uH(n){var e,t=150,r=480,i=250,o=0,s=0,a=0,c=0,l=0,d,h=0,p=1,g=1,y=null,E=nE,w=null,T,O,P,B=ad,q=.5,z,b,_,C,x;function D(k){return _(k[0]*nt,k[1]*nt)}function M(k){return k=_.invert(k[0],k[1]),k&&[k[0]*pn,k[1]*pn]}D.stream=function(k){return C&&x===k?C:C=sH(aH(d)(E(z(B(x=k)))))},D.preclip=function(k){return arguments.length?(E=k,y=void 0,N()):E},D.postclip=function(k){return arguments.length?(B=k,w=T=O=P=null,N()):B},D.clipAngle=function(k){return arguments.length?(E=+k?dO(y=k*nt):(y=null,nE),N()):y*pn},D.clipExtent=function(k){return arguments.length?(B=k==null?(w=T=O=P=null,ad):rE(w=+k[0][0],T=+k[0][1],O=+k[1][0],P=+k[1][1]),N()):w==null?null:[[w,T],[O,P]]},D.scale=function(k){return arguments.length?(t=+k,I()):t},D.translate=function(k){return arguments.length?(r=+k[0],i=+k[1],I()):[r,i]},D.center=function(k){return arguments.length?(o=k[0]%360*nt,s=k[1]%360*nt,I()):[o*pn,s*pn]},D.rotate=function(k){return arguments.length?(a=k[0]%360*nt,c=k[1]%360*nt,l=k.length>2?k[2]%360*nt:0,I()):[a*pn,c*pn,l*pn]},D.angle=function(k){return arguments.length?(h=k%360*nt,I()):h*pn},D.reflectX=function(k){return arguments.length?(p=k?-1:1,I()):p<0},D.reflectY=function(k){return arguments.length?(g=k?-1:1,I()):g<0},D.precision=function(k){return arguments.length?(z=CE(b,q=k*k),N()):zn(q)},D.fitExtent=function(k,U){return wE(D,k,U)},D.fitSize=function(k,U){return SO(D,k,U)},D.fitWidth=function(k,U){return MO(D,k,U)},D.fitHeight=function(k,U){return AO(D,k,U)};function I(){var k=RO(t,0,0,p,g,h).apply(null,e(o,s)),U=RO(t,r-k[0],i-k[1],p,g,h);return d=eE(a,c,l),b=od(e,U),_=od(d,b),z=CE(b,q),N()}function N(){return C=x=null,D}return function(){return e=n.apply(this,arguments),D.invert=e.invert&&M,I()}}function cg(n,e){return[n,YN(XN((Gt+e)/2))]}cg.invert=function(n,e){return[n,2*Wm(QN(e))-Gt]};function IE(){return lH(cg).scale(961/Wt)}function lH(n){var e=EE(n),t=e.center,r=e.scale,i=e.translate,o=e.clipExtent,s=null,a,c,l;e.scale=function(h){return arguments.length?(r(h),d()):r()},e.translate=function(h){return arguments.length?(i(h),d()):i()},e.center=function(h){return arguments.length?(t(h),d()):t()},e.clipExtent=function(h){return arguments.length?(h==null?s=a=c=l=null:(s=+h[0][0],a=+h[0][1],c=+h[1][0],l=+h[1][1]),d()):s==null?null:[[s,a],[c,l]]};function d(){var h=Me*r(),p=e(sO(e.rotate()).invert([0,0]));return o(s==null?[[p[0]-h,p[1]-h],[p[0]+h,p[1]+h]]:n===cg?[[Math.max(p[0]-h,s),a],[Math.min(p[0]+h,c),l]]:[[s,Math.max(p[1]-h,a)],[c,Math.min(p[1]+h,l)]])}return d()}var md=n=>()=>n;function bE(n,{sourceEvent:e,target:t,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function xr(n,e,t){this.k=n,this.x=e,this.y=t}xr.prototype={constructor:xr,scale:function(n){return n===1?this:new xr(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new xr(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var gd=new xr(1,0,0);DE.prototype=xr.prototype;function DE(n){for(;!n.__zoom;)if(!(n=n.parentNode))return gd;return n.__zoom}function ug(n){n.stopImmediatePropagation()}function Ic(n){n.preventDefault(),n.stopImmediatePropagation()}function dH(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function hH(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function NO(){return this.__zoom||gd}function fH(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function pH(){return navigator.maxTouchPoints||"ontouchstart"in this}function mH(n,e,t){var r=n.invertX(e[0][0])-t[0][0],i=n.invertX(e[1][0])-t[1][0],o=n.invertY(e[0][1])-t[0][1],s=n.invertY(e[1][1])-t[1][1];return n.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function xE(){var n=dH,e=hH,t=mH,r=fH,i=pH,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,c=WC,l=Bl("start","zoom","end"),d,h,p,g=500,y=150,E=0,w=10;function T(N){N.property("__zoom",NO).on("wheel.zoom",_,{passive:!1}).on("mousedown.zoom",C).on("dblclick.zoom",x).filter(i).on("touchstart.zoom",D).on("touchmove.zoom",M).on("touchend.zoom touchcancel.zoom",I).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}T.transform=function(N,k,U,J){var ae=N.selection?N.selection():N;ae.property("__zoom",NO),N!==ae?q(N,k,U,J):ae.interrupt().each(function(){z(this,arguments).event(J).start().zoom(null,typeof k=="function"?k.apply(this,arguments):k).end()})},T.scaleBy=function(N,k,U,J){T.scaleTo(N,function(){var ae=this.__zoom.k,fe=typeof k=="function"?k.apply(this,arguments):k;return ae*fe},U,J)},T.scaleTo=function(N,k,U,J){T.transform(N,function(){var ae=e.apply(this,arguments),fe=this.__zoom,ye=U==null?B(ae):typeof U=="function"?U.apply(this,arguments):U,Ae=fe.invert(ye),Pe=typeof k=="function"?k.apply(this,arguments):k;return t(P(O(fe,Pe),ye,Ae),ae,s)},U,J)},T.translateBy=function(N,k,U,J){T.transform(N,function(){return t(this.__zoom.translate(typeof k=="function"?k.apply(this,arguments):k,typeof U=="function"?U.apply(this,arguments):U),e.apply(this,arguments),s)},null,J)},T.translateTo=function(N,k,U,J,ae){T.transform(N,function(){var fe=e.apply(this,arguments),ye=this.__zoom,Ae=J==null?B(fe):typeof J=="function"?J.apply(this,arguments):J;return t(gd.translate(Ae[0],Ae[1]).scale(ye.k).translate(typeof k=="function"?-k.apply(this,arguments):-k,typeof U=="function"?-U.apply(this,arguments):-U),fe,s)},J,ae)};function O(N,k){return k=Math.max(o[0],Math.min(o[1],k)),k===N.k?N:new xr(k,N.x,N.y)}function P(N,k,U){var J=k[0]-U[0]*N.k,ae=k[1]-U[1]*N.k;return J===N.x&&ae===N.y?N:new xr(N.k,J,ae)}function B(N){return[(+N[0][0]+ +N[1][0])/2,(+N[0][1]+ +N[1][1])/2]}function q(N,k,U,J){N.on("start.zoom",function(){z(this,arguments).event(J).start()}).on("interrupt.zoom end.zoom",function(){z(this,arguments).event(J).end()}).tween("zoom",function(){var ae=this,fe=arguments,ye=z(ae,fe).event(J),Ae=e.apply(ae,fe),Pe=U==null?B(Ae):typeof U=="function"?U.apply(ae,fe):U,Re=Math.max(Ae[1][0]-Ae[0][0],Ae[1][1]-Ae[0][1]),it=ae.__zoom,ot=typeof k=="function"?k.apply(ae,fe):k,lr=c(it.invert(Pe).concat(Re/it.k),ot.invert(Pe).concat(Re/ot.k));return function(Zt){if(Zt===1)Zt=ot;else{var dr=lr(Zt),yu=Re/dr[2];Zt=new xr(yu,Pe[0]-dr[0]*yu,Pe[1]-dr[1]*yu)}ye.zoom(null,Zt)}})}function z(N,k,U){return!U&&N.__zooming||new b(N,k)}function b(N,k){this.that=N,this.args=k,this.active=0,this.sourceEvent=null,this.extent=e.apply(N,k),this.taps=0}b.prototype={event:function(N){return N&&(this.sourceEvent=N),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(N,k){return this.mouse&&N!=="mouse"&&(this.mouse[1]=k.invert(this.mouse[0])),this.touch0&&N!=="touch"&&(this.touch0[1]=k.invert(this.touch0[0])),this.touch1&&N!=="touch"&&(this.touch1[1]=k.invert(this.touch1[0])),this.that.__zoom=k,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(N){var k=fn(this.that).datum();l.call(N,this.that,new bE(N,{sourceEvent:this.sourceEvent,target:T,type:N,transform:this.that.__zoom,dispatch:l}),k)}};function _(N,...k){if(!n.apply(this,arguments))return;var U=z(this,k).event(N),J=this.__zoom,ae=Math.max(o[0],Math.min(o[1],J.k*Math.pow(2,r.apply(this,arguments)))),fe=Ai(N);if(U.wheel)(U.mouse[0][0]!==fe[0]||U.mouse[0][1]!==fe[1])&&(U.mouse[1]=J.invert(U.mouse[0]=fe)),clearTimeout(U.wheel);else{if(J.k===ae)return;U.mouse=[fe,J.invert(fe)],Co(this),U.start()}Ic(N),U.wheel=setTimeout(ye,y),U.zoom("mouse",t(P(O(J,ae),U.mouse[0],U.mouse[1]),U.extent,s));function ye(){U.wheel=null,U.end()}}function C(N,...k){if(p||!n.apply(this,arguments))return;var U=N.currentTarget,J=z(this,k,!0).event(N),ae=fn(N.view).on("mousemove.zoom",Pe,!0).on("mouseup.zoom",Re,!0),fe=Ai(N,U),ye=N.clientX,Ae=N.clientY;kC(N.view),ug(N),J.mouse=[fe,this.__zoom.invert(fe)],Co(this),J.start();function Pe(it){if(Ic(it),!J.moved){var ot=it.clientX-ye,lr=it.clientY-Ae;J.moved=ot*ot+lr*lr>E}J.event(it).zoom("mouse",t(P(J.that.__zoom,J.mouse[0]=Ai(it,U),J.mouse[1]),J.extent,s))}function Re(it){ae.on("mousemove.zoom mouseup.zoom",null),FC(it.view,J.moved),Ic(it),J.event(it).end()}}function x(N,...k){if(n.apply(this,arguments)){var U=this.__zoom,J=Ai(N.changedTouches?N.changedTouches[0]:N,this),ae=U.invert(J),fe=U.k*(N.shiftKey?.5:2),ye=t(P(O(U,fe),J,ae),e.apply(this,k),s);Ic(N),a>0?fn(this).transition().duration(a).call(q,ye,J,N):fn(this).call(T.transform,ye,J,N)}}function D(N,...k){if(n.apply(this,arguments)){var U=N.touches,J=U.length,ae=z(this,k,N.changedTouches.length===J).event(N),fe,ye,Ae,Pe;for(ug(N),ye=0;ye<J;++ye)Ae=U[ye],Pe=Ai(Ae,this),Pe=[Pe,this.__zoom.invert(Pe),Ae.identifier],ae.touch0?!ae.touch1&&ae.touch0[2]!==Pe[2]&&(ae.touch1=Pe,ae.taps=0):(ae.touch0=Pe,fe=!0,ae.taps=1+!!d);d&&(d=clearTimeout(d)),fe&&(ae.taps<2&&(h=Pe[0],d=setTimeout(function(){d=null},g)),Co(this),ae.start())}}function M(N,...k){if(this.__zooming){var U=z(this,k).event(N),J=N.changedTouches,ae=J.length,fe,ye,Ae,Pe;for(Ic(N),fe=0;fe<ae;++fe)ye=J[fe],Ae=Ai(ye,this),U.touch0&&U.touch0[2]===ye.identifier?U.touch0[0]=Ae:U.touch1&&U.touch1[2]===ye.identifier&&(U.touch1[0]=Ae);if(ye=U.that.__zoom,U.touch1){var Re=U.touch0[0],it=U.touch0[1],ot=U.touch1[0],lr=U.touch1[1],Zt=(Zt=ot[0]-Re[0])*Zt+(Zt=ot[1]-Re[1])*Zt,dr=(dr=lr[0]-it[0])*dr+(dr=lr[1]-it[1])*dr;ye=O(ye,Math.sqrt(Zt/dr)),Ae=[(Re[0]+ot[0])/2,(Re[1]+ot[1])/2],Pe=[(it[0]+lr[0])/2,(it[1]+lr[1])/2]}else if(U.touch0)Ae=U.touch0[0],Pe=U.touch0[1];else return;U.zoom("touch",t(P(ye,Ae,Pe),U.extent,s))}}function I(N,...k){if(this.__zooming){var U=z(this,k).event(N),J=N.changedTouches,ae=J.length,fe,ye;for(ug(N),p&&clearTimeout(p),p=setTimeout(function(){p=null},g),fe=0;fe<ae;++fe)ye=J[fe],U.touch0&&U.touch0[2]===ye.identifier?delete U.touch0:U.touch1&&U.touch1[2]===ye.identifier&&delete U.touch1;if(U.touch1&&!U.touch0&&(U.touch0=U.touch1,delete U.touch1),U.touch0)U.touch0[1]=this.__zoom.invert(U.touch0[0]);else if(U.end(),U.taps===2&&(ye=Ai(ye,this),Math.hypot(h[0]-ye[0],h[1]-ye[1])<w)){var Ae=fn(this).on("dblclick.zoom");Ae&&Ae.apply(this,arguments)}}}return T.wheelDelta=function(N){return arguments.length?(r=typeof N=="function"?N:md(+N),T):r},T.filter=function(N){return arguments.length?(n=typeof N=="function"?N:md(!!N),T):n},T.touchable=function(N){return arguments.length?(i=typeof N=="function"?N:md(!!N),T):i},T.extent=function(N){return arguments.length?(e=typeof N=="function"?N:md([[+N[0][0],+N[0][1]],[+N[1][0],+N[1][1]]]),T):e},T.scaleExtent=function(N){return arguments.length?(o[0]=+N[0],o[1]=+N[1],T):[o[0],o[1]]},T.translateExtent=function(N){return arguments.length?(s[0][0]=+N[0][0],s[1][0]=+N[1][0],s[0][1]=+N[0][1],s[1][1]=+N[1][1],T):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},T.constrain=function(N){return arguments.length?(t=N,T):t},T.duration=function(N){return arguments.length?(a=+N,T):a},T.interpolate=function(N){return arguments.length?(c=N,T):c},T.on=function(){var N=l.on.apply(l,arguments);return N===l?T:N},T.clickDistance=function(N){return arguments.length?(E=(N=+N)*N,T):Math.sqrt(E)},T.tapDistance=function(N){return arguments.length?(w=+N,T):w},T}function TE(n){return n}function lg(n){if(n==null)return TE;var e,t,r=n.scale[0],i=n.scale[1],o=n.translate[0],s=n.translate[1];return function(a,c){c||(e=t=0);var l=2,d=a.length,h=new Array(d);for(h[0]=(e+=a[0])*r+o,h[1]=(t+=a[1])*i+s;l<d;)h[l]=a[l],++l;return h}}function OO(n,e){for(var t,r=n.length,i=r-e;i<--r;)t=n[i],n[i++]=n[r],n[r]=t}function SE(n,e){return typeof e=="string"&&(e=n.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(t){return kO(n,t)})}:kO(n,e)}function kO(n,e){var t=e.id,r=e.bbox,i=e.properties==null?{}:e.properties,o=ME(n,e);return t==null&&r==null?{type:"Feature",properties:i,geometry:o}:r==null?{type:"Feature",id:t,properties:i,geometry:o}:{type:"Feature",id:t,bbox:r,properties:i,geometry:o}}function ME(n,e){var t=lg(n.transform),r=n.arcs;function i(d,h){h.length&&h.pop();for(var p=r[d<0?~d:d],g=0,y=p.length;g<y;++g)h.push(t(p[g],g));d<0&&OO(h,y)}function o(d){return t(d)}function s(d){for(var h=[],p=0,g=d.length;p<g;++p)i(d[p],h);return h.length<2&&h.push(h[0]),h}function a(d){for(var h=s(d);h.length<4;)h.push(h[0]);return h}function c(d){return d.map(a)}function l(d){var h=d.type,p;switch(h){case"GeometryCollection":return{type:h,geometries:d.geometries.map(l)};case"Point":p=o(d.coordinates);break;case"MultiPoint":p=d.coordinates.map(o);break;case"LineString":p=s(d.arcs);break;case"MultiLineString":p=d.arcs.map(s);break;case"Polygon":p=c(d.arcs);break;case"MultiPolygon":p=d.arcs.map(c);break;default:return null}return{type:h,coordinates:p}}return l(e)}var CH="firebase",EH="10.12.0";Ki(CH,EH,"app");var yd=new mi("ANGULARFIRE2_VERSION");var IH=(n,e)=>{let t=e?[e]:mT(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},vd=class{constructor(){return IH(bH)}},bH="app-check";function AE(){}var FO=class{zone;delegate;constructor(n,e=i0){this.zone=n,this.delegate=e}now(){return this.delegate.now()}schedule(n,e,t){let r=this.zone,i=function(o){r.runGuarded(()=>{n.apply(this,[o])})};return this.delegate.schedule(i,e,t)}},DH=class{zone;task=null;constructor(n){this.zone=n}call(n,e){let t=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",AE,{},AE,AE)),e.pipe(At({next:t,complete:t,error:t})).subscribe(n).add(t)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},hg=class dg{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new FO(Zone.current)),this.insideAngular=t.run(()=>new FO(Zone.current,ju)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||dg)(K(Oe))};static \u0275prov=ne({token:dg,factory:dg.\u0275fac,providedIn:"root"})};function xH(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function mn(n){return TH(xH())(n)}function TH(n){return function(t){return t=t.lift(new DH(n.ngZone)),t.pipe(pr(n.outsideAngular),Wn(n.insideAngular))}}var AH=new Map,PH={activated:!1,tokenObservers:[]},RH={initialized:!1,enabled:!1};function Tr(n){return AH.get(n)||Object.assign({},PH)}function $O(){return RH}var NH="https://content-firebaseappcheck.googleapis.com/v1";var OH="exchangeDebugToken",LO={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},mhe=24*60*60*1e3;var RE=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return V(this,null,function*(){this.stop();try{this.pending=new jv,this.pending.promise.catch(t=>{}),yield kH(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new jv,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function kH(n){return new Promise(e=>{setTimeout(e,n)})}var FH={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},bo=new fT("appCheck","AppCheck",FH);function zO(n){if(!Tr(n).activated)throw bo.create("use-before-activation",{appName:n.name})}function qO(r,i){return V(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let g=yield s.getHeartbeatsHeader();g&&(o["X-Firebase-Client"]=g)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(g){throw bo.create("fetch-network-error",{originalErrorMessage:g?.message})}if(c.status!==200)throw bo.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(g){throw bo.create("fetch-parse-error",{originalErrorMessage:g?.message})}let d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw bo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let h=Number(d[1])*1e3,p=Date.now();return{token:l.token,expireTimeMillis:p+h,issuedAtTimeMillis:p}})}function HO(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${NH}/projects/${t}/apps/${r}:${OH}?key=${i}`,body:{debug_token:e}}}var VH="firebase-app-check-database",LH=1,NE="firebase-app-check-store";var fg=null;function jH(){return fg||(fg=new Promise((n,e)=>{try{let t=indexedDB.open(VH,LH);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(bo.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(NE,{keyPath:"compositeKey"})}}}catch(t){e(bo.create("storage-open",{originalErrorMessage:t?.message}))}}),fg)}function BH(n,e){return UH($H(n),e)}function UH(n,e){return V(this,null,function*(){let r=(yield jH()).transaction(NE,"readwrite"),o=r.objectStore(NE).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(bo.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function $H(n){return`${n.options.appId}-${n.name}`}var OE=new Lh("@firebase/app-check");function PE(n,e){return Vh()?BH(n,e).catch(t=>{OE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function GO(){return $O().enabled}function WO(){return V(this,null,function*(){let n=$O();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var zH={error:"UNKNOWN_ERROR"};function qH(n){return lT.encodeString(JSON.stringify(n),!1)}function kE(n,e=!1){return V(this,null,function*(){let t=n.app;zO(t);let r=Tr(t),i=r.token,o;if(i&&!_d(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(_d(c)?i=c:yield PE(t,void 0))}if(!e&&i&&_d(i))return{token:i.token};let s=!1;if(GO()){r.exchangeTokenPromise||(r.exchangeTokenPromise=qO(HO(t,yield WO()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield PE(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield Tr(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?OE.warn(c.message):OE.error(c),o=c}let a;return i?o?_d(i)?a={token:i.token,internalError:o}:a=BO(o):(a={token:i.token},r.token=i,yield PE(t,i)):a=BO(o),s&&KH(t,a),a})}function HH(n){return V(this,null,function*(){let e=n.app;zO(e);let{provider:t}=Tr(e);if(GO()){let r=yield WO(),{token:i}=yield qO(HO(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function GH(n,e,t,r){let{app:i}=n,o=Tr(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&_d(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),jO(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>jO(n))}function KO(n,e){let t=Tr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function jO(n){let{app:e}=n,t=Tr(e),r=t.tokenRefresher;r||(r=WH(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function WH(n){let{app:e}=n;return new RE(()=>V(this,null,function*(){let t=Tr(e),r;if(t.token?r=yield kE(n,!0):r=yield kE(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Tr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},LO.RETRIAL_MIN_WAIT,LO.RETRIAL_MAX_WAIT)}function KH(n,e){let t=Tr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function _d(n){return n.expireTimeMillis-Date.now()>0}function BO(n){return{token:qH(zH),error:n}}var FE=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Tr(this.app);for(let t of e)KO(this.app,t.next);return Promise.resolve()}};function QH(n,e){return new FE(n,e)}function YH(n){return{getToken:e=>kE(n,e),getLimitedUseToken:()=>HH(n),addTokenListener:e=>GH(n,"INTERNAL",e),removeTokenListener:e=>KO(n.app,e)}}var ZH="@firebase/app-check",XH="0.8.4";var JH="app-check",UO="app-check-internal";function eG(){Nu(new rs(JH,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return QH(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(UO).initialize()})),Nu(new rs(UO,n=>{let e=n.getProvider("app-check").getImmediate();return YH(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ki(ZH,XH)}eG();var nG=["localhost","0.0.0.0","127.0.0.1"],Dhe=typeof window<"u"&&nG.includes(window.location.hostname);var rG="firebase",iG="10.12.0";Pn.registerVersion(rG,iG,"app-compat");var oG=["ngOnDestroy"],ZO=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(oG.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(d=>{let h=d?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,h),h})})})});var XO=class{constructor(n){return n}},bc=new X("angularfire2.app.options"),Dc=new X("angularfire2.app.name");function wd(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=Pn.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Pn.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;sG("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new XO(s)}var sG=(n,...e)=>{$p()&&typeof console<"u"&&console[n](...e)},aG={provide:XO,useFactory:wd,deps:[bc,Oe,[new za,Dc]]},JO=class pg{static initializeApp(t,r){return{ngModule:pg,providers:[{provide:bc,useValue:t},{provide:Dc,useValue:r}]}}constructor(t){Pn.registerVersion("angularfire",yd.full,"core"),Pn.registerVersion("angularfire",yd.full,"app-compat"),Pn.registerVersion("angular",pA.full,t.toString())}static \u0275fac=function(r){return new(r||pg)(K(ln))};static \u0275mod=vt({type:pg});static \u0275inj=yt({providers:[aG]})};function mg(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return cG(i,s)||(YO("error",`${e} was already initialized on the ${t} Firebase App with different settings.${uG?" You may need to reload as Firebase is not HMR aware.":""}`),YO("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function cG(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var uG=typeof module<"u"&&!!module.hot,YO=(n,...e)=>{$p()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var VE=new X("angularfire2.auth.use-emulator"),LE=new X("angularfire2.auth.settings"),jE=new X("angularfire2.auth.tenant-id"),BE=new X("angularfire2.auth.langugage-code"),UE=new X("angularfire2.auth.use-device-language"),$E=new X("angularfire.auth.persistence"),zE=(n,e,t,r,i,o,s,a)=>mg(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[l,d]of Object.entries(s))c.settings[l]=d;return a&&c.setPersistence(a),c},[t,r,i,o,s,a]),ek=class gg{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,c,l,d,h,p,g){let y=new ze,E=ue(void 0).pipe(Wn(s.outsideAngular),st(()=>o.runOutsideAngular(()=>import("./chunk-CPIZ2WB2.js"))),oe(()=>wd(t,o,r)),oe(w=>zE(w,o,a,l,d,h,c,p)),yf({bufferSize:1,refCount:!1}));if(ho(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ue(null);else{E.pipe(Kn()).subscribe();let w=E.pipe(st(P=>P.getRedirectResult().then(B=>B,()=>null)),mn,yf({bufferSize:1,refCount:!1})),T=E.pipe(st(P=>new Ie(B=>({unsubscribe:o.runOutsideAngular(()=>P.onAuthStateChanged(q=>B.next(q),q=>B.error(q),()=>B.complete()))})))),O=E.pipe(st(P=>new Ie(B=>({unsubscribe:o.runOutsideAngular(()=>P.onIdTokenChanged(q=>B.next(q),q=>B.error(q),()=>B.complete()))}))));this.authState=w.pipe(vf(T),pr(s.outsideAngular),Wn(s.insideAngular)),this.user=w.pipe(vf(O),pr(s.outsideAngular),Wn(s.insideAngular)),this.idToken=this.user.pipe(st(P=>P?Te(P.getIdToken()):ue(null))),this.idTokenResult=this.user.pipe(st(P=>P?Te(P.getIdTokenResult()):ue(null))),this.credential=c0(w,y,this.authState.pipe(Mt(P=>!P))).pipe(oe(P=>P?.user?P:null),pr(s.outsideAngular),Wn(s.insideAngular))}return ZO(this,E,o,{spy:{apply:(w,T,O)=>{(w.startsWith("signIn")||w.startsWith("createUser"))&&O.then(P=>y.next(P))}}})}static \u0275fac=function(r){return new(r||gg)(K(bc),K(Dc,8),K(ln),K(Oe),K(hg),K(VE,8),K(LE,8),K(jE,8),K(BE,8),K(UE,8),K($E,8),K(vd,8))};static \u0275prov=ne({token:gg,factory:gg.\u0275fac,providedIn:"any"})};var tk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},nk={};var Do,qE;(function(){var n;function e(b,_){function C(){}C.prototype=_.prototype,b.D=_.prototype,b.prototype=new C,b.prototype.constructor=b,b.C=function(x,D,M){for(var I=Array(arguments.length-2),N=2;N<arguments.length;N++)I[N-2]=arguments[N];return _.prototype[D].apply(x,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,_,C){C||(C=0);var x=Array(16);if(typeof _=="string")for(var D=0;16>D;++D)x[D]=_.charCodeAt(C++)|_.charCodeAt(C++)<<8|_.charCodeAt(C++)<<16|_.charCodeAt(C++)<<24;else for(D=0;16>D;++D)x[D]=_[C++]|_[C++]<<8|_[C++]<<16|_[C++]<<24;_=b.g[0],C=b.g[1],D=b.g[2];var M=b.g[3],I=_+(M^C&(D^M))+x[0]+3614090360&4294967295;_=C+(I<<7&4294967295|I>>>25),I=M+(D^_&(C^D))+x[1]+3905402710&4294967295,M=_+(I<<12&4294967295|I>>>20),I=D+(C^M&(_^C))+x[2]+606105819&4294967295,D=M+(I<<17&4294967295|I>>>15),I=C+(_^D&(M^_))+x[3]+3250441966&4294967295,C=D+(I<<22&4294967295|I>>>10),I=_+(M^C&(D^M))+x[4]+4118548399&4294967295,_=C+(I<<7&4294967295|I>>>25),I=M+(D^_&(C^D))+x[5]+1200080426&4294967295,M=_+(I<<12&4294967295|I>>>20),I=D+(C^M&(_^C))+x[6]+2821735955&4294967295,D=M+(I<<17&4294967295|I>>>15),I=C+(_^D&(M^_))+x[7]+4249261313&4294967295,C=D+(I<<22&4294967295|I>>>10),I=_+(M^C&(D^M))+x[8]+1770035416&4294967295,_=C+(I<<7&4294967295|I>>>25),I=M+(D^_&(C^D))+x[9]+2336552879&4294967295,M=_+(I<<12&4294967295|I>>>20),I=D+(C^M&(_^C))+x[10]+4294925233&4294967295,D=M+(I<<17&4294967295|I>>>15),I=C+(_^D&(M^_))+x[11]+2304563134&4294967295,C=D+(I<<22&4294967295|I>>>10),I=_+(M^C&(D^M))+x[12]+1804603682&4294967295,_=C+(I<<7&4294967295|I>>>25),I=M+(D^_&(C^D))+x[13]+4254626195&4294967295,M=_+(I<<12&4294967295|I>>>20),I=D+(C^M&(_^C))+x[14]+2792965006&4294967295,D=M+(I<<17&4294967295|I>>>15),I=C+(_^D&(M^_))+x[15]+1236535329&4294967295,C=D+(I<<22&4294967295|I>>>10),I=_+(D^M&(C^D))+x[1]+4129170786&4294967295,_=C+(I<<5&4294967295|I>>>27),I=M+(C^D&(_^C))+x[6]+3225465664&4294967295,M=_+(I<<9&4294967295|I>>>23),I=D+(_^C&(M^_))+x[11]+643717713&4294967295,D=M+(I<<14&4294967295|I>>>18),I=C+(M^_&(D^M))+x[0]+3921069994&4294967295,C=D+(I<<20&4294967295|I>>>12),I=_+(D^M&(C^D))+x[5]+3593408605&4294967295,_=C+(I<<5&4294967295|I>>>27),I=M+(C^D&(_^C))+x[10]+38016083&4294967295,M=_+(I<<9&4294967295|I>>>23),I=D+(_^C&(M^_))+x[15]+3634488961&4294967295,D=M+(I<<14&4294967295|I>>>18),I=C+(M^_&(D^M))+x[4]+3889429448&4294967295,C=D+(I<<20&4294967295|I>>>12),I=_+(D^M&(C^D))+x[9]+568446438&4294967295,_=C+(I<<5&4294967295|I>>>27),I=M+(C^D&(_^C))+x[14]+3275163606&4294967295,M=_+(I<<9&4294967295|I>>>23),I=D+(_^C&(M^_))+x[3]+4107603335&4294967295,D=M+(I<<14&4294967295|I>>>18),I=C+(M^_&(D^M))+x[8]+1163531501&4294967295,C=D+(I<<20&4294967295|I>>>12),I=_+(D^M&(C^D))+x[13]+2850285829&4294967295,_=C+(I<<5&4294967295|I>>>27),I=M+(C^D&(_^C))+x[2]+4243563512&4294967295,M=_+(I<<9&4294967295|I>>>23),I=D+(_^C&(M^_))+x[7]+1735328473&4294967295,D=M+(I<<14&4294967295|I>>>18),I=C+(M^_&(D^M))+x[12]+2368359562&4294967295,C=D+(I<<20&4294967295|I>>>12),I=_+(C^D^M)+x[5]+4294588738&4294967295,_=C+(I<<4&4294967295|I>>>28),I=M+(_^C^D)+x[8]+2272392833&4294967295,M=_+(I<<11&4294967295|I>>>21),I=D+(M^_^C)+x[11]+1839030562&4294967295,D=M+(I<<16&4294967295|I>>>16),I=C+(D^M^_)+x[14]+4259657740&4294967295,C=D+(I<<23&4294967295|I>>>9),I=_+(C^D^M)+x[1]+2763975236&4294967295,_=C+(I<<4&4294967295|I>>>28),I=M+(_^C^D)+x[4]+1272893353&4294967295,M=_+(I<<11&4294967295|I>>>21),I=D+(M^_^C)+x[7]+4139469664&4294967295,D=M+(I<<16&4294967295|I>>>16),I=C+(D^M^_)+x[10]+3200236656&4294967295,C=D+(I<<23&4294967295|I>>>9),I=_+(C^D^M)+x[13]+681279174&4294967295,_=C+(I<<4&4294967295|I>>>28),I=M+(_^C^D)+x[0]+3936430074&4294967295,M=_+(I<<11&4294967295|I>>>21),I=D+(M^_^C)+x[3]+3572445317&4294967295,D=M+(I<<16&4294967295|I>>>16),I=C+(D^M^_)+x[6]+76029189&4294967295,C=D+(I<<23&4294967295|I>>>9),I=_+(C^D^M)+x[9]+3654602809&4294967295,_=C+(I<<4&4294967295|I>>>28),I=M+(_^C^D)+x[12]+3873151461&4294967295,M=_+(I<<11&4294967295|I>>>21),I=D+(M^_^C)+x[15]+530742520&4294967295,D=M+(I<<16&4294967295|I>>>16),I=C+(D^M^_)+x[2]+3299628645&4294967295,C=D+(I<<23&4294967295|I>>>9),I=_+(D^(C|~M))+x[0]+4096336452&4294967295,_=C+(I<<6&4294967295|I>>>26),I=M+(C^(_|~D))+x[7]+1126891415&4294967295,M=_+(I<<10&4294967295|I>>>22),I=D+(_^(M|~C))+x[14]+2878612391&4294967295,D=M+(I<<15&4294967295|I>>>17),I=C+(M^(D|~_))+x[5]+4237533241&4294967295,C=D+(I<<21&4294967295|I>>>11),I=_+(D^(C|~M))+x[12]+1700485571&4294967295,_=C+(I<<6&4294967295|I>>>26),I=M+(C^(_|~D))+x[3]+2399980690&4294967295,M=_+(I<<10&4294967295|I>>>22),I=D+(_^(M|~C))+x[10]+4293915773&4294967295,D=M+(I<<15&4294967295|I>>>17),I=C+(M^(D|~_))+x[1]+2240044497&4294967295,C=D+(I<<21&4294967295|I>>>11),I=_+(D^(C|~M))+x[8]+1873313359&4294967295,_=C+(I<<6&4294967295|I>>>26),I=M+(C^(_|~D))+x[15]+4264355552&4294967295,M=_+(I<<10&4294967295|I>>>22),I=D+(_^(M|~C))+x[6]+2734768916&4294967295,D=M+(I<<15&4294967295|I>>>17),I=C+(M^(D|~_))+x[13]+1309151649&4294967295,C=D+(I<<21&4294967295|I>>>11),I=_+(D^(C|~M))+x[4]+4149444226&4294967295,_=C+(I<<6&4294967295|I>>>26),I=M+(C^(_|~D))+x[11]+3174756917&4294967295,M=_+(I<<10&4294967295|I>>>22),I=D+(_^(M|~C))+x[2]+718787259&4294967295,D=M+(I<<15&4294967295|I>>>17),I=C+(M^(D|~_))+x[9]+3951481745&4294967295,b.g[0]=b.g[0]+_&4294967295,b.g[1]=b.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,b.g[2]=b.g[2]+D&4294967295,b.g[3]=b.g[3]+M&4294967295}r.prototype.u=function(b,_){_===void 0&&(_=b.length);for(var C=_-this.blockSize,x=this.B,D=this.h,M=0;M<_;){if(D==0)for(;M<=C;)i(this,b,M),M+=this.blockSize;if(typeof b=="string"){for(;M<_;)if(x[D++]=b.charCodeAt(M++),D==this.blockSize){i(this,x),D=0;break}}else for(;M<_;)if(x[D++]=b[M++],D==this.blockSize){i(this,x),D=0;break}}this.h=D,this.o+=_},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var _=1;_<b.length-8;++_)b[_]=0;var C=8*this.o;for(_=b.length-8;_<b.length;++_)b[_]=C&255,C/=256;for(this.u(b),b=Array(16),_=C=0;4>_;++_)for(var x=0;32>x;x+=8)b[C++]=this.g[_]>>>x&255;return b};function o(b,_){var C=a;return Object.prototype.hasOwnProperty.call(C,b)?C[b]:C[b]=_(b)}function s(b,_){this.h=_;for(var C=[],x=!0,D=b.length-1;0<=D;D--){var M=b[D]|0;x&&M==_||(C[D]=M,x=!1)}this.g=C}var a={};function c(b){return-128<=b&&128>b?o(b,function(_){return new s([_|0],0>_?-1:0)}):new s([b|0],0>b?-1:0)}function l(b){if(isNaN(b)||!isFinite(b))return h;if(0>b)return w(l(-b));for(var _=[],C=1,x=0;b>=C;x++)_[x]=b/C|0,C*=4294967296;return new s(_,0)}function d(b,_){if(b.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(b.charAt(0)=="-")return w(d(b.substring(1),_));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=l(Math.pow(_,8)),x=h,D=0;D<b.length;D+=8){var M=Math.min(8,b.length-D),I=parseInt(b.substring(D,D+M),_);8>M?(M=l(Math.pow(_,M)),x=x.j(M).add(l(I))):(x=x.j(C),x=x.add(l(I)))}return x}var h=c(0),p=c(1),g=c(16777216);n=s.prototype,n.m=function(){if(E(this))return-w(this).m();for(var b=0,_=1,C=0;C<this.g.length;C++){var x=this.i(C);b+=(0<=x?x:4294967296+x)*_,_*=4294967296}return b},n.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(y(this))return"0";if(E(this))return"-"+w(this).toString(b);for(var _=l(Math.pow(b,6)),C=this,x="";;){var D=B(C,_).g;C=T(C,D.j(_));var M=((0<C.g.length?C.g[0]:C.h)>>>0).toString(b);if(C=D,y(C))return M+x;for(;6>M.length;)M="0"+M;x=M+x}},n.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function y(b){if(b.h!=0)return!1;for(var _=0;_<b.g.length;_++)if(b.g[_]!=0)return!1;return!0}function E(b){return b.h==-1}n.l=function(b){return b=T(this,b),E(b)?-1:y(b)?0:1};function w(b){for(var _=b.g.length,C=[],x=0;x<_;x++)C[x]=~b.g[x];return new s(C,~b.h).add(p)}n.abs=function(){return E(this)?w(this):this},n.add=function(b){for(var _=Math.max(this.g.length,b.g.length),C=[],x=0,D=0;D<=_;D++){var M=x+(this.i(D)&65535)+(b.i(D)&65535),I=(M>>>16)+(this.i(D)>>>16)+(b.i(D)>>>16);x=I>>>16,M&=65535,I&=65535,C[D]=I<<16|M}return new s(C,C[C.length-1]&-2147483648?-1:0)};function T(b,_){return b.add(w(_))}n.j=function(b){if(y(this)||y(b))return h;if(E(this))return E(b)?w(this).j(w(b)):w(w(this).j(b));if(E(b))return w(this.j(w(b)));if(0>this.l(g)&&0>b.l(g))return l(this.m()*b.m());for(var _=this.g.length+b.g.length,C=[],x=0;x<2*_;x++)C[x]=0;for(x=0;x<this.g.length;x++)for(var D=0;D<b.g.length;D++){var M=this.i(x)>>>16,I=this.i(x)&65535,N=b.i(D)>>>16,k=b.i(D)&65535;C[2*x+2*D]+=I*k,O(C,2*x+2*D),C[2*x+2*D+1]+=M*k,O(C,2*x+2*D+1),C[2*x+2*D+1]+=I*N,O(C,2*x+2*D+1),C[2*x+2*D+2]+=M*N,O(C,2*x+2*D+2)}for(x=0;x<_;x++)C[x]=C[2*x+1]<<16|C[2*x];for(x=_;x<2*_;x++)C[x]=0;return new s(C,0)};function O(b,_){for(;(b[_]&65535)!=b[_];)b[_+1]+=b[_]>>>16,b[_]&=65535,_++}function P(b,_){this.g=b,this.h=_}function B(b,_){if(y(_))throw Error("division by zero");if(y(b))return new P(h,h);if(E(b))return _=B(w(b),_),new P(w(_.g),w(_.h));if(E(_))return _=B(b,w(_)),new P(w(_.g),_.h);if(30<b.g.length){if(E(b)||E(_))throw Error("slowDivide_ only works with positive integers.");for(var C=p,x=_;0>=x.l(b);)C=q(C),x=q(x);var D=z(C,1),M=z(x,1);for(x=z(x,2),C=z(C,2);!y(x);){var I=M.add(x);0>=I.l(b)&&(D=D.add(C),M=I),x=z(x,1),C=z(C,1)}return _=T(b,D.j(_)),new P(D,_)}for(D=h;0<=b.l(_);){for(C=Math.max(1,Math.floor(b.m()/_.m())),x=Math.ceil(Math.log(C)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),M=l(C),I=M.j(_);E(I)||0<I.l(b);)C-=x,M=l(C),I=M.j(_);y(M)&&(M=p),D=D.add(M),b=T(b,I)}return new P(D,b)}n.A=function(b){return B(this,b).h},n.and=function(b){for(var _=Math.max(this.g.length,b.g.length),C=[],x=0;x<_;x++)C[x]=this.i(x)&b.i(x);return new s(C,this.h&b.h)},n.or=function(b){for(var _=Math.max(this.g.length,b.g.length),C=[],x=0;x<_;x++)C[x]=this.i(x)|b.i(x);return new s(C,this.h|b.h)},n.xor=function(b){for(var _=Math.max(this.g.length,b.g.length),C=[],x=0;x<_;x++)C[x]=this.i(x)^b.i(x);return new s(C,this.h^b.h)};function q(b){for(var _=b.g.length+1,C=[],x=0;x<_;x++)C[x]=b.i(x)<<1|b.i(x-1)>>>31;return new s(C,b.h)}function z(b,_){var C=_>>5;_%=32;for(var x=b.g.length-C,D=[],M=0;M<x;M++)D[M]=0<_?b.i(M+C)>>>_|b.i(M+C+1)<<32-_:b.i(M+C);return new s(D,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,qE=nk.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=d,Do=nk.Integer=s}).apply(typeof tk<"u"?tk:typeof self<"u"?self:typeof window<"u"?window:{});var yg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Oi={};var HE,GE,xc,WE,Cd,vg,KE,QE,YE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,m){return u==Array.prototype||u==Object.prototype||(u[f]=m.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof yg=="object"&&yg];for(var f=0;f<u.length;++f){var m=u[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=t(this);function i(u,f){if(f)e:{var m=r;u=u.split(".");for(var v=0;v<u.length-1;v++){var R=u[v];if(!(R in m))break e;m=m[R]}u=u[u.length-1],v=m[u],f=f(v),f!=v&&f!=null&&e(m,u,{configurable:!0,writable:!0,value:f})}}function o(u,f){u instanceof String&&(u+="");var m=0,v=!1,R={next:function(){if(!v&&m<u.length){var L=m++;return{value:f(L,u[L]),done:!1}}return v=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}i("Array.prototype.values",function(u){return u||function(){return o(this,function(f,m){return m})}});var s=s||{},a=this||self;function c(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function l(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function d(u,f,m){return u.call.apply(u.bind,arguments)}function h(u,f,m){if(!u)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,v),u.apply(f,R)}}return function(){return u.apply(f,arguments)}}function p(u,f,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,p.apply(null,arguments)}function g(u,f){var m=Array.prototype.slice.call(arguments,1);return function(){var v=m.slice();return v.push.apply(v,arguments),u.apply(this,v)}}function y(u,f){function m(){}m.prototype=f.prototype,u.aa=f.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(v,R,L){for(var Z=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)Z[Ke-2]=arguments[Ke];return f.prototype[R].apply(v,Z)}}function E(u){let f=u.length;if(0<f){let m=Array(f);for(let v=0;v<f;v++)m[v]=u[v];return m}return[]}function w(u,f){for(let m=1;m<arguments.length;m++){let v=arguments[m];if(c(v)){let R=u.length||0,L=v.length||0;u.length=R+L;for(let Z=0;Z<L;Z++)u[R+Z]=v[Z]}else u.push(v)}}class T{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function O(u){return/^[\s\xa0]*$/.test(u)}function P(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function B(u){return B[" "](u),u}B[" "]=function(){};var q=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function z(u,f,m){for(let v in u)f.call(m,u[v],v,u)}function b(u,f){for(let m in u)f.call(void 0,u[m],m,u)}function _(u){let f={};for(let m in u)f[m]=u[m];return f}let C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(u,f){let m,v;for(let R=1;R<arguments.length;R++){v=arguments[R];for(m in v)u[m]=v[m];for(let L=0;L<C.length;L++)m=C[L],Object.prototype.hasOwnProperty.call(v,m)&&(u[m]=v[m])}}function D(u){var f=1;u=u.split(":");let m=[];for(;0<f&&u.length;)m.push(u.shift()),f--;return u.length&&m.push(u.join(":")),m}function M(u){a.setTimeout(()=>{throw u},0)}function I(){var u=fe;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class N{constructor(){this.h=this.g=null}add(f,m){let v=k.get();v.set(f,m),this.h?this.h.next=v:this.g=v,this.h=v}}var k=new T(()=>new U,u=>u.reset());class U{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let J,ae=!1,fe=new N,ye=()=>{let u=a.Promise.resolve(void 0);J=()=>{u.then(Ae)}};var Ae=()=>{for(var u;u=I();){try{u.h.call(u.g)}catch(m){M(m)}var f=k;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}ae=!1};function Pe(){this.s=this.s,this.C=this.C}Pe.prototype.s=!1,Pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},Pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Re(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}Re.prototype.h=function(){this.defaultPrevented=!0};var it=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return u}();function ot(u,f){if(Re.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,v=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(q){e:{try{B(f.nodeName);var R=!0;break e}catch{}R=!1}R||(f=null)}}else m=="mouseover"?f=u.fromElement:m=="mouseout"&&(f=u.toElement);this.relatedTarget=f,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:lr[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ot.aa.h.call(this)}}y(ot,Re);var lr={2:"touch",3:"pen",4:"mouse"};ot.prototype.h=function(){ot.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Zt="closure_listenable_"+(1e6*Math.random()|0),dr=0;function yu(u,f,m,v,R){this.listener=u,this.proxy=null,this.src=f,this.type=m,this.capture=!!v,this.ha=R,this.key=++dr,this.da=this.fa=!1}function _h(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function wh(u){this.src=u,this.g={},this.h=0}wh.prototype.add=function(u,f,m,v,R){var L=u.toString();u=this.g[L],u||(u=this.g[L]=[],this.h++);var Z=mv(u,f,v,R);return-1<Z?(f=u[Z],m||(f.fa=!1)):(f=new yu(f,this.src,L,!!v,R),f.fa=m,u.push(f)),f};function pv(u,f){var m=f.type;if(m in u.g){var v=u.g[m],R=Array.prototype.indexOf.call(v,f,void 0),L;(L=0<=R)&&Array.prototype.splice.call(v,R,1),L&&(_h(f),u.g[m].length==0&&(delete u.g[m],u.h--))}}function mv(u,f,m,v){for(var R=0;R<u.length;++R){var L=u[R];if(!L.da&&L.listener==f&&L.capture==!!m&&L.ha==v)return R}return-1}var gv="closure_lm_"+(1e6*Math.random()|0),yv={};function sx(u,f,m,v,R){if(v&&v.once)return cx(u,f,m,v,R);if(Array.isArray(f)){for(var L=0;L<f.length;L++)sx(u,f[L],m,v,R);return null}return m=Cv(m),u&&u[Zt]?u.K(f,m,l(v)?!!v.capture:!!v,R):ax(u,f,m,!1,v,R)}function ax(u,f,m,v,R,L){if(!f)throw Error("Invalid event type");var Z=l(R)?!!R.capture:!!R,Ke=_v(u);if(Ke||(u[gv]=Ke=new wh(u)),m=Ke.add(f,m,v,Z,L),m.proxy)return m;if(v=AL(),m.proxy=v,v.src=u,v.listener=m,u.addEventListener)it||(R=Z),R===void 0&&(R=!1),u.addEventListener(f.toString(),v,R);else if(u.attachEvent)u.attachEvent(lx(f.toString()),v);else if(u.addListener&&u.removeListener)u.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return m}function AL(){function u(m){return f.call(u.src,u.listener,m)}let f=PL;return u}function cx(u,f,m,v,R){if(Array.isArray(f)){for(var L=0;L<f.length;L++)cx(u,f[L],m,v,R);return null}return m=Cv(m),u&&u[Zt]?u.L(f,m,l(v)?!!v.capture:!!v,R):ax(u,f,m,!0,v,R)}function ux(u,f,m,v,R){if(Array.isArray(f))for(var L=0;L<f.length;L++)ux(u,f[L],m,v,R);else v=l(v)?!!v.capture:!!v,m=Cv(m),u&&u[Zt]?(u=u.i,f=String(f).toString(),f in u.g&&(L=u.g[f],m=mv(L,m,v,R),-1<m&&(_h(L[m]),Array.prototype.splice.call(L,m,1),L.length==0&&(delete u.g[f],u.h--)))):u&&(u=_v(u))&&(f=u.g[f.toString()],u=-1,f&&(u=mv(f,m,v,R)),(m=-1<u?f[u]:null)&&vv(m))}function vv(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[Zt])pv(f.i,u);else{var m=u.type,v=u.proxy;f.removeEventListener?f.removeEventListener(m,v,u.capture):f.detachEvent?f.detachEvent(lx(m),v):f.addListener&&f.removeListener&&f.removeListener(v),(m=_v(f))?(pv(m,u),m.h==0&&(m.src=null,f[gv]=null)):_h(u)}}}function lx(u){return u in yv?yv[u]:yv[u]="on"+u}function PL(u,f){if(u.da)u=!0;else{f=new ot(f,this);var m=u.listener,v=u.ha||u.src;u.fa&&vv(u),u=m.call(v,f)}return u}function _v(u){return u=u[gv],u instanceof wh?u:null}var wv="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cv(u){return typeof u=="function"?u:(u[wv]||(u[wv]=function(f){return u.handleEvent(f)}),u[wv])}function tn(){Pe.call(this),this.i=new wh(this),this.M=this,this.F=null}y(tn,Pe),tn.prototype[Zt]=!0,tn.prototype.removeEventListener=function(u,f,m,v){ux(this,u,f,m,v)};function vn(u,f){var m,v=u.F;if(v)for(m=[];v;v=v.F)m.push(v);if(u=u.M,v=f.type||f,typeof f=="string")f=new Re(f,u);else if(f instanceof Re)f.target=f.target||u;else{var R=f;f=new Re(v,u),x(f,R)}if(R=!0,m)for(var L=m.length-1;0<=L;L--){var Z=f.g=m[L];R=Ch(Z,v,!0,f)&&R}if(Z=f.g=u,R=Ch(Z,v,!0,f)&&R,R=Ch(Z,v,!1,f)&&R,m)for(L=0;L<m.length;L++)Z=f.g=m[L],R=Ch(Z,v,!1,f)&&R}tn.prototype.N=function(){if(tn.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var m=u.g[f],v=0;v<m.length;v++)_h(m[v]);delete u.g[f],u.h--}}this.F=null},tn.prototype.K=function(u,f,m,v){return this.i.add(String(u),f,!1,m,v)},tn.prototype.L=function(u,f,m,v){return this.i.add(String(u),f,!0,m,v)};function Ch(u,f,m,v){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var R=!0,L=0;L<f.length;++L){var Z=f[L];if(Z&&!Z.da&&Z.capture==m){var Ke=Z.listener,Xt=Z.ha||Z.src;Z.fa&&pv(u.i,Z),R=Ke.call(Xt,v)!==!1&&R}}return R&&!v.defaultPrevented}function dx(u,f,m){if(typeof u=="function")m&&(u=p(u,m));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function hx(u){u.g=dx(()=>{u.g=null,u.i&&(u.i=!1,hx(u))},u.l);let f=u.h;u.h=null,u.m.apply(null,f)}class RL extends Pe{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:hx(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vu(u){Pe.call(this),this.h=u,this.g={}}y(vu,Pe);var fx=[];function px(u){z(u.g,function(f,m){this.g.hasOwnProperty(m)&&vv(f)},u),u.g={}}vu.prototype.N=function(){vu.aa.N.call(this),px(this)},vu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ev=a.JSON.stringify,NL=a.JSON.parse,OL=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Iv(){}Iv.prototype.h=null;function mx(u){return u.h||(u.h=u.i())}function gx(){}var _u={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function bv(){Re.call(this,"d")}y(bv,Re);function Dv(){Re.call(this,"c")}y(Dv,Re);var Jo={},yx=null;function Eh(){return yx=yx||new tn}Jo.La="serverreachability";function vx(u){Re.call(this,Jo.La,u)}y(vx,Re);function wu(u){let f=Eh();vn(f,new vx(f))}Jo.STAT_EVENT="statevent";function _x(u,f){Re.call(this,Jo.STAT_EVENT,u),this.stat=f}y(_x,Re);function _n(u){let f=Eh();vn(f,new _x(f,u))}Jo.Ma="timingevent";function wx(u,f){Re.call(this,Jo.Ma,u),this.size=f}y(wx,Re);function Cu(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function Eu(){this.g=!0}Eu.prototype.xa=function(){this.g=!1};function kL(u,f,m,v,R,L){u.info(function(){if(u.g)if(L)for(var Z="",Ke=L.split("&"),Xt=0;Xt<Ke.length;Xt++){var Ue=Ke[Xt].split("=");if(1<Ue.length){var nn=Ue[0];Ue=Ue[1];var rn=nn.split("_");Z=2<=rn.length&&rn[1]=="type"?Z+(nn+"="+Ue+"&"):Z+(nn+"=redacted&")}}else Z=null;else Z=L;return"XMLHTTP REQ ("+v+") [attempt "+R+"]: "+f+`
`+m+`
`+Z})}function FL(u,f,m,v,R,L,Z){u.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+R+"]: "+f+`
`+m+`
`+L+" "+Z})}function ua(u,f,m,v){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+LL(u,m)+(v?" "+v:"")})}function VL(u,f){u.info(function(){return"TIMEOUT: "+f})}Eu.prototype.info=function(){};function LL(u,f){if(!u.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var v=m[u];if(!(2>v.length)){var R=v[1];if(Array.isArray(R)&&!(1>R.length)){var L=R[0];if(L!="noop"&&L!="stop"&&L!="close")for(var Z=1;Z<R.length;Z++)R[Z]=""}}}}return Ev(m)}catch{return f}}var Ih={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Cx={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xv;function bh(){}y(bh,Iv),bh.prototype.g=function(){return new XMLHttpRequest},bh.prototype.i=function(){return{}},xv=new bh;function Hi(u,f,m,v){this.j=u,this.i=f,this.l=m,this.R=v||1,this.U=new vu(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ex}function Ex(){this.i=null,this.g="",this.h=!1}var Ix={},Tv={};function Sv(u,f,m){u.L=1,u.v=Sh(ri(f)),u.m=m,u.P=!0,bx(u,null)}function bx(u,f){u.F=Date.now(),Dh(u),u.A=ri(u.v);var m=u.A,v=u.R;Array.isArray(v)||(v=[String(v)]),Lx(m.i,"t",v),u.C=0,m=u.j.J,u.h=new Ex,u.g=nT(u.j,m?f:null,!u.m),0<u.O&&(u.M=new RL(p(u.Y,u,u.g),u.O)),f=u.U,m=u.g,v=u.ca;var R="readystatechange";Array.isArray(R)||(R&&(fx[0]=R.toString()),R=fx);for(var L=0;L<R.length;L++){var Z=sx(m,R[L],v||f.handleEvent,!1,f.h||f);if(!Z)break;f.g[Z.key]=Z}f=u.H?_(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),wu(),kL(u.i,u.u,u.A,u.l,u.R,u.m)}Hi.prototype.ca=function(u){u=u.target;let f=this.M;f&&ii(u)==3?f.j():this.Y(u)},Hi.prototype.Y=function(u){try{if(u==this.g)e:{let rn=ii(this.g);var f=this.g.Ba();let ha=this.g.Z();if(!(3>rn)&&(rn!=3||this.g&&(this.h.h||this.g.oa()||Hx(this.g)))){this.J||rn!=4||f==7||(f==8||0>=ha?wu(3):wu(2)),Mv(this);var m=this.g.Z();this.X=m;t:if(Dx(this)){var v=Hx(this.g);u="";var R=v.length,L=ii(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){es(this),Iu(this);var Z="";break t}this.h.i=new a.TextDecoder}for(f=0;f<R;f++)this.h.h=!0,u+=this.h.i.decode(v[f],{stream:!(L&&f==R-1)});v.length=0,this.h.g+=u,this.C=0,Z=this.h.g}else Z=this.g.oa();if(this.o=m==200,FL(this.i,this.u,this.A,this.l,this.R,rn,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ke,Xt=this.g;if((Ke=Xt.g?Xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(Ke)){var Ue=Ke;break t}}Ue=null}if(m=Ue)ua(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Av(this,m);else{this.o=!1,this.s=3,_n(12),es(this),Iu(this);break e}}if(this.P){m=!0;let hr;for(;!this.J&&this.C<Z.length;)if(hr=jL(this,Z),hr==Tv){rn==4&&(this.s=4,_n(14),m=!1),ua(this.i,this.l,null,"[Incomplete Response]");break}else if(hr==Ix){this.s=4,_n(15),ua(this.i,this.l,Z,"[Invalid Chunk]"),m=!1;break}else ua(this.i,this.l,hr,null),Av(this,hr);if(Dx(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rn!=4||Z.length!=0||this.h.h||(this.s=1,_n(16),m=!1),this.o=this.o&&m,!m)ua(this.i,this.l,Z,"[Invalid Chunked Response]"),es(this),Iu(this);else if(0<Z.length&&!this.W){this.W=!0;var nn=this.j;nn.g==this&&nn.ba&&!nn.M&&(nn.j.info("Great, no buffering proxy detected. Bytes received: "+Z.length),Fv(nn),nn.M=!0,_n(11))}}else ua(this.i,this.l,Z,null),Av(this,Z);rn==4&&es(this),this.o&&!this.J&&(rn==4?Xx(this.j,this):(this.o=!1,Dh(this)))}else nj(this.g),m==400&&0<Z.indexOf("Unknown SID")?(this.s=3,_n(12)):(this.s=0,_n(13)),es(this),Iu(this)}}}catch{}finally{}};function Dx(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function jL(u,f){var m=u.C,v=f.indexOf(`
`,m);return v==-1?Tv:(m=Number(f.substring(m,v)),isNaN(m)?Ix:(v+=1,v+m>f.length?Tv:(f=f.slice(v,v+m),u.C=v+m,f)))}Hi.prototype.cancel=function(){this.J=!0,es(this)};function Dh(u){u.S=Date.now()+u.I,xx(u,u.I)}function xx(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Cu(p(u.ba,u),f)}function Mv(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Hi.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(VL(this.i,this.A),this.L!=2&&(wu(),_n(17)),es(this),this.s=2,Iu(this)):xx(this,this.S-u)};function Iu(u){u.j.G==0||u.J||Xx(u.j,u)}function es(u){Mv(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,px(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Av(u,f){try{var m=u.j;if(m.G!=0&&(m.g==u||Pv(m.h,u))){if(!u.K&&Pv(m.h,u)&&m.G==3){try{var v=m.Da.g.parse(f)}catch{v=null}if(Array.isArray(v)&&v.length==3){var R=v;if(R[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)Nh(m),Ph(m);else break e;kv(m),_n(18)}}else m.za=R[1],0<m.za-m.T&&37500>R[2]&&m.F&&m.v==0&&!m.C&&(m.C=Cu(p(m.Za,m),6e3));if(1>=Mx(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else ns(m,11)}else if((u.K||m.g==u)&&Nh(m),!O(f))for(R=m.Da.g.parse(f),f=0;f<R.length;f++){let Ue=R[f];if(m.T=Ue[0],Ue=Ue[1],m.G==2)if(Ue[0]=="c"){m.K=Ue[1],m.ia=Ue[2];let nn=Ue[3];nn!=null&&(m.la=nn,m.j.info("VER="+m.la));let rn=Ue[4];rn!=null&&(m.Aa=rn,m.j.info("SVER="+m.Aa));let ha=Ue[5];ha!=null&&typeof ha=="number"&&0<ha&&(v=1.5*ha,m.L=v,m.j.info("backChannelRequestTimeoutMs_="+v)),v=m;let hr=u.g;if(hr){let kh=hr.g?hr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(kh){var L=v.h;L.g||kh.indexOf("spdy")==-1&&kh.indexOf("quic")==-1&&kh.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Rv(L,L.h),L.h=null))}if(v.D){let Vv=hr.g?hr.g.getResponseHeader("X-HTTP-Session-Id"):null;Vv&&(v.ya=Vv,et(v.I,v.D,Vv))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),v=m;var Z=u;if(v.qa=tT(v,v.J?v.ia:null,v.W),Z.K){Ax(v.h,Z);var Ke=Z,Xt=v.L;Xt&&(Ke.I=Xt),Ke.B&&(Mv(Ke),Dh(Ke)),v.g=Z}else Yx(v);0<m.i.length&&Rh(m)}else Ue[0]!="stop"&&Ue[0]!="close"||ns(m,7);else m.G==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?ns(m,7):Ov(m):Ue[0]!="noop"&&m.l&&m.l.ta(Ue),m.v=0)}}wu(4)}catch{}}var BL=class{constructor(u,f){this.g=u,this.map=f}};function Tx(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Sx(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Mx(u){return u.h?1:u.g?u.g.size:0}function Pv(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function Rv(u,f){u.g?u.g.add(f):u.h=f}function Ax(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}Tx.prototype.cancel=function(){if(this.i=Px(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function Px(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(let m of u.g.values())f=f.concat(m.D);return f}return E(u.i)}function UL(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var f=[],m=u.length,v=0;v<m;v++)f.push(u[v]);return f}f=[],m=0;for(v in u)f[m++]=u[v];return f}function $L(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var f=[];u=u.length;for(var m=0;m<u;m++)f.push(m);return f}f=[],m=0;for(let v in u)f[m++]=v;return f}}}function Rx(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var m=$L(u),v=UL(u),R=v.length,L=0;L<R;L++)f.call(void 0,v[L],m&&m[L],u)}var Nx=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zL(u,f){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var v=u[m].indexOf("="),R=null;if(0<=v){var L=u[m].substring(0,v);R=u[m].substring(v+1)}else L=u[m];f(L,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function ts(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ts){this.h=u.h,xh(this,u.j),this.o=u.o,this.g=u.g,Th(this,u.s),this.l=u.l;var f=u.i,m=new xu;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),Ox(this,m),this.m=u.m}else u&&(f=String(u).match(Nx))?(this.h=!1,xh(this,f[1]||"",!0),this.o=bu(f[2]||""),this.g=bu(f[3]||"",!0),Th(this,f[4]),this.l=bu(f[5]||"",!0),Ox(this,f[6]||"",!0),this.m=bu(f[7]||"")):(this.h=!1,this.i=new xu(null,this.h))}ts.prototype.toString=function(){var u=[],f=this.j;f&&u.push(Du(f,kx,!0),":");var m=this.g;return(m||f=="file")&&(u.push("//"),(f=this.o)&&u.push(Du(f,kx,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(Du(m,m.charAt(0)=="/"?GL:HL,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",Du(m,KL)),u.join("")};function ri(u){return new ts(u)}function xh(u,f,m){u.j=m?bu(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Th(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function Ox(u,f,m){f instanceof xu?(u.i=f,QL(u.i,u.h)):(m||(f=Du(f,WL)),u.i=new xu(f,u.h))}function et(u,f,m){u.i.set(f,m)}function Sh(u){return et(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function bu(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Du(u,f,m){return typeof u=="string"?(u=encodeURI(u).replace(f,qL),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function qL(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var kx=/[#\/\?@]/g,HL=/[#\?:]/g,GL=/[#\?]/g,WL=/[#\?@]/g,KL=/#/g;function xu(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function Gi(u){u.g||(u.g=new Map,u.h=0,u.i&&zL(u.i,function(f,m){u.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}n=xu.prototype,n.add=function(u,f){Gi(this),this.i=null,u=la(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(f),this.h+=1,this};function Fx(u,f){Gi(u),f=la(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function Vx(u,f){return Gi(u),f=la(u,f),u.g.has(f)}n.forEach=function(u,f){Gi(this),this.g.forEach(function(m,v){m.forEach(function(R){u.call(f,R,v,this)},this)},this)},n.na=function(){Gi(this);let u=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let v=0;v<f.length;v++){let R=u[v];for(let L=0;L<R.length;L++)m.push(f[v])}return m},n.V=function(u){Gi(this);let f=[];if(typeof u=="string")Vx(this,u)&&(f=f.concat(this.g.get(la(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)f=f.concat(u[m])}return f},n.set=function(u,f){return Gi(this),this.i=null,u=la(this,u),Vx(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},n.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function Lx(u,f,m){Fx(u,f),0<m.length&&(u.i=null,u.g.set(la(u,f),E(m)),u.h+=m.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var v=f[m];let L=encodeURIComponent(String(v)),Z=this.V(v);for(v=0;v<Z.length;v++){var R=L;Z[v]!==""&&(R+="="+encodeURIComponent(String(Z[v]))),u.push(R)}}return this.i=u.join("&")};function la(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function QL(u,f){f&&!u.j&&(Gi(u),u.i=null,u.g.forEach(function(m,v){var R=v.toLowerCase();v!=R&&(Fx(this,v),Lx(this,R,m))},u)),u.j=f}function YL(u,f){let m=new Eu;if(a.Image){let v=new Image;v.onload=g(Wi,m,"TestLoadImage: loaded",!0,f,v),v.onerror=g(Wi,m,"TestLoadImage: error",!1,f,v),v.onabort=g(Wi,m,"TestLoadImage: abort",!1,f,v),v.ontimeout=g(Wi,m,"TestLoadImage: timeout",!1,f,v),a.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=u}else f(!1)}function ZL(u,f){let m=new Eu,v=new AbortController,R=setTimeout(()=>{v.abort(),Wi(m,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:v.signal}).then(L=>{clearTimeout(R),L.ok?Wi(m,"TestPingServer: ok",!0,f):Wi(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(R),Wi(m,"TestPingServer: error",!1,f)})}function Wi(u,f,m,v,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),v(m)}catch{}}function XL(){this.g=new OL}function JL(u,f,m){let v=m||"";try{Rx(u,function(R,L){let Z=R;l(R)&&(Z=Ev(R)),f.push(v+L+"="+encodeURIComponent(Z))})}catch(R){throw f.push(v+"type="+encodeURIComponent("_badmap")),R}}function Tu(u){this.l=u.Ub||null,this.j=u.eb||!1}y(Tu,Iv),Tu.prototype.g=function(){return new Mh(this.l,this.j)},Tu.prototype.i=function(u){return function(){return u}}({});function Mh(u,f){tn.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Mh,tn),n=Mh.prototype,n.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,Mu(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Su(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Mu(this)),this.g&&(this.readyState=3,Mu(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;jx(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function jx(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Su(this):Mu(this),this.readyState==3&&jx(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Su(this))},n.Qa=function(u){this.g&&(this.response=u,Su(this))},n.ga=function(){this.g&&Su(this)};function Su(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Mu(u)}n.setRequestHeader=function(u,f){this.u.append(u,f)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=f.next();return u.join(`\r
`)};function Mu(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Mh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Bx(u){let f="";return z(u,function(m,v){f+=v,f+=":",f+=m,f+=`\r
`}),f}function Nv(u,f,m){e:{for(v in m){var v=!1;break e}v=!0}v||(m=Bx(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):et(u,f,m))}function mt(u){tn.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(mt,tn);var ej=/^https?$/i,tj=["POST","PUT"];n=mt.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,f,m,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xv.g(),this.v=this.o?mx(this.o):mx(xv),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(L){Ux(this,L);return}if(u=m||"",m=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var R in v)m.set(R,v[R]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(let L of v.keys())m.set(L,v.get(L));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(m.keys()).find(L=>L.toLowerCase()=="content-type"),R=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(tj,f,void 0))||v||R||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[L,Z]of m)this.g.setRequestHeader(L,Z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qx(this),this.u=!0,this.g.send(u),this.u=!1}catch(L){Ux(this,L)}};function Ux(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,$x(u),Ah(u)}function $x(u){u.A||(u.A=!0,vn(u,"complete"),vn(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,vn(this,"complete"),vn(this,"abort"),Ah(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ah(this,!0)),mt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?zx(this):this.bb())},n.bb=function(){zx(this)};function zx(u){if(u.h&&typeof s<"u"&&(!u.v[1]||ii(u)!=4||u.Z()!=2)){if(u.u&&ii(u)==4)dx(u.Ea,0,u);else if(vn(u,"readystatechange"),ii(u)==4){u.h=!1;try{let Z=u.Z();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var v;if(v=Z===0){var R=String(u.D).match(Nx)[1]||null;!R&&a.self&&a.self.location&&(R=a.self.location.protocol.slice(0,-1)),v=!ej.test(R?R.toLowerCase():"")}m=v}if(m)vn(u,"complete"),vn(u,"success");else{u.m=6;try{var L=2<ii(u)?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.Z()+"]",$x(u)}}finally{Ah(u)}}}}function Ah(u,f){if(u.g){qx(u);let m=u.g,v=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||vn(u,"ready");try{m.onreadystatechange=v}catch{}}}function qx(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function ii(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<ii(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),NL(f)}};function Hx(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function nj(u){let f={};u=(u.g&&2<=ii(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<u.length;v++){if(O(u[v]))continue;var m=D(u[v]);let R=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();let L=f[R]||[];f[R]=L,L.push(m)}b(f,function(v){return v.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Au(u,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||f}function Gx(u){this.Aa=0,this.i=[],this.j=new Eu,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Au("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Au("baseRetryDelayMs",5e3,u),this.cb=Au("retryDelaySeedMs",1e4,u),this.Wa=Au("forwardChannelMaxRetries",2,u),this.wa=Au("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Tx(u&&u.concurrentRequestLimit),this.Da=new XL,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Gx.prototype,n.la=8,n.G=1,n.connect=function(u,f,m,v){_n(0),this.W=u,this.H=f||{},m&&v!==void 0&&(this.H.OSID=m,this.H.OAID=v),this.F=this.X,this.I=tT(this,null,this.W),Rh(this)};function Ov(u){if(Wx(u),u.G==3){var f=u.U++,m=ri(u.I);if(et(m,"SID",u.K),et(m,"RID",f),et(m,"TYPE","terminate"),Pu(u,m),f=new Hi(u,u.j,f),f.L=2,f.v=Sh(ri(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=nT(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Dh(f)}eT(u)}function Ph(u){u.g&&(Fv(u),u.g.cancel(),u.g=null)}function Wx(u){Ph(u),u.u&&(a.clearTimeout(u.u),u.u=null),Nh(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Rh(u){if(!Sx(u.h)&&!u.s){u.s=!0;var f=u.Ga;J||ye(),ae||(J(),ae=!0),fe.add(f,u),u.B=0}}function rj(u,f){return Mx(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Cu(p(u.Ga,u,f),Jx(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let R=new Hi(this,this.j,u),L=this.o;if(this.S&&(L?(L=_(L),x(L,this.S)):L=this.S),this.m!==null||this.O||(R.H=L,L=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var v=this.i[m];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(f+=v,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=Qx(this,R,f),m=ri(this.I),et(m,"RID",u),et(m,"CVER",22),this.D&&et(m,"X-HTTP-Session-Id",this.D),Pu(this,m),L&&(this.O?f="headers="+encodeURIComponent(String(Bx(L)))+"&"+f:this.m&&Nv(m,this.m,L)),Rv(this.h,R),this.Ua&&et(m,"TYPE","init"),this.P?(et(m,"$req",f),et(m,"SID","null"),R.T=!0,Sv(R,m,null)):Sv(R,m,f),this.G=2}}else this.G==3&&(u?Kx(this,u):this.i.length==0||Sx(this.h)||Kx(this))};function Kx(u,f){var m;f?m=f.l:m=u.U++;let v=ri(u.I);et(v,"SID",u.K),et(v,"RID",m),et(v,"AID",u.T),Pu(u,v),u.m&&u.o&&Nv(v,u.m,u.o),m=new Hi(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),f&&(u.i=f.D.concat(u.i)),f=Qx(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Rv(u.h,m),Sv(m,v,f)}function Pu(u,f){u.H&&z(u.H,function(m,v){et(f,v,m)}),u.l&&Rx({},function(m,v){et(f,v,m)})}function Qx(u,f,m){m=Math.min(u.i.length,m);var v=u.l?p(u.l.Na,u.l,u):null;e:{var R=u.i;let L=-1;for(;;){let Z=["count="+m];L==-1?0<m?(L=R[0].g,Z.push("ofs="+L)):L=0:Z.push("ofs="+L);let Ke=!0;for(let Xt=0;Xt<m;Xt++){let Ue=R[Xt].g,nn=R[Xt].map;if(Ue-=L,0>Ue)L=Math.max(0,R[Xt].g-100),Ke=!1;else try{JL(nn,Z,"req"+Ue+"_")}catch{v&&v(nn)}}if(Ke){v=Z.join("&");break e}}}return u=u.i.splice(0,m),f.D=u,v}function Yx(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;J||ye(),ae||(J(),ae=!0),fe.add(f,u),u.v=0}}function kv(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Cu(p(u.Fa,u),Jx(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,Zx(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Cu(p(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_n(10),Ph(this),Zx(this))};function Fv(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Zx(u){u.g=new Hi(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=ri(u.qa);et(f,"RID","rpc"),et(f,"SID",u.K),et(f,"AID",u.T),et(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&et(f,"TO",u.ja),et(f,"TYPE","xmlhttp"),Pu(u,f),u.m&&u.o&&Nv(f,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=Sh(ri(f)),m.m=null,m.P=!0,bx(m,u)}n.Za=function(){this.C!=null&&(this.C=null,Ph(this),kv(this),_n(19))};function Nh(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Xx(u,f){var m=null;if(u.g==f){Nh(u),Fv(u),u.g=null;var v=2}else if(Pv(u.h,f))m=f.D,Ax(u.h,f),v=1;else return;if(u.G!=0){if(f.o)if(v==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var R=u.B;v=Eh(),vn(v,new wx(v,m)),Rh(u)}else Yx(u);else if(R=f.s,R==3||R==0&&0<f.X||!(v==1&&rj(u,f)||v==2&&kv(u)))switch(m&&0<m.length&&(f=u.h,f.i=f.i.concat(m)),R){case 1:ns(u,5);break;case 4:ns(u,10);break;case 3:ns(u,6);break;default:ns(u,2)}}}function Jx(u,f){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*f}function ns(u,f){if(u.j.info("Error code "+f),f==2){var m=p(u.fb,u),v=u.Xa;let R=!v;v=new ts(v||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||xh(v,"https"),Sh(v),R?YL(v.toString(),m):ZL(v.toString(),m)}else _n(2);u.G=0,u.l&&u.l.sa(f),eT(u),Wx(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),_n(2)):(this.j.info("Failed to ping google.com"),_n(1))};function eT(u){if(u.G=0,u.ka=[],u.l){let f=Px(u.h);(f.length!=0||u.i.length!=0)&&(w(u.ka,f),w(u.ka,u.i),u.h.i.length=0,E(u.i),u.i.length=0),u.l.ra()}}function tT(u,f,m){var v=m instanceof ts?ri(m):new ts(m);if(v.g!="")f&&(v.g=f+"."+v.g),Th(v,v.s);else{var R=a.location;v=R.protocol,f=f?f+"."+R.hostname:R.hostname,R=+R.port;var L=new ts(null);v&&xh(L,v),f&&(L.g=f),R&&Th(L,R),m&&(L.l=m),v=L}return m=u.D,f=u.ya,m&&f&&et(v,m,f),et(v,"VER",u.la),Pu(u,v),v}function nT(u,f,m){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new mt(new Tu({eb:m})):new mt(u.pa),f.Ha(u.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function rT(){}n=rT.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Oh(){}Oh.prototype.g=function(u,f){return new Ln(u,f)};function Ln(u,f){tn.call(this),this.g=new Gx(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!O(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!O(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new da(this)}y(Ln,tn),Ln.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ln.prototype.close=function(){Ov(this.g)},Ln.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=Ev(u),u=m);f.i.push(new BL(f.Ya++,u)),f.G==3&&Rh(f)},Ln.prototype.N=function(){this.g.l=null,delete this.j,Ov(this.g),delete this.g,Ln.aa.N.call(this)};function iT(u){bv.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(let m in f){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}y(iT,bv);function oT(){Dv.call(this),this.status=1}y(oT,Dv);function da(u){this.g=u}y(da,rT),da.prototype.ua=function(){vn(this.g,"a")},da.prototype.ta=function(u){vn(this.g,new iT(u))},da.prototype.sa=function(u){vn(this.g,new oT)},da.prototype.ra=function(){vn(this.g,"b")},Oh.prototype.createWebChannel=Oh.prototype.g,Ln.prototype.send=Ln.prototype.o,Ln.prototype.open=Ln.prototype.m,Ln.prototype.close=Ln.prototype.close,YE=Oi.createWebChannelTransport=function(){return new Oh},QE=Oi.getStatEventTarget=function(){return Eh()},KE=Oi.Event=Jo,vg=Oi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ih.NO_ERROR=0,Ih.TIMEOUT=8,Ih.HTTP_ERROR=6,Cd=Oi.ErrorCode=Ih,Cx.COMPLETE="complete",WE=Oi.EventType=Cx,gx.EventType=_u,_u.OPEN="a",_u.CLOSE="b",_u.ERROR="c",_u.MESSAGE="d",tn.prototype.listen=tn.prototype.K,xc=Oi.WebChannel=gx,GE=Oi.FetchXmlHttpFactory=Tu,mt.prototype.listenOnce=mt.prototype.L,mt.prototype.getLastError=mt.prototype.Ka,mt.prototype.getLastErrorCode=mt.prototype.Ba,mt.prototype.getStatus=mt.prototype.Z,mt.prototype.getResponseJson=mt.prototype.Oa,mt.prototype.getResponseText=mt.prototype.oa,mt.prototype.send=mt.prototype.ea,mt.prototype.setWithCredentials=mt.prototype.Ha,HE=Oi.XhrIo=mt}).apply(typeof yg<"u"?yg:typeof self<"u"?self:typeof window<"u"?window:{});var rk="@firebase/firestore";var Vt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Vt.UNAUTHENTICATED=new Vt(null),Vt.GOOGLE_CREDENTIALS=new Vt("google-credentials-uid"),Vt.FIRST_PARTY=new Vt("first-party-uid"),Vt.MOCK_USER=new Vt("mock-user");var ru="10.12.0";var Ro=new Lh("@firebase/firestore");function Pc(){return Ro.logLevel}function rF(n){Ro.setLogLevel(n)}function W(n,...e){if(Ro.logLevel<=Rr.DEBUG){let t=e.map(Jb);Ro.debug(`Firestore (${ru}): ${n}`,...t)}}function Dt(n,...e){if(Ro.logLevel<=Rr.ERROR){let t=e.map(Jb);Ro.error(`Firestore (${ru}): ${n}`,...t)}}function ar(n,...e){if(Ro.logLevel<=Rr.WARN){let t=e.map(Jb);Ro.warn(`Firestore (${ru}): ${n}`,...t)}}function Jb(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ie(n="Unexpected state"){let e=`FIRESTORE (${ru}) INTERNAL ASSERTION FAILED: `+n;throw Dt(e),new Error(e)}function de(n,e){n||ie()}function iF(n,e){n||ie()}function te(n,e){return n}var j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},G=class extends hT{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Lt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Mg=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},tI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Vt.UNAUTHENTICATED))}shutdown(){}},nI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},rI=class{constructor(e){this.t=e,this.currentUser=Vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new Lt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Lt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>V(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Lt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(de(typeof r.accessToken=="string"),new Mg(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string"),new Vt(e)}},iI=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Vt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},oI=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new iI(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},sI=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},aI=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let r=o=>{o.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,W("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(de(typeof t.token=="string"),this.R=t.token,new sI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function dG(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Ag=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=dG(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function _e(n,e){return n<e?-1:n>e?1:0}function Bc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function oF(n){return n+"\0"}var pt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new G(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new G(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new G(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?_e(this.nanoseconds,e.nanoseconds):_e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var he=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new pt(0,0))}static max(){return new n(new pt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Pg=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ie(),r===void 0?r=e.length-t:r>e.length-t&&ie(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},je=class n extends Pg{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new G(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},hG=/^[_a-zA-Z][_a-zA-Z0-9]*$/,xt=class n extends Pg{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return hG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new G(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new G(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new G(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new G(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ee=class n{constructor(e){this.path=e}static fromPath(e){return new n(je.fromString(e))}static fromName(e){return new n(je.fromString(e).popFirst(5))}static empty(){return new n(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new je(e.slice()))}};var Uc=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function cI(n){return n.fields.find(e=>e.kind===2)}function Vs(n){return n.fields.filter(e=>e.kind!==2)}Uc.UNKNOWN_ID=-1;var Vc=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var Nd=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,cr.min())}};function sF(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=he.fromTimestamp(r===1e9?new pt(t+1,0):new pt(t,r));return new cr(i,ee.empty(),e)}function aF(n){return new cr(n.readTime,n.key,-1)}var cr=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(he.min(),ee.empty(),-1)}static max(){return new n(he.max(),ee.empty(),-1)}};function eD(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ee.comparator(n.documentKey,e.documentKey),t!==0?t:_e(n.largestBatchId,e.largestBatchId))}var cF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Rg=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function $o(n){return V(this,null,function*(){if(n.code!==j.FAILED_PRECONDITION||n.message!==cF)throw n;W("LocalStore","Unexpectedly lost primary lease")})}var F=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(d=>{s[l]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var Ng=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Lt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new zs(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=tD(r.target.error);this.V.reject(new zs(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new zs(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(W("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new lI(t)}},No=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(Ru())===12.2&&Dt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return W("SimpleDb","Removing database:",e),Ls(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Vh())return!1;if(n.C())return!0;let e=Ru(),t=n.S(e),r=0<t&&t<10,i=uF(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return V(this,null,function*(){return this.db||(W("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new zs(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new G(j.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new G(j.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new zs(e,s))},i.onupgradeneeded=o=>{W("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{W("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return V(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=Ng.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),F.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(W("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function uF(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var uI=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ls(this.B.delete())}},zs=class extends G{constructor(e,t){super(j.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function zo(n){return n.name==="IndexedDbTransactionError"}var lI=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(W("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(W("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ls(r)}add(e){return W("SimpleDb","ADD",this.store.name,e,e),Ls(this.store.add(e))}get(e){return Ls(this.store.get(e)).next(t=>(t===void 0&&(t=null),W("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return W("SimpleDb","DELETE",this.store.name,e),Ls(this.store.delete(e))}count(){return W("SimpleDb","COUNT",this.store.name),Ls(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new F((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new F((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){W("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new F((r,i)=>{t.onerror=o=>{let s=tD(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new F((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new uI(a),l=t(a.primaryKey,a.value,c);if(l instanceof F){let d=l.catch(h=>(c.done(),F.reject(h)));r.push(d)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>F.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Ls(n){return new F((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=tD(r.target.error);t(i)}})}var ik=!1;function tD(n){let e=No.S(Ru());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new G("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ik||(ik=!0,setTimeout(()=>{throw r},0)),r}}return n}var dI=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){W("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>V(this,null,function*(){this.task=null;try{W("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){zo(t)?W("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield $o(t)}yield this.X(6e4)}))}},hI=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return V(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return F.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return W("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(W("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=aF(o);eD(s,r)>0&&(r=s)}),new cr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var qn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function th(n){return n==null}function Od(n){return n===0&&1/n==-1/0}function lF(n){return typeof n=="number"&&Number.isInteger(n)&&!Od(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Sn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ok(e)),e=fG(n.get(t),e);return ok(e)}function fG(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function ok(n){return n+""}function Wr(n){let e=n.length;if(de(e>=2),e===2)return de(n.charAt(0)===""&&n.charAt(1)===""),je.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&ie(),n.charAt(s+1)){case"":let a=n.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:ie()}o=s+2}return new je(r)}var sk=["userId","batchId"];function Ig(n,e){return[n,Sn(e)]}function dF(n,e,t){return[n,Sn(e),t]}var pG={},mG=["prefixPath","collectionGroup","readTime","documentId"],gG=["prefixPath","collectionGroup","documentId"],yG=["collectionGroup","readTime","prefixPath","documentId"],vG=["canonicalId","targetId"],_G=["targetId","path"],wG=["path","targetId"],CG=["collectionId","parent"],EG=["indexId","uid"],IG=["uid","sequenceNumber"],bG=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],DG=["indexId","uid","orderedDocumentKey"],xG=["userId","collectionPath","documentId"],TG=["userId","collectionPath","largestBatchId"],SG=["userId","collectionGroup","largestBatchId"],hF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],MG=[...hF,"documentOverlays"],fF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],pF=fF,mF=[...pF,"indexConfiguration","indexState","indexEntries"],AG=mF;var kd=class extends Rg{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function Yt(n,e){let t=te(n);return No.F(t._e,e)}function ak(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ta(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function gF(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var rt=class n{constructor(e,t){this.comparator=e,this.root=t||Qr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fc(this.root,e,this.comparator,!0)}},Fc=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Qr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();let e=this.left.check();if(e!==this.right.check())throw ie();return e+(this.isRed()?0:1)}};Qr.EMPTY=null,Qr.RED=!0,Qr.BLACK=!1;Qr.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Qr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Xe=class n{constructor(e){this.comparator=e,this.data=new rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Og(this.data.getIterator())}getIteratorFrom(e){return new Og(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Og=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Tc(n){return n.hasNext()?n.getNext():void 0}var Hn=class n{constructor(e){this.fields=e,e.sort(xt.comparator)}static empty(){return new n([])}unionWith(e){let t=new Xe(xt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Bc(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var kg=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function yF(){return typeof atob<"u"}var Qt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new kg("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Qt.EMPTY_BYTE_STRING=new Qt("");var PG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vi(n){if(de(!!n),typeof n=="string"){let e=0,t=PG.exec(n);if(de(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ct(n.seconds),nanos:Ct(n.nanos)}}function Ct(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Oo(n){return typeof n=="string"?Qt.fromBase64String(n):Qt.fromUint8Array(n)}function Dy(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function nD(n){let e=n.mapValue.fields.__previous_value__;return Dy(e)?nD(e):e}function Fd(n){let e=Vi(n.mapValue.fields.__local_write_time__.timestampValue);return new pt(e.seconds,e.nanos)}var fI=class{constructor(e,t,r,i,o,s,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},ko=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Ao={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},bg={nullValue:"NULL_VALUE"};function qs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Dy(n)?4:vF(n)?9007199254740991:10:ie()}function Xr(n,e){if(n===e)return!0;let t=qs(n);if(t!==qs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Fd(n).isEqual(Fd(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Vi(i.timestampValue),a=Vi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Oo(i.bytesValue).isEqual(Oo(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Ct(i.geoPointValue.latitude)===Ct(o.geoPointValue.latitude)&&Ct(i.geoPointValue.longitude)===Ct(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ct(i.integerValue)===Ct(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ct(i.doubleValue),a=Ct(o.doubleValue);return s===a?Od(s)===Od(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Bc(n.arrayValue.values||[],e.arrayValue.values||[],Xr);case 10:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(ak(s)!==ak(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Xr(s[c],a[c])))return!1;return!0}(n,e);default:return ie()}}function Vd(n,e){return(n.values||[]).find(t=>Xr(t,e))!==void 0}function Fo(n,e){if(n===e)return 0;let t=qs(n),r=qs(e);if(t!==r)return _e(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return _e(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ct(o.integerValue||o.doubleValue),c=Ct(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return ck(n.timestampValue,e.timestampValue);case 4:return ck(Fd(n),Fd(e));case 5:return _e(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Oo(o),c=Oo(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=_e(a[l],c[l]);if(d!==0)return d}return _e(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=_e(Ct(o.latitude),Ct(s.latitude));return a!==0?a:_e(Ct(o.longitude),Ct(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,s){let a=o.values||[],c=s.values||[];for(let l=0;l<a.length&&l<c.length;++l){let d=Fo(a[l],c[l]);if(d)return d}return _e(a.length,c.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===Ao.mapValue&&s===Ao.mapValue)return 0;if(o===Ao.mapValue)return 1;if(s===Ao.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){let p=_e(c[h],d[h]);if(p!==0)return p;let g=Fo(a[c[h]],l[d[h]]);if(g!==0)return g}return _e(c.length,d.length)}(n.mapValue,e.mapValue);default:throw ie()}}function ck(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return _e(n,e);let t=Vi(n),r=Vi(e),i=_e(t.seconds,r.seconds);return i!==0?i:_e(t.nanos,r.nanos)}function $c(n){return pI(n)}function pI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Vi(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Oo(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ee.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=pI(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${pI(t.fields[s])}`;return i+"}"}(n.mapValue):ie()}function Hs(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function mI(n){return!!n&&"integerValue"in n}function Ld(n){return!!n&&"arrayValue"in n}function uk(n){return!!n&&"nullValue"in n}function lk(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Dg(n){return!!n&&"mapValue"in n}function Sd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ta(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Sd(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Sd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function vF(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function RG(n){return"nullValue"in n?bg:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Hs(ko.empty(),ee.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ie()}function NG(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Hs(ko.empty(),ee.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ao:ie()}function dk(n,e){let t=Fo(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function hk(n,e){let t=Fo(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var yn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Dg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sd(t)}setAll(e){let t=xt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Sd(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Dg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Xr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Dg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ta(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Sd(this.value))}};function _F(n){let e=[];return ta(n.fields,(t,r)=>{let i=new xt([t]);if(Dg(r)){let o=_F(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Hn(e)}var jt=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,he.min(),he.min(),he.min(),yn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,he.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,he.min(),he.min(),yn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,he.min(),he.min(),yn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(he.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=he.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Jr=class{constructor(e,t){this.position=e,this.inclusive=t}};function fk(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=ee.comparator(ee.fromName(s.referenceValue),t.key):r=Fo(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function pk(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Xr(n.position[t],e.position[t]))return!1;return!0}var Gs=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function OG(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Fg=class{},Fe=class n extends Fg{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new vI(e,t,r):t==="array-contains"?new CI(e,r):t==="in"?new Vg(e,r):t==="not-in"?new EI(e,r):t==="array-contains-any"?new II(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new _I(e,r):new wI(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Fo(t,this.value)):t!==null&&qs(this.value)===qs(t)&&this.matchesComparison(Fo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},We=class n extends Fg{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return zc(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function zc(n){return n.op==="and"}function gI(n){return n.op==="or"}function rD(n){return wF(n)&&zc(n)}function wF(n){for(let e of n.filters)if(e instanceof We)return!1;return!0}function yI(n){if(n instanceof Fe)return n.field.canonicalString()+n.op.toString()+$c(n.value);if(rD(n))return n.filters.map(e=>yI(e)).join(",");{let e=n.filters.map(t=>yI(t)).join(",");return`${n.op}(${e})`}}function CF(n,e){return n instanceof Fe?function(r,i){return i instanceof Fe&&r.op===i.op&&r.field.isEqual(i.field)&&Xr(r.value,i.value)}(n,e):n instanceof We?function(r,i){return i instanceof We&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&CF(s,i.filters[a]),!0):!1}(n,e):void ie()}function EF(n,e){let t=n.filters.concat(e);return We.create(t,n.op)}function IF(n){return n instanceof Fe?function(t){return`${t.field.canonicalString()} ${t.op} ${$c(t.value)}`}(n):n instanceof We?function(t){return t.op.toString()+" {"+t.getFilters().map(IF).join(" ,")+"}"}(n):"Filter"}var vI=class extends Fe{constructor(e,t,r){super(e,t,r),this.key=ee.fromName(r.referenceValue)}matches(e){let t=ee.comparator(e.key,this.key);return this.matchesComparison(t)}},_I=class extends Fe{constructor(e,t){super(e,"in",t),this.keys=bF("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},wI=class extends Fe{constructor(e,t){super(e,"not-in",t),this.keys=bF("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function bF(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ee.fromName(r.referenceValue))}var CI=class extends Fe{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Ld(t)&&Vd(t.arrayValue,this.value)}},Vg=class extends Fe{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Vd(this.value.arrayValue,t)}},EI=class extends Fe{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Vd(this.value.arrayValue,t)}},II=class extends Fe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Ld(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Vd(this.value.arrayValue,r))}};var bI=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function DI(n,e=null,t=[],r=[],i=null,o=null,s=null){return new bI(n,e,t,r,i,o,s)}function Ws(n){let e=te(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>yI(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),th(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>$c(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>$c(r)).join(",")),e.ue=t}return e.ue}function nh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!OG(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!CF(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!pk(n.startAt,e.startAt)&&pk(n.endAt,e.endAt)}function Lg(n){return ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function jg(n,e){return n.filters.filter(t=>t instanceof Fe&&t.field.isEqual(e))}function mk(n,e,t){let r=bg,i=!0;for(let o of jg(n,e)){let s=bg,a=!0;switch(o.op){case"<":case"<=":s=RG(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=bg}dk({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];dk({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function gk(n,e,t){let r=Ao,i=!0;for(let o of jg(n,e)){let s=Ao,a=!0;switch(o.op){case">=":case">":s=NG(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Ao}hk({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];hk({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var Sr=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function DF(n,e,t,r,i,o,s,a){return new Sr(n,e,t,r,i,o,s,a)}function iu(n){return new Sr(n)}function yk(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function iD(n){return n.collectionGroup!==null}function Lc(n){let e=te(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Xe(xt.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Gs(o,r))}),t.has(xt.keyField().canonicalString())||e.ce.push(new Gs(xt.keyField(),r))}return e.ce}function Mn(n){let e=te(n);return e.le||(e.le=kG(e,Lc(n))),e.le}function kG(n,e){if(n.limitType==="F")return DI(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Gs(i.field,o)});let t=n.endAt?new Jr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Jr(n.startAt.position,n.startAt.inclusive):null;return DI(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function xI(n,e){let t=n.filters.concat([e]);return new Sr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Bg(n,e,t){return new Sr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function rh(n,e){return nh(Mn(n),Mn(e))&&n.limitType===e.limitType}function xF(n){return`${Ws(Mn(n))}|lt:${n.limitType}`}function Rc(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>IF(i)).join(", ")}]`),th(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>$c(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>$c(i)).join(",")),`Target(${r})`}(Mn(n))}; limitType=${n.limitType})`}function ih(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ee.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Lc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=fk(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,Lc(r),i)||r.endAt&&!function(s,a,c){let l=fk(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,Lc(r),i))}(n,e)}function TF(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function SF(n){return(e,t)=>{let r=!1;for(let i of Lc(n)){let o=FG(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function FG(n,e,t){let r=n.field.isKeyField()?ee.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?Fo(c,l):ie()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ie()}}var ei=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ta(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return gF(this.inner)}size(){return this.innerSize}};var VG=new rt(ee.comparator);function Vn(){return VG}var MF=new rt(ee.comparator);function xd(...n){let e=MF;for(let t of n)e=e.insert(t.key,t);return e}function AF(n){let e=MF;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Kr(){return Md()}function PF(){return Md()}function Md(){return new ei(n=>n.toString(),(n,e)=>n.isEqual(e))}var LG=new rt(ee.comparator),jG=new Xe(ee.comparator);function Ce(...n){let e=jG;for(let t of n)e=e.add(t);return e}var BG=new Xe(_e);function oD(){return BG}function RF(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Od(e)?"-0":e}}function NF(n){return{integerValue:""+n}}function OF(n,e){return lF(e)?NF(e):RF(n,e)}var qc=class{constructor(){this._=void 0}};function UG(n,e,t){return n instanceof Vo?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Dy(o)&&(o=nD(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Li?FF(n,e):n instanceof ji?VF(n,e):function(i,o){let s=kF(i,o),a=vk(s)+vk(i.Pe);return mI(s)&&mI(i.Pe)?NF(a):RF(i.serializer,a)}(n,e)}function $G(n,e,t){return n instanceof Li?FF(n,e):n instanceof ji?VF(n,e):t}function kF(n,e){return n instanceof Lo?function(r){return mI(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Vo=class extends qc{},Li=class extends qc{constructor(e){super(),this.elements=e}};function FF(n,e){let t=LF(e);for(let r of n.elements)t.some(i=>Xr(i,r))||t.push(r);return{arrayValue:{values:t}}}var ji=class extends qc{constructor(e){super(),this.elements=e}};function VF(n,e){let t=LF(e);for(let r of n.elements)t=t.filter(i=>!Xr(i,r));return{arrayValue:{values:t}}}var Lo=class extends qc{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function vk(n){return Ct(n.integerValue||n.doubleValue)}function LF(n){return Ld(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Ks=class{constructor(e,t){this.field=e,this.transform=t}};function zG(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Li&&i instanceof Li||r instanceof ji&&i instanceof ji?Bc(r.elements,i.elements,Xr):r instanceof Lo&&i instanceof Lo?Xr(r.Pe,i.Pe):r instanceof Vo&&i instanceof Vo}(n.transform,e.transform)}var TI=class{constructor(e,t){this.version=e,this.transformResults=t}},Et=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function xg(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Hc=class{};function jF(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Bo(n.key,Et.none()):new jo(n.key,n.data,Et.none());{let t=n.data,r=yn.empty(),i=new Xe(xt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Mr(n.key,r,new Hn(i.toArray()),Et.none())}}function qG(n,e,t){n instanceof jo?function(i,o,s){let a=i.value.clone(),c=wk(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Mr?function(i,o,s){if(!xg(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=wk(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(BF(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Ad(n,e,t,r){return n instanceof jo?function(o,s,a,c){if(!xg(o.precondition,s))return a;let l=o.value.clone(),d=Ck(o.fieldTransforms,c,s);return l.setAll(d),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Mr?function(o,s,a,c){if(!xg(o.precondition,s))return a;let l=Ck(o.fieldTransforms,c,s),d=s.data;return d.setAll(BF(o)),d.setAll(l),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))}(n,e,t,r):function(o,s,a){return xg(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function HG(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=kF(r.transform,i||null);o!=null&&(t===null&&(t=yn.empty()),t.set(r.field,o))}return t||null}function _k(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Bc(r,i,(o,s)=>zG(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var jo=class extends Hc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Mr=class extends Hc{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function BF(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function wk(n,e,t){let r=new Map;de(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,$G(s,a,t[i]))}return r}function Ck(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,UG(o,s,e))}return r}var Bo=class extends Hc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},jd=class extends Hc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Bd=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&qG(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ad(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Ad(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=PF();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=jF(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(he.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ce())}isEqual(e){return this.batchId===e.batchId&&Bc(this.mutations,e.mutations,(t,r)=>_k(t,r))&&Bc(this.baseMutations,e.baseMutations,(t,r)=>_k(t,r))}},SI=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){de(e.mutations.length===r.length);let i=function(){return LG}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Ud=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var MI=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var kt,Le;function UF(n){switch(n){default:return ie();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function $F(n){if(n===void 0)return Dt("GRPC error has no .code"),j.UNKNOWN;switch(n){case kt.OK:return j.OK;case kt.CANCELLED:return j.CANCELLED;case kt.UNKNOWN:return j.UNKNOWN;case kt.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case kt.INTERNAL:return j.INTERNAL;case kt.UNAVAILABLE:return j.UNAVAILABLE;case kt.UNAUTHENTICATED:return j.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case kt.NOT_FOUND:return j.NOT_FOUND;case kt.ALREADY_EXISTS:return j.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return j.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case kt.ABORTED:return j.ABORTED;case kt.OUT_OF_RANGE:return j.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return j.UNIMPLEMENTED;case kt.DATA_LOSS:return j.DATA_LOSS;default:return ie()}}(Le=kt||(kt={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";var Ek=null;function zF(){return new TextEncoder}var GG=new Do([4294967295,4294967295],0);function Ik(n){let e=zF().encode(n),t=new qE;return t.update(e),new Uint8Array(t.digest())}function bk(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Do([t,r],0),new Do([i,o],0)]}var AI=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new $s(`Invalid padding: ${t}`);if(r<0)throw new $s(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $s(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new $s(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Do.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Do.fromNumber(r)));return i.compare(GG)===1&&(i=new Do([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=Ik(e),[r,i]=bk(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=Ik(e),[r,i]=bk(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},$s=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var $d=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,zd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(he.min(),i,new rt(_e),Vn(),Ce())}},zd=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Ce(),Ce(),Ce())}};var jc=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Ug=class{constructor(e,t){this.targetId=e,this.me=t}},$g=class{constructor(e,t,r=Qt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},zg=class{constructor(){this.fe=0,this.ge=xk(),this.pe=Qt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Ce(),t=Ce(),r=Ce();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ie()}}),new zd(this.pe,this.ye,e,t,r)}ve(){this.we=!1,this.ge=xk()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,de(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},PI=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Vn(),this.qe=Dk(),this.Qe=new rt(_e)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:ie()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(Lg(o))if(r===0){let s=new ee(o.path);this.Ue(t,s,jt.newNoDocument(s,he.min()))}else de(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}Ek?.et(function(d,h,p,g,y){var E,w,T,O,P,B;let q={localCacheCount:d,existenceFilterCount:h.count,databaseId:p.database,projectId:p.projectId},z=h.unchangedNames;return z&&(q.bloomFilter={applied:y===0,hashCount:(E=z?.hashCount)!==null&&E!==void 0?E:0,bitmapLength:(O=(T=(w=z?.bits)===null||w===void 0?void 0:w.bitmap)===null||T===void 0?void 0:T.length)!==null&&O!==void 0?O:0,padding:(B=(P=z?.bits)===null||P===void 0?void 0:P.padding)!==null&&B!==void 0?B:0,mightContain:b=>{var _;return(_=g?.mightContain(b))!==null&&_!==void 0&&_}}),q}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Oo(r).toUint8Array()}catch(c){if(c instanceof kg)return ar("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new AI(s,i,o)}catch(c){return ar(c instanceof $s?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&Lg(a.target)){let c=new ee(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,jt.newNoDocument(c,e))}o.be&&(t.set(s,o.Ce()),o.ve())}});let r=Ce();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new $d(e,t,this.Qe,this.ke,r);return this.ke=Vn(),this.qe=Dk(),this.Qe=new rt(_e),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new zg,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Xe(_e),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||W("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new zg),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function Dk(){return new rt(ee.comparator)}function xk(){return new rt(ee.comparator)}var WG={asc:"ASCENDING",desc:"DESCENDING"},KG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QG={and:"AND",or:"OR"},RI=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function NI(n,e){return n.useProto3Json||th(e)?e:{value:e}}function Gc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qF(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function YG(n,e){return Gc(n,e.toTimestamp())}function Tt(n){return de(!!n),he.fromTimestamp(function(t){let r=Vi(t);return new pt(r.seconds,r.nanos)}(n))}function sD(n,e){return OI(n,e).canonicalString()}function OI(n,e){let t=function(i){return new je(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function HF(n){let e=je.fromString(n);return de(t2(e)),e}function qd(n,e){return sD(n.databaseId,e.path)}function Yr(n,e){let t=HF(e);if(t.get(1)!==n.databaseId.projectId)throw new G(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new G(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ee(KF(t))}function GF(n,e){return sD(n.databaseId,e)}function WF(n){let e=HF(n);return e.length===4?je.emptyPath():KF(e)}function kI(n){return new je(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function KF(n){return de(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Tk(n,e,t){return{name:qd(n,e),fields:t.value.mapValue.fields}}function QF(n,e,t){let r=Yr(n,e.name),i=Tt(e.updateTime),o=e.createTime?Tt(e.createTime):he.min(),s=new yn({mapValue:{fields:e.fields}}),a=jt.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function ZG(n,e){return"found"in e?function(r,i){de(!!i.found),i.found.name,i.found.updateTime;let o=Yr(r,i.found.name),s=Tt(i.found.updateTime),a=i.found.createTime?Tt(i.found.createTime):he.min(),c=new yn({mapValue:{fields:i.found.fields}});return jt.newFoundDocument(o,s,a,c)}(n,e):"missing"in e?function(r,i){de(!!i.missing),de(!!i.readTime);let o=Yr(r,i.missing),s=Tt(i.readTime);return jt.newNoDocument(o,s)}(n,e):ie()}function XG(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,d){return l.useProto3Json?(de(d===void 0||typeof d=="string"),Qt.fromBase64String(d||"")):(de(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Qt.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let d=l.code===void 0?j.UNKNOWN:$F(l.code);return new G(d,l.message||"")}(s);t=new $g(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Yr(n,r.document.name),o=Tt(r.document.updateTime),s=r.document.createTime?Tt(r.document.createTime):he.min(),a=new yn({mapValue:{fields:r.document.fields}}),c=jt.newFoundDocument(i,o,s,a),l=r.targetIds||[],d=r.removedTargetIds||[];t=new jc(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Yr(n,r.document),o=r.readTime?Tt(r.readTime):he.min(),s=jt.newNoDocument(i,o),a=r.removedTargetIds||[];t=new jc([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Yr(n,r.document),o=r.removedTargetIds||[];t=new jc([],o,i,null)}else{if(!("filter"in e))return ie();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new MI(i,o),a=r.targetId;t=new Ug(a,s)}}return t}function Hd(n,e){let t;if(e instanceof jo)t={update:Tk(n,e.key,e.value)};else if(e instanceof Bo)t={delete:qd(n,e.key)};else if(e instanceof Mr)t={update:Tk(n,e.key,e.data),updateMask:i7(e.fieldMask)};else{if(!(e instanceof jd))return ie();t={verify:qd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Vo)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Li)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ji)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Lo)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw ie()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:YG(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ie()}(n,e.precondition)),t}function FI(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?Et.updateTime(Tt(o.updateTime)):o.exists!==void 0?Et.exists(o.exists):Et.none()}(e.currentDocument):Et.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)de(a.setToServerValue==="REQUEST_TIME"),c=new Vo;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];c=new Li(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];c=new ji(d)}else"increment"in a?c=new Lo(s,a.increment):ie();let l=xt.fromServerFormat(a.fieldPath);return new Ks(l,c)}(n,i)):[];if(e.update){e.update.name;let i=Yr(n,e.update.name),o=new yn({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let l=c.fieldPaths||[];return new Hn(l.map(d=>xt.fromServerFormat(d)))}(e.updateMask);return new Mr(i,o,s,t,r)}return new jo(i,o,t,r)}if(e.delete){let i=Yr(n,e.delete);return new Bo(i,t)}if(e.verify){let i=Yr(n,e.verify);return new jd(i,t)}return ie()}function JG(n,e){return n&&n.length>0?(de(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Tt(i.updateTime):Tt(o);return s.isEqual(he.min())&&(s=Tt(o)),new TI(s,i.transformResults||[])}(t,e))):[]}function YF(n,e){return{documents:[GF(n,e.path)]}}function ZF(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=GF(n,i);let o=function(l){if(l.length!==0)return e2(We.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(d=>function(p){return{field:Nc(p.field),direction:t7(p.dir)}}(d))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=NI(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function XF(n){let e=WF(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){de(r===1);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=function(h){let p=JF(h);return p instanceof We&&rD(p)?p.getFilters():[p]}(t.where));let s=[];t.orderBy&&(s=function(h){return h.map(p=>function(y){return new Gs(Oc(y.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(t.orderBy));let a=null;t.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,th(p)?null:p}(t.limit));let c=null;t.startAt&&(c=function(h){let p=!!h.before,g=h.values||[];return new Jr(g,p)}(t.startAt));let l=null;return t.endAt&&(l=function(h){let p=!h.before,g=h.values||[];return new Jr(g,p)}(t.endAt)),DF(e,i,s,o,a,"F",c,l)}function e7(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function JF(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Oc(t.unaryFilter.field);return Fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Oc(t.unaryFilter.field);return Fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Oc(t.unaryFilter.field);return Fe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Oc(t.unaryFilter.field);return Fe.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(n):n.fieldFilter!==void 0?function(t){return Fe.create(Oc(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return We.create(t.compositeFilter.filters.map(r=>JF(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ie()}}(t.compositeFilter.op))}(n):ie()}function t7(n){return WG[n]}function n7(n){return KG[n]}function r7(n){return QG[n]}function Nc(n){return{fieldPath:n.canonicalString()}}function Oc(n){return xt.fromServerFormat(n.fieldPath)}function e2(n){return n instanceof Fe?function(t){if(t.op==="=="){if(lk(t.value))return{unaryFilter:{field:Nc(t.field),op:"IS_NAN"}};if(uk(t.value))return{unaryFilter:{field:Nc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(lk(t.value))return{unaryFilter:{field:Nc(t.field),op:"IS_NOT_NAN"}};if(uk(t.value))return{unaryFilter:{field:Nc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nc(t.field),op:n7(t.op),value:t.value}}}(n):n instanceof We?function(t){let r=t.getFilters().map(i=>e2(i));return r.length===1?r[0]:{compositeFilter:{op:r7(t.op),filters:r}}}(n):ie()}function i7(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function t2(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Wc=class n{constructor(e,t,r,i,o=he.min(),s=he.min(),a=Qt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var qg=class{constructor(e){this.ct=e}};function o7(n,e){let t;if(e.document)t=QF(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=ee.fromSegments(e.noDocument.path),i=Ys(e.noDocument.readTime);t=jt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ie();{let r=ee.fromSegments(e.unknownDocument.path),i=Ys(e.unknownDocument.version);t=jt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new pt(i[0],i[1]);return he.fromTimestamp(o)}(e.readTime)),t}function Sk(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Hg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:qd(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Gc(o,s.version.toTimestamp()),createTime:Gc(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Qs(e.version)};else{if(!e.isUnknownDocument())return ie();r.unknownDocument={path:t.path.toArray(),version:Qs(e.version)}}return r}function Hg(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Qs(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ys(n){let e=new pt(n.seconds,n.nanoseconds);return he.fromTimestamp(e)}function js(n,e){let t=(e.baseMutations||[]).map(o=>FI(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>FI(n.ct,o)),i=pt.fromMillis(e.localWriteTimeMs);return new Bd(e.batchId,i,t,r)}function Td(n){let e=Ys(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Ys(n.lastLimboFreeSnapshotVersion):he.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return de(o.documents.length===1),Mn(iu(WF(o.documents[0])))}(n.query):function(o){return Mn(XF(o))}(n.query),new Wc(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Qt.fromBase64String(n.resumeToken))}function n2(n,e){let t=Qs(e.snapshotVersion),r=Qs(e.lastLimboFreeSnapshotVersion),i;i=Lg(e.target)?YF(n.ct,e.target):ZF(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ws(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function aD(n){let e=XF({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Bg(e,e.limit,"L"):e}function ZE(n,e){return new Ud(e.largestBatchId,FI(n.ct,e.overlayMutation))}function Mk(n,e){let t=e.path.lastSegment();return[n,Sn(e.path.popLast()),t]}function Ak(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Qs(r.readTime),documentKey:Sn(r.documentKey.path),largestBatchId:r.largestBatchId}}var VI=class{getBundleMetadata(e,t){return Pk(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Ys(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return Pk(e).put(function(i){return{bundleId:i.id,createTime:Qs(Tt(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return Rk(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:aD(o.bundledQuery),readTime:Ys(o.readTime)}}(r)})}saveNamedQuery(e,t){return Rk(e).put(function(i){return{name:i.name,readTime:Qs(Tt(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function Pk(n){return Yt(n,"bundles")}function Rk(n){return Yt(n,"namedQueries")}var Gg=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return Ed(e).get(Mk(this.userId,t)).next(r=>r?ZE(this.serializer,r):null)}getOverlays(e,t){let r=Kr();return F.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new Ud(t,s);i.push(this.ht(e,a))}),F.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(Sn(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Ed(e).j("collectionPathOverlayIndex",a))}),F.waitFor(o)}getOverlaysForCollection(e,t,r){let i=Kr(),o=Sn(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Ed(e).U("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let l=ZE(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=Kr(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ed(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,d)=>{let h=ZE(this.serializer,l);o.size()<i||h.largestBatchId===s?(o.set(h.getKey(),h),s=h.largestBatchId):d.done()}).next(()=>o)}ht(e,t){return Ed(e).put(function(i,o,s){let[a,c,l]=Mk(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Hd(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function Ed(n){return Yt(n,"documentOverlays")}var ki=class{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Ct(e.integerValue));else if("doubleValue"in e){let r=Ct(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),Od(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(t,20),typeof r=="string"&&(r=Vi(r)),t.At(`${r.seconds||""}`),t.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Oo(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?vF(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):ie()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){let r=e.fields||{};this.Et(t,55);for(let i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){let r=e.values||[];this.Et(t,50);for(let i of r)this.It(i,t)}gt(e,t){this.Et(t,37),ee.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}};ki.bt=new ki;function s7(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Nk(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=s7(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var LI=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ct(r.value),r=t.next();this.vt()}Ft(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Mt(r.value),r=t.next();this.xt()}Ot(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{let i=t.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{let i=t.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){let t=this.Bt(e),r=Nk(t);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}qt(e){let t=this.Bt(e),r=Nk(t);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ct(e){let t=255&e;t===0?(this.Kt(0),this.Kt(255)):t===255?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},jI=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}},BI=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},Bs=class{constructor(){this.Gt=new LI,this.zt=new jI(this.Gt),this.jt=new BI(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var Us=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Jt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function xo(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=Ok(n.arrayValue,e.arrayValue),t!==0?t:(t=Ok(n.directionalValue,e.directionalValue),t!==0?t:ee.comparator(n.documentKey,e.documentKey)))}function Ok(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var Wg=class{constructor(e){this.Yt=new Xe((t,r)=>xt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let t of e.filters){let r=t;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(de(e.collectionGroup===this.collectionId),this.en)return!1;let t=cI(e);if(t!==void 0&&!this.nn(t))return!1;let r=Vs(e),i=new Set,o=0,s=0;for(;o<r.length&&this.nn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.rn(a,c)||!this.sn(this.Zt[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.Zt.length||!this.sn(this.Zt[s++],a))return!1}return!0}on(){if(this.en)return null;let e=new Xe(xt.comparator),t=[];for(let r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Vc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Vc(r.field,0))}for(let r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Vc(r.field,r.dir==="asc"?0:1)));return new Uc(Uc.UNKNOWN_ID,this.collectionId,t,Nd.empty())}nn(e){for(let t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function r2(n){var e,t;if(de(n instanceof Fe||n instanceof We),n instanceof Fe){if(n instanceof Vg){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>Fe.create(n.field,"==",o)))||[];return We.create(i,"or")}return n}let r=n.filters.map(i=>r2(i));return We.create(r,n.op)}function a7(n){if(n.getFilters().length===0)return[];let e=zI(r2(n));return de(i2(e)),UI(e)||$I(e)?[e]:e.getFilters()}function UI(n){return n instanceof Fe}function $I(n){return n instanceof We&&rD(n)}function i2(n){return UI(n)||$I(n)||function(t){if(t instanceof We&&gI(t)){for(let r of t.getFilters())if(!UI(r)&&!$I(r))return!1;return!0}return!1}(n)}function zI(n){if(de(n instanceof Fe||n instanceof We),n instanceof Fe)return n;if(n.filters.length===1)return zI(n.filters[0]);let e=n.filters.map(r=>zI(r)),t=We.create(e,n.op);return t=Kg(t),i2(t)?t:(de(t instanceof We),de(zc(t)),de(t.filters.length>1),t.filters.reduce((r,i)=>cD(r,i)))}function cD(n,e){let t;return de(n instanceof Fe||n instanceof We),de(e instanceof Fe||e instanceof We),t=n instanceof Fe?e instanceof Fe?function(i,o){return We.create([i,o],"and")}(n,e):kk(n,e):e instanceof Fe?kk(e,n):function(i,o){if(de(i.filters.length>0&&o.filters.length>0),zc(i)&&zc(o))return EF(i,o.getFilters());let s=gI(i)?i:o,a=gI(i)?o:i,c=s.filters.map(l=>cD(l,a));return We.create(c,"or")}(n,e),Kg(t)}function kk(n,e){if(zc(e))return EF(e,n.getFilters());{let t=e.filters.map(r=>cD(n,r));return We.create(t,"or")}}function Kg(n){if(de(n instanceof Fe||n instanceof We),n instanceof Fe)return n;let e=n.getFilters();if(e.length===1)return Kg(e[0]);if(wF(n))return n;let t=e.map(i=>Kg(i)),r=[];return t.forEach(i=>{i instanceof Fe?r.push(i):i instanceof We&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:We.create(r,n.op)}var qI=class{constructor(){this._n=new Gd}addToCollectionParentIndex(e,t){return this._n.add(t),F.resolve()}getCollectionParents(e,t){return F.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return F.resolve()}deleteFieldIndex(e,t){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,t){return F.resolve()}getDocumentsMatchingTarget(e,t){return F.resolve(null)}getIndexType(e,t){return F.resolve(0)}getFieldIndexes(e,t){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,t){return F.resolve(cr.min())}getMinOffsetFromCollectionGroup(e,t){return F.resolve(cr.min())}updateCollectionGroup(e,t,r){return F.resolve()}updateIndexEntries(e,t){return F.resolve()}},Gd=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Xe(je.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Xe(je.comparator)).toArray()}};var _g=new Uint8Array(0),HI=class{constructor(e,t){this.databaseId=t,this.an=new Gd,this.un=new ei(r=>Ws(r),(r,i)=>nh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});let o={collectionId:r,parent:Sn(i)};return Fk(e).put(o)}return F.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[oF(t),""],!1,!0);return Fk(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Wr(s.parent))}return r})}addFieldIndex(e,t){let r=Id(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=Mc(e);return o.next(a=>{s.put(Ak(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=Id(e),i=Mc(e),o=Sc(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=Id(e),r=Sc(e),i=Mc(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return F.forEach(this.cn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new Wg(r).on();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Sc(e),i=!0,o=new Map;return F.forEach(this.cn(t),s=>this.ln(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=Ce(),a=[];return F.forEach(o,(c,l)=>{W("IndexedDbIndexManager",`Using index ${function(P){return`id=${P.indexId}|cg=${P.collectionGroup}|f=${P.fields.map(B=>`${B.fieldPath}:${B.kind}`).join(",")}`}(c)} to execute ${Ws(t)}`);let d=function(P,B){let q=cI(B);if(q===void 0)return null;for(let z of jg(P,q.fieldPath))switch(z.op){case"array-contains-any":return z.value.arrayValue.values||[];case"array-contains":return[z.value]}return null}(l,c),h=function(P,B){let q=new Map;for(let z of Vs(B))for(let b of jg(P,z.fieldPath))switch(b.op){case"==":case"in":q.set(z.fieldPath.canonicalString(),b.value);break;case"not-in":case"!=":return q.set(z.fieldPath.canonicalString(),b.value),Array.from(q.values())}return null}(l,c),p=function(P,B){let q=[],z=!0;for(let b of Vs(B)){let _=b.kind===0?mk(P,b.fieldPath,P.startAt):gk(P,b.fieldPath,P.startAt);q.push(_.value),z&&(z=_.inclusive)}return new Jr(q,z)}(l,c),g=function(P,B){let q=[],z=!0;for(let b of Vs(B)){let _=b.kind===0?gk(P,b.fieldPath,P.endAt):mk(P,b.fieldPath,P.endAt);q.push(_.value),z&&(z=_.inclusive)}return new Jr(q,z)}(l,c),y=this.hn(c,l,p),E=this.hn(c,l,g),w=this.Pn(c,l,h),T=this.In(c.indexId,d,y,p.inclusive,E,g.inclusive,w);return F.forEach(T,O=>r.G(O,t.limit).next(P=>{P.forEach(B=>{let q=ee.fromSegments(B.documentKey);s.has(q)||(s=s.add(q),a.push(q))})}))}).next(()=>a)}return F.resolve(null)})}cn(e){let t=this.un.get(e);return t||(e.filters.length===0?t=[e]:t=a7(We.create(e.filters,"and")).map(r=>DI(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}In(e,t,r,i,o,s,a){let c=(t!=null?t.length:1)*Math.max(r.length,o.length),l=c/(t!=null?t.length:1),d=[];for(let h=0;h<c;++h){let p=t?this.Tn(t[h/l]):_g,g=this.En(e,p,r[h%l],i),y=this.dn(e,p,o[h%l],s),E=a.map(w=>this.En(e,p,w,!0));d.push(...this.createRange(g,y,E))}return d}En(e,t,r,i){let o=new Us(e,ee.empty(),t,r);return i?o:o.Jt()}dn(e,t,r,i){let o=new Us(e,ee.empty(),t,r);return i?o.Jt():o}ln(e,t){let r=new Wg(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.tn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.cn(t);return F.forEach(i,o=>this.ln(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let l=new Xe(xt.comparator),d=!1;for(let h of c.filters)for(let p of h.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?d=!0:l=l.add(p.field));for(let h of c.orderBy)h.field.isKeyField()||(l=l.add(h.field));return l.size+(d?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}An(e,t){let r=new Bs;for(let i of Vs(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Ht(i.kind);ki.bt.Pt(o,s)}return r.Wt()}Tn(e){let t=new Bs;return ki.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){let r=new Bs;return ki.bt.Pt(Hs(this.databaseId,t),r.Ht(function(o){let s=Vs(o);return s.length===0?0:s[s.length-1].kind}(e))),r.Wt()}Pn(e,t,r){if(r===null)return[];let i=[];i.push(new Bs);let o=0;for(let s of Vs(e)){let a=r[o++];for(let c of i)if(this.Vn(t,s.fieldPath)&&Ld(a))i=this.mn(i,s,a);else{let l=c.Ht(s.kind);ki.bt.Pt(a,l)}}return this.fn(i)}hn(e,t,r){return this.Pn(e,t,r.position)}fn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Wt();return t}mn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new Bs;c.seed(a.Wt()),ki.bt.Pt(s,c.Ht(t.kind)),o.push(c)}return o}Vn(e,t){return!!e.filters.find(r=>r instanceof Fe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=Id(e),i=Mc(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return F.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(d,h){let p=h?new Nd(h.sequenceNumber,new cr(Ys(h.readTime),new ee(Wr(h.documentKey)),h.largestBatchId)):Nd.empty(),g=d.fields.map(([y,E])=>new Vc(xt.fromServerFormat(y),E));return new Uc(d.indexId,d.collectionGroup,g,p)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:_e(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=Id(e),o=Mc(e);return this.gn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>F.forEach(a,c=>o.put(Ak(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return F.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?F.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),F.forEach(a,c=>this.pn(e,i,c).next(l=>{let d=this.yn(o,c);return l.isEqual(d)?F.resolve():this.wn(e,o,c,l,d)}))))})}Sn(e,t,r,i){return Sc(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,t.key),documentKey:t.key.path.toArray()})}bn(e,t,r,i){return Sc(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,t.key),t.key.path.toArray()])}pn(e,t,r){let i=Sc(e),o=new Xe(xo);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,t)])},(s,a)=>{o=o.add(new Us(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}yn(e,t){let r=new Xe(xo),i=this.An(t,e);if(i==null)return r;let o=cI(t);if(o!=null){let s=e.data.field(o.fieldPath);if(Ld(s))for(let a of s.arrayValue.values||[])r=r.add(new Us(t.indexId,e.key,this.Tn(a),i))}else r=r.add(new Us(t.indexId,e.key,_g,i));return r}wn(e,t,r,i,o){W("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(c,l,d,h,p){let g=c.getIterator(),y=l.getIterator(),E=Tc(g),w=Tc(y);for(;E||w;){let T=!1,O=!1;if(E&&w){let P=d(E,w);P<0?O=!0:P>0&&(T=!0)}else E!=null?O=!0:T=!0;T?(h(w),w=Tc(y)):O?(p(E),E=Tc(g)):(E=Tc(g),w=Tc(y))}}(i,o,xo,a=>{s.push(this.Sn(e,t,r,a))},a=>{s.push(this.bn(e,t,r,a))}),F.waitFor(s)}gn(e){let t=1;return Mc(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>xo(s,a)).filter((s,a,c)=>!a||xo(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=xo(s,e),c=xo(s,t);if(a===0)i[0]=e.Jt();else if(a>0&&c<0)i.push(s),i.push(s.Jt());else if(c>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Dn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,_g,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,_g,[]];o.push(IDBKeyRange.bound(a,c))}return o}Dn(e,t){return xo(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Vk)}getMinOffset(e,t){return F.mapArray(this.cn(t),r=>this.ln(e,r).next(i=>i||ie())).next(Vk)}};function Fk(n){return Yt(n,"collectionParents")}function Sc(n){return Yt(n,"indexEntries")}function Id(n){return Yt(n,"indexConfiguration")}function Mc(n){return Yt(n,"indexState")}function Vk(n){de(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;eD(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new cr(e.readTime,e.documentKey,t)}var Lk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sr=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function o2(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,c=r.J({range:s},(d,h,p)=>(a++,p.delete()));o.push(c.next(()=>{de(a===1)}));let l=[];for(let d of t.mutations){let h=dF(e,d.key.path,t.batchId);o.push(i.delete(h)),l.push(d.key)}return F.waitFor(o).next(()=>l)}function Qg(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ie();e=n.noDocument}return JSON.stringify(e).length}sr.DEFAULT_COLLECTION_PERCENTILE=10,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sr.DEFAULT=new sr(41943040,sr.DEFAULT_COLLECTION_PERCENTILE,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sr.DISABLED=new sr(-1,0,0);var Yg=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,t,r,i){de(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return To(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=kc(e),s=To(e);return s.add({}).next(a=>{de(typeof a=="number");let c=new Bd(a,t,r,i),l=function(g,y,E){let w=E.baseMutations.map(O=>Hd(g.ct,O)),T=E.mutations.map(O=>Hd(g.ct,O));return{userId:y,batchId:E.batchId,localWriteTimeMs:E.localWriteTime.toMillis(),baseMutations:w,mutations:T}}(this.serializer,this.userId,c),d=[],h=new Xe((p,g)=>_e(p.canonicalString(),g.canonicalString()));for(let p of i){let g=dF(this.userId,p.key.path,a);h=h.add(p.key.path.popLast()),d.push(s.put(l)),d.push(o.put(g,pG))}return h.forEach(p=>{d.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),F.waitFor(d).next(()=>c)})}lookupMutationBatch(e,t){return To(e).get(t).next(r=>r?(de(r.userId===this.userId),js(this.serializer,r)):null)}vn(e,t){return this.Cn[t]?F.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Cn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return To(e).J({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(de(a.batchId>=r),o=js(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return To(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return To(e).U("userMutationsIndex",t).next(r=>r.map(i=>js(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Ig(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return kc(e).J({range:i},(s,a,c)=>{let[l,d,h]=s,p=Wr(d);if(l===this.userId&&t.path.isEqual(p))return To(e).get(h).next(g=>{if(!g)throw ie();de(g.userId===this.userId),o.push(js(this.serializer,g))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Xe(_e),i=[];return t.forEach(o=>{let s=Ig(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=kc(e).J({range:a},(l,d,h)=>{let[p,g,y]=l,E=Wr(g);p===this.userId&&o.path.isEqual(E)?r=r.add(y):h.done()});i.push(c)}),F.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=Ig(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Xe(_e);return kc(e).J({range:s},(c,l,d)=>{let[h,p,g]=c,y=Wr(p);h===this.userId&&r.isPrefixOf(y)?y.length===i&&(a=a.add(g)):d.done()}).next(()=>this.Fn(e,a))}Fn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(To(e).get(o).next(s=>{if(s===null)throw ie();de(s.userId===this.userId),r.push(js(this.serializer,s))}))}),F.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return o2(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),F.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return F.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return kc(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=Wr(o[1]);i.push(c)}else a.done()}).next(()=>{de(i.length===0)})})}containsKey(e,t){return s2(e,this.userId,t)}xn(e){return a2(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function s2(n,e,t){let r=Ig(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return kc(n).J({range:o,H:!0},(a,c,l)=>{let[d,h,p]=a;d===e&&h===i&&(s=!0),l.done()}).next(()=>s)}function To(n){return Yt(n,"mutations")}function kc(n){return Yt(n,"documentMutations")}function a2(n){return Yt(n,"mutationQueues")}var Kc=class n{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new n(0)}static Ln(){return new n(-1)}};var GI=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{let r=new Kc(t.highestTargetId);return t.highestTargetId=r.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>he.fromTimestamp(new pt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.kn(e,i)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(t,r),this.kn(e,r))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ac(e).delete(t.targetId)).next(()=>this.Bn(e)).next(r=>(de(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return Ac(e).J((s,a)=>{let c=Td(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>F.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Ac(e).J((r,i)=>{let o=Td(i);t(o)})}Bn(e){return jk(e).get("targetGlobalKey").next(t=>(de(t!==null),t))}kn(e,t){return jk(e).put("targetGlobalKey",t)}qn(e,t){return Ac(e).put(n2(this.serializer,t))}Qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=Ws(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Ac(e).J({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let l=Td(a);nh(t,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=So(e);return t.forEach(s=>{let a=Sn(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),F.waitFor(i)}removeMatchingKeys(e,t,r){let i=So(e);return F.forEach(t,o=>{let s=Sn(o.path);return F.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=So(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=So(e),o=Ce();return i.J({range:r,H:!0},(s,a,c)=>{let l=Wr(s[1]),d=new ee(l);o=o.add(d)}).next(()=>o)}containsKey(e,t){let r=Sn(t.path),i=IDBKeyRange.bound([r],[oF(r)],!1,!0),o=0;return So(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return Ac(e).get(t).next(r=>r?Td(r):null)}};function Ac(n){return Yt(n,"targets")}function jk(n){return Yt(n,"targetGlobal")}function So(n){return Yt(n,"targetDocuments")}function Bk([n,e],[t,r]){let i=_e(n,t);return i===0?_e(e,r):i}var WI=class{constructor(e){this.Kn=e,this.buffer=new Xe(Bk),this.$n=0}Un(){return++this.$n}Wn(e){let t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();Bk(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},KI=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){W("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>V(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){zo(t)?W("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield $o(t)}yield this.zn(3e5)}))}},QI=class{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return F.resolve(qn.oe);let r=new WI(t);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(Lk)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lk):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let r,i,o,s,a,c,l,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,t))).next(h=>(o=h,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(l=Date.now(),Pc()<=Rr.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${h} documents in `+(l-c)+`ms
Total Duration: ${l-d}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:h})))}};function c7(n,e){return new QI(n,e)}var YI=class{constructor(e,t){this.db=e,this.garbageCollector=c7(this,t)}Hn(e){let t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Zn(e){let t=0;return this.Jn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(r,i)=>t(i))}addReference(e,t,r){return wg(e,r)}removeReference(e,t,r){return wg(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return wg(e,t)}er(e,t){return function(i,o){let s=!1;return a2(i).Y(a=>s2(i,a,o).next(c=>(c&&(s=!0),F.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.Xn(e,(s,a)=>{if(a<=t){let c=this.er(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,he.min()),So(e).delete(function(h){return[0,Sn(h.path)]}(s))))});i.push(c)}}).next(()=>F.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return wg(e,t)}Xn(e,t){let r=So(e),i,o=qn.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==qn.oe&&t(new ee(Wr(i)),o),o=l,i=c):o=qn.oe}).next(()=>{o!==qn.oe&&t(new ee(Wr(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function wg(n,e){return So(n).put(function(r,i){return{targetId:0,path:Sn(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var Zg=class{constructor(){this.changes=new ei(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,jt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?F.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var ZI=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Fs(e).put(r)}removeEntry(e,t,r){return Fs(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Hg(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.tr(e,r)))}getEntry(e,t){let r=jt.newInvalidDocument(t);return Fs(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(bd(t))},(i,o)=>{r=this.nr(t,o)}).next(()=>r)}rr(e,t){let r={size:0,document:jt.newInvalidDocument(t)};return Fs(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(bd(t))},(i,o)=>{r={document:this.nr(t,o),size:Qg(o)}}).next(()=>r)}getEntries(e,t){let r=Vn();return this.ir(e,t,(i,o)=>{let s=this.nr(i,o);r=r.insert(i,s)}).next(()=>r)}sr(e,t){let r=Vn(),i=new rt(ee.comparator);return this.ir(e,t,(o,s)=>{let a=this.nr(o,s);r=r.insert(o,a),i=i.insert(o,Qg(s))}).next(()=>({documents:r,_r:i}))}ir(e,t,r){if(t.isEmpty())return F.resolve();let i=new Xe(zk);t.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(bd(i.first()),bd(i.last())),s=i.getIterator(),a=s.getNext();return Fs(e).J({index:"documentKeyIndex",range:o},(c,l,d)=>{let h=ee.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&zk(a,h)<0;)r(a,null),a=s.getNext();a&&a.isEqual(h)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?d.$(bd(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Hg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Fs(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let d=Vn();for(let h of l){let p=this.nr(ee.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);p.isFoundDocument()&&(ih(t,p)||i.has(p.key))&&(d=d.insert(p.key,p))}return d})}getAllFromCollectionGroup(e,t,r,i){let o=Vn(),s=$k(t,r),a=$k(t,cr.max());return Fs(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,l,d)=>{let h=this.nr(ee.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(h.key,h),o.size===i&&d.done()}).next(()=>o)}newChangeBuffer(e){return new XI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Uk(e).get("remoteDocumentGlobalKey").next(t=>(de(!!t),t))}tr(e,t){return Uk(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){let r=o7(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(he.min())))return r}return jt.newInvalidDocument(e)}};function c2(n){return new ZI(n)}var XI=class extends Zg{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new ei(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Xe((o,s)=>_e(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.ur.get(o);if(t.push(this.ar.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=Sk(this.ar.serializer,s);i=i.add(o.path.popLast());let l=Qg(c);r+=l-a.size,t.push(this.ar.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=Sk(this.ar.serializer,s.convertToNoDocument(he.min()));t.push(this.ar.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.ar.updateMetadata(e,r)),F.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(r=>(this.ur.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:r,_r:i})=>(i.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function Uk(n){return Yt(n,"remoteDocumentGlobal")}function Fs(n){return Yt(n,"remoteDocumentsV14")}function bd(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function $k(n,e){let t=e.documentKey.path.toArray();return[n,Hg(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function zk(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=_e(t[o],r[o]),i)return i;return i=_e(t.length,r.length),i||(i=_e(t[t.length-2],r[r.length-2]),i||_e(t[t.length-1],r[r.length-1]))}var JI=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Xg=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Ad(r.mutation,i,Hn.empty(),pt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ce()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ce()){let i=Kr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=xd();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Kr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ce()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Vn(),s=Md(),a=function(){return Md()}();return t.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof Mr)?o=o.insert(l.key,l):d!==void 0?(s.set(l.key,d.mutation.getFieldMask()),Ad(d.mutation,l,d.mutation.getFieldMask(),pt.now())):s.set(l.key,Hn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,d)=>s.set(l,d)),t.forEach((l,d)=>{var h;return a.set(l,new JI(d,(h=s.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Md(),i=new rt((s,a)=>s-a),o=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let d=r.get(c)||Hn.empty();d=a.applyToLocalView(l,d),r.set(c,d);let h=(i.get(a.batchId)||Ce()).add(c);i=i.insert(a.batchId,h)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,h=PF();d.forEach(p=>{if(!o.has(p)){let g=jF(t.get(p),r.get(p));g!==null&&h.set(p,g),o=o.add(p)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,h))}return F.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return ee.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):iD(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):F.resolve(Kr()),a=-1,c=o;return s.next(l=>F.forEach(l,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),o.get(d)?F.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{c=c.insert(d,p)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,Ce())).next(d=>({batchId:a,changes:AF(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ee(t)).next(r=>{let i=xd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=xd();return this.indexManager.getCollectionParents(e,o).next(a=>F.forEach(a,c=>{let l=function(h,p){return new Sr(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((h,p)=>{s=s.insert(h,p)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let d=l.getKey();s.get(d)===null&&(s=s.insert(d,jt.newInvalidDocument(d)))});let a=xd();return s.forEach((c,l)=>{let d=o.get(c);d!==void 0&&Ad(d.mutation,l,Hn.empty(),pt.now()),ih(t,l)&&(a=a.insert(c,l))}),a})}};var eb=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return F.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Tt(i.createTime)}}(t)),F.resolve()}getNamedQuery(e,t){return F.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(i){return{name:i.name,query:aD(i.bundledQuery),readTime:Tt(i.readTime)}}(t)),F.resolve()}};var tb=class{constructor(){this.overlays=new rt(ee.comparator),this.hr=new Map}getOverlay(e,t){return F.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Kr();return F.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),F.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),F.resolve()}getOverlaysForCollection(e,t,r){let i=Kr(),o=t.length+1,s=new ee(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return F.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new rt((l,d)=>l-d),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let d=o.get(l.largestBatchId);d===null&&(d=Kr(),o=o.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=Kr(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return F.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Ud(t,r));let o=this.hr.get(t);o===void 0&&(o=Ce(),this.hr.set(t,o)),this.hr.set(t,o.add(r.key))}};var Wd=class{constructor(){this.Pr=new Xe(Ft.Ir),this.Tr=new Xe(Ft.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){let r=new Ft(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new Ft(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){let t=new ee(new je([])),r=new Ft(t,e),i=new Ft(t,e+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let t=new ee(new je([])),r=new Ft(t,e),i=new Ft(t,e+1),o=Ce();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Ft(e,0),r=this.Pr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ft=class{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return ee.comparator(e.key,t.key)||_e(e.pr,t.pr)}static Er(e,t){return _e(e.pr,t.pr)||ee.comparator(e.key,t.key)}};var nb=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Xe(Ft.Ir)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Bd(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.wr=this.wr.add(new Ft(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(s)}lookupMutationBatch(e,t){return F.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.br(r),o=i<0?0:i;return F.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ft(t,0),i=new Ft(t,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{let a=this.Sr(s.pr);o.push(a)}),F.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Xe(_e);return t.forEach(i=>{let o=new Ft(i,0),s=new Ft(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),F.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;ee.isDocumentKey(o)||(o=o.child(""));let s=new Ft(new ee(o),0),a=new Xe(_e);return this.wr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.pr)),!0)},s),F.resolve(this.Dr(a))}Dr(e){let t=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){de(this.Cr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return F.forEach(t.mutations,i=>{let o=new Ft(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){let r=new Ft(t,0),i=this.wr.firstAfterOrEqual(r);return F.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Cr(e,t){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var rb=class{constructor(e){this.vr=e,this.docs=function(){return new rt(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return F.resolve(r?r.document.mutableCopy():jt.newInvalidDocument(t))}getEntries(e,t){let r=Vn();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():jt.newInvalidDocument(i))}),F.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Vn(),s=t.path,a=new ee(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||eD(aF(d),r)<=0||(i.has(d.key)||ih(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return F.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ie()}Fr(e,t){return F.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new ib(this)}getSize(e){return F.resolve(this.size)}},ib=class extends Zg{constructor(e){super(),this.ar=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),F.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}};var ob=class{constructor(e){this.persistence=e,this.Mr=new ei(t=>Ws(t),nh),this.lastRemoteSnapshotVersion=he.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Wd,this.targetCount=0,this.Lr=Kc.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),F.resolve()}qn(e){this.Mr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Lr=new Kc(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,F.resolve()}updateTargetData(e,t){return this.qn(t),F.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),F.waitFor(o).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,t){let r=this.Mr.get(t)||null;return F.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),F.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),F.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),F.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Nr.gr(t);return F.resolve(r)}containsKey(e,t){return F.resolve(this.Nr.containsKey(t))}};var Jg=class{constructor(e,t){this.Br={},this.overlays={},this.kr=new qn(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new ob(this),this.indexManager=new qI,this.remoteDocumentCache=function(i){return new rb(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new qg(t),this.$r=new eb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new tb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new nb(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){W("MemoryPersistence","Starting transaction:",e);let i=new sb(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,t){return F.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}},sb=class extends Rg{constructor(e){super(),this.currentSequenceNumber=e}},ey=class n{constructor(e){this.persistence=e,this.zr=new Wd,this.jr=null}static Hr(e){return new n(e)}get Jr(){if(this.jr)return this.jr;throw ie()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),F.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),F.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Jr,r=>{let i=ee.fromPath(r);return this.Yr(e,i).next(o=>{o||t.removeEntry(i,he.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return F.or([()=>F.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}};var ab=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new Ng("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",sk,{unique:!0}),c.createObjectStore("documentMutations")}(e),qk(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=F.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),qk(e)),s=s.next(()=>function(c){let l=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:he.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",d)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,l){return l.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",sk,{unique:!0});let h=l.store("mutations"),p=d.map(g=>h.put(g));return F.waitFor(p)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.Xr(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),r<7&&i>=7&&(s=s.next(()=>this.ti(o))),r<8&&i>=8&&(s=s.next(()=>this.ni(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.ri(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:xG});l.createIndex("collectionPathOverlayIndex",TG,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",SG,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:mG});l.createIndex("documentKeyIndex",gG),l.createIndex("collectionGroupIndex",yG)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.si(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:EG}).createIndex("sequenceNumberIndex",IG,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:bG}).createIndex("documentKeyIndex",DG,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),s}ei(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Qg(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>F.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>F.forEach(a,c=>{de(c.userId===o.userId);let l=js(this.serializer,c);return o2(e,o.userId,l).next(()=>{})}))}))}ti(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let c=new je(s),l=function(h){return[0,Sn(h)]}(c);o.push(t.get(l).next(d=>d?F.resolve():(h=>t.put({targetId:0,path:Sn(h),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>F.waitFor(o))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:CG});let r=t.store("collectionParents"),i=new Gd,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:Sn(c)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let c=new je(s);return o(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,c],l)=>{let d=Wr(a);return o(d.popLast())}))}ri(e){let t=e.store("targets");return t.J((r,i)=>{let o=Td(i),s=n2(this.serializer,o);return t.put(s)})}ii(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),c=function(h){return h.document?new ee(je.fromString(h.document.name).popFirst(5)):h.noDocument?ee.fromSegments(h.noDocument.path):h.unknownDocument?ee.fromSegments(h.unknownDocument.path):ie()}(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>F.waitFor(i))}si(e,t){let r=t.store("mutations"),i=c2(this.serializer),o=new Jg(ey.Hr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(c=>{var l;let d=(l=a.get(c.userId))!==null&&l!==void 0?l:Ce();js(this.serializer,c).keys().forEach(h=>d=d.add(h)),a.set(c.userId,d)}),F.forEach(a,(c,l)=>{let d=new Vt(l),h=Gg.lt(this.serializer,d),p=o.getIndexManager(d),g=Yg.lt(d,this.serializer,p,o.referenceDelegate);return new Xg(i,g,h,p).recalculateAndSaveOverlaysForDocumentKeys(new kd(t,qn.oe),c).next()})})}};function qk(n){n.createObjectStore("targetDocuments",{keyPath:_G}).createIndex("documentTargetsIndex",wG,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",vG,{unique:!0}),n.createObjectStore("targetGlobal")}var XE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",cb=class n{constructor(e,t,r,i,o,s,a,c,l,d,h=16){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.oi=o,this.window=s,this.document=a,this._i=l,this.ai=d,this.ui=h,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=p=>Promise.resolve(),!n.D())throw new G(j.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new YI(this,i),this.Ti=t+"main",this.serializer=new qg(c),this.Ei=new No(this.Ti,this.ui,new ab(this.serializer)),this.Qr=new GI(this.referenceDelegate,this.serializer),this.remoteDocumentCache=c2(this.serializer),this.$r=new VI,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,d===!1&&Dt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new G(j.FAILED_PRECONDITION,XE);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new qn(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=t=>V(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(t=>V(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>V(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Cg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(zo(e))return W("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return W("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Dd(e).get("owner").next(t=>F.resolve(this.Si(t)))}bi(e){return Cg(e).delete(this.clientId)}Di(){return V(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=Yt(t,"clientMetadata");return r.U().next(i=>{let o=this.vi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return F.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.di)for(let t of e)this.di.removeItem(this.Fi(t.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?F.resolve(!0):Dd(e).get("owner").next(t=>{if(t!==null&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new G(j.FAILED_PRECONDITION,XE);return!1}}return!(!this.networkEnabled||!this.inForeground)||Cg(e).U().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&W("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return V(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new kd(e,qn.oe);return this.yi(t).next(()=>this.bi(t))}),this.Ei.close(),this.Li()})}vi(e,t){return e.filter(r=>this.Ci(r.updateTimeMs,t)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Cg(e).U().next(t=>this.vi(t,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return Yg.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new HI(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Gg.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,r){W("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(c){return c===16?AG:c===15?mF:c===14?pF:c===13?fF:c===12?MG:c===11?hF:void ie()}(this.ui),s;return this.Ei.runTransaction(e,i,o,a=>(s=new kd(a,this.kr?this.kr.next():qn.oe),t==="readwrite-primary"?this.gi(s).next(c=>!!c||this.pi(s)).next(c=>{if(!c)throw Dt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new G(j.FAILED_PRECONDITION,cF);return r(s)}).next(c=>this.wi(s).next(()=>c)):this.ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ki(e){return Dd(e).get("owner").next(t=>{if(t!==null&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new G(j.FAILED_PRECONDITION,XE)})}wi(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Dd(e).put("owner",t)}static D(){return No.D()}yi(e){let t=Dd(e);return t.get("owner").next(r=>this.Si(r)?(W("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):F.resolve())}Ci(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(Dt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let t=/(?:Version|Mobile)\/1[456]/;Bv()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{let r=((t=this.di)===null||t===void 0?void 0:t.getItem(this.Fi(e)))!==null;return W("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Dt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Dt("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Dd(n){return Yt(n,"owner")}function Cg(n){return Yt(n,"clientMetadata")}function uD(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var ub=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=Ce(),i=Ce();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var lb=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var ty=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Bv()?8:uF(Ru())>0?6:4}()}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ji(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new lb;return this.Ji(e,t,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,t,s,a.size)})}).next(()=>o.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(Pc()<=Rr.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Rc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),F.resolve()):(Pc()<=Rr.DEBUG&&W("QueryEngine","Query:",Rc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Pc()<=Rr.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Rc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mn(t))):F.resolve())}ji(e,t){if(yk(t))return F.resolve(null);let r=Mn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Bg(t,null,"F"),r=Mn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Ce(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.Zi(t,a);return this.Xi(t,l,s,c.readTime)?this.ji(e,Bg(t,null,"F")):this.es(e,l,t,c)}))})))}Hi(e,t,r,i){return yk(t)||i.isEqual(he.min())?F.resolve(null):this.zi.getDocuments(e,r).next(o=>{let s=this.Zi(t,o);return this.Xi(t,s,r,i)?F.resolve(null):(Pc()<=Rr.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Rc(t)),this.es(e,s,t,sF(i,-1)).next(a=>a))})}Zi(e,t){let r=new Xe(SF(e));return t.forEach((i,o)=>{ih(e,o)&&(r=r.add(o))}),r}Xi(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,t,r){return Pc()<=Rr.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Rc(t)),this.zi.getDocumentsMatchingQuery(e,t,cr.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var db=class{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new rt(_e),this.rs=new ei(o=>Ws(o),nh),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Xg(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}};function u2(n,e,t,r){return new db(n,e,t,r)}function l2(n,e){return V(this,null,function*(){let t=te(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=Ce();for(let l of i){s.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of o){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(l=>({us:l,removedBatchIds:s,addedBatchIds:a}))})})})}function u7(n,e){let t=te(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let h=l.batch,p=h.keys(),g=F.resolve();return p.forEach(y=>{g=g.next(()=>d.getEntry(c,y)).next(E=>{let w=l.docVersions.get(y);de(w!==null),E.version.compareTo(w)<0&&(h.applyToRemoteDocument(E,l),E.isValidDocument()&&(E.setReadTime(l.commitVersion),d.addEntry(E)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,h))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Ce();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function d2(n){let e=te(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function l7(n,e){let t=te(n),r=e.snapshotVersion,i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;let a=[];e.targetChanges.forEach((d,h)=>{let p=i.get(h);if(!p)return;a.push(t.Qr.removeMatchingKeys(o,d.removedDocuments,h).next(()=>t.Qr.addMatchingKeys(o,d.addedDocuments,h)));let g=p.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(Qt.EMPTY_BYTE_STRING,he.min()).withLastLimboFreeSnapshotVersion(he.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),i=i.insert(h,g),function(E,w,T){return E.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(p,g,d)&&a.push(t.Qr.updateTargetData(o,g))});let c=Vn(),l=Ce();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(h2(o,s,e.documentUpdates).next(d=>{c=d.cs,l=d.ls})),!r.isEqual(he.min())){let d=t.Qr.getLastRemoteSnapshotVersion(o).next(h=>t.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return F.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.ns=i,o))}function h2(n,e,t){let r=Ce(),i=Ce();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Vn();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(he.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):W("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:s,ls:i}})}function d7(n,e){let t=te(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Qc(n,e){let t=te(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(o=>o?(i=o,F.resolve(i)):t.Qr.allocateTargetId(r).next(s=>(i=new Wc(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}function Yc(n,e,t){return V(this,null,function*(){let r=te(n),i=r.ns.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!zo(s))throw s;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function ny(n,e,t){let r=te(n),i=he.min(),o=Ce();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,d){let h=te(c),p=h.rs.get(d);return p!==void 0?F.resolve(h.ns.get(p)):h.Qr.getTargetData(l,d)}(r,s,Mn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ts.getDocumentsMatchingQuery(s,e,t?i:he.min(),t?o:Ce())).next(a=>(m2(r,TF(e),a),{documents:a,hs:o})))}function f2(n,e){let t=te(n),r=te(t.Qr),i=t.ns.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function p2(n,e){let t=te(n),r=t.ss.get(e)||he.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.os.getAllFromCollectionGroup(i,e,sF(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(m2(t,e,i),i))}function m2(n,e,t){let r=n.ss.get(e)||he.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.ss.set(e,r)}function h7(n,e,t,r){return V(this,null,function*(){let i=te(n),o=Ce(),s=Vn();for(let l of t){let d=e.Ps(l.metadata.name);l.document&&(o=o.add(d));let h=e.Is(l);h.setReadTime(e.Ts(l.metadata.readTime)),s=s.insert(d,h)}let a=i.os.newChangeBuffer({trackRemovals:!0}),c=yield Qc(i,function(d){return Mn(iu(je.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>h2(l,a,s).next(d=>(a.apply(l),d)).next(d=>i.Qr.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Qr.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,d.cs,d.ls)).next(()=>d.cs)))})}function f7(r,i){return V(this,arguments,function*(n,e,t=Ce()){let o=yield Qc(n,Mn(aD(e.bundledQuery))),s=te(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=Tt(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.$r.saveNamedQuery(a,e);let l=o.withResumeToken(Qt.EMPTY_BYTE_STRING,c);return s.ns=s.ns.insert(l.targetId,l),s.Qr.updateTargetData(a,l).next(()=>s.Qr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Qr.addMatchingKeys(a,t,o.targetId)).next(()=>s.$r.saveNamedQuery(a,e))})})}function Hk(n,e){return`firestore_clients_${n}_${e}`}function Gk(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function JE(n,e){return`firestore_targets_${n}_${e}`}var ry=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Es(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new G(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(Dt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Pd=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Es(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new G(r.error.code,r.error.message))),o?new n(e,r.state,i):(Dt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},iy=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=oD();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=lF(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(Dt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},hb=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(Dt("SharedClientState",`Failed to parse online state: ${e}`),null)}},Kd=class{constructor(){this.activeTargetIds=oD()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Rd=class{constructor(e,t,r,i,o){this.window=e,this.oi=t,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new rt(_e),this.started=!1,this.ys=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=Hk(this.persistenceKey,this.Vs),this.Ss=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Kd),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return V(this,null,function*(){let e=yield this.syncEngine.Bi();for(let r of e){if(r===this.Vs)continue;let i=this.getItem(Hk(this.persistenceKey,r));if(i){let o=iy.Es(r,i);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();let t=this.storage.getItem(this.vs);if(t){let r=this.xs(t);r&&this.Os(r)}for(let r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,r){this.Ls(e,t,r),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(JE(this.persistenceKey,e));if(r){let i=Pd.Es(e,r);i&&(t=i.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(JE(this.persistenceKey,e))}updateQueryState(e,t,r){this.qs(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return W("SharedClientState","READ",e,t),t}setItem(e,t){W("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){W("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let t=e;if(t.storageArea===this.storage){if(W("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void Dt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>V(this,null,function*(){if(this.started){if(t.key!==null){if(this.bs.test(t.key)){if(t.newValue==null){let r=this.$s(t.key);return this.Us(r,null)}{let r=this.Ws(t.key,t.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(t.key)){if(t.newValue!==null){let r=this.Gs(t.key,t.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(t.key)){if(t.newValue!==null){let r=this.js(t.key,t.newValue);if(r)return this.Hs(r)}}else if(t.key===this.vs){if(t.newValue!==null){let r=this.xs(t.newValue);if(r)return this.Os(r)}}else if(t.key===this.Ss){let r=function(o){let s=qn.oe;if(o!=null)try{let a=JSON.parse(o);de(typeof a=="number"),s=a}catch(a){Dt("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==qn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Fs){let r=this.Js(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,r){let i=new ry(this.currentUser,e,t,r),o=Gk(this.persistenceKey,this.currentUser,e);this.setItem(o,i.ds())}Bs(e){let t=Gk(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){let t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,r){let i=JE(this.persistenceKey,e),o=new Pd(e,t,r);this.setItem(i,o.ds())}Ks(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){let t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){let r=this.$s(e);return iy.Es(r,t)}Gs(e,t){let r=this.Ds.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return ry.Es(new Vt(o),i,t)}js(e,t){let r=this.Cs.exec(e),i=Number(r[1]);return Pd.Es(i,t)}xs(e){return hb.Es(e)}Js(e){return JSON.parse(e)}zs(e){return V(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);W("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){let r=t?this.ps.insert(e,t):this.ps.remove(e),i=this.Ns(this.ps),o=this.Ns(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.eo(s,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=oD();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},oy=class{constructor(){this.no=new Kd,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Kd,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var fb=class{io(e){}shutdown(){}};var sy=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Eg=null;function eI(){return Eg===null?Eg=function(){return 268435456+Math.round(2147483648*Math.random())}():Eg++,"0x"+Eg.toString(16)}var p7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var pb=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var gn="WebChannelConnection",mb=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+t.host,this.So=`projects/${i}/databases/${o}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Do(){return!1}Co(t,r,i,o,s){let a=eI(),c=this.vo(t,r.toUriEncodedString());W("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,o,s),this.Mo(t,c,l,i).then(d=>(W("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw ar("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}xo(t,r,i,o,s,a){return this.Co(t,r,i,o,s)}Fo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ru}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}vo(t,r){let i=p7[t];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,r,i){let o=eI();return new Promise((s,a)=>{let c=new HE;c.setWithCredentials(!0),c.listenOnce(WE.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Cd.NO_ERROR:let d=c.getResponseJson();W(gn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case Cd.TIMEOUT:W(gn,`RPC '${e}' ${o} timed out`),a(new G(j.DEADLINE_EXCEEDED,"Request time out"));break;case Cd.HTTP_ERROR:let h=c.getStatus();if(W(gn,`RPC '${e}' ${o} failed with status:`,h,"response text:",c.getResponseText()),h>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);let g=p?.error;if(g&&g.status&&g.message){let y=function(w){let T=w.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(T)>=0?T:j.UNKNOWN}(g.status);a(new G(y,g.message))}else a(new G(j.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new G(j.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{W(gn,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);W(gn,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",l,r,15)})}Oo(e,t,r){let i=eI(),o=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=YE(),a=QE(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.xmlHttpFactory=new GE({})),this.Fo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=o.join("");W(gn,`Creating RPC '${e}' stream ${i}: ${d}`,c);let h=s.createWebChannel(d,c),p=!1,g=!1,y=new pb({lo:w=>{g?W(gn,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(p||(W(gn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),p=!0),W(gn,`RPC '${e}' stream ${i} sending:`,w),h.send(w))},ho:()=>h.close()}),E=(w,T,O)=>{w.listen(T,P=>{try{O(P)}catch(B){setTimeout(()=>{throw B},0)}})};return E(h,xc.EventType.OPEN,()=>{g||(W(gn,`RPC '${e}' stream ${i} transport opened.`),y.mo())}),E(h,xc.EventType.CLOSE,()=>{g||(g=!0,W(gn,`RPC '${e}' stream ${i} transport closed`),y.po())}),E(h,xc.EventType.ERROR,w=>{g||(g=!0,ar(gn,`RPC '${e}' stream ${i} transport errored:`,w),y.po(new G(j.UNAVAILABLE,"The operation could not be completed")))}),E(h,xc.EventType.MESSAGE,w=>{var T;if(!g){let O=w.data[0];de(!!O);let P=O,B=P.error||((T=P[0])===null||T===void 0?void 0:T.error);if(B){W(gn,`RPC '${e}' stream ${i} received error:`,B);let q=B.status,z=function(C){let x=kt[C];if(x!==void 0)return $F(x)}(q),b=B.message;z===void 0&&(z=j.INTERNAL,b="Unknown error status: "+q+" with message "+B.message),g=!0,y.po(new G(z,b)),h.close()}else W(gn,`RPC '${e}' stream ${i} received:`,O),y.yo(O)}}),E(a,KE.STAT_EVENT,w=>{w.stat===vg.PROXY?W(gn,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===vg.NOPROXY&&W(gn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.fo()},0),y}};function g2(){return typeof window<"u"?window:null}function Tg(){return typeof document<"u"?document:null}function oh(n){return new RI(n,!0)}var Qd=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=t,this.No=r,this.Lo=i,this.Bo=o,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let t=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,t-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var ay=class{constructor(e,t,r,i,o,s,a,c){this.oi=e,this.Go=r,this.zo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Qd(e,t)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return V(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return V(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,t){return V(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():t&&t.code===j.RESOURCE_EXHAUSTED?(Dt(t.toString()),Dt("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):t&&t.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(t)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===t&&this.u_(r,i)},r=>{e(()=>{let i=new G(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,t){let r=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(()=>V(this,null,function*(){this.state=0,this.start()}))}c_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget(()=>this.jo===e?t():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},gb=class extends ay{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();let t=XG(this.serializer,e),r=function(o){if(!("targetChange"in o))return he.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?he.min():s.readTime?Tt(s.readTime):he.min()}(e);return this.listener.h_(t,r)}P_(e){let t={};t.database=kI(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=Lg(c)?{documents:YF(o,c)}:{query:ZF(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=qF(o,s.resumeToken);let l=NI(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(he.min())>0){a.readTime=Gc(o,s.snapshotVersion.toTimestamp());let l=NI(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=e7(this.serializer,e);r&&(t.labels=r),this.i_(t)}I_(e){let t={};t.database=kI(this.serializer),t.removeTarget=e,this.i_(t)}},yb=class extends ay{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(de(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let t=JG(e.writeResults,e.commitTime),r=Tt(e.commitTime);return this.listener.A_(r,t)}return de(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=kI(this.serializer),this.i_(e)}d_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Hd(this.serializer,r))};this.i_(t)}};var vb=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new G(j.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Co(e,OI(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(j.UNKNOWN,o.toString())})}xo(e,t,r,i,o){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.xo(e,OI(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(j.UNKNOWN,s.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},_b=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Dt(t),this.y_=!1):W("OnlineStateTracker",t)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var wb=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=o,this.O_.io(s=>{r.enqueueAndForget(()=>V(this,null,function*(){qo(this)&&(W("RemoteStore","Restarting streams for network reachability change."),yield function(c){return V(this,null,function*(){let l=te(c);l.M_.add(4),yield ou(l),l.N_.set("Unknown"),l.M_.delete(4),yield sh(l)})}(this))}))}),this.N_=new _b(r,i)}};function sh(n){return V(this,null,function*(){if(qo(n))for(let e of n.x_)yield e(!0)})}function ou(n){return V(this,null,function*(){for(let e of n.x_)yield e(!1)})}function xy(n,e){let t=te(n);t.F_.has(e.targetId)||(t.F_.set(e.targetId,e),hD(t)?dD(t):au(t).Xo()&&lD(t,e))}function Zc(n,e){let t=te(n),r=au(t);t.F_.delete(e),r.Xo()&&y2(t,e),t.F_.size===0&&(r.Xo()?r.n_():qo(t)&&t.N_.set("Unknown"))}function lD(n,e){if(n.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(he.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}au(n).P_(e)}function y2(n,e){n.L_.xe(e),au(n).I_(e)}function dD(n){n.L_=new PI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.F_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),au(n).start(),n.N_.w_()}function hD(n){return qo(n)&&!au(n).Zo()&&n.F_.size>0}function qo(n){return te(n).M_.size===0}function v2(n){n.L_=void 0}function m7(n){return V(this,null,function*(){n.N_.set("Online")})}function g7(n){return V(this,null,function*(){n.F_.forEach((e,t)=>{lD(n,e)})})}function y7(n,e){return V(this,null,function*(){v2(n),hD(n)?(n.N_.D_(e),dD(n)):n.N_.set("Unknown")})}function v7(n,e,t){return V(this,null,function*(){if(n.N_.set("Online"),e instanceof $g&&e.state===2&&e.cause)try{yield function(i,o){return V(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.F_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.F_.delete(a),i.L_.removeTarget(a))})}(n,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield cy(n,r)}else if(e instanceof jc?n.L_.Ke(e):e instanceof Ug?n.L_.He(e):n.L_.We(e),!t.isEqual(he.min()))try{let r=yield d2(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.L_.rt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=o.F_.get(l);d&&o.F_.set(l,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let d=o.F_.get(c);if(!d)return;o.F_.set(c,d.withResumeToken(Qt.EMPTY_BYTE_STRING,d.snapshotVersion)),y2(o,c);let h=new Wc(d.target,c,l,d.sequenceNumber);lD(o,h)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){W("RemoteStore","Failed to raise snapshot:",r),yield cy(n,r)}})}function cy(n,e,t){return V(this,null,function*(){if(!zo(e))throw e;n.M_.add(1),yield ou(n),n.N_.set("Offline"),t||(t=()=>d2(n.localStore)),n.asyncQueue.enqueueRetryable(()=>V(this,null,function*(){W("RemoteStore","Retrying IndexedDB access"),yield t(),n.M_.delete(1),yield sh(n)}))})}function _2(n,e){return e().catch(t=>cy(n,t,e))}function su(n){return V(this,null,function*(){let e=te(n),t=Uo(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;_7(e);)try{let i=yield d7(e.localStore,r);if(i===null){e.v_.length===0&&t.n_();break}r=i.batchId,w7(e,i)}catch(i){yield cy(e,i)}w2(e)&&C2(e)})}function _7(n){return qo(n)&&n.v_.length<10}function w7(n,e){n.v_.push(e);let t=Uo(n);t.Xo()&&t.E_&&t.d_(e.mutations)}function w2(n){return qo(n)&&!Uo(n).Zo()&&n.v_.length>0}function C2(n){Uo(n).start()}function C7(n){return V(this,null,function*(){Uo(n).V_()})}function E7(n){return V(this,null,function*(){let e=Uo(n);for(let t of n.v_)e.d_(t.mutations)})}function I7(n,e,t){return V(this,null,function*(){let r=n.v_.shift(),i=SI.from(r,e,t);yield _2(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield su(n)})}function b7(n,e){return V(this,null,function*(){e&&Uo(n).E_&&(yield function(r,i){return V(this,null,function*(){if(function(s){return UF(s)&&s!==j.ABORTED}(i.code)){let o=r.v_.shift();Uo(r).t_(),yield _2(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield su(r)}})}(n,e)),w2(n)&&C2(n)})}function Wk(n,e){return V(this,null,function*(){let t=te(n);t.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");let r=qo(t);t.M_.add(3),yield ou(t),r&&t.N_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),yield sh(t)})}function Cb(n,e){return V(this,null,function*(){let t=te(n);e?(t.M_.delete(2),yield sh(t)):e||(t.M_.add(2),yield ou(t),t.N_.set("Unknown"))})}function au(n){return n.B_||(n.B_=function(t,r,i){let o=te(t);return o.f_(),new gb(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Po:m7.bind(null,n),To:g7.bind(null,n),Ao:y7.bind(null,n),h_:v7.bind(null,n)}),n.x_.push(e=>V(this,null,function*(){e?(n.B_.t_(),hD(n)?dD(n):n.N_.set("Unknown")):(yield n.B_.stop(),v2(n))}))),n.B_}function Uo(n){return n.k_||(n.k_=function(t,r,i){let o=te(t);return o.f_(),new yb(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:C7.bind(null,n),Ao:b7.bind(null,n),R_:E7.bind(null,n),A_:I7.bind(null,n)}),n.x_.push(e=>V(this,null,function*(){e?(n.k_.t_(),yield su(n)):(yield n.k_.stop(),n.v_.length>0&&(W("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))}))),n.k_}var Eb=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Lt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function cu(n,e){if(Dt("AsyncQueue",`${e}: ${n}`),zo(n))return new G(j.UNAVAILABLE,`${e}: ${n}`);throw n}var uy=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ee.comparator(t.key,r.key):(t,r)=>ee.comparator(t.key,r.key),this.keyedMap=xd(),this.sortedSet=new rt(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var ly=class{constructor(){this.q_=new rt(ee.comparator)}track(e){let t=e.doc.key,r=this.q_.get(t);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(t,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(t):e.type===1&&r.type===2?this.q_=this.q_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):ie():this.q_=this.q_.insert(t,e)}Q_(){let e=[];return this.q_.inorderTraversal((t,r)=>{e.push(r)}),e}},Xc=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,uy.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Ib=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},bb=class{constructor(){this.queries=new ei(e=>xF(e),rh),this.onlineState="Unknown",this.z_=new Set}};function fD(n,e){return V(this,null,function*(){let t=te(n),r=3,i=e.query,o=t.queries.get(i);o?!o.W_()&&e.G_()&&(r=2):(o=new Ib,r=e.G_()?0:1);try{switch(r){case 0:o.K_=yield t.onListen(i,!0);break;case 1:o.K_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=cu(s,`Initialization of query '${Rc(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.U_.push(e),e.j_(t.onlineState),o.K_&&e.H_(o.K_)&&mD(t)})}function pD(n,e){return V(this,null,function*(){let t=te(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.U_.indexOf(e);s>=0&&(o.U_.splice(s,1),o.U_.length===0?i=e.G_()?0:1:!o.W_()&&e.G_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function D7(n,e){let t=te(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.U_)a.H_(i)&&(r=!0);s.K_=i}}r&&mD(t)}function x7(n,e,t){let r=te(n),i=r.queries.get(e);if(i)for(let o of i.U_)o.onError(t);r.queries.delete(e)}function mD(n){n.z_.forEach(e=>{e.next()})}var Db,Kk;(Kk=Db||(Db={})).J_="default",Kk.Cache="cache";var Yd=class{constructor(e,t,r){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Xc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache||!this.G_())return!0;let r=t!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}na(e){e=Xc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==Db.Cache}};var xb=class{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}};var dy=class{constructor(e){this.serializer=e}Ps(e){return Yr(this.serializer,e)}Is(e){return e.metadata.exists?QF(this.serializer,e.document,!1):jt.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Tt(e)}},Tb=class{constructor(e,t,r){this.oa=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=E2(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;let r=je.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){let t=new Map,r=new dy(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Ps(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||Ce()).add(o);t.set(s,a)}}return t}complete(){return V(this,null,function*(){let e=yield h7(this.localStore,new dy(this.serializer),this.documents,this.oa.id),t=this.aa(this.documents);for(let r of this.queries)yield f7(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}})}};function E2(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var hy=class{constructor(e){this.key=e}},fy=class{constructor(e){this.key=e}},py=class{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Ce(),this.mutatedKeys=Ce(),this.Ia=SF(e),this.Ta=new uy(this.Ia)}get Ea(){return this.la}da(e,t){let r=t?t.Aa:new ly,i=t?t.Ta:this.Ta,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{let p=i.get(d),g=ih(this.query,h)?h:null,y=!!p&&this.mutatedKeys.has(p.key),E=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations),w=!1;p&&g?p.data.isEqual(g.data)?y!==E&&(r.track({type:3,doc:g}),w=!0):this.Ra(p,g)||(r.track({type:2,doc:g}),w=!0,(c&&this.Ia(g,c)>0||l&&this.Ia(g,l)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),w=!0):p&&!g&&(r.track({type:1,doc:p}),w=!0,(c||l)&&(a=!0)),w&&(g?(s=s.add(g),o=E?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{Ta:s,Aa:r,Xi:a,mutatedKeys:o}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let s=e.Aa.Q_();s.sort((d,h)=>function(g,y){let E=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie()}};return E(g)-E(y)}(d.type,h.type)||this.Ia(d.doc,h.doc)),this.Va(r),i=i!=null&&i;let a=t&&!i?this.ma():[],c=this.Pa.size===0&&this.current&&!i?1:0,l=c!==this.ha;return this.ha=c,s.length!==0||l?{snapshot:new Xc(this.query,e.Ta,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new ly,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(t=>this.la=this.la.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.la=this.la.delete(t)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=Ce(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});let t=[];return e.forEach(r=>{this.Pa.has(r)||t.push(new fy(r))}),this.Pa.forEach(r=>{e.has(r)||t.push(new hy(r))}),t}pa(e){this.la=e.hs,this.Pa=Ce();let t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return Xc.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},Sb=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Mb=class{constructor(e){this.key=e,this.wa=!1}},Ab=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new ei(a=>xF(a),rh),this.Da=new Map,this.Ca=new Set,this.va=new rt(ee.comparator),this.Fa=new Map,this.Ma=new Wd,this.xa={},this.Oa=new Map,this.Na=Kc.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function T7(n,e,t=!0){return V(this,null,function*(){let r=Ty(n),i,o=r.ba.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ya()):i=yield I2(r,e,t,!0),i})}function S7(n,e){return V(this,null,function*(){let t=Ty(n);yield I2(t,e,!0,!1)})}function I2(n,e,t,r){return V(this,null,function*(){let i=yield Qc(n.localStore,Mn(e)),o=i.targetId,s=t?n.sharedClientState.addLocalQueryTarget(o):"not-current",a;return r&&(a=yield gD(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&xy(n.remoteStore,i),a})}function gD(n,e,t,r,i){return V(this,null,function*(){n.Ba=(h,p,g)=>function(E,w,T,O){return V(this,null,function*(){let P=w.view.da(T);P.Xi&&(P=yield ny(E.localStore,w.query,!1).then(({documents:b})=>w.view.da(b,P)));let B=O&&O.targetChanges.get(w.targetId),q=O&&O.targetMismatches.get(w.targetId)!=null,z=w.view.applyChanges(P,E.isPrimaryClient,B,q);return Pb(E,w.targetId,z.fa),z.snapshot})}(n,h,p,g);let o=yield ny(n.localStore,e,!0),s=new py(e,o.hs),a=s.da(o.documents),c=zd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);Pb(n,t,l.fa);let d=new Sb(e,t,s);return n.ba.set(e,d),n.Da.has(t)?n.Da.get(t).push(e):n.Da.set(t,[e]),l.snapshot})}function M7(n,e,t){return V(this,null,function*(){let r=te(n),i=r.ba.get(e),o=r.Da.get(i.targetId);if(o.length>1)return r.Da.set(i.targetId,o.filter(s=>!rh(s,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Yc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Zc(r.remoteStore,i.targetId),Jc(r,i.targetId)}).catch($o))):(Jc(r,i.targetId),yield Yc(r.localStore,i.targetId,!0))})}function A7(n,e){return V(this,null,function*(){let t=te(n),r=t.ba.get(e),i=t.Da.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Zc(t.remoteStore,r.targetId))})}function P7(n,e,t){return V(this,null,function*(){let r=wD(n);try{let i=yield function(s,a){let c=te(s),l=pt.now(),d=a.reduce((g,y)=>g.add(y.key),Ce()),h,p;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let y=Vn(),E=Ce();return c.os.getEntries(g,d).next(w=>{y=w,y.forEach((T,O)=>{O.isValidDocument()||(E=E.add(T))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,y)).next(w=>{h=w;let T=[];for(let O of a){let P=HG(O,h.get(O.key).overlayedDocument);P!=null&&T.push(new Mr(O.key,P,_F(P.value.mapValue),Et.exists(!0)))}return c.mutationQueue.addMutationBatch(g,l,T,a)}).next(w=>{p=w;let T=w.applyToLocalDocumentSet(h,E);return c.documentOverlayCache.saveOverlays(g,w.batchId,T)})}).then(()=>({batchId:p.batchId,changes:AF(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.xa[s.currentUser.toKey()];l||(l=new rt(_e)),l=l.insert(a,c),s.xa[s.currentUser.toKey()]=l}(r,i.batchId,t),yield $i(r,i.changes),yield su(r.remoteStore)}catch(i){let o=cu(i,"Failed to persist write");t.reject(o)}})}function b2(n,e){return V(this,null,function*(){let t=te(n);try{let r=yield l7(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Fa.get(o);s&&(de(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.wa=!0:i.modifiedDocuments.size>0?de(s.wa):i.removedDocuments.size>0&&(de(s.wa),s.wa=!1))}),yield $i(t,r,e)}catch(r){yield $o(r)}})}function Qk(n,e,t){let r=te(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.ba.forEach((o,s)=>{let a=s.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=te(s);c.onlineState=a;let l=!1;c.queries.forEach((d,h)=>{for(let p of h.U_)p.j_(a)&&(l=!0)}),l&&mD(c)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function R7(n,e,t){return V(this,null,function*(){let r=te(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Fa.get(e),o=i&&i.key;if(o){let s=new rt(ee.comparator);s=s.insert(o,jt.newNoDocument(o,he.min()));let a=Ce().add(o),c=new $d(he.min(),new Map,new rt(_e),s,a);yield b2(r,c),r.va=r.va.remove(o),r.Fa.delete(e),_D(r)}else yield Yc(r.localStore,e,!1).then(()=>Jc(r,e,t)).catch($o)})}function N7(n,e){return V(this,null,function*(){let t=te(n),r=e.batch.batchId;try{let i=yield u7(t.localStore,e);vD(t,r,null),yD(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield $i(t,i)}catch(i){yield $o(i)}})}function O7(n,e,t){return V(this,null,function*(){let r=te(n);try{let i=yield function(s,a){let c=te(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(h=>(de(h!==null),d=h.keys(),c.mutationQueue.removeMutationBatch(l,h))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(r.localStore,e);vD(r,e,t),yD(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield $i(r,i)}catch(i){yield $o(i)}})}function k7(n,e){return V(this,null,function*(){let t=te(n);qo(t.remoteStore)||W("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=te(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===-1)return void e.resolve();let i=t.Oa.get(r)||[];i.push(e),t.Oa.set(r,i)}catch(r){let i=cu(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function yD(n,e){(n.Oa.get(e)||[]).forEach(t=>{t.resolve()}),n.Oa.delete(e)}function vD(n,e,t){let r=te(n),i=r.xa[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function Jc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Da.get(e))n.ba.delete(r),t&&n.Sa.ka(r,t);n.Da.delete(e),n.isPrimaryClient&&n.Ma.Vr(e).forEach(r=>{n.Ma.containsKey(r)||D2(n,r)})}function D2(n,e){n.Ca.delete(e.path.canonicalString());let t=n.va.get(e);t!==null&&(Zc(n.remoteStore,t),n.va=n.va.remove(e),n.Fa.delete(t),_D(n))}function Pb(n,e,t){for(let r of t)r instanceof hy?(n.Ma.addReference(r.key,e),F7(n,r)):r instanceof fy?(W("SyncEngine","Document no longer in limbo: "+r.key),n.Ma.removeReference(r.key,e),n.Ma.containsKey(r.key)||D2(n,r.key)):ie()}function F7(n,e){let t=e.key,r=t.path.canonicalString();n.va.get(t)||n.Ca.has(r)||(W("SyncEngine","New document in limbo: "+t),n.Ca.add(r),_D(n))}function _D(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){let e=n.Ca.values().next().value;n.Ca.delete(e);let t=new ee(je.fromString(e)),r=n.Na.next();n.Fa.set(r,new Mb(t)),n.va=n.va.insert(t,r),xy(n.remoteStore,new Wc(Mn(iu(t.path)),r,"TargetPurposeLimboResolution",qn.oe))}}function $i(n,e,t){return V(this,null,function*(){let r=te(n),i=[],o=[],s=[];r.ba.isEmpty()||(r.ba.forEach((a,c)=>{s.push(r.Ba(c,e,t).then(l=>{if((l||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,l?.fromCache?"not-current":"current"),l){i.push(l);let d=ub.Ki(c.targetId,l);o.push(d)}}))}),yield Promise.all(s),r.Sa.h_(i),yield function(c,l){return V(this,null,function*(){let d=te(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>F.forEach(l,p=>F.forEach(p.qi,g=>d.persistence.referenceDelegate.addReference(h,p.targetId,g)).next(()=>F.forEach(p.Qi,g=>d.persistence.referenceDelegate.removeReference(h,p.targetId,g)))))}catch(h){if(!zo(h))throw h;W("LocalStore","Failed to update sequence numbers: "+h)}for(let h of l){let p=h.targetId;if(!h.fromCache){let g=d.ns.get(p),y=g.snapshotVersion,E=g.withLastLimboFreeSnapshotVersion(y);d.ns=d.ns.insert(p,E)}}})}(r.localStore,o))})}function V7(n,e){return V(this,null,function*(){let t=te(n);if(!t.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());let r=yield l2(t.localStore,e);t.currentUser=e,function(o,s){o.Oa.forEach(a=>{a.forEach(c=>{c.reject(new G(j.CANCELLED,s))})}),o.Oa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield $i(t,r.us)}})}function L7(n,e){let t=te(n),r=t.Fa.get(e);if(r&&r.wa)return Ce().add(r.key);{let i=Ce(),o=t.Da.get(e);if(!o)return i;for(let s of o){let a=t.ba.get(s);i=i.unionWith(a.view.Ea)}return i}}function j7(n,e){return V(this,null,function*(){let t=te(n),r=yield ny(t.localStore,e.query,!0),i=e.view.pa(r);return t.isPrimaryClient&&Pb(t,e.targetId,i.fa),i})}function B7(n,e){return V(this,null,function*(){let t=te(n);return p2(t.localStore,e).then(r=>$i(t,r))})}function U7(n,e,t,r){return V(this,null,function*(){let i=te(n),o=yield function(a,c){let l=te(a),d=te(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.vn(h,c).next(p=>p?l.localDocuments.getDocuments(h,p):F.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield su(i.remoteStore):t==="acknowledged"||t==="rejected"?(vD(i,e,r||null),yD(i,e),function(a,c){te(te(a).mutationQueue).Mn(c)}(i.localStore,e)):ie(),yield $i(i,o)):W("SyncEngine","Cannot apply mutation batch with id: "+e)})}function $7(n,e){return V(this,null,function*(){let t=te(n);if(Ty(t),wD(t),e===!0&&t.La!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Yk(t,r.toArray());t.La=!0,yield Cb(t.remoteStore,!0);for(let o of i)xy(t.remoteStore,o)}else if(e===!1&&t.La!==!1){let r=[],i=Promise.resolve();t.Da.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Jc(t,s),Yc(t.localStore,s,!0))),Zc(t.remoteStore,s)}),yield i,yield Yk(t,r),function(s){let a=te(s);a.Fa.forEach((c,l)=>{Zc(a.remoteStore,l)}),a.Ma.mr(),a.Fa=new Map,a.va=new rt(ee.comparator)}(t),t.La=!1,yield Cb(t.remoteStore,!1)}})}function Yk(n,e,t){return V(this,null,function*(){let r=te(n),i=[],o=[];for(let s of e){let a,c=r.Da.get(s);if(c&&c.length!==0){a=yield Qc(r.localStore,Mn(c[0]));for(let l of c){let d=r.ba.get(l),h=yield j7(r,d);h.snapshot&&o.push(h.snapshot)}}else{let l=yield f2(r.localStore,s);a=yield Qc(r.localStore,l),yield gD(r,x2(l),s,!1,a.resumeToken)}i.push(a)}return r.Sa.h_(o),i})}function x2(n){return DF(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function z7(n){return function(t){return te(te(t).persistence).Bi()}(te(n).localStore)}function q7(n,e,t,r){return V(this,null,function*(){let i=te(n);if(i.La)return void W("SyncEngine","Ignoring unexpected query state notification.");let o=i.Da.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield p2(i.localStore,TF(o[0])),a=$d.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Qt.EMPTY_BYTE_STRING);yield $i(i,s,a);break}case"rejected":yield Yc(i.localStore,e,!0),Jc(i,e,r);break;default:ie()}})}function H7(n,e,t){return V(this,null,function*(){let r=Ty(n);if(r.La){for(let i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){W("SyncEngine","Adding an already active target "+i);continue}let o=yield f2(r.localStore,i),s=yield Qc(r.localStore,o);yield gD(r,x2(o),s.targetId,!1,s.resumeToken),xy(r.remoteStore,s)}for(let i of t)r.Da.has(i)&&(yield Yc(r.localStore,i,!1).then(()=>{Zc(r.remoteStore,i),Jc(r,i)}).catch($o))}})}function Ty(n){let e=te(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=b2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=L7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=R7.bind(null,e),e.Sa.h_=D7.bind(null,e.eventManager),e.Sa.ka=x7.bind(null,e.eventManager),e}function wD(n){let e=te(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=N7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=O7.bind(null,e),e}function G7(n,e,t){let r=te(n);(function(o,s,a){return V(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(g,y){let E=te(g),w=Tt(y.createTime);return E.persistence.runTransaction("hasNewerBundle","readonly",T=>E.$r.getBundleMetadata(T,y.id)).then(T=>!!T&&T.createTime.compareTo(w)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(g){return{taskState:"Success",documentsLoaded:g.totalDocuments,bytesLoaded:g.totalBytes,totalDocuments:g.totalDocuments,totalBytes:g.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(E2(c));let l=new Tb(c,o.localStore,s.serializer),d=yield s.qa();for(;d;){let p=yield l._a(d);p&&a._updateProgress(p),d=yield s.qa()}let h=yield l.complete();return yield $i(o,h.ca,void 0),yield function(g,y){let E=te(g);return E.persistence.runTransaction("Save bundle","readwrite",w=>E.$r.saveBundleMetadata(w,y))}(o.localStore,c),a._completeWith(h.progress),Promise.resolve(h.ua)}catch(c){return ar("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Zd=class{constructor(){this.synchronizeTabs=!1}initialize(e){return V(this,null,function*(){this.serializer=oh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return u2(this.persistence,new ty,e.initialUser,this.serializer)}createPersistence(e){return new Jg(ey.Hr,this.serializer)}createSharedClientState(e){return new oy}terminate(){return V(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var my=class n extends Zd{constructor(e,t,r){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return V(this,null,function*(){yield Lv(n.prototype,this,"initialize").call(this,e),yield this.Qa.initialize(this,e),yield wD(this.Qa.syncEngine),yield su(this.Qa.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return u2(this.persistence,new ty,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new KI(r,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){let r=new hI(t,this.persistence);return new dI(e.asyncQueue,r)}createPersistence(e){let t=uD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?sr.withCacheSize(this.cacheSizeBytes):sr.DEFAULT;return new cb(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,g2(),Tg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new oy}},Rb=class n extends my{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return V(this,null,function*(){yield Lv(n.prototype,this,"initialize").call(this,e);let t=this.Qa.syncEngine;this.sharedClientState instanceof Rd&&(this.sharedClientState.syncEngine={Zs:U7.bind(null,t),Xs:q7.bind(null,t),eo:H7.bind(null,t),Bi:z7.bind(null,t),Ys:B7.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.fi(r=>V(this,null,function*(){yield $7(this.Qa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let t=g2();if(!Rd.D(t))throw new G(j.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=uD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Rd(t,e.asyncQueue,r,e.clientId,e.initialUser)}},Xd=class{initialize(e,t){return V(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Qk(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=V7.bind(null,this.syncEngine),yield Cb(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new bb}()}createDatastore(e){let t=oh(e.databaseInfo.databaseId),r=function(o){return new mb(o)}(e.databaseInfo);return function(o,s,a,c){return new vb(o,s,a,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,o,s,a){return new wb(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,t=>Qk(this.syncEngine,t,0),function(){return sy.D()?new sy:new fb}())}createSyncEngine(e,t){return function(i,o,s,a,c,l,d){let h=new Ab(i,o,s,a,c,l);return d&&(h.La=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return V(this,null,function*(){var e;yield function(r){return V(this,null,function*(){let i=te(r);W("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield ou(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function Zk(n,e=10240){let t=0;return{read(){return V(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return V(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var eu=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Dt("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}};var Nb=class{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new Lt,this.buffer=new Uint8Array,this.Wa=function(){return new TextDecoder("utf-8")}(),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}getMetadata(){return V(this,null,function*(){return this.metadata.promise})}qa(){return V(this,null,function*(){return yield this.getMetadata(),this.Ga()})}Ga(){return V(this,null,function*(){let e=yield this.za();if(e===null)return null;let t=this.Wa.decode(e),r=Number(t);isNaN(r)&&this.ja(`length string (${t}) is not valid number`);let i=yield this.Ha(r);return new xb(JSON.parse(i),e.length+r)})}Ja(){return this.buffer.findIndex(e=>e===123)}za(){return V(this,null,function*(){for(;this.Ja()<0&&!(yield this.Ya()););if(this.buffer.length===0)return null;let e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}Ha(e){return V(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ya())&&this.ja("Reached the end of bundle when more is expected.");let t=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){return V(this,null,function*(){let e=yield this.Ua.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var Ob=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return V(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new G(j.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return V(this,null,function*(){let s=te(i),a={documents:o.map(h=>qd(s.serializer,h))},c=yield s.xo("BatchGetDocuments",s.serializer.databaseId,je.emptyPath(),a,o.length),l=new Map;c.forEach(h=>{let p=ZG(s.serializer,h);l.set(p.key.toString(),p)});let d=[];return o.forEach(h=>{let p=l.get(h.toString());de(!!p),d.push(p)}),d})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Bo(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return V(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=ee.fromPath(r);this.mutations.push(new jd(i,this.precondition(i)))}),yield function(r,i){return V(this,null,function*(){let o=te(r),s={writes:i.map(a=>Hd(o.serializer,a))};yield o.Co("Commit",o.serializer.databaseId,je.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ie();t=he.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new G(j.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(he.min())?Et.exists(!1):Et.updateTime(t):Et.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(he.min()))throw new G(j.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Et.updateTime(t)}return Et.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var kb=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Za=r.maxAttempts,this.Yo=new Qd(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o(()=>V(this,null,function*(){let e=new Ob(this.datastore),t=this.tu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.nu(i)}))}).catch(r=>{this.nu(r)})}))}tu(e){try{let t=this.updateFunction(e);return!th(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!UF(t)}return!1}};var Fb=class{constructor(e,t,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Vt.UNAUTHENTICATED,this.clientId=Ag.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>V(this,null,function*(){W("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new G(j.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Lt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>V(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=cu(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Sg(n,e){return V(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>V(this,null,function*(){r.isEqual(i)||(yield l2(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function Vb(n,e){return V(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield CD(n);W("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Wk(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Wk(e.remoteStore,i)),n._onlineComponents=e})}function T2(n){return n.name==="FirebaseError"?n.code===j.FAILED_PRECONDITION||n.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function CD(n){return V(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Sg(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!T2(t))throw t;ar("Error using user provided cache. Falling back to memory cache: "+t),yield Sg(n,new Zd)}}else W("FirestoreClient","Using default OfflineComponentProvider"),yield Sg(n,new Zd);return n._offlineComponents})}function Sy(n){return V(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),yield Vb(n,n._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),yield Vb(n,new Xd))),n._onlineComponents})}function S2(n){return CD(n).then(e=>e.persistence)}function ED(n){return CD(n).then(e=>e.localStore)}function M2(n){return Sy(n).then(e=>e.remoteStore)}function ID(n){return Sy(n).then(e=>e.syncEngine)}function W7(n){return Sy(n).then(e=>e.datastore)}function tu(n){return V(this,null,function*(){let e=yield Sy(n),t=e.eventManager;return t.onListen=T7.bind(null,e.syncEngine),t.onUnlisten=M7.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=S7.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=A7.bind(null,e.syncEngine),t})}function K7(n){return n.asyncQueue.enqueue(()=>V(this,null,function*(){let e=yield S2(n),t=yield M2(n);return e.setNetworkEnabled(!0),function(i){let o=te(i);return o.M_.delete(0),sh(o)}(t)}))}function Q7(n){return n.asyncQueue.enqueue(()=>V(this,null,function*(){let e=yield S2(n),t=yield M2(n);return e.setNetworkEnabled(!1),function(i){return V(this,null,function*(){let o=te(i);o.M_.add(0),yield ou(o),o.N_.set("Offline")})}(t)}))}function Y7(n,e){let t=new Lt;return n.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return function(i,o,s){return V(this,null,function*(){try{let a=yield function(l,d){let h=te(l);return h.persistence.runTransaction("read document","readonly",p=>h.localDocuments.getDocument(p,d))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new G(j.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=cu(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield ED(n),e,t)})),t.promise}function A2(n,e,t={}){let r=new Lt;return n.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return function(o,s,a,c,l){let d=new eu({next:p=>{s.enqueueAndForget(()=>pD(o,h));let g=p.docs.has(a);!g&&p.fromCache?l.reject(new G(j.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&c&&c.source==="server"?l.reject(new G(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(p)},error:p=>l.reject(p)}),h=new Yd(iu(a.path),d,{includeMetadataChanges:!0,ra:!0});return fD(o,h)}(yield tu(n),n.asyncQueue,e,t,r)})),r.promise}function Z7(n,e){let t=new Lt;return n.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return function(i,o,s){return V(this,null,function*(){try{let a=yield ny(i,o,!0),c=new py(o,a.hs),l=c.da(a.documents),d=c.applyChanges(l,!1);s.resolve(d.snapshot)}catch(a){let c=cu(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield ED(n),e,t)})),t.promise}function P2(n,e,t={}){let r=new Lt;return n.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return function(o,s,a,c,l){let d=new eu({next:p=>{s.enqueueAndForget(()=>pD(o,h)),p.fromCache&&c.source==="server"?l.reject(new G(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(p)},error:p=>l.reject(p)}),h=new Yd(a,d,{includeMetadataChanges:!0,ra:!0});return fD(o,h)}(yield tu(n),n.asyncQueue,e,t,r)})),r.promise}function X7(n,e){let t=new eu(e);return n.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return function(i,o){te(i).z_.add(o),o.next()}(yield tu(n),t)})),()=>{t.$a(),n.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return function(i,o){te(i).z_.delete(o)}(yield tu(n),t)}))}}function J7(n,e,t,r){let i=function(s,a){let c;return c=typeof s=="string"?zF().encode(s):s,function(d,h){return new Nb(d,h)}(function(d,h){if(d instanceof Uint8Array)return Zk(d,h);if(d instanceof ArrayBuffer)return Zk(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,oh(e));n.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){G7(yield ID(n),i,r)}))}function eW(n,e){return n.asyncQueue.enqueue(()=>V(this,null,function*(){return function(r,i){let o=te(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,i))}(yield ED(n),e)}))}function R2(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Xk=new Map;function bD(n,e,t){if(!t)throw new G(j.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function DD(n,e,t,r){if(e===!0&&r===!0)throw new G(j.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Jk(n){if(!ee.isDocumentKey(n))throw new G(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function eF(n){if(ee.isDocumentKey(n))throw new G(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function My(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ie()}function Be(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new G(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=My(n);throw new G(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function N2(n,e){if(e<=0)throw new G(j.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var gy=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=R2((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new G(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new G(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new G(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Zs=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gy({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new G(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new G(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gy(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new tI;switch(r.type){case"firstParty":return new oI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=Xk.get(t);r&&(W("ComponentProvider","Removing Datastore"),Xk.delete(t),r.terminate())}(this),Promise.resolve()}};function O2(n,e,t,r={}){var i;let o=(n=Be(n,Zs))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&ar("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Vt.MOCK_USER;else{a=dT(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new G(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Vt(l)}n._authCredentials=new nI(new Mg(a,c))}}var en=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Je=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Zr=class n extends en{constructor(e,t,r){super(e,t,iu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Je(this.firestore,null,new ee(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function xD(n,e,...t){if(n=dt(n),bD("collection","path",e),n instanceof Zs){let r=je.fromString(e,...t);return eF(r),new Zr(n,null,r)}{if(!(n instanceof Je||n instanceof Zr))throw new G(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(je.fromString(e,...t));return eF(r),new Zr(n.firestore,null,r)}}function k2(n,e){if(n=Be(n,Zs),bD("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new G(j.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new en(n,null,function(r){return new Sr(je.emptyPath(),r)}(e))}function ah(n,e,...t){if(n=dt(n),arguments.length===1&&(e=Ag.newId()),bD("doc","path",e),n instanceof Zs){let r=je.fromString(e,...t);return Jk(r),new Je(n,null,new ee(r))}{if(!(n instanceof Je||n instanceof Zr))throw new G(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(je.fromString(e,...t));return Jk(r),new Je(n.firestore,n instanceof Zr?n.converter:null,new ee(r))}}function TD(n,e){return n=dt(n),e=dt(e),(n instanceof Je||n instanceof Zr)&&(e instanceof Je||e instanceof Zr)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function SD(n,e){return n=dt(n),e=dt(e),n instanceof en&&e instanceof en&&n.firestore===e.firestore&&rh(n._query,e._query)&&n.converter===e.converter}var Lb=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Qd(this,"async_queue_retry"),this.hu=()=>{let t=Tg();t&&W("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};let e=Tg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let t=Tg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let t=new Lt;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return V(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!zo(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let t=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Dt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=t,t}enqueueAfterDelay(e,t,r){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);let i=Eb.createAndSchedule(this,e,t,r,o=>this.Eu(o));return this._u.push(i),i}Pu(){this.au&&ie()}verifyOperationInProgress(){}du(){return V(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this._u)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let t=this._u.indexOf(e);this._u.splice(t,1)}};function jb(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Bb=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Lt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var F2=-1,lt=class extends Zs{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=function(){return new Lb}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||V2(this),this._firestoreClient.terminate()}};function qt(n){return n._firestoreClient||V2(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function V2(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,l,d){return new fI(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,R2(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._firestoreClient=new Fb(n._authCredentials,n._appCheckCredentials,n._queue,o),!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function L2(n,e){W2(n=Be(n,lt));let t=qt(n);if(t._uninitializedComponentsProvider)throw new G(j.FAILED_PRECONDITION,"SDK cache is already specified.");ar("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=n._freezeSettings(),i=new Xd;return B2(t,i,new my(i,r.cacheSizeBytes,e?.forceOwnership))}function j2(n){W2(n=Be(n,lt));let e=qt(n);if(e._uninitializedComponentsProvider)throw new G(j.FAILED_PRECONDITION,"SDK cache is already specified.");ar("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings(),r=new Xd;return B2(e,r,new Rb(r,t.cacheSizeBytes))}function B2(n,e,t){let r=new Lt;return n.asyncQueue.enqueue(()=>V(this,null,function*(){try{yield Sg(n,t),yield Vb(n,e),r.resolve()}catch(i){let o=i;if(!T2(o))throw o;ar("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function U2(n){if(n._initialized&&!n._terminated)throw new G(j.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Lt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>V(this,null,function*(){try{yield function(r){return V(this,null,function*(){if(!No.D())return Promise.resolve();let i=r+"main";yield No.delete(i)})}(uD(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function $2(n){return function(t){let r=new Lt;return t.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return k7(yield ID(t),r)})),r.promise}(qt(n=Be(n,lt)))}function z2(n){return K7(qt(n=Be(n,lt)))}function q2(n){return Q7(qt(n=Be(n,lt)))}function H2(n,e){let t=qt(n=Be(n,lt)),r=new Bb;return J7(t,n._databaseId,e,r),r}function G2(n,e){return eW(qt(n=Be(n,lt)),e).then(t=>t?new en(n,null,t.query):null)}function W2(n){if(n._initialized||n._terminated)throw new G(j.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var ti=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Qt.fromBase64String(e))}catch(t){throw new G(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Ar=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new G(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Bi=class{constructor(e){this._methodName=e}};var Xs=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new G(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new G(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return _e(this._lat,e._lat)||_e(this._long,e._long)}};var tW=/^__.*__$/,Ub=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Mr(e,this.data,this.fieldMask,t,this.fieldTransforms):new jo(e,this.data,t,this.fieldTransforms)}},yy=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Mr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function K2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}var vy=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.mu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return _y(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(K2(this.fu)&&tW.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},$b=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||oh(e)}Fu(e,t,r,i=!1){return new vy({fu:e,methodName:t,vu:r,path:xt.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function na(n){let e=n._freezeSettings(),t=oh(n._databaseId);return new $b(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ay(n,e,t,r,i,o={}){let s=n.Fu(o.merge||o.mergeFields?2:0,e,t,i);PD("Data must be an object, but it was:",s,r);let a=Z2(r,s),c,l;if(o.merge)c=new Hn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let h of o.mergeFields){let p=Wb(e,h,t);if(!s.contains(p))throw new G(j.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);J2(d,p)||d.push(p)}c=new Hn(d),l=s.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,l=s.fieldTransforms;return new Ub(new yn(a),c,l)}var Jd=class n extends Bi{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function Q2(n,e,t){return new vy({fu:3,vu:e.settings.vu,methodName:n._methodName,yu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var zb=class n extends Bi{_toFieldTransform(e){return new Ks(e.path,new Vo)}isEqual(e){return e instanceof n}},qb=class n extends Bi{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){let t=Q2(this,e,!0),r=this.Mu.map(o=>ra(o,t)),i=new Li(r);return new Ks(e.path,i)}isEqual(e){return e instanceof n&&Uv(this.Mu,e.Mu)}},Hb=class n extends Bi{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){let t=Q2(this,e,!0),r=this.Mu.map(o=>ra(o,t)),i=new ji(r);return new Ks(e.path,i)}isEqual(e){return e instanceof n&&Uv(this.Mu,e.Mu)}},Gb=class n extends Bi{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){let t=new Lo(e.serializer,OF(e.serializer,this.xu));return new Ks(e.path,t)}isEqual(e){return e instanceof n&&this.xu===e.xu}};function MD(n,e,t,r){let i=n.Fu(1,e,t);PD("Data must be an object, but it was:",i,r);let o=[],s=yn.empty();ta(r,(c,l)=>{let d=RD(e,c,t);l=dt(l);let h=i.Su(d);if(l instanceof Jd)o.push(d);else{let p=ra(l,h);p!=null&&(o.push(d),s.set(d,p))}});let a=new Hn(o);return new yy(s,a,i.fieldTransforms)}function AD(n,e,t,r,i,o){let s=n.Fu(1,e,t),a=[Wb(e,r,t)],c=[i];if(o.length%2!=0)throw new G(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<o.length;p+=2)a.push(Wb(e,o[p])),c.push(o[p+1]);let l=[],d=yn.empty();for(let p=a.length-1;p>=0;--p)if(!J2(l,a[p])){let g=a[p],y=c[p];y=dt(y);let E=s.Su(g);if(y instanceof Jd)l.push(g);else{let w=ra(y,E);w!=null&&(l.push(g),d.set(g,w))}}let h=new Hn(l);return new yy(d,h,s.fieldTransforms)}function Y2(n,e,t,r=!1){return ra(t,n.Fu(r?4:3,e))}function ra(n,e){if(X2(n=dt(n)))return PD("Unsupported field value:",e,n),Z2(n,e);if(n instanceof Bi)return function(r,i){if(!K2(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=ra(a,i.bu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=dt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return OF(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=pt.fromDate(r);return{timestampValue:Gc(i.serializer,o)}}if(r instanceof pt){let o=new pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gc(i.serializer,o)}}if(r instanceof Xs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ti)return{bytesValue:qF(i.serializer,r._byteString)};if(r instanceof Je){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Du(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:sD(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${My(r)}`)}(n,e)}function Z2(n,e){let t={};return gF(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ta(n,(r,i)=>{let o=ra(i,e.pu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function X2(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof pt||n instanceof Xs||n instanceof ti||n instanceof Je||n instanceof Bi)}function PD(n,e,t){if(!X2(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=My(t);throw r==="an object"?e.Du(n+" a custom object"):e.Du(n+" "+r)}}function Wb(n,e,t){if((e=dt(e))instanceof Ar)return e._internalPath;if(typeof e=="string")return RD(n,e);throw _y("Field path arguments must be of type string or ",n,!1,void 0,t)}var nW=new RegExp("[~\\*/\\[\\]]");function RD(n,e,t){if(e.search(nW)>=0)throw _y(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ar(...e.split("."))._internalPath}catch{throw _y(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function _y(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new G(j.INVALID_ARGUMENT,a+n+c)}function J2(n,e){return n.some(t=>t.isEqual(e))}var Js=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Je(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Kb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Py("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Kb=class extends Js{data(){return super.data()}};function Py(n,e){return typeof e=="string"?RD(n,e):e instanceof Ar?e._internalPath:e._delegate._internalPath}function eV(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new G(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var eh=class{},ea=class extends eh{};function zi(n,e,...t){let r=[];e instanceof eh&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof Qb).length,a=o.filter(c=>c instanceof wy).length;if(s>1||s>0&&a>0)throw new G(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var wy=class n extends ea{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return lV(e._query,t),new en(e.firestore,e.converter,xI(e._query,t))}_parse(e){let t=na(e.firestore);return function(o,s,a,c,l,d,h){let p;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new G(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){nF(h,d);let g=[];for(let y of h)g.push(tF(c,o,y));p={arrayValue:{values:g}}}else p=tF(c,o,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||nF(h,d),p=Y2(a,s,h,d==="in"||d==="not-in");return Fe.create(l,d,p)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function tV(n,e,t){let r=e,i=Py("where",n);return wy._create(i,r,t)}var Qb=class n extends eh{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:We.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)lV(s,c),s=xI(s,c)}(e._query,t),new en(e.firestore,e.converter,xI(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Yb=class n extends ea{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new G(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new G(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Gs(o,s)}(e._query,this._field,this._direction);return new en(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Sr(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function nV(n,e="asc"){let t=e,r=Py("orderBy",n);return Yb._create(r,t)}var Cy=class n extends ea{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new en(e.firestore,e.converter,Bg(e._query,this._limit,this._limitType))}};function rV(n){return N2("limit",n),Cy._create("limit",n,"F")}function iV(n){return N2("limitToLast",n),Cy._create("limitToLast",n,"L")}var Ey=class n extends ea{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=uV(e,this.type,this._docOrFields,this._inclusive);return new en(e.firestore,e.converter,function(i,o){return new Sr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function oV(...n){return Ey._create("startAt",n,!0)}function sV(...n){return Ey._create("startAfter",n,!1)}var Iy=class n extends ea{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=uV(e,this.type,this._docOrFields,this._inclusive);return new en(e.firestore,e.converter,function(i,o){return new Sr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function aV(...n){return Iy._create("endBefore",n,!1)}function cV(...n){return Iy._create("endAt",n,!0)}function uV(n,e,t,r){if(t[0]=dt(t[0]),t[0]instanceof Js)return function(o,s,a,c,l){if(!c)throw new G(j.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let h of Lc(o))if(h.field.isKeyField())d.push(Hs(s,c.key));else{let p=c.data.field(h.field);if(Dy(p))throw new G(j.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){let g=h.field.canonicalString();throw new G(j.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}d.push(p)}return new Jr(d,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=na(n.firestore);return function(s,a,c,l,d,h){let p=s.explicitOrderBy;if(d.length>p.length)throw new G(j.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let g=[];for(let y=0;y<d.length;y++){let E=d[y];if(p[y].field.isKeyField()){if(typeof E!="string")throw new G(j.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof E}`);if(!iD(s)&&E.indexOf("/")!==-1)throw new G(j.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${E}' contains a slash.`);let w=s.path.child(je.fromString(E));if(!ee.isDocumentKey(w))throw new G(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${w}' is not because it contains an odd number of segments.`);let T=new ee(w);g.push(Hs(a,T))}else{let w=Y2(c,l,E);g.push(w)}}return new Jr(g,h)}(n._query,n.firestore._databaseId,i,e,t,r)}}function tF(n,e,t){if(typeof(t=dt(t))=="string"){if(t==="")throw new G(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iD(e)&&t.indexOf("/")!==-1)throw new G(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(je.fromString(t));if(!ee.isDocumentKey(r))throw new G(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Hs(n,new ee(r))}if(t instanceof Je)return Hs(n,t._key);throw new G(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${My(t)}.`)}function nF(n,e){if(!Array.isArray(n)||n.length===0)throw new G(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function lV(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new G(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var nu=class{convertValue(e,t="none"){switch(qs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Oo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ie()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ta(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new Xs(Ct(e.latitude),Ct(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=nD(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Fd(e));default:return null}}convertTimestamp(e){let t=Vi(e);return new pt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=je.fromString(e);de(t2(r));let i=new ko(r.get(1),r.get(3)),o=new ee(r.popFirst(5));return i.isEqual(t)||Dt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Ry(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Zb=class extends nu{constructor(e){super(),this.firestore=e}convertBytes(e){return new ti(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Je(this.firestore,null,t)}};var Fi=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ur=class extends Js{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Po(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Py("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Po=class extends ur{data(e={}){return super.data(e)}},Pr=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Fi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Po(this._firestore,this._userDataWriter,r.key,r,new Fi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new G(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Po(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Po(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:rW(a.type),doc:c,oldIndex:l,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function rW(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie()}}function ND(n,e){return n instanceof ur&&e instanceof ur?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Pr&&e instanceof Pr&&n._firestore===e._firestore&&SD(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function dV(n){n=Be(n,Je);let e=Be(n.firestore,lt);return A2(qt(e),n._key).then(t=>VD(e,n,t))}var Ui=class extends nu{constructor(e){super(),this.firestore=e}convertBytes(e){return new ti(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Je(this.firestore,null,t)}};function hV(n){n=Be(n,Je);let e=Be(n.firestore,lt),t=qt(e),r=new Ui(e);return Y7(t,n._key).then(i=>new ur(e,r,n._key,i,new Fi(i!==null&&i.hasLocalMutations,!0),n.converter))}function fV(n){n=Be(n,Je);let e=Be(n.firestore,lt);return A2(qt(e),n._key,{source:"server"}).then(t=>VD(e,n,t))}function pV(n){n=Be(n,en);let e=Be(n.firestore,lt),t=qt(e),r=new Ui(e);return eV(n._query),P2(t,n._query).then(i=>new Pr(e,r,n,i))}function mV(n){n=Be(n,en);let e=Be(n.firestore,lt),t=qt(e),r=new Ui(e);return Z7(t,n._query).then(i=>new Pr(e,r,n,i))}function gV(n){n=Be(n,en);let e=Be(n.firestore,lt),t=qt(e),r=new Ui(e);return P2(t,n._query,{source:"server"}).then(i=>new Pr(e,r,n,i))}function OD(n,e,t){n=Be(n,Je);let r=Be(n.firestore,lt),i=Ry(n.converter,e,t);return uu(r,[Ay(na(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Et.none())])}function kD(n,e,t,...r){n=Be(n,Je);let i=Be(n.firestore,lt),o=na(i),s;return s=typeof(e=dt(e))=="string"||e instanceof Ar?AD(o,"updateDoc",n._key,e,t,r):MD(o,"updateDoc",n._key,e),uu(i,[s.toMutation(n._key,Et.exists(!0))])}function yV(n){return uu(Be(n.firestore,lt),[new Bo(n._key,Et.none())])}function vV(n,e){let t=Be(n.firestore,lt),r=ah(n),i=Ry(n.converter,e);return uu(t,[Ay(na(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Et.exists(!1))]).then(()=>r)}function FD(n,...e){var t,r,i;n=dt(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||jb(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(jb(e[s])){let h=e[s];e[s]=(t=h.next)===null||t===void 0?void 0:t.bind(h),e[s+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[s+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let c,l,d;if(n instanceof Je)l=Be(n.firestore,lt),d=iu(n._key.path),c={next:h=>{e[s]&&e[s](VD(l,n,h))},error:e[s+1],complete:e[s+2]};else{let h=Be(n,en);l=Be(h.firestore,lt),d=h._query;let p=new Ui(l);c={next:g=>{e[s]&&e[s](new Pr(l,p,h,g))},error:e[s+1],complete:e[s+2]},eV(n._query)}return function(p,g,y,E){let w=new eu(E),T=new Yd(g,w,y);return p.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return fD(yield tu(p),T)})),()=>{w.$a(),p.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return pD(yield tu(p),T)}))}}(qt(l),d,a,c)}function _V(n,e){return X7(qt(n=Be(n,lt)),jb(e)?e:{next:e})}function uu(n,e){return function(r,i){let o=new Lt;return r.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return P7(yield ID(r),i,o)})),o.promise}(qt(n),e)}function VD(n,e,t){let r=t.docs.get(e._key),i=new Ui(n);return new ur(n,i,e._key,r,new Fi(t.hasPendingWrites,t.fromCache),e.converter)}var iW={maxAttempts:5};var by=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=na(e)}set(e,t,r){this._verifyNotCommitted();let i=Mo(e,this._firestore),o=Ry(i.converter,t,r),s=Ay(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Et.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Mo(e,this._firestore),s;return s=typeof(t=dt(t))=="string"||t instanceof Ar?AD(this._dataReader,"WriteBatch.update",o._key,t,r,i):MD(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Et.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Mo(e,this._firestore);return this._mutations=this._mutations.concat(new Bo(t._key,Et.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new G(j.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Mo(n,e){if((n=dt(n)).firestore!==e)throw new G(j.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var Xb=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=na(t)}get(t){let r=Mo(t,this._firestore),i=new Zb(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return ie();let s=o[0];if(s.isFoundDocument())return new Js(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Js(this._firestore,i,r._key,null,r.converter);throw ie()})}set(t,r,i){let o=Mo(t,this._firestore),s=Ry(o.converter,r,i),a=Ay(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=Mo(t,this._firestore),a;return a=typeof(r=dt(r))=="string"||r instanceof Ar?AD(this._dataReader,"Transaction.update",s._key,r,i,o):MD(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=Mo(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Mo(e,this._firestore),r=new Ui(this._firestore);return super.get(e).then(i=>new ur(this._firestore,r,t._key,i._document,new Fi(!1,!1),t.converter))}};function wV(n,e,t){n=Be(n,lt);let r=Object.assign(Object.assign({},iW),t);return function(o){if(o.maxAttempts<1)throw new G(j.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new Lt;return o.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){let l=yield W7(o);new kb(o.asyncQueue,l,a,s,c).Xa()})),c.promise}(qt(n),i=>e(new Xb(n,i)),r)}function CV(){return new Jd("deleteField")}function EV(){return new zb("serverTimestamp")}function IV(...n){return new qb("arrayUnion",n)}function bV(...n){return new Hb("arrayRemove",n)}function DV(n){return new Gb("increment",n)}(function(e,t=!0){(function(i){ru=i})(pT),Nu(new rs("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new lt(new rI(r.getProvider("auth-internal")),new aI(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new G(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ko(l.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ki(rk,"4.6.2",e),Ki(rk,"4.6.2","esm2017")})();var oW="@firebase/firestore-compat",sW="0.3.31";function zD(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new G("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function xV(){if(typeof Uint8Array>"u")throw new G("unimplemented","Uint8Arrays are not available in this environment.")}function TV(){if(!yF())throw new G("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Ny=class n{constructor(e){this._delegate=e}static fromBase64String(e){return TV(),new n(ti.fromBase64String(e))}static fromUint8Array(e){return xV(),new n(ti.fromUint8Array(e))}toBase64(){return TV(),this._delegate.toBase64()}toUint8Array(){return xV(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function LD(n){return aW(n,["next","error","complete"])}function aW(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var jD=class{enableIndexedDbPersistence(e,t){return L2(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return j2(e._delegate)}clearIndexedDbPersistence(e){return U2(e._delegate)}},Oy=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ko||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ar("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){O2(this._delegate,e,t,r)}enableNetwork(){return z2(this._delegate)}disableNetwork(){return q2(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,DD("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return $2(this._delegate)}onSnapshotsInSync(e){return _V(this._delegate,e)}get app(){if(!this._appCompat)throw new G("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new hu(this,xD(this._delegate,e))}catch(t){throw An(t,"collection()","Firestore.collection()")}}doc(e){try{return new ni(this,ah(this._delegate,e))}catch(t){throw An(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new aa(this,k2(this._delegate,e))}catch(t){throw An(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return wV(this._delegate,t=>e(new ky(this,t)))}batch(){return qt(this._delegate),new Fy(new by(this._delegate,e=>uu(this._delegate,e)))}loadBundle(e){return H2(this._delegate,e)}namedQuery(e){return G2(this._delegate,e).then(t=>t?new aa(this,t):null)}},lu=class extends nu{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ny(new ti(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return ni.forKey(t,this.firestore,null)}};function cW(n){rF(n)}var ky=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new lu(e)}get(e){let t=ia(e);return this._delegate.get(t).then(r=>new oa(this._firestore,new ur(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=ia(e);return r?(zD("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=ia(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=ia(e);return this._delegate.delete(t),this}},Fy=class{constructor(e){this._delegate=e}set(e,t,r){let i=ia(e);return r?(zD("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=ia(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=ia(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},du=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Po(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new sa(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new lu(e),t),i.set(t,o)),o}};du.INSTANCES=new WeakMap;var ni=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new lu(e)}static forPath(e,t,r){if(e.length%2!==0)throw new G("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Je(t._delegate,r,new ee(e)))}static forKey(e,t,r){return new n(t,new Je(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new hu(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new hu(this.firestore,xD(this._delegate,e))}catch(t){throw An(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=dt(e),e instanceof Je?TD(this._delegate,e):!1}set(e,t){t=zD("DocumentReference.set",t);try{return t?OD(this._delegate,e,t):OD(this._delegate,e)}catch(r){throw An(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?kD(this._delegate,e):kD(this._delegate,e,t,...r)}catch(i){throw An(i,"updateDoc()","DocumentReference.update()")}}delete(){return yV(this._delegate)}onSnapshot(...e){let t=SV(e),r=MV(e,i=>new oa(this.firestore,new ur(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return FD(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=hV(this._delegate):e?.source==="server"?t=fV(this._delegate):t=dV(this._delegate),t.then(r=>new oa(this.firestore,new ur(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(du.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function An(n,e,t){return n.message=n.message.replace(e,t),n}function SV(n){for(let e of n)if(typeof e=="object"&&!LD(e))return e;return{}}function MV(n,e){var t,r;let i;return LD(n[0])?i=n[0]:LD(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var oa=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ni(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return ND(this._delegate,e._delegate)}},sa=class extends oa{data(e){let t=this._delegate.data(e);return this._delegate._converter||iF(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},aa=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new lu(e)}where(e,t,r){try{return new n(this.firestore,zi(this._delegate,tV(e,t,r)))}catch(i){throw An(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,zi(this._delegate,nV(e,t)))}catch(r){throw An(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,zi(this._delegate,rV(e)))}catch(t){throw An(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,zi(this._delegate,iV(e)))}catch(t){throw An(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,zi(this._delegate,oV(...e)))}catch(t){throw An(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,zi(this._delegate,sV(...e)))}catch(t){throw An(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,zi(this._delegate,aV(...e)))}catch(t){throw An(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,zi(this._delegate,cV(...e)))}catch(t){throw An(t,"endAt()","Query.endAt()")}}isEqual(e){return SD(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=mV(this._delegate):e?.source==="server"?t=gV(this._delegate):t=pV(this._delegate),t.then(r=>new ch(this.firestore,new Pr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=SV(e),r=MV(e,i=>new ch(this.firestore,new Pr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return FD(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(du.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},BD=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new sa(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},ch=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new aa(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new sa(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new BD(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new sa(this._firestore,r))})}isEqual(e){return ND(this._delegate,e._delegate)}},hu=class n extends aa{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new ni(this.firestore,e):null}doc(e){try{return e===void 0?new ni(this.firestore,ah(this._delegate)):new ni(this.firestore,ah(this._delegate,e))}catch(t){throw An(t,"doc()","CollectionReference.doc()")}}add(e){return vV(this._delegate,e).then(t=>new ni(this.firestore,t))}isEqual(e){return TD(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(du.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function ia(n){return Be(n,Je)}var UD=class n{constructor(...e){this._delegate=new Ar(...e)}static documentId(){return new n(xt.keyField().canonicalString())}isEqual(e){return e=dt(e),e instanceof Ar?this._delegate._internalPath.isEqual(e._internalPath):!1}};var $D=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=EV();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=CV();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=IV(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=bV(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=DV(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var uW={Firestore:Oy,GeoPoint:Xs,Timestamp:pt,Blob:Ny,Transaction:ky,WriteBatch:Fy,DocumentReference:ni,DocumentSnapshot:oa,Query:aa,QueryDocumentSnapshot:sa,QuerySnapshot:ch,CollectionReference:hu,FieldPath:UD,FieldValue:$D,setLogLevel:cW,CACHE_SIZE_UNLIMITED:F2};function lW(n,e){n.INTERNAL.registerComponent(new rs("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},uW)))}function dW(n){lW(n,(e,t)=>new Oy(e,t,new jD)),n.registerVersion(oW,sW)}dW(Pn);function hW(n,e=ju){return new Ie(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function AV(n,e){return hW(n,e)}function fW(n,e){return AV(n,e).pipe(di(void 0),as(),oe(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function HD(n,e){return AV(n,e).pipe(oe(t=>({payload:t,type:"query"})))}var PV=class{ref;afs;constructor(n,e){this.ref=n,this.afs=e}set(n,e){return this.ref.set(n,e)}update(n){return this.ref.update(n)}delete(){return this.ref.delete()}collection(n,e){let t=this.ref.collection(n),{ref:r,query:i}=VV(t,e);return new OV(r,i,this.afs)}snapshotChanges(){return fW(this.ref,this.afs.schedulers.outsideAngular).pipe(mn)}valueChanges(n={}){return this.snapshotChanges().pipe(oe(({payload:e})=>n.idField?ve(Q({},e.data()),{[n.idField]:e.id}):e.data()))}get(n){return Te(this.ref.get(n)).pipe(mn)}};function jy(n,e){return HD(n,e).pipe(di(void 0),as(),oe(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=o.find(h=>h.doc.ref.isEqual(a.ref)),d=r?.payload.docs.find(h=>h.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function RV(n,e,t){return jy(n,t).pipe(li((r,i)=>pW(r,i.map(o=>o.payload),e),[]),l0(),oe(r=>r.map(i=>({type:i.type,payload:i}))))}function pW(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=mW(n,r))}),n}function qD(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function mW(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return qD(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return qD(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return qD(n,e.oldIndex,1);break}return n}function NV(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var OV=class{ref;query;afs;constructor(n,e,t){this.ref=n,this.query=e,this.afs=t}stateChanges(n){let e=jy(this.query,this.afs.schedulers.outsideAngular);return n&&n.length>0&&(e=e.pipe(oe(t=>t.filter(r=>n.indexOf(r.type)>-1)))),e.pipe(di(void 0),as(),Mt(([t,r])=>r.length>0||!t),oe(([,t])=>t),mn)}auditTrail(n){return this.stateChanges(n).pipe(li((e,t)=>[...e,...t],[]))}snapshotChanges(n){let e=NV(n);return RV(this.query,e,this.afs.schedulers.outsideAngular).pipe(mn)}valueChanges(n={}){return HD(this.query,this.afs.schedulers.outsideAngular).pipe(oe(e=>e.payload.docs.map(t=>n.idField?ve(Q({},t.data()),{[n.idField]:t.id}):t.data())),mn)}get(n){return Te(this.query.get(n)).pipe(mn)}add(n){return this.ref.add(n)}doc(n){return new PV(this.ref.doc(n),this.afs)}},gW=class{query;afs;constructor(n,e){this.query=n,this.afs=e}stateChanges(n){return!n||n.length===0?jy(this.query,this.afs.schedulers.outsideAngular).pipe(mn):jy(this.query,this.afs.schedulers.outsideAngular).pipe(oe(e=>e.filter(t=>n.indexOf(t.type)>-1)),Mt(e=>e.length>0),mn)}auditTrail(n){return this.stateChanges(n).pipe(li((e,t)=>[...e,...t],[]))}snapshotChanges(n){let e=NV(n);return RV(this.query,e,this.afs.schedulers.outsideAngular).pipe(mn)}valueChanges(n={}){return HD(this.query,this.afs.schedulers.outsideAngular).pipe(oe(t=>t.payload.docs.map(r=>n.idField?Q({[n.idField]:r.id},r.data()):r.data())),mn)}get(n){return Te(this.query.get(n)).pipe(mn)}},kV=new X("angularfire2.enableFirestorePersistence"),FV=new X("angularfire2.firestore.persistenceSettings"),yW=new X("angularfire2.firestore.settings"),vW=new X("angularfire2.firestore.use-emulator");function VV(n,e=t=>t){return{query:e(n),ref:n}}var uh=class Vy{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,c,l,d,h,p,g,y,E,w,T,O){this.schedulers=c;let P=wd(t,a,r),B=d;h&&zE(P,a,p,y,E,w,g,T),[this.firestore,this.persistenceEnabled$]=mg(`${P.name}.firestore`,"AngularFirestore",P.name,()=>{let q=a.runOutsideAngular(()=>P.firestore());if(o&&q.settings(o),B&&q.useEmulator(...B),i&&!ho(s)){let z=()=>{try{return Te(q.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(b){return typeof console<"u"&&console.warn(b),ue(!1)}};return[q,a.runOutsideAngular(z)]}else return[q,ue(!1)]},[o,B,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=VV(i,r),a=this.schedulers.ngZone.run(()=>o);return new OV(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new gW(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new PV(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||Vy)(K(bc),K(Dc,8),K(kV,8),K(yW,8),K(ln),K(Oe),K(hg),K(FV,8),K(vW,8),K(ek,8),K(VE,8),K(LE,8),K(jE,8),K(BE,8),K(UE,8),K($E,8),K(vd,8))};static \u0275prov=ne({token:Vy,factory:Vy.\u0275fac,providedIn:"any"})},LV=class Ly{constructor(){Pn.registerVersion("angularfire",yd.full,"fst-compat")}static enablePersistence(t){return{ngModule:Ly,providers:[{provide:kV,useValue:!0},{provide:FV,useValue:t}]}}static \u0275fac=function(r){return new(r||Ly)};static \u0275mod=vt({type:Ly});static \u0275inj=yt({providers:[uh]})};var Ho=class n{constructor(e){this.firestore=e}getAllPerfumes(){return this.firestore.collection("perfumes").valueChanges({idField:"id"})}getPerfumesByCountry(e){return this.firestore.collection("perfumes",t=>t.where("country","==",e)).valueChanges({idField:"id"})}getPerfumeByCountry(e){return this.firestore.collection("perfumes",t=>t.where("country","==",e)).valueChanges({idField:"id"})}getCountries(){return this.firestore.collection("perfumes").valueChanges().pipe(oe(e=>(console.log("Perfumes:",e),[...new Set(e.map(r=>r.country))].sort())))}getFeaturedPerfumes(){return this.firestore.collection("perfumes",e=>e.where("isBestSeller","==",!0).limit(3)).valueChanges({idField:"id"})}updatePerfume(e,t){return this.firestore.doc(`perfumes/${e}`).update(t)}filterAndSortPerfumes(e,t,r,i){let o=[...e];switch(t!=="ALL"&&(o=o.filter(s=>s.category===t)),r!=="ALL"&&(o=o.filter(s=>s.country===r)),i){case"price-low":o.sort((s,a)=>s.price-a.price);break;case"price-high":o.sort((s,a)=>a.price-s.price);break;case"name-asc":o.sort((s,a)=>s.name.localeCompare(a.name));break;case"name-desc":o.sort((s,a)=>a.name.localeCompare(s.name));break}return o}paginateProducts(e,t,r){let i=(t-1)*r;return e.slice(i,i+r)}getUniqueCategories(e){return["ALL",...new Set(e.map(t=>t.category))]}getUniqueCountries(e){return["ALL",...new Set(e.map(t=>t.country))]}static \u0275fac=function(t){return new(t||n)(K(uh))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})};var wW=["mapContainer"],By=class n{constructor(e){this.perfumeService=e}mapContainer;activeCountry=null;countrySelected=new He;mapWidth=800;mapHeight=500;svg;countries;availableCountries=[];tooltip;zoom;projection;path;ngOnInit(){this.checkScreenSize(),this.loadCountries()}ngOnChanges(){this.updateMapColors()}onResize(){this.checkScreenSize(),this.svg&&this.updateMapSize()}checkScreenSize(){this.mapWidth=window.innerWidth<=768?450:800,this.mapHeight=500}loadCountries(){this.perfumeService.getCountries().subscribe({next:e=>{this.availableCountries=e,this.initializeMap()},error:e=>this.displayErrorMessage("Failed to load country data")})}initializeMap(){this.clearMapContainer(),this.createSvgContainer(),this.createTooltip(),this.loadMapData()}clearMapContainer(){this.mapContainer.nativeElement.innerHTML=""}createSvgContainer(){this.svg=fn(this.mapContainer.nativeElement).append("svg").attr("width",this.mapWidth).attr("height",this.mapHeight).style("background","#f9f5f2").style("border-radius","12px").style("box-shadow","0 10px 30px rgba(0, 0, 0, 0.08)")}createTooltip(){this.tooltip=fn(this.mapContainer.nativeElement).append("div").attr("class","map-tooltip").style("opacity",0).style("background","#5d4037").style("color","#f9f5f2").style("border-left","3px solid #d4af37")}loadMapData(){YC("assets/world-map/countries-50m.json").then(e=>{this.processAndRenderMap(e)}).catch(e=>this.handleMapError(e))}processAndRenderMap(e){if(!this.validateMapData(e)){this.displayErrorMessage("Invalid map data structure");return}let t=SE(e,e.objects.countries);this.countries=t.features,this.renderMap()}validateMapData(e){return!!e?.objects?.countries}renderMap(){this.projection=this.createProjection(),this.path=yE().projection(this.projection),this.createGlowEffect(),this.drawCountries(),this.createMapBackground(),this.setupZoom()}createGlowEffect(){let t=this.svg.append("defs").append("filter").attr("id","glow").attr("width","150%").attr("height","150%");t.append("feGaussianBlur").attr("stdDeviation","3.5").attr("result","blur"),t.append("feComposite").attr("in","SourceGraphic").attr("in2","blur").attr("operator","over")}drawCountries(){this.svg.selectAll(".country").data(this.countries).enter().append("path").attr("d",this.path).attr("class","country").attr("id",e=>this.getCountryId(e.properties.name)).style("fill",e=>this.getCountryColor(e.properties.name)).style("stroke","#ffffff").style("stroke-width",.8).on("mouseover",(e,t)=>this.onCountryHover(e,t)).on("mouseout",(e,t)=>this.onCountryHoverEnd(e,t)).on("click",(e,t)=>this.countrySelected.emit(t.properties.name))}createMapBackground(){let e=this.svg.append("defs").append("linearGradient").attr("id","map-gradient").attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%");e.append("stop").attr("offset","0%").style("stop-color","#f9f5f2").style("stop-opacity",.8),e.append("stop").attr("offset","100%").style("stop-color","#d7ccc8").style("stop-opacity",.3),this.svg.append("rect").attr("width",this.mapWidth).attr("height",this.mapHeight).style("fill","url(#map-gradient)").style("pointer-events","none").lower()}createProjection(){return IE().scale(this.getScale()).translate([this.mapWidth/2,this.mapHeight/1.5])}getScale(){return window.innerWidth<=768?100:130}setupZoom(){this.zoom=xE().scaleExtent([1,8]).on("zoom",e=>{this.svg.selectAll(".country").attr("transform",e.transform).attr("stroke-width",.8/e.transform.k)}),this.svg.call(this.zoom)}updateMapSize(){this.svg.attr("width",this.mapWidth).attr("height",this.mapHeight),this.projection=this.createProjection(),this.path.projection(this.projection),this.svg.selectAll(".country").attr("d",this.path),this.svg.select("rect").attr("width",this.mapWidth).attr("height",this.mapHeight)}updateMapColors(){!this.countries||!this.svg||this.svg.selectAll(".country").style("fill",e=>this.getCountryColor(e.properties.name))}getCountryId(e){return"country-"+e.replace(/\s+/g,"-").toLowerCase()}getCountryColor(e){return this.isActiveCountry(e)?"#d4af37":this.isAvailableCountry(e)?"#8d6e63":"#d7ccc8"}isActiveCountry(e){return!!this.activeCountry&&e.toLowerCase()===this.activeCountry.toLowerCase()}isAvailableCountry(e){return this.availableCountries.includes(e)}onCountryHover(e,t){let r=t.properties.name,i=this.isAvailableCountry(r);fn(e.target).style("stroke-width",1.5).style("filter",i?"url(#glow)":""),i&&(fn(e.target).style("fill","#5d4037").style("cursor","pointer"),this.showTooltip(e,r))}onCountryHoverEnd(e,t){fn(e.target).style("fill",()=>this.getCountryColor(t.properties.name)).style("stroke-width",.8).style("filter",null).style("cursor","default"),this.hideTooltip()}showTooltip(e,t){this.tooltip.html(`<strong>${t}</strong><br>Click to explore fragrances`).style("left",e.pageX+15+"px").style("top",e.pageY-28+"px").transition().duration(200).style("opacity",1).style("transform","translateY(0)")}hideTooltip(){this.tooltip.transition().duration(200).style("opacity",0).style("transform","translateY(10px)")}handleMapError(e){console.error("Error loading map data:",e),this.displayErrorMessage("Could not load map data. Please try again later.")}displayErrorMessage(e){this.clearMapContainer(),this.createSvgContainer(),this.svg.append("text").attr("x",this.mapWidth/2).attr("y",this.mapHeight/2).attr("text-anchor","middle").style("font-size","16px").style("fill","#5d4037").text(e)}static \u0275fac=function(t){return new(t||n)(re(Ho))};static \u0275cmp=Rt({type:n,selectors:[["app-country-map"]],viewQuery:function(t,r){if(t&1&&cA(wW,7),t&2){let i;Np(i=Op())&&(r.mapContainer=i.first)}},hostBindings:function(t,r){t&1&&le("resize",function(o){return r.onResize(o)},!1,r1)},inputs:{activeCountry:"activeCountry"},outputs:{countrySelected:"countrySelected"},features:[Xn],decls:2,vars:0,consts:[["mapContainer",""],[1,"map-container"]],template:function(t,r){t&1&&ce(0,"div",1,0)},styles:[".map-container[_ngcontent-%COMP%]{width:100%;height:auto;min-height:300px;aspect-ratio:16/9;position:relative;border-radius:12px;overflow:hidden;box-shadow:0 15px 35px #0000001a;background:#f9f5f2;margin:2rem 0;border:1px solid #e0e0e0}@media (max-width: 768px){.map-container[_ngcontent-%COMP%]{aspect-ratio:9/10}}.map-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:100%;height:100%;display:block}.country[_ngcontent-%COMP%]{transition:all .3s ease;stroke-linejoin:round}.country[_ngcontent-%COMP%]:hover{stroke-width:1.5px!important}.map-tooltip[_ngcontent-%COMP%]{font-family:Arial,sans-serif;box-shadow:0 4px 12px #0003;padding:8px 16px;border-radius:4px;font-size:14px;pointer-events:none;z-index:10;transition:opacity .3s,transform .3s;transform:translateY(10px);opacity:0;position:absolute}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:.8}50%{opacity:1}to{opacity:.8}}.country-available[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}@media (max-width: 992px){.map-container[_ngcontent-%COMP%]{margin:1.5rem 0}}@media (max-width: 576px){.map-tooltip[_ngcontent-%COMP%]{font-size:12px;padding:6px 12px}}"]})};var Uy=class n{constructor(e,t){this.router=e;this.viewportScroller=t}featuredPerfumes=[];isLoading=!0;ngOnInit(){this.viewportScroller.scrollToPosition([0,0])}exploreCollection(){this.router.navigate(["/products"])}onCountrySelected(e){this.router.navigate(["/products"],{queryParams:{country:e}})}exploreCollectionFor(e){this.router.navigate(["/products"],{queryParams:{type:e}})}static \u0275fac=function(t){return new(t||n)(re($t),re(ec))};static \u0275cmp=Rt({type:n,selectors:[["app-home"]],decls:34,vars:0,consts:[[1,"landing-container"],[1,"background-image","position-absolute","top-0","end-0","w-100","z-1"],[1,"content","z-2","d-flex","flex-column","align-items-center","justify-content-center"],[1,"heading"],[1,"subheading"],[1,"cta-button",3,"click"],[1,"home-container"],[1,"map-section"],[1,"section-description"],[1,"map-wrapper"],[3,"countrySelected"],[1,"gender-categories"],[1,"category-card","for-him"],[1,"category-content"],[1,"category-btn",3,"click"],[1,"category-card","for-her"]],template:function(t,r){t&1&&(S(0,"div",0),ce(1,"div",1),S(2,"div",2)(3,"h1",3),$(4,"Discover the World of Scents"),A(),S(5,"p",4),$(6,"Premium fragrances from around the globe"),A(),S(7,"button",5),le("click",function(){return r.exploreCollection()}),$(8," Explore Collection "),A()()(),S(9,"div",6)(10,"section",7)(11,"h2"),$(12,"Explore by Country"),A(),S(13,"p",8),$(14,"Click on a highlighted country to discover its unique fragrances"),A(),S(15,"div",9)(16,"app-country-map",10),le("countrySelected",function(o){return r.onCountrySelected(o)}),A()()(),S(17,"section",11)(18,"div",12)(19,"div",13)(20,"h3"),$(21,"For Him"),A(),S(22,"p"),$(23,"Discover masculine scents that command attention"),A(),S(24,"button",14),le("click",function(){return r.exploreCollectionFor("men")}),$(25,"Shop Men's Fragrances"),A()()(),S(26,"div",15)(27,"div",13)(28,"h3"),$(29,"For Her"),A(),S(30,"p"),$(31,"Explore feminine fragrances that captivate"),A(),S(32,"button",14),le("click",function(){return r.exploreCollectionFor("woman")}),$(33,"Shop Women's Fragrances"),A()()()()())},dependencies:[By],styles:['.landing-container[_ngcontent-%COMP%], .home-container[_ngcontent-%COMP%]{position:relative;width:100%;overflow:hidden;color:#fff;text-align:center}.landing-container[_ngcontent-%COMP%]{height:100vh}.landing-container[_ngcontent-%COMP%]   .background-image[_ngcontent-%COMP%]{height:114%;background-image:url("./media/hero1-EFDDK7XE.jpg");background-size:cover;background-position:center;background-attachment:fixed;animation:_ngcontent-%COMP%_zoomEffect 15s ease infinite alternate}.content[_ngcontent-%COMP%]{position:relative;z-index:2;padding:20px;max-width:800px;margin:0 auto;height:100%}.content[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font-size:4rem;font-weight:700;margin-bottom:1rem;text-shadow:2px 2px 8px rgba(0,0,0,.6);animation:fadeIn 2s ease-in-out}.content[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:15rem;text-shadow:1px 1px 4px rgba(0,0,0,.5);max-width:600px}.content[_ngcontent-%COMP%]   .cta-button[_ngcontent-%COMP%]{background:#fff3;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:2px solid #fff;color:#fff;padding:15px 40px;font-size:1.2rem;border-radius:50px;cursor:pointer;transition:all .3s ease}.content[_ngcontent-%COMP%]   .cta-button[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:translateY(-5px)}.map-section[_ngcontent-%COMP%]{padding:60px 20px;text-align:center;background:#f9f5f2;border-radius:12px;margin:40px 20px;box-shadow:0 10px 30px #00000014;position:relative;overflow:hidden}.map-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:15px;position:relative;z-index:1;font-weight:700}.map-section[_ngcontent-%COMP%]   .section-description[_ngcontent-%COMP%]{font-size:1.1rem;color:#777;max-width:700px;margin:0 auto 40px;position:relative;z-index:1;line-height:1.6}.map-section[_ngcontent-%COMP%]   .map-wrapper[_ngcontent-%COMP%]{margin:40px auto;border:none;border-radius:12px;overflow:auto;box-shadow:0 8px 25px #00000026;max-width:1000px;position:relative;z-index:1;transition:transform .3s ease;background:#fff}.map-section[_ngcontent-%COMP%]   .map-wrapper[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.gender-categories[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:30px;padding:0 20px 60px;flex-wrap:wrap}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]{position:relative;width:100%;max-width:550px;height:400px;border-radius:16px;overflow:hidden;box-shadow:0 15px 35px #0000001a;transition:transform .4s ease,box-shadow .4s ease}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:0 20px 40px #00000026}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(to bottom,#0000001a,#000000b3);z-index:1}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%]{position:relative;z-index:2;height:100%;display:flex;flex-direction:column;justify-content:flex-end;padding:40px;text-align:left;color:#fff}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:10px;text-shadow:1px 1px 3px rgba(0,0,0,.5)}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:25px;text-shadow:1px 1px 2px rgba(0,0,0,.5)}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]   .category-btn[_ngcontent-%COMP%]{background:#fff3;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);border:1px solid #fff;color:#fff;padding:12px 30px;font-size:1rem;border-radius:30px;cursor:pointer;transition:all .3s ease;align-self:flex-start}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]   .category-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:translateY(-3px)}.gender-categories[_ngcontent-%COMP%]   .for-him[_ngcontent-%COMP%]{background:url("./media/mens-fragrances-XTLZYDQZ.jpg") center/cover no-repeat}.gender-categories[_ngcontent-%COMP%]   .for-her[_ngcontent-%COMP%]{background:url("./media/womens-fragrances-YR67AMWY.jpg") center/cover no-repeat}@keyframes _ngcontent-%COMP%_zoomEffect{0%{transform:scale(1)}to{transform:scale(1.1)}}@media (max-width: 1200px){.gender-categories[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]{max-width:700px}}@media (max-width: 768px){.content[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font-size:2.5rem!important}.content[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font-size:1.2rem}.content[_ngcontent-%COMP%]   .cta-button[_ngcontent-%COMP%]{padding:12px 30px;font-size:1rem}.map-section[_ngcontent-%COMP%]{margin:20px 10px;padding:30px 10px}.map-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]{height:350px}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%]{padding:30px}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2rem}}@media (max-width: 576px){.content[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font-size:2rem!important}.content[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{margin-bottom:10rem}.map-section[_ngcontent-%COMP%]{margin:15px 5px;padding:25px 5px}.map-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.map-section[_ngcontent-%COMP%]   .section-description[_ngcontent-%COMP%]{font-size:.9rem}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]{height:300px}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%]{padding:20px}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.8rem}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}}']})};var QV=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(re(Cr),re(xn))}}static{this.\u0275dir=_t({type:n})}}return n})(),Yy=(()=>{class n extends QV{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Cs(n)))(i||n)}})()}static{this.\u0275dir=_t({type:n,features:[er]})}}return n})(),gu=new X("");var EW={provide:gu,useExisting:Br(()=>Zy),multi:!0};function IW(){let n=Ur()?Ur().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var bW=new X(""),Zy=(()=>{class n extends QV{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!IW())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(re(Cr),re(xn),re(bW,8))}}static{this.\u0275dir=_t({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&le("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[co([EW]),er]})}}return n})();function Wo(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function YV(n){return n!=null&&typeof n.length=="number"}var XD=new X(""),JD=new X(""),DW=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Gn=class{static min(e){return xW(e)}static max(e){return TW(e)}static required(e){return SW(e)}static requiredTrue(e){return MW(e)}static email(e){return AW(e)}static minLength(e){return PW(e)}static maxLength(e){return RW(e)}static pattern(e){return NW(e)}static nullValidator(e){return ZV(e)}static compose(e){return rL(e)}static composeAsync(e){return oL(e)}};function xW(n){return e=>{if(Wo(e.value)||Wo(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function TW(n){return e=>{if(Wo(e.value)||Wo(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function SW(n){return Wo(n.value)?{required:!0}:null}function MW(n){return n.value===!0?null:{required:!0}}function AW(n){return Wo(n.value)||DW.test(n.value)?null:{email:!0}}function PW(n){return e=>Wo(e.value)||!YV(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function RW(n){return e=>YV(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function NW(n){if(!n)return ZV;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Wo(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function ZV(n){return null}function XV(n){return n!=null}function JV(n){return Ds(n)?Te(n):n}function eL(n){let e={};return n.forEach(t=>{e=t!=null?Q(Q({},e),t):e}),Object.keys(e).length===0?null:e}function tL(n,e){return e.map(t=>t(n))}function OW(n){return!n.validate}function nL(n){return n.map(e=>OW(e)?e:t=>e.validate(t))}function rL(n){if(!n)return null;let e=n.filter(XV);return e.length==0?null:function(t){return eL(tL(t,e))}}function iL(n){return n!=null?rL(nL(n)):null}function oL(n){if(!n)return null;let e=n.filter(XV);return e.length==0?null:function(t){let r=tL(t,e).map(JV);return a0(r).pipe(oe(eL))}}function sL(n){return n!=null?oL(nL(n)):null}function BV(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function aL(n){return n._rawValidators}function cL(n){return n._rawAsyncValidators}function GD(n){return n?Array.isArray(n)?n:[n]:[]}function zy(n,e){return Array.isArray(n)?n.includes(e):n===e}function UV(n,e){let t=GD(e);return GD(n).forEach(i=>{zy(t,i)||t.push(i)}),t}function $V(n,e){return GD(e).filter(t=>!zy(n,t))}var qy=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=iL(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=sL(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},ca=class extends qy{get formDirective(){return null}get path(){return null}},Ko=class extends qy{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Hy=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},kW={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},xpe=ve(Q({},kW),{"[class.ng-submitted]":"isSubmitted"}),Xy=(()=>{class n extends Hy{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(re(Ko,2))}}static{this.\u0275dir=_t({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&at("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[er]})}}return n})(),uL=(()=>{class n extends Hy{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(re(ca,10))}}static{this.\u0275dir=_t({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&at("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[er]})}}return n})();var lh="VALID",$y="INVALID",fu="PENDING",dh="DISABLED",Qo=class{},Gy=class extends Qo{constructor(e,t){super(),this.value=e,this.source=t}},hh=class extends Qo{constructor(e,t){super(),this.pristine=e,this.source=t}},fh=class extends Qo{constructor(e,t){super(),this.touched=e,this.source=t}},pu=class extends Qo{constructor(e,t){super(),this.status=e,this.source=t}},WD=class extends Qo{constructor(e){super(),this.source=e}},KD=class extends Qo{constructor(e){super(),this.source=e}};function ex(n){return(Jy(n)?n.validators:n)||null}function FW(n){return Array.isArray(n)?iL(n):n||null}function tx(n,e){return(Jy(e)?e.asyncValidators:n)||null}function VW(n){return Array.isArray(n)?sL(n):n||null}function Jy(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function lL(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new se(1e3,"");if(!r[t])throw new se(1001,"")}function dL(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new se(1002,"")})}var mu=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=ll(()=>this.statusReactive()),this.statusReactive=il(void 0),this._pristine=ll(()=>this.pristineReactive()),this.pristineReactive=il(!0),this._touched=ll(()=>this.touchedReactive()),this.touchedReactive=il(!1),this._events=new ze,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Ci(this.statusReactive)}set status(e){Ci(()=>this.statusReactive.set(e))}get valid(){return this.status===lh}get invalid(){return this.status===$y}get pending(){return this.status==fu}get disabled(){return this.status===dh}get enabled(){return this.status!==dh}get pristine(){return Ci(this.pristineReactive)}set pristine(e){Ci(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Ci(this.touchedReactive)}set touched(e){Ci(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(UV(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(UV(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators($V(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators($V(e,this._rawAsyncValidators))}hasValidator(e){return zy(this._rawValidators,e)}hasAsyncValidator(e){return zy(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ve(Q({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new fh(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new fh(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ve(Q({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new hh(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new hh(!0,r))}markAsPending(e={}){this.status=fu;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new pu(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ve(Q({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=dh,this.errors=null,this._forEachChild(i=>{i.disable(ve(Q({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Gy(this.value,r)),this._events.next(new pu(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ve(Q({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=lh,this._forEachChild(r=>{r.enable(ve(Q({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ve(Q({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===lh||this.status===fu)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Gy(this.value,t)),this._events.next(new pu(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ve(Q({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?dh:lh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=fu,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=JV(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new pu(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new He,this.statusChanges=new He}_calculateStatus(){return this._allControlsDisabled()?dh:this.errors?$y:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(fu)?fu:this._anyControlsHaveStatus($y)?$y:lh}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new hh(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new fh(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Jy(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=FW(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=VW(this._rawAsyncValidators)}},Wy=class extends mu{constructor(e,t,r){super(ex(t),tx(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){dL(this,!0,e),Object.keys(e).forEach(r=>{lL(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var QD=class extends Wy{};var mh=new X("CallSetDisabledState",{providedIn:"root",factory:()=>gh}),gh="always";function hL(n,e){return[...e.path,n]}function YD(n,e,t=gh){nx(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),jW(n,e),UW(n,e),BW(n,e),LW(n,e)}function zV(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Qy(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Ky(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function LW(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function nx(n,e){let t=aL(n);e.validator!==null?n.setValidators(BV(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=cL(n);e.asyncValidator!==null?n.setAsyncValidators(BV(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Ky(e._rawValidators,i),Ky(e._rawAsyncValidators,i)}function Qy(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=aL(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=cL(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return Ky(e._rawValidators,r),Ky(e._rawAsyncValidators,r),t}function jW(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&fL(n,e)})}function BW(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&fL(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function fL(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function UW(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function $W(n,e){n==null,nx(n,e)}function zW(n,e){return Qy(n,e)}function pL(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function qW(n){return Object.getPrototypeOf(n.constructor)===Yy}function HW(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function mL(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Zy?t=o:qW(o)?r=o:i=o}),i||r||t||null}function GW(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function qV(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function HV(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var ph=class extends mu{constructor(e=null,t,r){super(ex(t),tx(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Jy(t)&&(t.nonNullable||t.initialValueIsDefault)&&(HV(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){qV(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){qV(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){HV(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var WW=n=>n instanceof ph;var KW={provide:Ko,useExisting:Br(()=>yh)},GV=Promise.resolve(),yh=(()=>{class n extends Ko{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new ph,this._registered=!1,this.name="",this.update=new He,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=mL(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),pL(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){YD(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){GV.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&xs(r);GV.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?hL(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(re(ca,9),re(XD,10),re(JD,10),re(gu,10),re(uo,8),re(mh,8))}}static{this.\u0275dir=_t({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[co([KW]),er,Xn]})}}return n})(),gL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=_t({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var QW={provide:gu,useExisting:Br(()=>rx),multi:!0};var YW=(()=>{class n{constructor(){this._accessors=[]}add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t){this._accessors.splice(r,1);return}}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return t[0].control?t[0]._parent===r._control._parent&&t[1].name===r.name:!1}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),rx=(()=>{class n extends Yy{constructor(t,r,i,o){super(t,r),this._registry=i,this._injector=o,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=H(mh,{optional:!0})??gh}ngOnInit(){this._control=this._injector.get(Ko),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}setDisabledState(t){(this.setDisabledStateFired||t||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",t),this.setDisabledStateFired=!0}fireUncheck(t){this.writeValue(t)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}static{this.\u0275fac=function(r){return new(r||n)(re(Cr),re(xn),re(YW),re(kn))}}static{this.\u0275dir=_t({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(r,i){r&1&&le("change",function(){return i.onChange()})("blur",function(){return i.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[co([QW]),er]})}}return n})();var yL=new X("");var ZW={provide:ca,useExisting:Br(()=>ix)},ix=(()=>{class n extends ca{get submitted(){return Ci(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=ll(()=>this._submittedReactive()),this._submittedReactive=il(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new He,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Qy(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return YD(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){zV(t.control||null,t,!1),GW(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),HW(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new WD(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new KD(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(zV(r||null,t),WW(i)&&(YD(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);$W(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&zW(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){nx(this.form,this),this._oldForm&&Qy(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(r){return new(r||n)(re(XD,10),re(JD,10),re(mh,8))}}static{this.\u0275dir=_t({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&le("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[co([ZW]),er,Xn]})}}return n})();var XW={provide:Ko,useExisting:Br(()=>ox)},ox=(()=>{class n extends Ko{set isDisabled(t){}static{this._ngModelWarningSentOnce=!1}constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new He,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=mL(this,o)}ngOnChanges(t){this._added||this._setUpControl(),pL(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return hL(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(r){return new(r||n)(re(ca,13),re(XD,10),re(JD,10),re(gu,10),re(yL,8))}}static{this.\u0275dir=_t({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[co([XW]),er,Xn]})}}return n})(),JW={provide:gu,useExisting:Br(()=>ev),multi:!0};function vL(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function eK(n){return n.split(":")[0]}var ev=(()=>{class n extends Yy{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=vL(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=eK(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Cs(n)))(i||n)}})()}static{this.\u0275dir=_t({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&le("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[co([JW]),er]})}}return n})(),_L=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(vL(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(re(xn),re(Cr),re(ev,9))}}static{this.\u0275dir=_t({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),tK={provide:gu,useExisting:Br(()=>wL),multi:!0};function WV(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function nK(n){return n.split(":")[0]}var wL=(()=>{class n extends Yy{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],l=this._getOptionValue(c.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=nK(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Cs(n)))(i||n)}})()}static{this.\u0275dir=_t({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&le("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[co([tK]),er]})}}return n})(),CL=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(WV(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(WV(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(re(xn),re(Cr),re(wL,9))}}static{this.\u0275dir=_t({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();var EL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=vt({type:n})}static{this.\u0275inj=yt({})}}return n})(),ZD=class extends mu{constructor(e,t,r){super(ex(t),tx(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){dL(this,!1,e),e.forEach((r,i)=>{lL(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function KV(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var IL=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return KV(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Wy(i,o)}record(t,r=null){let i=this._reduceControls(t);return new QD(i,r)}control(t,r,i){let o={};return this.useNonNullable?(KV(r)?o=r:(o.validators=r,o.asyncValidators=i),new ph(t,ve(Q({},o),{nonNullable:!0}))):new ph(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new ZD(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof ph)return t;if(t instanceof mu)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var bL=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:mh,useValue:t.callSetDisabledState??gh}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=vt({type:n})}static{this.\u0275inj=yt({imports:[EL]})}}return n})(),DL=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:yL,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:mh,useValue:t.callSetDisabledState??gh}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=vt({type:n})}static{this.\u0275inj=yt({imports:[EL]})}}return n})();var Yo=class n{cartKey="fragrance_cart";cartSubject=new It(this.getCart());cart$=this.cartSubject.asObservable();constructor(){}getCart(){let e=localStorage.getItem(this.cartKey);return e?JSON.parse(e):[]}saveCart(e){localStorage.setItem(this.cartKey,JSON.stringify(e)),this.cartSubject.next(e)}addToCart(e){let t=this.getCart(),r=t.find(i=>i.perfume.id===e.id);r?r.quantity+=1:t.push({perfume:e,quantity:1}),this.saveCart(t)}removeFromCart(e){let t=this.getCart().filter(r=>r.perfume.id!==e);this.saveCart(t)}updateQuantity(e,t){if(t<1)return;let r=this.getCart(),i=r.find(o=>o.perfume.id===e);i&&(i.quantity=t,this.saveCart(r))}clearCart(){localStorage.removeItem(this.cartKey),this.cartSubject.next([])}getCartItemCount(){return this.getCart().reduce((e,t)=>e+t.quantity,0)}getTotalPrice(){return this.getCart().reduce((e,t)=>e+t.perfume.price*t.quantity,0)}isInCart(e){return this.getCart().some(t=>t.perfume.id===e)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})};var qi={_origin:"https://api.emailjs.com"};var TL=(n,e="https://api.emailjs.com")=>{qi._userID=n,qi._origin=e};var tv=(n,e,t)=>{if(!n)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!e)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};var vh=class{constructor(e){this.status=e.status,this.text=e.responseText}};var nv=(n,e,t={})=>new Promise((r,i)=>{let o=new XMLHttpRequest;o.addEventListener("load",({target:s})=>{let a=new vh(s);a.status===200||a.text==="OK"?r(a):i(a)}),o.addEventListener("error",({target:s})=>{i(new vh(s))}),o.open("POST",qi._origin+n,!0),Object.keys(t).forEach(s=>{o.setRequestHeader(s,t[s])}),o.send(e)});var SL=(n,e,t,r)=>{let i=r||qi._userID;return tv(i,n,e),nv("/api/v1.0/email/send",JSON.stringify({lib_version:"3.2.0",user_id:i,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"})};var iK=n=>{let e;if(typeof n=="string"?e=document.querySelector(n):e=n,!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return e},ML=(n,e,t,r)=>{let i=r||qi._userID,o=iK(t);tv(i,n,e);let s=new FormData(o);return s.append("lib_version","3.2.0"),s.append("service_id",n),s.append("template_id",e),s.append("user_id",i),nv("/api/v1.0/email/send-form",s)};var rv={init:TL,send:SL,sendForm:ML};var Zo={production:!1,firebase:{apiKey:"AIzaSyCJhh6RhbGA52js5L1blEEU0EF_pTy1-JU",authDomain:"graduation-project-704b9.firebaseapp.com",projectId:"republic-1612b",storageBucket:"graduation-project-704b9.appspot.com",messagingSenderId:"159614579205",appId:"1:159614579205:web:c0dfd56cf057d7635ce26c"},firebaseConfig:{apiKey:"AIzaSyCcB66Mhf54_4bF0eI3sTDZJMl9eCIooqc",authDomain:"republic-1612b.firebaseapp.com",projectId:"republic-1612b",storageBucket:"republic-1612b.firebasestorage.app",messagingSenderId:"813696737012",appId:"1:813696737012:web:8f37e6b4af9add5b9a08a1",measurementId:"G-5FYGYGMB2Z"},emailjs:{userId:"vO8wiOaSbKIsBC4OA",serviceId:"service_id1",templateIdCustomer:"user_id1",templateIdAdmin:"admin_id1"}};var iv=class n{constructor(e){this.firestore=e;rv.init(Zo.emailjs.userId)}createOrder(e){return V(this,null,function*(){let t=this.generateOrderId(),r=ve(Q({id:t},e),{createdAt:new Date,status:"pending"});return yield this.firestore.collection("orders").doc(t).set(r),yield this.sendEmails(r),r})}sendEmails(e){return V(this,null,function*(){try{if(!e.email||!this.validateEmail(e.email))throw new Error(`Invalid email address: ${e.email}`);let t={email:e.email,name:`${e.firstName} ${e.lastName}`,order_id:e.id,order_items:e.items.map(i=>`${i.perfume.name} (Q: ${i.quantity}) = EGP ${i.perfume.price*i.quantity}`).join(`
`),total:e.total};yield rv.send(Zo.emailjs.serviceId,Zo.emailjs.templateIdCustomer,t);let r={to_email:"farahatadel3@gmail.com",order_id:e.id,customer_name:`${e.firstName} ${e.lastName}`,customer_email:e.email,customer_phone:e.phone,delivery_address:`${e.address}, ${e.city}`,order_items:e.items.map(i=>`${i.perfume.name} (Q: ${i.quantity}) = EGP ${i.perfume.price*i.quantity}`).join(`
`),total:e.total,payment_method:e.paymentMethod==="cash"?"Cash on Delivery":"Credit Card"};yield rv.send(Zo.emailjs.serviceId,Zo.emailjs.templateIdAdmin,r)}catch(t){throw t}})}validateEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}generateOrderId(){return`ORD-${Date.now()}-${Math.floor(Math.random()*1e3)}`}static \u0275fac=function(t){return new(t||n)(K(uh))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})};var sK=()=>({standalone:!0});function aK(n,e){n&1&&(S(0,"div",8)(1,"div",9),ht(),S(2,"svg",10),ce(3,"circle",11)(4,"circle",12)(5,"path",13),A()(),bt(),S(6,"h2"),$(7,"Your Fragrance Wardrobe is Empty"),A(),S(8,"p"),$(9,"Discover our exquisite collection to find your signature scent"),A(),S(10,"a",14),ht(),S(11,"svg",15),ce(12,"line",16)(13,"polyline",17),A(),$(14," Explore Our Collection "),A()())}function cK(n,e){if(n&1&&(S(0,"div",18)(1,"div",19)(2,"div",20),ht(),S(3,"svg",21),ce(4,"path",22)(5,"polyline",23),A()(),bt(),S(6,"h2"),$(7,"Your Order is Complete!"),A(),S(8,"p",24),$(9),A(),S(10,"p",25),$(11,"We've sent a confirmation to your email. Our fragrance specialists will contact you shortly to finalize delivery details."),A(),S(12,"div",26)(13,"a",14),$(14,"Discover More Scents"),A()()()()),n&2){let t=Ye();Y(9),dn("Thank you for choosing our fragrances. Your order #",t.orderId," is being prepared.")}}function uK(n,e){if(n&1){let t=tr();S(0,"div",79)(1,"div",80),ce(2,"img",81),S(3,"button",82),le("click",function(){let i=Nt(t).$implicit,o=Ye(2);return Ot(o.removeItem(i==null?null:i.perfume))}),ht(),S(4,"svg",15),ce(5,"line",83)(6,"line",84),A()()(),bt(),S(7,"div",85)(8,"h4",86),$(9),A(),S(10,"p",87),$(11),A(),S(12,"p",88),$(13),nr(14,"currency"),A()(),S(15,"div",89)(16,"button",90),le("click",function(){let i=Nt(t).$implicit,o=Ye(2);return Ot(o.updateQuantity(i,i.quantity-1))}),$(17,"-"),A(),S(18,"span",91),$(19),A(),S(20,"button",92),le("click",function(){let i=Nt(t).$implicit,o=Ye(2);return Ot(o.updateQuantity(i,i.quantity+1))}),$(21,"+"),A()(),S(22,"div",93),$(23),nr(24,"currency"),A()()}if(n&2){let t=e.$implicit;Y(2),ke("src",t.perfume.images[1],rl)("alt",t.perfume.name),Y(7),ct(t.perfume.name),Y(2),ct(t.perfume.category),Y(2),ct(al(14,8,t.perfume.price,"EGP ","symbol","1.2-2")),Y(3),ke("disabled",t.quantity<=1),Y(3),ct(t.quantity),Y(4),dn(" ",al(24,13,t.perfume.price*t.quantity,"EGP ","symbol","1.2-2")," ")}}function lK(n,e){n&1&&(S(0,"div",94),$(1," Please enter your first name "),A())}function dK(n,e){n&1&&(S(0,"div",94),$(1," Please enter your last name "),A())}function hK(n,e){n&1&&(S(0,"div",94),$(1," Please enter a valid email address "),A())}function fK(n,e){n&1&&(S(0,"div",94),$(1," Please enter a valid phone number "),A())}function pK(n,e){n&1&&(S(0,"div",94),$(1," Please enter your delivery address "),A())}function mK(n,e){n&1&&(S(0,"div",94),$(1," Please enter your city "),A())}function gK(n,e){n&1&&(S(0,"span"),$(1,"Complete Your Order"),A())}function yK(n,e){n&1&&ce(0,"span",95)}function vK(n,e){if(n&1){let t=tr();S(0,"div",27)(1,"div",28)(2,"div",29)(3,"h3"),$(4,"Your Selected Fragrances"),A(),S(5,"button",30),le("click",function(){Nt(t);let i=Ye();return Ot(i.clearCart())}),$(6,"Clear "),S(7,"i"),ce(8,"i",31),A()()(),S(9,"div",32),ft(10,uK,25,18,"div",33),A(),S(11,"div",34)(12,"a",35),ht(),S(13,"svg",15),ce(14,"line",16)(15,"polyline",17),A(),$(16," Continue Exploring "),A()()(),bt(),S(17,"div",36)(18,"div",37)(19,"h3",38),$(20,"Order Summary"),A(),S(21,"div",39)(22,"span"),$(23),A(),S(24,"span"),$(25),nr(26,"currency"),A()(),S(27,"div",40)(28,"span"),$(29,"Total"),A(),S(30,"span",41),$(31),nr(32,"currency"),A()(),S(33,"form",42),le("ngSubmit",function(){Nt(t);let i=Ye();return Ot(i.onSubmit())}),S(34,"div",43)(35,"label",44),$(36,"First Name"),A(),ce(37,"input",45),ft(38,lK,2,0,"div",46),A(),S(39,"div",43)(40,"label",47),$(41,"Last Name"),A(),ce(42,"input",48),ft(43,dK,2,0,"div",46),A(),S(44,"div",43)(45,"label",49),$(46,"Email"),A(),ce(47,"input",50),ft(48,hK,2,0,"div",46),A(),S(49,"div",43)(50,"label",51),$(51,"Phone Number"),A(),ce(52,"input",52),ft(53,fK,2,0,"div",46),A(),S(54,"div",43)(55,"label",53),$(56,"Delivery Address"),A(),ce(57,"input",54),ft(58,pK,2,0,"div",46),A(),S(59,"div",55)(60,"div",43)(61,"label",56),$(62,"City"),A(),ce(63,"input",57),ft(64,mK,2,0,"div",46),A()(),S(65,"div",43)(66,"label",58),$(67,"Special Instructions (Optional)"),A(),ce(68,"textarea",59),A(),S(69,"div",60)(70,"h4"),$(71,"Payment Method"),A(),S(72,"div",61)(73,"label",62)(74,"input",63),bs("ngModelChange",function(i){Nt(t);let o=Ye();return Ka(o.paymentMethod,i)||(o.paymentMethod=i),Ot(i)}),A(),S(75,"div",64)(76,"span"),$(77,"Cash on Delivery"),A(),ht(),S(78,"svg",65),ce(79,"circle",66)(80,"path",67)(81,"line",68)(82,"line",69),A()()(),bt(),S(83,"label",70),ce(84,"input",71),S(85,"div",64)(86,"span"),$(87,"Credit Card (Coming Soon)"),A(),ht(),S(88,"svg",65),ce(89,"rect",72)(90,"line",73),A()()()()(),bt(),S(91,"button",74),ft(92,gK,2,0,"span",75)(93,yK,1,0,"span",76),A(),S(94,"div",77),ht(),S(95,"svg",15),ce(96,"path",78),A(),bt(),S(97,"span"),$(98,"Secure Checkout"),A()()()()()()}if(n&2){let t,r,i,o,s,a,c,l,d,h,p,g,y=Ye();Y(10),ke("ngForOf",y.cartItems)("ngForTrackBy",y.trackByPerfumeId),Y(13),dn("Subtotal (",y.cartItems.length," items)"),Y(2),ct(al(26,31,y.totalPrice,"EGP ","symbol","1.2-2")),Y(6),ct(al(32,36,y.totalPrice,"EGP ","symbol","1.2-2")),Y(2),ke("formGroup",y.checkoutForm),Y(4),at("invalid",((t=y.checkoutForm.get("firstName"))==null?null:t.invalid)&&((t=y.checkoutForm.get("firstName"))==null?null:t.touched)),Y(),ke("ngIf",((r=y.checkoutForm.get("firstName"))==null?null:r.invalid)&&((r=y.checkoutForm.get("firstName"))==null?null:r.touched)),Y(4),at("invalid",((i=y.checkoutForm.get("lastName"))==null?null:i.invalid)&&((i=y.checkoutForm.get("lastName"))==null?null:i.touched)),Y(),ke("ngIf",((o=y.checkoutForm.get("lastName"))==null?null:o.invalid)&&((o=y.checkoutForm.get("lastName"))==null?null:o.touched)),Y(4),at("invalid",((s=y.checkoutForm.get("email"))==null?null:s.invalid)&&((s=y.checkoutForm.get("email"))==null?null:s.touched)),Y(),ke("ngIf",((a=y.checkoutForm.get("email"))==null?null:a.invalid)&&((a=y.checkoutForm.get("email"))==null?null:a.touched)),Y(4),at("invalid",((c=y.checkoutForm.get("phone"))==null?null:c.invalid)&&((c=y.checkoutForm.get("phone"))==null?null:c.touched)),Y(),ke("ngIf",((l=y.checkoutForm.get("phone"))==null?null:l.invalid)&&((l=y.checkoutForm.get("phone"))==null?null:l.touched)),Y(4),at("invalid",((d=y.checkoutForm.get("address"))==null?null:d.invalid)&&((d=y.checkoutForm.get("address"))==null?null:d.touched)),Y(),ke("ngIf",((h=y.checkoutForm.get("address"))==null?null:h.invalid)&&((h=y.checkoutForm.get("address"))==null?null:h.touched)),Y(5),at("invalid",((p=y.checkoutForm.get("city"))==null?null:p.invalid)&&((p=y.checkoutForm.get("city"))==null?null:p.touched)),Y(),ke("ngIf",((g=y.checkoutForm.get("city"))==null?null:g.invalid)&&((g=y.checkoutForm.get("city"))==null?null:g.touched)),Y(9),at("selected",y.paymentMethod==="cash"),Y(),Is("ngModel",y.paymentMethod),ke("ngModelOptions",hA(41,sK)),Y(17),ke("disabled",y.checkoutForm.invalid||y.isLoading),Y(),ke("ngIf",!y.isLoading),Y(),ke("ngIf",y.isLoading)}}var ov=class n{constructor(e,t,r,i){this.cartService=e;this.orderService=t;this.fb=r;this.router=i;this.checkoutForm=this.fb.group({firstName:["",[Gn.required,Gn.minLength(2)]],lastName:["",[Gn.required,Gn.minLength(2)]],email:["",[Gn.required,Gn.email]],phone:["",[Gn.required,Gn.pattern(/^[0-9]{10,15}$/)]],address:["",Gn.required],city:["",Gn.required],notes:[""]})}cartItems=[];checkoutForm;paymentMethod="cash";orderSubmitted=!1;isLoading=!1;orderId="";destroy$=new ze;ngOnInit(){this.cartService.cart$.pipe(Qn(this.destroy$)).subscribe(e=>{this.cartItems=e})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}get totalPrice(){return this.cartService.getTotalPrice()}updateQuantity(e,t){this.cartService.updateQuantity(e.perfume.id,t)}removeItem(e){e.id&&this.cartService.removeFromCart(e.id)}clearCart(){this.cartService.clearCart()}onSubmit(){return V(this,null,function*(){if(!(this.checkoutForm.invalid||this.isLoading)){this.isLoading=!0;try{let e=ve(Q({},this.checkoutForm.value),{items:this.cartItems,subtotal:this.totalPrice,tax:0,total:this.totalPrice,paymentMethod:this.paymentMethod,status:"pending"});console.log("Order data before sending:",e);let t=yield this.orderService.createOrder(e);this.orderId=t.id,this.orderSubmitted=!0,this.cartService.clearCart()}catch(e){console.error("Checkout failed:",e)}finally{this.isLoading=!1}}})}continueShopping(){this.router.navigate(["/products"])}trackByPerfumeId(e,t){return t.perfume.id}static \u0275fac=function(t){return new(t||n)(re(Yo),re(iv),re(IL),re($t))};static \u0275cmp=Rt({type:n,selectors:[["app-cart"]],decls:20,vars:3,consts:[[1,"cart-container"],[1,"cart-header"],[1,"cart-steps"],[1,"step","active"],[1,"step"],["class","empty-cart",4,"ngIf"],["class","order-confirmation",4,"ngIf"],["class","cart-content",4,"ngIf"],[1,"empty-cart"],[1,"empty-cart-icon"],["xmlns","http://www.w3.org/2000/svg","width","80","height","80","viewBox","0 0 24 24","fill","none","stroke","#d1a054","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["cx","10","cy","20.5","r","1"],["cx","18","cy","20.5","r","1"],["d","M2.5 2.5h3l2.7 12.4a2 2 0 0 0 2 1.6h7.7a2 2 0 0 0 2-1.6l1.6-8.4H7.1"],["routerLink","/products",1,"continue-shopping-btn"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x1","19","y1","12","x2","5","y2","12"],["points","12 19 5 12 12 5"],[1,"order-confirmation"],[1,"confirmation-card"],[1,"confirmation-icon","success"],["xmlns","http://www.w3.org/2000/svg","width","60","height","60","viewBox","0 0 24 24","fill","none","stroke","#4CAF50","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M22 11.08V12a10 10 0 1 1-5.93-9.14"],["points","22 4 12 14.01 9 11.01"],[1,"confirmation-text"],[1,"confirmation-details"],[1,"confirmation-actions"],[1,"cart-content"],[1,"cart-items-section"],[1,"d-flex","align-items-center","justify-content-between","cart-items-header"],[1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-trash"],[1,"cart-items-list"],["class","cart-item-card",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cart-continue-shopping"],["routerLink","/products",1,"continue-shopping-link"],[1,"checkout-summary"],[1,"summary-card"],[1,"summary-title"],[1,"summary-row"],[1,"summary-total"],[1,"total-amount"],[1,"checkout-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","firstName"],["type","text","id","firstName","formControlName","firstName"],["class","error-message",4,"ngIf"],["for","lastName"],["type","text","id","lastName","formControlName","lastName"],["for","email"],["type","email","id","email","formControlName","email"],["for","phone"],["type","tel","id","phone","formControlName","phone"],["for","address"],["type","text","id","address","formControlName","address"],[1,"form-row"],["for","city"],["type","text","id","city","formControlName","city"],["for","notes"],["id","notes","formControlName","notes","rows","3"],[1,"payment-methods"],[1,"payment-options"],[1,"payment-option"],["type","radio","name","payment","value","cash",3,"ngModelChange","ngModel","ngModelOptions"],[1,"payment-content"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["cx","12","cy","12","r","10"],["d","M8 14s1.5 2 4 2 4-2 4-2"],["x1","9","y1","9","x2","9.01","y2","9"],["x1","15","y1","9","x2","15.01","y2","9"],[1,"payment-option","disabled"],["type","radio","name","payment","value","card","disabled",""],["x","1","y","4","width","22","height","16","rx","2","ry","2"],["x1","1","y1","10","x2","23","y2","10"],["type","submit",1,"checkout-btn",3,"disabled"],[4,"ngIf"],["class","loading-spinner",4,"ngIf"],[1,"secure-checkout"],["d","M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"],[1,"cart-item-card"],[1,"item-image-container"],[1,"item-image",3,"src","alt"],["aria-label","Remove item",1,"remove-item-btn",3,"click"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"item-details"],[1,"item-name"],[1,"item-brand"],[1,"item-price"],[1,"item-quantity-control"],[1,"quantity-btn","minus",3,"click","disabled"],[1,"quantity-value"],[1,"quantity-btn","plus",3,"click"],[1,"item-total-price"],[1,"error-message"],[1,"loading-spinner"]],template:function(t,r){t&1&&(S(0,"div",0)(1,"div",1)(2,"h1"),$(3,"Your Fragrance Collection"),A(),S(4,"div",2)(5,"div",3)(6,"span"),$(7,"1"),A(),$(8," Your Selection"),A(),S(9,"div",4)(10,"span"),$(11,"2"),A(),$(12," Checkout"),A(),S(13,"div",4)(14,"span"),$(15,"3"),A(),$(16," Confirmation"),A()()(),ft(17,aK,15,0,"div",5)(18,cK,15,1,"div",6)(19,vK,99,42,"div",7),A()),t&2&&(Y(17),ke("ngIf",r.cartItems.length===0&&!r.orderSubmitted),Y(),ke("ngIf",r.orderSubmitted),Y(),ke("ngIf",r.cartItems.length>0&&!r.orderSubmitted))},dependencies:[lo,Xa,dc,gL,Zy,rx,Xy,uL,yh,ix,ox,Ja],styles:['.cart-container[_ngcontent-%COMP%]{max-width:1200px;margin:6rem auto;padding:0 1.5rem;font-family:Poppins,sans-serif;color:#5d4037}.cart-header[_ngcontent-%COMP%]{text-align:center;margin:6rem auto}.cart-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.8rem;font-weight:600;margin-bottom:1.5rem;letter-spacing:-.5px;color:#5d4037;text-transform:uppercase;font-family:Playfair Display,serif}.cart-steps[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:3rem;position:relative}.cart-steps[_ngcontent-%COMP%]:before{content:"";position:absolute;top:16px;left:50%;right:50%;height:1px;background:#e0e0e0;z-index:1}.cart-steps[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:0 3rem;position:relative;z-index:2;color:#777}.cart-steps[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:36px;height:36px;border-radius:50%;background:#f9f5f2;color:#777;margin-bottom:.75rem;font-weight:600;border:2px solid #e0e0e0;transition:all .3s ease}.cart-steps[_ngcontent-%COMP%]   .step.active[_ngcontent-%COMP%]{color:#5d4037}.cart-steps[_ngcontent-%COMP%]   .step.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#d4af37;color:#fff;border-color:#d4af37;box-shadow:0 4px 8px #d4af3733}.cart-steps[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]:not(:last-child):after{content:"";position:absolute;top:18px;right:0;width:6rem;height:1px;background:#e0e0e0}.empty-cart[_ngcontent-%COMP%]{text-align:center;padding:5rem 0;max-width:600px;margin:0 auto}.empty-cart[_ngcontent-%COMP%]   .empty-cart-icon[_ngcontent-%COMP%]{margin-bottom:2rem;opacity:.8}.empty-cart[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:1rem;color:#5d4037;font-weight:500}.empty-cart[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:1.2rem;margin-bottom:2.5rem;line-height:1.6}.continue-shopping-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:1rem 2rem;background:#d4af37;color:#fff;text-decoration:none;border-radius:30px;font-weight:500;transition:all .3s ease;font-size:1.1rem;box-shadow:0 4px 12px #d4af3733}.continue-shopping-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-right:.75rem;transition:transform .3s ease}.continue-shopping-btn[_ngcontent-%COMP%]:hover{background:#daa520;transform:translateY(-2px);box-shadow:0 6px 16px #d4af374d}.continue-shopping-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:translate(-4px)}.order-confirmation[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:5rem 0;animation:_ngcontent-%COMP%_fadeIn .5s ease}.confirmation-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:4rem;text-align:center;max-width:700px;width:100%;box-shadow:0 15px 40px #00000014;border:1px solid rgba(212,175,55,.2)}.confirmation-card[_ngcontent-%COMP%]   .confirmation-icon[_ngcontent-%COMP%]{margin-bottom:2rem}.confirmation-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.2rem;margin-bottom:1.5rem;color:#5d4037;font-weight:600}.confirmation-card[_ngcontent-%COMP%]   .confirmation-text[_ngcontent-%COMP%]{font-size:1.2rem;color:#333;margin-bottom:1rem;line-height:1.6}.confirmation-card[_ngcontent-%COMP%]   .confirmation-details[_ngcontent-%COMP%]{color:#666;margin-bottom:3rem;line-height:1.6;font-size:1.1rem}.confirmation-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1.5rem;margin-top:2rem}.confirmation-actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:.9rem 2rem;border-radius:30px;font-weight:500;text-decoration:none;transition:all .3s ease;font-size:1.05rem}.confirmation-actions[_ngcontent-%COMP%]   .continue-shopping-btn[_ngcontent-%COMP%]{background:#fff;color:#5d4037;border:1px solid #5d4037}.confirmation-actions[_ngcontent-%COMP%]   .continue-shopping-btn[_ngcontent-%COMP%]:hover{background:#5d40370d;transform:translateY(-2px)}.cart-content[_ngcontent-%COMP%]{display:flex;gap:3rem;animation:_ngcontent-%COMP%_fadeIn .5s ease}@media (max-width: 992px){.cart-content[_ngcontent-%COMP%]{flex-direction:column}}.cart-items-section[_ngcontent-%COMP%]{flex:2}.cart-items-header[_ngcontent-%COMP%]{padding:1.5rem 0;border-bottom:1px solid rgba(93,64,55,.1);margin-bottom:1rem}.cart-items-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:600;color:#5d4037}.cart-items-list[_ngcontent-%COMP%]{margin-bottom:3rem}.cart-item-card[_ngcontent-%COMP%]{display:flex;align-items:center;padding:2rem 0;border-bottom:1px solid rgba(93,64,55,.05);transition:all .3s ease}.cart-item-card[_ngcontent-%COMP%]:hover{background:#d4af3708}.cart-item-card[_ngcontent-%COMP%]:last-child{border-bottom:none}.item-image-container[_ngcontent-%COMP%]{width:120px;height:120px;margin-right:2rem;position:relative;flex-shrink:0;border-radius:12px;overflow:hidden;background:#f9f5f2}.item-image-container[_ngcontent-%COMP%]   .item-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;mix-blend-mode:multiply;padding:1rem}.item-image-container[_ngcontent-%COMP%]   .remove-item-btn[_ngcontent-%COMP%]{position:absolute;top:-6px;right:-6px;width:28px;height:28px;background:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 3px 10px #0000001a;border:none;cursor:pointer;transition:all .2s ease;z-index:2}.item-image-container[_ngcontent-%COMP%]   .remove-item-btn[_ngcontent-%COMP%]:hover{background:#f2f2f2;transform:scale(1.1)}.item-details[_ngcontent-%COMP%]{flex:1;min-width:0}.item-details[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;margin-bottom:.5rem;color:#5d4037;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.item-details[_ngcontent-%COMP%]   .item-brand[_ngcontent-%COMP%]{color:#666;font-size:.95rem;margin-bottom:.75rem;text-transform:uppercase;letter-spacing:.5px}.item-details[_ngcontent-%COMP%]   .item-price[_ngcontent-%COMP%]{color:#777;font-size:.95rem;margin-bottom:.25rem}.item-quantity-control[_ngcontent-%COMP%]{display:flex;align-items:center;margin:0 2rem}.item-quantity-control[_ngcontent-%COMP%]   .quantity-btn[_ngcontent-%COMP%]{width:36px;height:36px;background:#fff;border:1px solid #e0e0e0;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;font-size:1.1rem;font-weight:500}.item-quantity-control[_ngcontent-%COMP%]   .quantity-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#f2f2f2;border-color:#c7c7c7}.item-quantity-control[_ngcontent-%COMP%]   .quantity-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.item-quantity-control[_ngcontent-%COMP%]   .quantity-btn.minus[_ngcontent-%COMP%]{color:#777}.item-quantity-control[_ngcontent-%COMP%]   .quantity-btn.plus[_ngcontent-%COMP%]{color:#d4af37;border-color:#d4af3780}.item-quantity-control[_ngcontent-%COMP%]   .quantity-value[_ngcontent-%COMP%]{margin:0 1rem;min-width:24px;text-align:center;font-weight:500;font-size:1.1rem}.item-total-price[_ngcontent-%COMP%]{min-width:100px;text-align:right;font-weight:600;color:#5d4037;font-size:1.1rem}.cart-continue-shopping[_ngcontent-%COMP%]{margin-top:3rem;text-align:center}.cart-continue-shopping[_ngcontent-%COMP%]   .continue-shopping-link[_ngcontent-%COMP%]{display:inline-flex;align-items:center;color:#d4af37;text-decoration:none;font-weight:500;font-size:1.1rem;transition:all .2s ease;padding:.5rem 1rem;border-radius:4px}.cart-continue-shopping[_ngcontent-%COMP%]   .continue-shopping-link[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-right:.75rem;transition:transform .2s ease}.cart-continue-shopping[_ngcontent-%COMP%]   .continue-shopping-link[_ngcontent-%COMP%]:hover{color:#daa520;background:#d4af371a}.cart-continue-shopping[_ngcontent-%COMP%]   .continue-shopping-link[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:translate(-5px)}.checkout-summary[_ngcontent-%COMP%]{flex:1;position:relative}.summary-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:2rem;box-shadow:0 10px 30px #0000000d;position:sticky;top:1rem;border:1px solid rgba(93,64,55,.1)}.summary-title[_ngcontent-%COMP%]{color:#5d4037;font-size:1.5rem;font-weight:600;margin-bottom:1.5rem;padding-bottom:1.5rem;border-bottom:1px solid rgba(93,64,55,.1)}.summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:1rem;color:#666;font-size:1rem}.summary-row[_ngcontent-%COMP%]   .free-shipping[_ngcontent-%COMP%]{color:#28a745;font-weight:500}.summary-total[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:2rem 0;padding-top:1.5rem;border-top:1px solid rgba(93,64,55,.1);font-weight:600;font-size:1.1rem;color:#5d4037}.summary-total[_ngcontent-%COMP%]   .total-amount[_ngcontent-%COMP%]{font-size:1.3rem;color:#8d6e63}.checkout-form[_ngcontent-%COMP%]{margin-top:2rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem;position:relative}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.75rem;color:#5d4037;font-size:.95rem;font-weight:500}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.9rem 1.2rem;border:1px solid #e0e0e0;border-radius:8px;font-family:inherit;font-size:1rem;transition:all .3s ease;background:#f9f5f2}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#d4af37;box-shadow:0 0 0 3px #d4af371a;background:#fff}.form-group[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea.invalid[_ngcontent-%COMP%]{border-color:#e74c3c}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.form-row[_ngcontent-%COMP%]{display:flex;gap:1.5rem}.form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1}.error-message[_ngcontent-%COMP%]{color:#e74c3c;font-size:.85rem;margin-top:.5rem;animation:_ngcontent-%COMP%_fadeIn .3s ease}.payment-methods[_ngcontent-%COMP%]{margin:2.5rem 0}.payment-methods[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#5d4037;font-size:1.1rem;margin-bottom:1rem;font-weight:600}.payment-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.payment-option[_ngcontent-%COMP%]{position:relative;cursor:pointer}.payment-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{position:absolute;opacity:0;width:0;height:0}.payment-option[_ngcontent-%COMP%]   .payment-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.5rem;border:1px solid #e0e0e0;border-radius:8px;transition:all .3s ease;background:#f9f5f2}.payment-option[_ngcontent-%COMP%]   .payment-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#333;font-weight:500}.payment-option[_ngcontent-%COMP%]   .payment-content[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#777;transition:all .3s ease}.payment-option[_ngcontent-%COMP%]:hover   .payment-content[_ngcontent-%COMP%]{border-color:#c7c7c7;background:#fff}.payment-option.selected[_ngcontent-%COMP%]   .payment-content[_ngcontent-%COMP%]{border-color:#d4af37;background:#d4af370d}.payment-option.selected[_ngcontent-%COMP%]   .payment-content[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#d4af37}.payment-option.disabled[_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed}.payment-option.disabled[_ngcontent-%COMP%]   .payment-content[_ngcontent-%COMP%]{background:#f1e8e1}.checkout-btn[_ngcontent-%COMP%]{width:100%;padding:1.2rem;background:#d4af37;color:#fff;border:none;border-radius:8px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:all .3s ease;margin-top:1rem;position:relative;overflow:hidden;box-shadow:0 4px 12px #d4af374d}.checkout-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#daa520;transform:translateY(-2px);box-shadow:0 6px 16px #d4af3766}.checkout-btn[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed;box-shadow:none}.loading-spinner[_ngcontent-%COMP%]{display:inline-block;width:20px;height:20px;border:3px solid rgba(255,255,255,.3);border-radius:50%;border-top-color:#fff;animation:_ngcontent-%COMP%_spin 1s ease-in-out infinite}.secure-checkout[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;color:#666;font-size:.9rem;margin:1.5rem 0;padding-top:1.5rem;border-top:1px solid rgba(93,64,55,.1)}.secure-checkout[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-right:.5rem;color:#28a745}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media (max-width: 768px){.cart-header[_ngcontent-%COMP%]{margin:2rem 0 3rem}.cart-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.2rem}.cart-steps[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]{padding:0 1.5rem;font-size:.9rem}.cart-steps[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:30px;height:30px}.cart-steps[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]:not(:last-child):after{width:3rem}.cart-item-card[_ngcontent-%COMP%]{flex-wrap:wrap;padding:1.5rem 0;position:relative}.item-image-container[_ngcontent-%COMP%]{width:80px;height:80px;margin-right:1rem}.item-details[_ngcontent-%COMP%]{flex:1 0 calc(100% - 100px);margin-bottom:1rem}.item-quantity-control[_ngcontent-%COMP%]{margin:.5rem 0 0;order:3;width:100%;justify-content:flex-start}.item-total-price[_ngcontent-%COMP%]{position:absolute;right:0;bottom:1.5rem}.confirmation-card[_ngcontent-%COMP%]{padding:2rem}.confirmation-actions[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}}@media (max-width: 576px){.cart-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem}.cart-steps[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]{padding:0 1rem}.cart-steps[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]:not(:last-child):after{width:2rem}.summary-card[_ngcontent-%COMP%], .confirmation-card[_ngcontent-%COMP%]{padding:1.5rem}.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}}']})};var Xo=class n{wishlistKey="wishlist";wishlistSubject=new It(0);wishlistCount$=this.wishlistSubject.asObservable();constructor(){this.updateWishlistCount()}updateWishlistCount(){let e=this.getWishList().length;this.wishlistSubject.next(e)}getWishList(){return JSON.parse(localStorage.getItem("wishlist")||"[]")}addToWishList(e){let t=this.getWishList();t.push({perfumeId:e.id,perfume:e}),localStorage.setItem(this.wishlistKey,JSON.stringify(t)),this.updateWishlistCount()}removeFromWishList(e){let t=this.getWishList().filter(r=>r.perfumeId!==e);localStorage.setItem(this.wishlistKey,JSON.stringify(t)),this.updateWishlistCount()}isInWishList(e){return this.getWishList().some(t=>t.perfumeId===e)}clearWishList(){localStorage.removeItem(this.wishlistKey),this.updateWishlistCount()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})};function _K(n,e){if(n&1){let t=tr();S(0,"div",27),le("click",function(){let i=Nt(t).$implicit,o=Ye();return Ot(o.selectImage(i))}),A()}if(n&2){let t=e.$implicit,r=Ye();ol("background-image","url("+t+")"),at("active",t===r.selectedImage)}}function wK(n,e){if(n&1&&(S(0,"span",28),ce(1,"i",29),$(2),A()),n&2){let t=e.$implicit;Y(2),dn(" ",t," ")}}var sv=class n{perfume;isOpen=!1;closed=new He;addToCart=new He;removeFromoCart=new He;addedToCart=!1;selectedImage="";selectedSize="";wishlistService=H(Xo);ngOnInit(){this.perfume&&this.perfume.images&&this.perfume.images.length>0&&(this.selectedImage=this.perfume.images[0]),this.perfume&&this.perfume.sizes&&this.perfume.sizes.length>0&&(this.selectedSize=this.perfume.sizes[0])}closeDetails(){this.closed.emit()}selectImage(e){this.selectedImage=e}prevImage(){let t=(this.perfume.images.indexOf(this.selectedImage)-1+this.perfume.images.length)%this.perfume.images.length;this.selectedImage=this.perfume.images[t]}nextImage(){let t=(this.perfume.images.indexOf(this.selectedImage)+1)%this.perfume.images.length;this.selectedImage=this.perfume.images[t]}togleCart(){this.addedToCart=!this.addedToCart,this.addedToCart?this.addToCart.emit(this.perfume):this.removeFromoCart.emit(this.perfume)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Rt({type:n,selectors:[["app-perfume-details"]],inputs:{perfume:"perfume",isOpen:"isOpen"},outputs:{closed:"closed",addToCart:"addToCart",removeFromoCart:"removeFromoCart"},decls:39,vars:16,consts:[[1,"perfume-details-overlay",3,"click"],[1,"perfume-details-container",3,"click"],["aria-label","Close details",1,"close-button",3,"click"],["viewBox","0 0 24 24"],["d","M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"],[1,"perfume-images"],[1,"main-image"],[1,"image-nav"],["aria-label","Previous image",1,"nav-button","prev",3,"click"],["d","M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"],["aria-label","Next image",1,"nav-button","next",3,"click"],["d","M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"],[1,"thumbnail-container"],["class","thumbnail",3,"backgroundImage","active","click",4,"ngFor","ngForOf"],[1,"perfume-info"],[1,"perfume-header"],[1,"perfume-name"],[1,"perfume-brand"],[1,"perfume-description"],[1,"perfume-specs"],[1,"features"],["class","feature-tag",4,"ngFor","ngForOf"],[1,"price-section"],[1,"price"],[1,"action-buttons"],[1,"add-to-cart",3,"click"],["d","M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"],[1,"thumbnail",3,"click"],[1,"feature-tag"],[1,"feature-icon"]],template:function(t,r){t&1&&(S(0,"div",0),le("click",function(){return r.closeDetails()}),S(1,"div",1),le("click",function(o){return o.stopPropagation()}),S(2,"button",2),le("click",function(){return r.closeDetails()}),ht(),S(3,"svg",3),ce(4,"path",4),A()(),bt(),S(5,"div",5)(6,"div",6)(7,"div",7)(8,"button",8),le("click",function(){return r.prevImage()}),ht(),S(9,"svg",3),ce(10,"path",9),A()(),bt(),S(11,"button",10),le("click",function(){return r.nextImage()}),ht(),S(12,"svg",3),ce(13,"path",11),A()()()(),bt(),S(14,"div",12),ft(15,_K,1,4,"div",13),A()(),S(16,"div",14)(17,"div",15)(18,"h1",16),$(19),nr(20,"uppercase"),A(),S(21,"p",17),$(22),A()(),S(23,"div",18)(24,"p"),$(25),A()(),ce(26,"hr"),S(27,"div",19)(28,"div",20),ft(29,wK,3,1,"span",21),A()(),S(30,"div",22)(31,"div",23),$(32),nr(33,"currency"),A()(),S(34,"div",24)(35,"button",25),le("click",function(){return r.togleCart()}),ht(),S(36,"svg",3),ce(37,"path",26),A(),$(38),A()()()()()),t&2&&(at("open",r.isOpen),Y(6),ol("background-image","url("+r.selectedImage+")"),Y(9),ke("ngForOf",r.perfume.images),Y(4),ct(kp(20,11,r.perfume.name)),Y(3),ct(r.perfume.category),Y(3),ct(r.perfume.details),Y(4),ke("ngForOf",r.perfume.features),Y(3),ct(sl(33,13,r.perfume.price,"EGP")),Y(6),dn(" ",r.addedToCart?"Remove from Cart":"Add to Cart"," "))},dependencies:[lo,Gp,Ja],styles:[".perfume-details-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#000c;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);z-index:1050;display:flex;justify-content:center;align-items:center;opacity:0;visibility:hidden;transition:all .4s cubic-bezier(.22,1,.36,1)}.perfume-details-overlay.open[_ngcontent-%COMP%]{opacity:1;visibility:visible}.perfume-details-container[_ngcontent-%COMP%]{position:relative;width:90%;max-width:1200px;max-height:90vh;background:linear-gradient(145deg,#fff,#f9f5f2);border-radius:20px;box-shadow:0 20px 50px #0000004d;display:grid;grid-template-columns:1fr 1fr;overflow:hidden;transform:translateY(20px);transition:transform .4s cubic-bezier(.22,1,.36,1)}.open[_ngcontent-%COMP%]   .perfume-details-container[_ngcontent-%COMP%]{transform:translateY(0)}@media (max-width: 992px){.perfume-details-container[_ngcontent-%COMP%]{grid-template-columns:1fr;max-height:90vh;overflow-y:auto}}.close-button[_ngcontent-%COMP%]{position:absolute;top:10px;right:5px;width:40px;height:40px;background:#0000001a;border:none;border-radius:50%;display:flex;justify-content:center;align-items:center;cursor:pointer;z-index:10;transition:all .3s ease}.close-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;fill:#333}.close-button[_ngcontent-%COMP%]:hover{background:#0003;transform:rotate(90deg)}.perfume-images[_ngcontent-%COMP%]{position:relative;padding:40px;display:flex;flex-direction:column;align-items:center;justify-content:center;background:linear-gradient(135deg,#f9f5f2,#d7ccc8)}.main-image[_ngcontent-%COMP%]{width:100%;height:400px;background-size:contain;background-position:center;background-repeat:no-repeat;position:relative;transition:background-image .5s ease-in-out;box-shadow:0 4px 20px #0000001a;border-radius:20px}@media (max-width: 768px){.main-image[_ngcontent-%COMP%]{height:300px}}.main-image[_ngcontent-%COMP%]:hover{box-shadow:0 8px 30px #0003;transform:scale(1.02)}.image-nav[_ngcontent-%COMP%]{position:absolute;top:50%;left:0;right:0;display:flex;justify-content:space-between;transform:translateY(-50%);padding:0 20px}.image-nav[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]{width:50px;height:50px;background:#fffc;border:none;border-radius:50%;display:flex;justify-content:center;align-items:center;cursor:pointer;box-shadow:0 4px 10px #0000001a;transition:all .3s ease}.image-nav[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;fill:#333}.image-nav[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]:hover{background:#fff;transform:scale(1.1)}.image-nav[_ngcontent-%COMP%]   .nav-button.prev[_ngcontent-%COMP%]{margin-left:-25px}.image-nav[_ngcontent-%COMP%]   .nav-button.next[_ngcontent-%COMP%]{margin-right:-25px}.thumbnail-container[_ngcontent-%COMP%]{display:flex;gap:15px;margin-top:30px;flex-wrap:wrap;justify-content:center;max-width:100%;overflow-x:auto;padding:10px 0}@media (max-width: 768px){.thumbnail-container[_ngcontent-%COMP%]{gap:10px;margin-top:20px}}.thumbnail[_ngcontent-%COMP%]{width:80px;height:80px;background-size:cover;background-position:center;border-radius:8px;cursor:pointer;border:2px solid transparent;transition:all .3s ease;box-shadow:0 4px 8px #0000001a}@media (max-width: 768px){.thumbnail[_ngcontent-%COMP%]{width:60px;height:60px}}.thumbnail[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 8px 15px #00000026}.thumbnail.active[_ngcontent-%COMP%]{border:2px solid #5d4037;transform:scale(1.05)}.perfume-info[_ngcontent-%COMP%]{padding:40px;overflow-y:auto;display:flex;flex-direction:column}@media (max-width: 992px){.perfume-info[_ngcontent-%COMP%]{padding:30px}}@media (max-width: 768px){.perfume-info[_ngcontent-%COMP%]{padding:20px}}.perfume-header[_ngcontent-%COMP%]{margin-bottom:30px;border-bottom:1px solid #e0e0e0;padding-bottom:20px;position:relative}.perfume-header[_ngcontent-%COMP%]   .perfume-name[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:700;color:#333;margin:0 0 5px;line-height:1.2}@media (max-width: 768px){.perfume-header[_ngcontent-%COMP%]   .perfume-name[_ngcontent-%COMP%]{font-size:1.8rem}}.perfume-header[_ngcontent-%COMP%]   .perfume-brand[_ngcontent-%COMP%]{position:absolute;background:#d4af37;color:#fff;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:1px;box-shadow:0 2px 8px #0000001a}.perfume-description[_ngcontent-%COMP%]{margin-bottom:30px;line-height:1.6;color:#666}.perfume-specs[_ngcontent-%COMP%]{margin-bottom:30px}.perfume-specs[_ngcontent-%COMP%]   .features[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin:16px 0}.perfume-specs[_ngcontent-%COMP%]   .features[_ngcontent-%COMP%]   .feature-tag[_ngcontent-%COMP%]{display:flex;align-items:center;background:#f9f5f2;padding:6px 12px;border-radius:20px;font-size:.75rem;color:#5d4037}.price-section[_ngcontent-%COMP%]{margin-bottom:30px}.price-section[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#333}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:15px;margin-top:auto}.action-buttons[_ngcontent-%COMP%]   .add-to-cart[_ngcontent-%COMP%]{flex:1;padding:15px;background:#5d4037;color:#fff;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:10px;transition:all .3s ease;box-shadow:0 4px 15px #5d40374d}.action-buttons[_ngcontent-%COMP%]   .add-to-cart[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;fill:#fff}.action-buttons[_ngcontent-%COMP%]   .add-to-cart[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px #5d403766}.action-buttons[_ngcontent-%COMP%]   .add-to-cart[_ngcontent-%COMP%]:active{transform:translateY(0)}"]})};function EK(n,e){n&1&&(S(0,"div",29),$(1,"New"),A())}function IK(n,e){if(n&1&&(S(0,"span",30),ce(1,"i",31),$(2),A()),n&2){let t=e.$implicit,r=Ye(2);Y(),X1(r.getFeatureIcon(t)),Y(),dn(" ",t," ")}}function bK(n,e){if(n&1){let t=tr();S(0,"div")(1,"button",32),le("click",function(){Nt(t);let i=Ye(2);return Ot(i.addToCart(i.perfume))}),ht(),S(2,"svg",14),ce(3,"path",33),A(),bt(),ce(4,"i",34),$(5," Add to Cart "),A()()}}function DK(n,e){if(n&1){let t=tr();S(0,"button",32),le("click",function(){Nt(t);let i=Ye(2);return Ot(i.removeFromCart(i.perfume))}),$(1,"Remove From the Cart"),A()}}function xK(n,e){if(n&1){let t=tr();S(0,"div",3)(1,"div",4),le("click",function(){Nt(t);let i=Ye();return Ot(i.openDetails(i.perfume))}),ce(2,"div",5),S(3,"span"),$(4,"open"),A(),ce(5,"img",6),ft(6,EK,2,0,"div",7),A(),S(7,"div",8)(8,"div",9)(9,"div",10)(10,"h3"),$(11),nr(12,"uppercase"),A(),S(13,"div",11)(14,"div",12),$(15),A(),S(16,"button",13),le("click",function(){Nt(t);let i=Ye();return Ot(i.toggleWishlist(i.perfume))}),ht(),S(17,"svg",14),ce(18,"path",15),A()()()()(),bt(),S(19,"p",16),le("click",function(){Nt(t);let i=Ye();return Ot(i.showFull=!i.showFull)}),$(20),A(),S(21,"div",17),ft(22,IK,3,3,"span",18),A(),S(23,"div",19)(24,"div",20),le("click",function(){Nt(t);let i=Ye();return Ot(i.toggleNotes())}),S(25,"h4"),$(26,"Fragrance Notes "),S(27,"i",21),$(28),A()(),S(29,"div",22)(30,"div",23)(31,"span",24),$(32,"Top:"),A(),S(33,"span",25),$(34),A()(),S(35,"div",23)(36,"span",24),$(37,"Middle:"),A(),S(38,"span",25),$(39),A()(),S(40,"div",23)(41,"span",24),$(42,"Base:"),A(),S(43,"span",25),$(44),A()()()()(),S(45,"div",26)(46,"span",27),$(47),nr(48,"number"),nr(49,"currency"),A(),ft(50,bK,6,0,"div",28)(51,DK,2,0,"ng-template",null,0,fA),A()()()}if(n&2){let t=uA(52),r=Ye();Y(5),ke("src",r.perfume.images[0],rl)("alt",r.perfume.name),Y(),ke("ngIf",r.perfume.isNew),Y(5),ct(kp(12,20,r.perfume.name)),Y(4),ct(r.perfume.category),Y(),at("filled",r.isInWishlist),Y(3),at("truncated",!r.showFull),Y(),dn(" ",r.perfume.description," "),Y(2),ke("ngForOf",r.perfume.features),Y(6),ct(r.showNotes?"\u25B2":"\u25BC"),Y(),at("expanded",r.showNotes),Y(5),ct(r.perfume.notes.top.join(", ")),Y(5),ct(r.perfume.notes.middle.join(", ")),Y(5),ct(r.perfume.notes.base.join(", ")),Y(3),ct(sl(49,25,sl(48,22,+r.perfume.price,"1.2-2"),"EGP ")),Y(3),ke("ngIf",!r.addedToCart)("ngIfElse",t)}}var av=class n{perfume;showDetails=!1;showNotes=!1;addedToCart=!1;isInWishlist=!1;showFull=!1;router=H($t);cartService=H(Yo);perfumeService=H(Ho);wishListService=H(Xo);ngOnInit(){this.perfume?.id&&(this.addedToCart=this.cartService.isInCart(this.perfume.id),this.isInWishlist=this.wishListService.isInWishList(this.perfume.id))}toggleNotes(){this.showNotes=!this.showNotes}addToCart(e){this.cartService.addToCart(e),this.addedToCart=!0}removeFromCart(e){e.id&&this.cartService.removeFromCart(e.id),this.addedToCart=!1}toggleWishlist(e){e.id&&(this.isInWishlist=!this.isInWishlist,this.isInWishlist?this.wishListService.addToWishList(e):this.wishListService.removeFromWishList(e.id))}navigateToCart(){this.router.navigate(["/cart"])}getFeatureIcon(e){return{Lemon:"icon-droplet",top:"icon-clock",Unisex:"icon-genderless",Organic:"icon-leaf",Vegan:"icon-seedling","Limited Edition":"icon-star"}[e]||"icon-circle"}openDetails(e){this.showDetails=!this.showDetails}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Rt({type:n,selectors:[["perfume-card"]],inputs:{perfume:"perfume"},decls:2,vars:3,consts:[["addedState",""],["class","perfume-card",4,"ngIf"],[3,"closed","addToCart","removeFromoCart","perfume","isOpen"],[1,"perfume-card"],[1,"perfume-image",3,"click"],[1,"image-overlay"],["loading","lazy",3,"src","alt"],["class","perfume-badge",4,"ngIf"],[1,"perfume-details"],[1,"header-section"],[1,"perfume-type"],[1,"category","d-flex","align-items-center","gap-2"],[1,"category-badge"],[1,"wishlist",3,"click"],["viewBox","0 0 24 24"],["d",`M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5
         2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81
         14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55
         11.54L12 21.35z`],[1,"description",3,"click"],[1,"features"],["class","feature-tag",4,"ngFor","ngForOf"],[1,"notes-accordion"],[1,"note-section",3,"click"],[1,"toggle-icon"],[1,"note-content"],[1,"note-group"],[1,"note-label"],[1,"note-values"],[1,"price-section"],[1,"price"],[4,"ngIf","ngIfElse"],[1,"perfume-badge"],[1,"feature-tag"],[1,"feature-icon"],["type","button",1,"add-to-cart",3,"click"],["d","M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"],[1,"cart-icon"]],template:function(t,r){t&1&&(ft(0,xK,53,28,"div",1),S(1,"app-perfume-details",2),le("closed",function(){return r.showDetails=!1})("addToCart",function(o){return r.addToCart(o)})("removeFromoCart",function(o){return r.removeFromCart(o)}),A()),t&2&&(ke("ngIf",r.perfume),Y(),ke("perfume",r.perfume)("isOpen",r.showDetails))},dependencies:[lo,Xa,sv,Gp,UA,Ja],styles:[".perfume-card[_ngcontent-%COMP%]{min-width:320px;background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 8px 24px #00000014;transition:all .3s cubic-bezier(.25,.8,.25,1);position:relative;margin:16px}.perfume-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 12px 32px #0000001f}.perfume-image[_ngcontent-%COMP%]{position:relative;max-height:350px;overflow:hidden}.perfume-image[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;top:36%;background-color:#0000007a;width:100%;text-align:center;color:#fff;padding:20px;font-size:1.2rem;font-weight:600;text-transform:uppercase;letter-spacing:1px;animation:_ngcontent-%COMP%_fadeIn .3s ease forwards}.perfume-image[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.1)}.perfume-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .6s ease}.perfume-image[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(to bottom,#0003 60%,#000000e6)}.perfume-image[_ngcontent-%COMP%]   .perfume-badge[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px;background:#d4af37;color:#fff;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:1px;box-shadow:0 2px 8px #0000001a}.perfume-details[_ngcontent-%COMP%]{padding:20px}.perfume-details[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]{margin-bottom:12px}.perfume-details[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.4rem;font-weight:600;color:#5d4037;letter-spacing:.5px}.perfume-details[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .perfume-type[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:6px}.perfume-details[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .perfume-type[_ngcontent-%COMP%]   .category-badge[_ngcontent-%COMP%]{background:#5d4037;color:#fff;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:1px;box-shadow:0 2px 8px #0000001a}.perfume-details[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .perfume-type[_ngcontent-%COMP%]   .wishlist[_ngcontent-%COMP%]{width:50px;height:35px;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center}.perfume-details[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .perfume-type[_ngcontent-%COMP%]   .wishlist[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;fill:none;stroke:#5d4037;stroke-width:2;transition:fill .3s,stroke .3s}.perfume-details[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .perfume-type[_ngcontent-%COMP%]   .wishlist.filled[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#e74c3c;stroke:#e74c3c}.perfume-details[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .perfume-type[_ngcontent-%COMP%]   .wishlist[_ngcontent-%COMP%]:hover{background:#f2f2f2}.perfume-details[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#333;font-size:.9rem;line-height:1.5;margin:12px 0;cursor:pointer;transition:all .3s ease}.perfume-details[_ngcontent-%COMP%]   .truncated[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.perfume-details[_ngcontent-%COMP%]   .features[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin:16px 0}.perfume-details[_ngcontent-%COMP%]   .features[_ngcontent-%COMP%]   .feature-tag[_ngcontent-%COMP%]{display:flex;align-items:center;background:#f9f5f2;padding:6px 12px;border-radius:20px;font-size:.75rem;color:#5d4037}.perfume-details[_ngcontent-%COMP%]   .features[_ngcontent-%COMP%]   .feature-tag[_ngcontent-%COMP%]   .feature-icon[_ngcontent-%COMP%]{margin-right:6px;font-size:.8rem}.perfume-details[_ngcontent-%COMP%]   .notes-accordion[_ngcontent-%COMP%]{margin:16px 0;border-top:1px solid #e0e0e0;padding-top:12px}.perfume-details[_ngcontent-%COMP%]   .notes-accordion[_ngcontent-%COMP%]   .note-section[_ngcontent-%COMP%]{cursor:pointer}.perfume-details[_ngcontent-%COMP%]   .notes-accordion[_ngcontent-%COMP%]   .note-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin:0 0 8px;font-size:.9rem;color:#5d4037}.perfume-details[_ngcontent-%COMP%]   .notes-accordion[_ngcontent-%COMP%]   .note-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%]{font-size:.8rem;transition:transform .3s ease}.perfume-details[_ngcontent-%COMP%]   .notes-accordion[_ngcontent-%COMP%]   .note-section[_ngcontent-%COMP%]   .note-content[_ngcontent-%COMP%]{max-height:0;overflow:hidden;transition:max-height .3s ease}.perfume-details[_ngcontent-%COMP%]   .notes-accordion[_ngcontent-%COMP%]   .note-section[_ngcontent-%COMP%]   .note-content.expanded[_ngcontent-%COMP%]{max-height:200px}.perfume-details[_ngcontent-%COMP%]   .notes-accordion[_ngcontent-%COMP%]   .note-section[_ngcontent-%COMP%]   .note-content[_ngcontent-%COMP%]   .note-group[_ngcontent-%COMP%]{margin-bottom:8px}.perfume-details[_ngcontent-%COMP%]   .notes-accordion[_ngcontent-%COMP%]   .note-section[_ngcontent-%COMP%]   .note-content[_ngcontent-%COMP%]   .note-group[_ngcontent-%COMP%]   .note-label[_ngcontent-%COMP%]{font-weight:500;font-size:.8rem;color:#5d4037;margin-right:6px}.perfume-details[_ngcontent-%COMP%]   .notes-accordion[_ngcontent-%COMP%]   .note-section[_ngcontent-%COMP%]   .note-content[_ngcontent-%COMP%]   .note-group[_ngcontent-%COMP%]   .note-values[_ngcontent-%COMP%]{font-size:.8rem;color:#777}.perfume-details[_ngcontent-%COMP%]   .price-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:.5rem}.perfume-details[_ngcontent-%COMP%]   .price-section[_ngcontent-%COMP%]   .add-to-cart[_ngcontent-%COMP%]{background:#5d4037;color:#fff;border:none;padding:.5rem 1rem;border-radius:4px;cursor:pointer;transition:background .3s}.perfume-details[_ngcontent-%COMP%]   .price-section[_ngcontent-%COMP%]   .add-to-cart[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;fill:#fff}.perfume-details[_ngcontent-%COMP%]   .price-section[_ngcontent-%COMP%]   .add-to-cart[_ngcontent-%COMP%]:hover{background:#3d2a24}.perfume-details[_ngcontent-%COMP%]   .price-section[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;color:#d4af37}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.note-content.expanded[_ngcontent-%COMP%]   .note-group[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease forwards;opacity:0}.note-content.expanded[_ngcontent-%COMP%]   .note-group[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.note-content.expanded[_ngcontent-%COMP%]   .note-group[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.note-content.expanded[_ngcontent-%COMP%]   .note-group[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}"]})};var SK=(n,e)=>e.id;function MK(n,e){if(n&1&&(S(0,"option",37),$(1),A()),n&2){let t=e.$implicit;ke("value",t),Y(),ct(t)}}function AK(n,e){if(n&1&&(S(0,"option",37),$(1),A()),n&2){let t=e.$implicit;ke("value",t),Y(),ct(t)}}function PK(n,e){n&1&&(S(0,"div",38),ce(1,"div",39),S(2,"p",40),$(3,"Loading fragrances..."),A()())}function RK(n,e){if(n&1&&(S(0,"div",41),ce(1,"perfume-card",42),A()),n&2){let t=e.$implicit;Y(),ke("perfume",t)}}function NK(n,e){if(n&1&&(S(0,"div",34),iA(1,RK,2,1,"div",41,SK),A()),n&2){let t=Ye();Y(),oA(t.displayedProducts)}}function OK(n,e){if(n&1){let t=tr();S(0,"div",35)(1,"div",43),$(2,"\u{1F615}"),A(),S(3,"h3",44),$(4,"No fragrances match your filters"),A(),S(5,"p",45),$(6,"Try adjusting your search criteria"),A(),S(7,"button",46),le("click",function(i){Nt(t);let o=Ye();return Ot(o.resetFilters(i))}),$(8," Reset All Filters "),A()()}}function kK(n,e){if(n&1){let t=tr();S(0,"nav",36)(1,"ul",47)(2,"li",48)(3,"a",49),le("click",function(){Nt(t);let i=Ye();return Ot(i.previousPage())}),$(4,"Previous"),A()(),S(5,"li",50)(6,"span",51),$(7),A()(),S(8,"li",48)(9,"a",49),le("click",function(){Nt(t);let i=Ye();return Ot(i.nextPage())}),$(10,"Next"),A()()()()}if(n&2){let t=Ye();Y(2),at("disabled",t.currentPage===1),Y(5),pw("Page ",t.currentPage," of ",t.totalPages,""),Y(),at("disabled",t.currentPage===t.totalPages)}}var cv=class n{constructor(e,t){this.route=e;this.viewportScroller=t}allProducts=[];displayedProducts=[];filteredProducts=[];isLoading=!0;showFilter=!1;categories=[];countries=[];selectedCategory="ALL";selectedCountry="ALL";sortOption="featured";currentPage=1;productsPerPage=3;totalPages=1;pageNumbers=[];destroy$=new ze;perfumeService=H(Ho);ngOnInit(){this.initializeComponent(),this.viewportScroller.scrollToPosition([0,0])}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initializeComponent(){this.setupRouteListener(),this.loadProducts()}setupRouteListener(){this.route.queryParamMap.pipe(Qn(this.destroy$)).subscribe(e=>{e.get("type")?this.selectedCategory=e.get("type")||"ALL":e.get("country")&&(this.selectedCountry=e.get("country")||"ALL"),this.allProducts.length&&this.applyFilters()})}loadProducts(){this.isLoading=!0,setTimeout(()=>{this.perfumeService.getAllPerfumes().pipe(Qn(this.destroy$)).subscribe({next:e=>{this.handleProductsLoad(e)},error:()=>{this.isLoading=!1}})},1e3)}handleProductsLoad(e){this.allProducts=e,this.categories=this.perfumeService.getUniqueCategories(e),this.countries=this.perfumeService.getUniqueCountries(e),this.applyFilters(),this.isLoading=!1}applyFilters(){let e=this.perfumeService.filterAndSortPerfumes(this.allProducts,this.selectedCategory,this.selectedCountry,this.sortOption);this.filteredProducts=e,this.updatePagination(),this.updateDisplayedProducts()}updatePagination(){this.totalPages=Math.ceil(this.filteredProducts.length/this.productsPerPage),this.pageNumbers=Array.from({length:this.totalPages},(e,t)=>t+1),this.currentPage>this.totalPages&&this.totalPages>0&&(this.currentPage=this.totalPages)}updateDisplayedProducts(){this.displayedProducts=this.perfumeService.paginateProducts(this.filteredProducts,this.currentPage,this.productsPerPage)}goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e,this.updateDisplayedProducts())}nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.updateDisplayedProducts())}previousPage(){this.currentPage>1&&(this.currentPage--,this.updateDisplayedProducts())}onSearchChange(){this.applyFilters()}toggleShowFilter(){this.showFilter=!this.showFilter}resetFilters(e){e.stopPropagation(),this.selectedCategory="ALL",this.selectedCountry="ALL",this.sortOption="featured",this.applyFilters()}scrollToContent(){window.scrollTo({top:0,behavior:"smooth"})}trackById(e,t){return t.id||e.toString()}static \u0275fac=function(t){return new(t||n)(re(Ti),re(ec))};static \u0275cmp=Rt({type:n,selectors:[["app-products"]],decls:59,vars:13,consts:[[1,"products-page"],[1,"products-hero","position-relative","d-flex","align-items-center","mb-5","bg-dark"],[1,"position-absolute","top-0","start-0","w-100","h-100","bg-gradient-bottom-dark"],[1,"container","text-center","text-white","z-1"],[1,"display-4","mb-3","text-uppercase","fw-light"],[1,"fs-4"],[1,"container","mb-4"],[1,"card","shadow-sm","border-0","overflow-hidden"],[1,"card-header","bg-white","d-flex","justify-content-between","align-items-center","filter-header",3,"click"],[1,"mb-0","d-flex","align-items-center","gap-2"],["width","24","height","24","viewBox","0 0 24 24",1,"toggle-icon"],["d","M12 5v14","stroke","#7f8c8d","stroke-width","2",1,"vertical"],["d","M5 12h14","stroke","#7f8c8d","stroke-width","2",1,"horizontal"],[1,"btn","btn-sm","btn-outline-danger","d-flex","align-items-center","gap-1",3,"click"],["width","16","height","16","viewBox","0 0 24 24"],["d","M19 7l-.867 12.142A2 2 0 0 1 16.138 21H7.862a2 2 0 0 1-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v3m4.5-3.5l-5 5m5-5l-5-5"],[1,"card-body"],[1,"row","g-3"],[1,"col-md-4"],[1,"form-label","d-flex","align-items-center","gap-2"],["width","18","height","18","viewBox","0 0 24 24",1,"filter-icon"],["d","M4 6h16M4 12h16M4 18h16","stroke","#9b59b6","stroke-width","2","stroke-linecap","round"],[1,"form-select",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["d","M12 2a8 8 0 0 0-8 8c0 7 8 12 8 12s8-5 8-12a8 8 0 0 0-8-8z","stroke","#9b59b6","stroke-width","2"],["cx","12","cy","10","r","3","stroke","#9b59b6","stroke-width","2"],["d","M3 6h18M7 12h10M5 18h14","stroke","#9b59b6","stroke-width","2","stroke-linecap","round"],["value","featured"],["value","price-low"],["value","price-high"],["value","name-asc"],["value","name-desc"],[1,"container","mb-5"],["class","text-center py-5",4,"ngIf"],[1,"row"],[1,"card","shadow-sm","text-center","py-5"],[1,"d-flex","justify-content-center","mt-5"],[3,"value"],[1,"text-center","py-5"],[1,"spinner-border","text-primary","mb-3","spinner-lg"],[1,"fs-5","text-muted"],[1,"col-md-6","col-lg-5","col-xl-4"],[3,"perfume"],[1,"empty-state-icon","fs-1","mb-3"],[1,"mb-2"],[1,"text-muted","mb-4"],[1,"btn","btn-outline-danger","b","mx-auto",3,"click"],[1,"pagination"],[1,"page-item"],["type","button",1,"page-link","primaryColor",3,"click"],[1,"page-item","disabled"],[1,"page-link"]],template:function(t,r){t&1&&(S(0,"div",0)(1,"section",1),ce(2,"div",2),S(3,"div",3)(4,"h1",4),$(5,"Our Fragrance Collection"),A(),S(6,"p",5),$(7,"Discover exquisite scents from around the world"),A()()(),S(8,"div",6)(9,"div",7)(10,"div",8),le("click",function(){return r.toggleShowFilter()}),S(11,"h2",9),ht(),S(12,"svg",10),ce(13,"path",11)(14,"path",12),A(),bt(),S(15,"span"),$(16,"Filter & Sort"),A()(),S(17,"button",13),le("click",function(o){return r.resetFilters(o)}),ht(),S(18,"svg",14),ce(19,"path",15),A(),$(20," Reset All "),A()(),bt(),S(21,"div",16)(22,"div",17)(23,"div",18)(24,"label",19),ht(),S(25,"svg",20),ce(26,"path",21),A(),$(27," Fragrance Family "),A(),bt(),S(28,"select",22),bs("ngModelChange",function(o){return Ka(r.selectedCategory,o)||(r.selectedCategory=o),o}),le("change",function(){return r.applyFilters()}),ft(29,MK,2,2,"option",23),A()(),S(30,"div",18)(31,"label",19),ht(),S(32,"svg",20),ce(33,"path",24)(34,"circle",25),A(),$(35," Origin Country "),A(),bt(),S(36,"select",22),bs("ngModelChange",function(o){return Ka(r.selectedCountry,o)||(r.selectedCountry=o),o}),le("change",function(){return r.applyFilters()}),ft(37,AK,2,2,"option",23),A()(),S(38,"div",18)(39,"label",19),ht(),S(40,"svg",20),ce(41,"path",26),A(),$(42," Sort Options "),A(),bt(),S(43,"select",22),bs("ngModelChange",function(o){return Ka(r.sortOption,o)||(r.sortOption=o),o}),le("change",function(){return r.applyFilters()}),S(44,"option",27),$(45,"Featured"),A(),S(46,"option",28),$(47,"Price: Low to High"),A(),S(48,"option",29),$(49,"Price: High to Low"),A(),S(50,"option",30),$(51,"Name: A-Z"),A(),S(52,"option",31),$(53,"Name: Z-A"),A()()()()()()(),S(54,"main",32),ft(55,PK,4,0,"div",33)(56,NK,3,0,"div",34)(57,OK,9,0,"div",35)(58,kK,11,6,"nav",36),A()()),t&2&&(Y(12),at("rotated",r.showFilter),Y(9),at("d-none",!r.showFilter),Y(7),Is("ngModel",r.selectedCategory),Y(),ke("ngForOf",r.categories),Y(7),Is("ngModel",r.selectedCountry),Y(),ke("ngForOf",r.countries),Y(6),Is("ngModel",r.sortOption),Y(12),ke("ngIf",r.isLoading),Y(),Pp(!r.isLoading&&r.displayedProducts.length>0?56:-1),Y(),Pp(!r.isLoading&&r.filteredProducts.length===0?57:-1),Y(),Pp(!r.isLoading&&r.filteredProducts.length>0?58:-1))},dependencies:[lo,Xa,_L,CL,ev,Xy,yh,av],styles:['.products-page[_ngcontent-%COMP%]   .products-hero[_ngcontent-%COMP%]{height:400px;background:linear-gradient(#0006,#0006),url("./media/hero1-EFDDK7XE.jpg") center/cover}.products-page[_ngcontent-%COMP%]   .products-hero[_ngcontent-%COMP%]   .bg-gradient-bottom-dark[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#0000004d 60%,#000000e6)}.products-page[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]{cursor:pointer}.products-page[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]:hover   .toggle-icon[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{stroke:#d4af37}.products-page[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%]{transition:transform .3s ease}.products-page[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{transition:stroke .2s ease}.products-page[_ngcontent-%COMP%]   .toggle-icon.rotated[_ngcontent-%COMP%]{transform:rotate(90deg)}.products-page[_ngcontent-%COMP%]   .filter-icon[_ngcontent-%COMP%]   path[_ngcontent-%COMP%], .products-page[_ngcontent-%COMP%]   .filter-icon[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:#d4af37}.products-page[_ngcontent-%COMP%]   .spinner-lg[_ngcontent-%COMP%]{width:3rem;height:3rem}.products-page[_ngcontent-%COMP%]   [stopPropagation][_ngcontent-%COMP%]{pointer-events:none}.products-page[_ngcontent-%COMP%]   [stopPropagation][_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{pointer-events:auto}.primaryColor[_ngcontent-%COMP%]{color:#5d4037}.spinner-border[_ngcontent-%COMP%]{color:#5d4037;border-color:#5d4037}']})};var FK=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:Uy},{path:"products",component:cv},{path:"cart",component:ov},{path:"**",redirectTo:""}],uv=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=vt({type:n});static \u0275inj=yt({imports:[AC.forRoot(FK),AC]})};var lv=class n{cartItemCount=0;wishlistItemCount=0;router=H($t);cartService=H(Yo);wishlistService=H(Xo);destroy$=new ze;ngOnInit(){this.getCartItemCount(),this.getWishlistItemCount()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getCartItemCount(){this.cartService.cart$.pipe(Qn(this.destroy$)).subscribe(e=>{this.cartItemCount=this.cartService.getCartItemCount()})}getWishlistItemCount(){this.wishlistService.wishlistCount$.pipe(Qn(this.destroy$)).subscribe(e=>{this.wishlistItemCount=e})}collapseNavbar(){let e=document.getElementById("navbarNav");e?.classList.contains("show")&&new window.bootstrap.Collapse(e).hide()}openCart(){this.router.navigate(["/cart"])}exploreCollectionFor(e){this.router.navigate(["/products"],{queryParams:{type:e}})}openWishList(){this.router.navigate(["/wishlist"])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Rt({type:n,selectors:[["custom-navbar"]],decls:29,vars:1,consts:[[1,"navbar","navbar-expand-sm","bg-transparent","shadow-lg","custom-navbar","fixed-top"],[1,"container-fluid"],["src","assets/images/logo.jpg","alt","RePublic",1,"logo"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon","custom-navbar-toggler-icon",3,"click"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","mb-2","mb-lg-0"],[1,"nav-item"],["routerLink","/home","routerLinkActive","active",1,"nav-link","active",3,"click"],["routerLink","/products","routerLinkActive","active",1,"nav-link",3,"click"],[1,"dropdown","me-3"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","dropdown-toggle"],["aria-labelledby","dropdownMenuButton1",1,"dropdown-menu"],[3,"click"],["routerLink","/home","routerLinkActive","active",1,"dropdown-item",3,"click"],[1,"d-flex","align-items-center"],[1,"cart-icon","ms-2","m-2"],[1,"btn","position-relative",3,"click"],[1,"bi","bi-cart3","fs-4","text-light"],[1,"position-absolute","top-0","start-100","translate-middle","badge","rounded-pill","bg-danger"]],template:function(t,r){t&1&&(S(0,"nav",0)(1,"div",1),ce(2,"img",2),S(3,"button",3)(4,"span",4),le("click",function(){return r.collapseNavbar()}),A()(),S(5,"div",5)(6,"ul",6)(7,"li",7)(8,"a",8),le("click",function(){return r.collapseNavbar()}),$(9,"Home"),A()(),S(10,"li",7)(11,"a",9),le("click",function(){return r.collapseNavbar()}),$(12,"Products"),A()()(),S(13,"div",10)(14,"button",11),$(15," Categories "),A(),S(16,"ul",12)(17,"li",13),le("click",function(){return r.exploreCollectionFor("men")}),S(18,"a",14),le("click",function(){return r.collapseNavbar()}),$(19,"For Him"),A()(),S(20,"li",13),le("click",function(){return r.exploreCollectionFor("woman")}),S(21,"a",14),le("click",function(){return r.collapseNavbar()}),$(22,"For Her"),A()()()()(),S(23,"div",15)(24,"div",16)(25,"button",17),le("click",function(){return r.openCart()}),ce(26,"i",18),S(27,"span",19),$(28),A()()()()()()),t&2&&(Y(28),dn(" ",r.cartItemCount," "))},dependencies:[dc,rR],styles:[".custom-navbar[_ngcontent-%COMP%]{background-color:#1a1a1a!important;-webkit-backdrop-filter:blur(10px)!important;backdrop-filter:blur(10px)!important;box-shadow:0 4px 12px #0000001a!important}.custom-navbar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;margin:0 20px;border-radius:50%;transition:all .3s ease-in-out}.custom-navbar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.custom-navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 10px;font-size:16px;font-weight:500;text-transform:uppercase;transition:all .3s ease-in-out}.custom-navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.custom-navbar[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{color:#fff!important;transform:scale(1.1)}.custom-navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .custom-navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff!important;text-decoration:none}.custom-navbar[_ngcontent-%COMP%]   .navbar-toggler[_ngcontent-%COMP%]{border:none!important}.custom-navbar[_ngcontent-%COMP%]   .navbar-toggler[_ngcontent-%COMP%]:focus{outline:none!important;box-shadow:none!important}.custom-navbar[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000!important;background-color:#fff!important}.dropdown-toggle[_ngcontent-%COMP%]{color:#f9f5f2!important}.dropdown-toggle[_ngcontent-%COMP%]   .dropdown-item.active[_ngcontent-%COMP%]{background-color:#000!important;color:#fff!important}.custom-navbar-toggler-icon[_ngcontent-%COMP%]{border:1px solid #777!important}.cart-icon[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{color:#f9f5f2;padding:.3rem .6rem}.cart-icon[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .3s ease}.cart-icon[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.2)}.cart-icon[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.6rem}@media (max-width: 768px){.custom-navbar[_ngcontent-%COMP%]   #navbarNav[_ngcontent-%COMP%]{padding:20px;border-radius:15px}.logo[_ngcontent-%COMP%]{display:none}}"]})};var dv=class n{currentYear=new Date().getFullYear();router=H($t);exploreCollectionFor(e){this.router.navigate(["/products"],{queryParams:{type:e}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Rt({type:n,selectors:[["custom-footer"]],decls:29,vars:1,consts:[[1,"site-footer","position-relative"],[1,"footer-container","my-0","mx-auto"],[1,"footer-main","d-flex","justify-content-around","align-items-stretch"],[1,"footer-brand"],[1,"footer-logo","ms-2"],[1,"footer-tagline","ms-2"],[1,"social-links","d-flex","gap-4","ms-1","mb-3"],["href","https://www.facebook.com/share/19D416MMYu/","target","_blank","aria-label","Facebook"],[1,"bi","bi-facebook"],["href","https://www.instagram.com/republic_fragrances_?igsh=YXVid3B2MHN4N3k1","target","_blank","aria-label","Instagram"],[1,"bi","bi-instagram"],["href","https://www.tiktok.com/@republic.fragranc?_t=ZS-8u55Lb146it&_r=1","target","_blank","aria-label","Instagram"],[1,"bi","bi-tiktok"],[1,"footer-links"],[1,"links-column"],[1,"links-title"],[1,"list-unstyled","p-0"],[3,"click"],["type","button"],[1,"footer-bottom","text-center","d-flex","align-items-center","flex-column"],[1,"copyright"]],template:function(t,r){t&1&&(S(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),$(5,"REpUBLIC"),A(),S(6,"p",5),$(7,"Discover fragrances from every corner of the globe"),A(),S(8,"div",6)(9,"a",7),ce(10,"i",8),A(),S(11,"a",9),ce(12,"i",10),A(),S(13,"a",11),ce(14,"i",12),A()()(),S(15,"div",13)(16,"div",14)(17,"h4",15),$(18,"Shop"),A(),S(19,"ul",16)(20,"li",17),le("click",function(){return r.exploreCollectionFor("men")}),S(21,"a",18),$(22,"For Men"),A()(),S(23,"li",17),le("click",function(){return r.exploreCollectionFor("woman")}),S(24,"a",18),$(25,"For Women"),A()()()()()(),S(26,"div",19)(27,"div",20),$(28),A()()()()),t&2&&(Y(28),dn(" \xA9 ",r.currentYear," REpUBLIC. All rights reserved. "))},styles:['.site-footer[_ngcontent-%COMP%]{background:#1a1a1a;color:#777;padding:60px 0 0}.site-footer[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:2px;background:linear-gradient(90deg,#d4af37,#8b6914,#d4af37)}.site-footer[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]{max-width:1200px}.site-footer[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   .footer-brand[_ngcontent-%COMP%]   .footer-logo[_ngcontent-%COMP%]{color:#fff;font-size:1.8rem;font-weight:300;margin-bottom:15px;letter-spacing:1px}.site-footer[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   .footer-brand[_ngcontent-%COMP%]   .footer-logo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#d4af37;font-weight:600}.site-footer[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   .footer-brand[_ngcontent-%COMP%]   .footer-tagline[_ngcontent-%COMP%]{font-size:.95rem;line-height:1.6;margin-bottom:25px;color:#777}.site-footer[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   .footer-brand[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;width:36px;height:36px;border-radius:50%;border:1px solid #333;display:flex;align-items:center;justify-content:center;transition:all .3s ease}.site-footer[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   .footer-brand[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff;background:#d4af37;border-color:#d4af37;transform:translateY(-3px)}.site-footer[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   .footer-links[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:30px}.site-footer[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   .footer-links[_ngcontent-%COMP%]   .links-column[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;font-size:1.1rem;font-weight:600;margin-bottom:20px;letter-spacing:.5px;position:relative;padding-bottom:10px}.site-footer[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   .footer-links[_ngcontent-%COMP%]   .links-column[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;width:40px;height:2px;background:#d4af37}.site-footer[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   .footer-links[_ngcontent-%COMP%]   .links-column[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:12px}.site-footer[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   .footer-links[_ngcontent-%COMP%]   .links-column[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#777;text-decoration:none;font-size:.9rem;transition:color .3s ease}.site-footer[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   .footer-links[_ngcontent-%COMP%]   .links-column[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#d4af37;padding-left:5px}.site-footer[_ngcontent-%COMP%]   .footer-bottom[_ngcontent-%COMP%]{border-top:1px solid #333;padding:25px 0}.site-footer[_ngcontent-%COMP%]   .footer-bottom[_ngcontent-%COMP%]   .copyright[_ngcontent-%COMP%]{font-size:.8rem;color:#777}@media (max-width: 768px){.footer-main[_ngcontent-%COMP%]{gap:30px}.footer-links[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}']})};var hv=class n{title="perfume-brand";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Rt({type:n,selectors:[["app-root"]],decls:4,vars:0,template:function(t,r){t&1&&(ce(0,"custom-navbar"),S(1,"div"),ce(2,"router-outlet"),A(),ce(3,"custom-footer"))},dependencies:[bC,lv,dv]})};var fv=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=vt({type:n,bootstrap:[hv]});static \u0275inj=yt({imports:[fP,uv,iP,bL,DL,JO.initializeApp(Zo.firebaseConfig),LV]})};hP().bootstrapModule(fv,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
