import{A as Ki,B as Pn,a as Y,b as me,c as Dv,d as Mv,e as F,f as $D,g as zD,h as xf,i as qD,j as HD,k as GD,l as Tv,m as WD,n as Su,o as Sv,p as Df,q as KD,r as QD,s as Av,t as ht,u as ns,v as Sr,w as Mf,x as Au,y as YD,z as ZD}from"./chunk-YGBL3SD4.js";function XD(n,e){return Object.is(n,e)}var Bt=null,Tf=!1,Sf=1,ri=Symbol("SIGNAL");function Ue(n){let e=Bt;return Bt=n,e}function JD(){return Bt}var Ou={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Nv(n){if(Tf)throw new Error("");if(Bt===null)return;Bt.consumerOnSignalRead(n);let e=Bt.nextProducerIndex++;if(Nf(Bt),e<Bt.producerNode.length&&Bt.producerNode[e]!==n&&Pu(Bt)){let t=Bt.producerNode[e];Of(t,Bt.producerIndexOfThis[e])}Bt.producerNode[e]!==n&&(Bt.producerNode[e]=n,Bt.producerIndexOfThis[e]=Pu(Bt)?rM(n,Bt,e):0),Bt.producerLastReadVersion[e]=n.version}function PL(){Sf++}function eM(n){if(!(Pu(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Sf)){if(!n.producerMustRecompute(n)&&!kv(n)){n.dirty=!1,n.lastCleanEpoch=Sf;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Sf}}function tM(n){if(n.liveConsumerNode===void 0)return;let e=Tf;Tf=!0;try{for(let t of n.liveConsumerNode)t.dirty||OL(t)}finally{Tf=e}}function nM(){return Bt?.consumerAllowSignalWrites!==!1}function OL(n){n.dirty=!0,tM(n),n.consumerMarkedDirty?.(n)}function Pf(n){return n&&(n.nextProducerIndex=0),Ue(n)}function Rv(n,e){if(Ue(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Pu(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Of(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function kv(n){Nf(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(eM(t),r!==t.version))return!0}return!1}function Fv(n){if(Nf(n),Pu(n))for(let e=0;e<n.producerNode.length;e++)Of(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function rM(n,e,t){if(iM(n),n.liveConsumerNode.length===0&&oM(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=rM(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Of(n,e){if(iM(n),n.liveConsumerNode.length===1&&oM(n))for(let r=0;r<n.producerNode.length;r++)Of(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Nf(i),i.producerIndexOfThis[r]=e}}function Pu(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Nf(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function iM(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function oM(n){return n.producerNode!==void 0}function sM(n){let e=Object.create(NL);e.computation=n;let t=()=>{if(eM(e),Nv(e),e.value===Af)throw e.error;return e.value};return t[ri]=e,t}var Pv=Symbol("UNSET"),Ov=Symbol("COMPUTING"),Af=Symbol("ERRORED"),NL=me(Y({},Ou),{value:Pv,dirty:!0,error:null,equal:XD,producerMustRecompute(n){return n.value===Pv||n.value===Ov},producerRecomputeValue(n){if(n.value===Ov)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Ov;let t=Pf(n),r;try{r=n.computation()}catch(i){r=Af,n.error=i}finally{Rv(n,t)}if(e!==Pv&&e!==Af&&r!==Af&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function RL(){throw new Error}var aM=RL;function cM(){aM()}function uM(n){aM=n}var kL=null;function lM(n){let e=Object.create(fM);e.value=n;let t=()=>(Nv(e),e.value);return t[ri]=e,t}function Vv(n,e){nM()||cM(),n.equal(n.value,e)||(n.value=e,FL(n))}function dM(n,e){nM()||cM(),Vv(n,e(n.value))}var fM=me(Y({},Ou),{equal:XD,value:void 0});function FL(n){n.version++,PL(),tM(n),kL?.()}function ye(n){return typeof n=="function"}function ha(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Rf=ha(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function rs(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var vt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ye(r))try{r()}catch(o){e=o instanceof Rf?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{hM(o)}catch(s){e=e??[],s instanceof Rf?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Rf(e)}}add(e){var t;if(e&&e!==this)if(this.closed)hM(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&rs(t,e)}remove(e){let{_finalizers:t}=this;t&&rs(t,e),e instanceof n&&e._removeParent(this)}};vt.EMPTY=(()=>{let n=new vt;return n.closed=!0,n})();var Lv=vt.EMPTY;function kf(n){return n instanceof vt||n&&"closed"in n&&ye(n.remove)&&ye(n.add)&&ye(n.unsubscribe)}function hM(n){ye(n)?n():n.unsubscribe()}var dr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var pa={setTimeout(n,e,...t){let{delegate:r}=pa;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=pa;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ff(n){pa.setTimeout(()=>{let{onUnhandledError:e}=dr;if(e)e(n);else throw n})}function Nu(){}var pM=jv("C",void 0,void 0);function mM(n){return jv("E",void 0,n)}function gM(n){return jv("N",n,void 0)}function jv(n,e,t){return{kind:n,value:e,error:t}}var is=null;function ma(n){if(dr.useDeprecatedSynchronousErrorHandling){let e=!is;if(e&&(is={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=is;if(is=null,t)throw r}}else n()}function yM(n){dr.useDeprecatedSynchronousErrorHandling&&is&&(is.errorThrown=!0,is.error=n)}var os=class extends vt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,kf(e)&&e.add(this)):this.destination=jL}static create(e,t,r){return new ii(e,t,r)}next(e){this.isStopped?Uv(gM(e),this):this._next(e)}error(e){this.isStopped?Uv(mM(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Uv(pM,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},VL=Function.prototype.bind;function Bv(n,e){return VL.call(n,e)}var $v=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Vf(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Vf(r)}else Vf(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Vf(t)}}},ii=class extends os{constructor(e,t,r){super();let i;if(ye(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&dr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Bv(e.next,o),error:e.error&&Bv(e.error,o),complete:e.complete&&Bv(e.complete,o)}):i=e}this.destination=new $v(i)}};function Vf(n){dr.useDeprecatedSynchronousErrorHandling?yM(n):Ff(n)}function LL(n){throw n}function Uv(n,e){let{onStoppedNotification:t}=dr;t&&pa.setTimeout(()=>t(n,e))}var jL={closed:!0,next:Nu,error:LL,complete:Nu};var ga=typeof Symbol=="function"&&Symbol.observable||"@@observable";function _n(n){return n}function zv(...n){return qv(n)}function qv(n){return n.length===0?_n:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Ie=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=UL(t)?t:new ii(t,r,i);return ma(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=vM(r),new r((i,o)=>{let s=new ii({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[ga](){return this}pipe(...t){return qv(t)(this)}toPromise(t){return t=vM(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function vM(n){var e;return(e=n??dr.Promise)!==null&&e!==void 0?e:Promise}function BL(n){return n&&ye(n.next)&&ye(n.error)&&ye(n.complete)}function UL(n){return n&&n instanceof os||BL(n)&&kf(n)}function Hv(n){return ye(n?.lift)}function xe(n){return e=>{if(Hv(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function De(n,e,t,r,i){return new Gv(n,e,t,r,i)}var Gv=class extends os{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ya(){return xe((n,e)=>{let t=null;n._refCount++;let r=De(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var va=class extends Ie{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Hv(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new vt;let t=this.getSubject();e.add(this.source.subscribe(De(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=vt.EMPTY)}return e}refCount(){return ya()(this)}};var _M=ha(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var tt=(()=>{class n extends Ie{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Lf(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new _M}next(t){ma(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){ma(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ma(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Lv:(this.currentObservers=null,o.push(t),new vt(()=>{this.currentObservers=null,rs(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Ie;return t.source=this,t}}return n.create=(e,t)=>new Lf(e,t),n})(),Lf=class extends tt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Lv}};var Ut=class extends tt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ru={now(){return(Ru.delegate||Date).now()},delegate:void 0};var jf=class extends tt{constructor(e=1/0,t=1/0,r=Ru){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var Bf=class extends vt{constructor(e,t){super()}schedule(e,t=0){return this}};var ku={setInterval(n,e,...t){let{delegate:r}=ku;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=ku;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var _a=class extends Bf{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return ku.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&ku.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,rs(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var wa=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};wa.now=Ru.now;var Ca=class extends wa{constructor(e,t=wa.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Fu=new Ca(_a);var Uf=class extends _a{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var $f=class extends Ca{};var Wv=new $f(Uf);var wn=new Ie(n=>n.complete());function wM(n){return n&&ye(n.schedule)}function Kv(n){return n[n.length-1]}function zf(n){return ye(Kv(n))?n.pop():void 0}function Ar(n){return wM(Kv(n))?n.pop():void 0}function CM(n,e){return typeof Kv(n)=="number"?n.pop():e}var qf=n=>n&&typeof n.length=="number"&&typeof n!="function";function Hf(n){return ye(n?.then)}function Gf(n){return ye(n[ga])}function Wf(n){return Symbol.asyncIterator&&ye(n?.[Symbol.asyncIterator])}function Kf(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function $L(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Qf=$L();function Yf(n){return ye(n?.[Qf])}function Zf(n){return qD(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield xf(t.read());if(i)return yield xf(void 0);yield yield xf(r)}}finally{t.releaseLock()}})}function Xf(n){return ye(n?.getReader)}function st(n){if(n instanceof Ie)return n;if(n!=null){if(Gf(n))return zL(n);if(qf(n))return qL(n);if(Hf(n))return HL(n);if(Wf(n))return bM(n);if(Yf(n))return GL(n);if(Xf(n))return WL(n)}throw Kf(n)}function zL(n){return new Ie(e=>{let t=n[ga]();if(ye(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function qL(n){return new Ie(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function HL(n){return new Ie(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ff)})}function GL(n){return new Ie(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function bM(n){return new Ie(e=>{KL(n,e).catch(t=>e.error(t))})}function WL(n){return bM(Zf(n))}function KL(n,e){var t,r,i,o;return zD(this,void 0,void 0,function*(){try{for(t=HD(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function On(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Qn(n,e=0){return xe((t,r)=>{t.subscribe(De(r,i=>On(r,n,()=>r.next(i),e),()=>On(r,n,()=>r.complete(),e),i=>On(r,n,()=>r.error(i),e)))})}function fr(n,e=0){return xe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function EM(n,e){return st(n).pipe(fr(e),Qn(e))}function IM(n,e){return st(n).pipe(fr(e),Qn(e))}function xM(n,e){return new Ie(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function DM(n,e){return new Ie(t=>{let r;return On(t,e,()=>{r=n[Qf](),On(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ye(r?.return)&&r.return()})}function Jf(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ie(t=>{On(t,e,()=>{let r=n[Symbol.asyncIterator]();On(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function MM(n,e){return Jf(Zf(n),e)}function TM(n,e){if(n!=null){if(Gf(n))return EM(n,e);if(qf(n))return xM(n,e);if(Hf(n))return IM(n,e);if(Wf(n))return Jf(n,e);if(Yf(n))return DM(n,e);if(Xf(n))return MM(n,e)}throw Kf(n)}function Me(n,e){return e?TM(n,e):st(n)}function ue(...n){let e=Ar(n);return Me(n,e)}function ba(n,e){let t=ye(n)?n:()=>n,r=i=>i.error(t());return new Ie(e?i=>e.schedule(r,0,i):r)}function Qv(n){return!!n&&(n instanceof Ie||ye(n.lift)&&ye(n.subscribe))}var oi=ha(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ie(n,e){return xe((t,r)=>{let i=0;t.subscribe(De(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:QL}=Array;function YL(n,e){return QL(e)?n(...e):n(e)}function eh(n){return ie(e=>YL(n,e))}var{isArray:ZL}=Array,{getPrototypeOf:XL,prototype:JL,keys:ej}=Object;function th(n){if(n.length===1){let e=n[0];if(ZL(e))return{args:e,keys:null};if(tj(e)){let t=ej(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function tj(n){return n&&typeof n=="object"&&XL(n)===JL}function nh(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Vu(...n){let e=Ar(n),t=zf(n),{args:r,keys:i}=th(n);if(r.length===0)return Me([],e);let o=new Ie(nj(r,e,i?s=>nh(i,s):_n));return t?o.pipe(eh(t)):o}function nj(n,e,t=_n){return r=>{SM(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)SM(e,()=>{let l=Me(n[c],e),d=!1;l.subscribe(De(r,f=>{o[c]=f,d||(d=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function SM(n,e,t){n?On(t,n,e):e()}function AM(n,e,t,r,i,o,s,a){let c=[],l=0,d=0,f=!1,p=()=>{f&&!c.length&&!l&&e.complete()},g=b=>l<r?v(b):c.push(b),v=b=>{o&&e.next(b),l++;let _=!1;st(t(b,d++)).subscribe(De(e,S=>{i?.(S),o?g(S):e.next(S)},()=>{_=!0},void 0,()=>{if(_)try{for(l--;c.length&&l<r;){let S=c.shift();s?On(e,s,()=>v(S)):v(S)}p()}catch(S){e.error(S)}}))};return n.subscribe(De(e,g,()=>{f=!0,p()})),()=>{a?.()}}function At(n,e,t=1/0){return ye(e)?At((r,i)=>ie((o,s)=>e(r,o,i,s))(st(n(r,i))),t):(typeof e=="number"&&(t=e),xe((r,i)=>AM(r,i,n,t)))}function Pr(n=1/0){return At(_n,n)}function PM(){return Pr(1)}function Ea(...n){return PM()(Me(n,Ar(n)))}function rh(n){return new Ie(e=>{st(n()).subscribe(e)})}function Yv(...n){let e=zf(n),{args:t,keys:r}=th(n),i=new Ie(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let d=0;d<s;d++){let f=!1;st(t[d]).subscribe(De(o,p=>{f||(f=!0,l--),a[d]=p},()=>c--,void 0,()=>{(!c||!f)&&(l||o.next(r?nh(r,a):a),o.complete())}))}});return e?i.pipe(eh(e)):i}function Zv(...n){let e=Ar(n),t=CM(n,1/0),r=n;return r.length?r.length===1?st(r[0]):Pr(t)(Me(r,e)):wn}function at(n,e){return xe((t,r)=>{let i=0;t.subscribe(De(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Qi(n){return xe((e,t)=>{let r=null,i=!1,o;r=e.subscribe(De(t,void 0,void 0,s=>{o=st(n(s,Qi(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function OM(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(De(s,d=>{let f=l++;c=a?n(c,d,f):(a=!0,d),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function si(n,e){return ye(e)?At(n,e,1):At(n,1)}function Yi(n){return xe((e,t)=>{let r=!1;e.subscribe(De(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ai(n){return n<=0?()=>wn:xe((e,t)=>{let r=0;e.subscribe(De(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Xv(n){return ie(()=>n)}function Jv(n,e=_n){return n=n??rj,xe((t,r)=>{let i,o=!0;t.subscribe(De(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function rj(n,e){return n===e}function ih(n=ij){return xe((e,t)=>{let r=!1;e.subscribe(De(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function ij(){return new oi}function Zi(n){return xe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Yn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?at((i,o)=>n(i,o,r)):_n,ai(1),t?Yi(e):ih(()=>new oi))}function Ia(n){return n<=0?()=>wn:xe((e,t)=>{let r=[];e.subscribe(De(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function e0(n,e){let t=arguments.length>=2;return r=>r.pipe(n?at((i,o)=>n(i,o,r)):_n,Ia(1),t?Yi(e):ih(()=>new oi))}function ss(){return xe((n,e)=>{let t,r=!1;n.subscribe(De(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function ci(n,e){return xe(OM(n,e,arguments.length>=2,!0))}function NM(n={}){let{connector:e=()=>new tt,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,l=0,d=!1,f=!1,p=()=>{a?.unsubscribe(),a=void 0},g=()=>{p(),s=c=void 0,d=f=!1},v=()=>{let b=s;g(),b?.unsubscribe()};return xe((b,_)=>{l++,!f&&!d&&p();let S=c=c??e();_.add(()=>{l--,l===0&&!f&&!d&&(a=t0(v,i))}),S.subscribe(_),!s&&l>0&&(s=new ii({next:k=>S.next(k),error:k=>{f=!0,p(),a=t0(g,t,k),S.error(k)},complete:()=>{d=!0,p(),a=t0(g,r),S.complete()}}),st(b).subscribe(s))})(o)}}function t0(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new ii({next:()=>{r.unsubscribe(),n()}});return st(e(...t)).subscribe(r)}function oh(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,NM({connector:()=>new jf(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function ui(...n){let e=Ar(n);return xe((t,r)=>{(e?Ea(n,t,e):Ea(n,t)).subscribe(r)})}function nt(n,e){return xe((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(De(r,c=>{i?.unsubscribe();let l=0,d=o++;st(n(c,d)).subscribe(i=De(r,f=>r.next(e?e(c,f,d,l++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function sh(n,e){return ye(e)?nt(()=>n,e):nt(()=>n)}function as(n){return xe((e,t)=>{st(n).subscribe(De(t,()=>t.complete(),Nu)),!t.closed&&e.subscribe(t)})}function Pt(n,e,t){let r=ye(n)||e||t?{next:n,error:e,complete:t}:n;return r?xe((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(De(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):_n}var vT="https://g.co/ng/security#xss",ae=class extends Error{constructor(e,t){super(Kh(e,t)),this.code=e}};function Kh(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Wu(n){return{toString:n}.toString()}var ah="__parameters__";function oj(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function _T(n,e,t){return Wu(()=>{let r=oj(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,d){let f=c.hasOwnProperty(ah)?c[ah]:Object.defineProperty(c,ah,{value:[]})[ah];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Cn=globalThis;function Ye(n){for(let e in n)if(n[e]===Ye)return e;throw Error("Could not find renamed property on target object.")}function sj(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function En(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(En).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function g0(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var aj=Ye({__forward_ref__:Ye});function Lr(n){return n.__forward_ref__=Lr,n.toString=function(){return En(this())},n}function bn(n){return wT(n)?n():n}function wT(n){return typeof n=="function"&&n.hasOwnProperty(aj)&&n.__forward_ref__===Lr}function ne(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function _t(n){return{providers:n.providers||[],imports:n.imports||[]}}function Qh(n){return RM(n,bT)||RM(n,ET)}function CT(n){return Qh(n)!==null}function RM(n,e){return n.hasOwnProperty(e)?n[e]:null}function cj(n){let e=n&&(n[bT]||n[ET]);return e||null}function kM(n){return n&&(n.hasOwnProperty(FM)||n.hasOwnProperty(uj))?n[FM]:null}var bT=Ye({\u0275prov:Ye}),FM=Ye({\u0275inj:Ye}),ET=Ye({ngInjectableDef:Ye}),uj=Ye({ngInjectorDef:Ye}),X=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=ne({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function IT(n){return n&&!!n.\u0275providers}var lj=Ye({\u0275cmp:Ye}),dj=Ye({\u0275dir:Ye}),fj=Ye({\u0275pipe:Ye}),hj=Ye({\u0275mod:Ye}),vh=Ye({\u0275fac:Ye}),ju=Ye({__NG_ELEMENT_ID__:Ye}),VM=Ye({__NG_ENV_ID__:Ye});function Pa(n){return typeof n=="string"?n:n==null?"":String(n)}function pj(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Pa(n)}function mj(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ae(-200,n)}function d_(n,e){throw new ae(-201,!1)}var Te=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Te||{}),y0;function xT(){return y0}function Nn(n){let e=y0;return y0=n,e}function DT(n,e,t){let r=Qh(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&Te.Optional)return null;if(e!==void 0)return e;d_(n,"Injector")}var gj={},Uu=gj,v0="__NG_DI_FLAG__",_h="ngTempTokenPath",yj="ngTokenPath",vj=/\n/gm,_j="\u0275",LM="__source",Sa;function wj(){return Sa}function Xi(n){let e=Sa;return Sa=n,e}function Cj(n,e=Te.Default){if(Sa===void 0)throw new ae(-203,!1);return Sa===null?DT(n,void 0,e):Sa.get(n,e&Te.Optional?null:void 0,e)}function K(n,e=Te.Default){return(xT()||Cj)(bn(n),e)}function z(n,e=Te.Default){return K(n,Yh(e))}function Yh(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function _0(n){let e=[];for(let t=0;t<n.length;t++){let r=bn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ae(900,!1);let i,o=Te.Default;for(let s=0;s<r.length;s++){let a=r[s],c=bj(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(K(i,o))}else e.push(K(r))}return e}function MT(n,e){return n[v0]=e,n.prototype[v0]=e,n}function bj(n){return n[v0]}function Ej(n,e,t,r){let i=n[_h];throw e[LM]&&i.unshift(e[LM]),n.message=Ij(`
`+n.message,i,t,r),n[yj]=i,n[_h]=null,n}function Ij(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==_j?n.slice(2):n;let i=En(e);if(Array.isArray(e))i=e.map(En).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):En(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(vj,`
  `)}`}var $a=MT(_T("Optional"),8);var f_=MT(_T("SkipSelf"),4);function ls(n,e){let t=n.hasOwnProperty(vh);return t?n[vh]:null}function xj(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function Dj(n){return n.flat(Number.POSITIVE_INFINITY)}function h_(n,e){n.forEach(t=>Array.isArray(t)?h_(t,e):e(t))}function TT(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function wh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Mj(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function p_(n,e,t){let r=Ku(n,e);return r>=0?n[r|1]=t:(r=~r,Mj(n,r,e,t)),r}function n0(n,e){let t=Ku(n,e);if(t>=0)return n[t|1]}function Ku(n,e){return Tj(n,e,1)}function Tj(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Oa={},Rn=[],Na=new X(""),ST=new X("",-1),AT=new X(""),Ch=class{get(e,t=Uu){if(t===Uu){let r=new Error(`NullInjectorError: No provider for ${En(e)}!`);throw r.name="NullInjectorError",r}return t}},PT=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(PT||{}),Rr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Rr||{}),to=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(to||{});function Sj(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function w0(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];Aj(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function OT(n){return n===3||n===4||n===6}function Aj(n){return n.charCodeAt(0)===64}function $u(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?jM(n,t,i,null,e[++r]):jM(n,t,i,null,null))}}return n}function jM(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var NT="ng-template";function Pj(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Sj(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(m_(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function m_(n){return n.type===4&&n.value!==NT}function Oj(n,e,t){let r=n.type===4&&!t?NT:n.value;return e===r}function Nj(n,e,t){let r=4,i=n.attrs,o=i!==null?Fj(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!hr(r)&&!hr(c))return!1;if(s&&hr(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!Oj(n,c,t)||c===""&&e.length===1){if(hr(r))return!1;s=!0}}else if(r&8){if(i===null||!Pj(n,i,c,t)){if(hr(r))return!1;s=!0}}else{let l=e[++a],d=Rj(c,i,m_(n),t);if(d===-1){if(hr(r))return!1;s=!0;continue}if(l!==""){let f;if(d>o?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(hr(r))return!1;s=!0}}}}return hr(r)||s}function hr(n){return(n&1)===0}function Rj(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Vj(e,n)}function kj(n,e,t=!1){for(let r=0;r<e.length;r++)if(Nj(n,e[r],t))return!0;return!1}function Fj(n){for(let e=0;e<n.length;e++){let t=n[e];if(OT(t))return e}return n.length}function Vj(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function BM(n,e){return n?":not("+e.trim()+")":e}function Lj(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!hr(s)&&(e+=BM(o,i),i=""),r=s,o=o||!hr(r);t++}return i!==""&&(e+=BM(o,i)),e}function jj(n){return n.map(Lj).join(",")}function Bj(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!hr(i))break;i=o}r++}return{attrs:e,classes:t}}function Nt(n){return Wu(()=>{let e=LT(n),t=me(Y({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===PT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Rr.Emulated,styles:n.styles||Rn,_:null,schemas:n.schemas||null,tView:null,id:""});jT(t);let r=n.dependencies;return t.directiveDefs=$M(r,!1),t.pipeDefs=$M(r,!0),t.id=zj(t),t})}function Uj(n){return no(n)||RT(n)}function $j(n){return n!==null}function wt(n){return Wu(()=>({type:n.type,bootstrap:n.bootstrap||Rn,declarations:n.declarations||Rn,imports:n.imports||Rn,exports:n.exports||Rn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function UM(n,e){if(n==null)return Oa;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=to.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==to.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Ct(n){return Wu(()=>{let e=LT(n);return jT(e),e})}function g_(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function no(n){return n[lj]||null}function RT(n){return n[dj]||null}function kT(n){return n[fj]||null}function FT(n){let e=no(n)||RT(n)||kT(n);return e!==null?e.standalone:!1}function VT(n,e){let t=n[hj]||null;if(!t&&e===!0)throw new Error(`Type ${En(n)} does not have '\u0275mod' property.`);return t}function LT(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Oa,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Rn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:UM(n.inputs,e),outputs:UM(n.outputs),debugInfo:null}}function jT(n){n.features?.forEach(e=>e(n))}function $M(n,e){if(!n)return null;let t=e?kT:Uj;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter($j)}function zj(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Zh(n){return{\u0275providers:n}}function qj(...n){return{\u0275providers:BT(!0,n),\u0275fromNgModule:!0}}function BT(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return h_(e,s=>{let a=s;C0(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&UT(i,o),t}function UT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];y_(i,o=>{e(o,r)})}}function C0(n,e,t,r){if(n=bn(n),!n)return!1;let i=null,o=kM(n),s=!o&&no(n);if(!o&&!s){let c=n.ngModule;if(o=kM(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)C0(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{h_(o.imports,d=>{C0(d,e,t,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&UT(l,e)}if(!a){let l=ls(i)||(()=>new i);e({provide:i,useFactory:l,deps:Rn},i),e({provide:AT,useValue:i,multi:!0},i),e({provide:Na,useValue:()=>K(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;y_(c,d=>{e(d,l)})}}else return!1;return i!==n&&n.providers!==void 0}function y_(n,e){for(let t of n)IT(t)&&(t=t.\u0275providers),Array.isArray(t)?y_(t,e):e(t)}var Hj=Ye({provide:String,useValue:Ye});function $T(n){return n!==null&&typeof n=="object"&&Hj in n}function Gj(n){return!!(n&&n.useExisting)}function Wj(n){return!!(n&&n.useFactory)}function Ra(n){return typeof n=="function"}function Kj(n){return!!n.useClass}var Xh=new X(""),hh={},Qj={},r0;function v_(){return r0===void 0&&(r0=new Ch),r0}var In=class{},zu=class extends In{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,E0(e,s=>this.processProvider(s)),this.records.set(ST,xa(void 0,this)),i.has("environment")&&this.records.set(In,xa(void 0,this));let o=this.records.get(Xh);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(AT,Rn,Te.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ue(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ue(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Xi(this),r=Nn(void 0),i;try{return e()}finally{Xi(t),Nn(r)}}get(e,t=Uu,r=Te.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(VM))return e[VM](this);r=Yh(r);let i,o=Xi(this),s=Nn(void 0);try{if(!(r&Te.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=e4(e)&&Qh(e);l&&this.injectableDefInScope(l)?c=xa(b0(e),hh):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&Te.Self?v_():this.parent;return t=r&Te.Optional&&t===Uu?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[_h]=a[_h]||[]).unshift(En(e)),o)throw a;return Ej(a,e,"R3InjectorError",this.source)}else throw a}finally{Nn(s),Xi(o)}}resolveInjectorInitializers(){let e=Ue(null),t=Xi(this),r=Nn(void 0),i;try{let o=this.get(Na,Rn,Te.Self);for(let s of o)s()}finally{Xi(t),Nn(r),Ue(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(En(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ae(205,!1)}processProvider(e){e=bn(e);let t=Ra(e)?e:bn(e&&e.provide),r=Zj(e);if(!Ra(e)&&e.multi===!0){let i=this.records.get(t);i||(i=xa(void 0,hh,!0),i.factory=()=>_0(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Ue(null);try{return t.value===hh&&(t.value=Qj,t.value=t.factory()),typeof t.value=="object"&&t.value&&Jj(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ue(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=bn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function b0(n){let e=Qh(n),t=e!==null?e.factory:ls(n);if(t!==null)return t;if(n instanceof X)throw new ae(204,!1);if(n instanceof Function)return Yj(n);throw new ae(204,!1)}function Yj(n){if(n.length>0)throw new ae(204,!1);let t=cj(n);return t!==null?()=>t.factory(n):()=>new n}function Zj(n){if($T(n))return xa(void 0,n.useValue);{let e=zT(n);return xa(e,hh)}}function zT(n,e,t){let r;if(Ra(n)){let i=bn(n);return ls(i)||b0(i)}else if($T(n))r=()=>bn(n.useValue);else if(Wj(n))r=()=>n.useFactory(..._0(n.deps||[]));else if(Gj(n))r=()=>K(bn(n.useExisting));else{let i=bn(n&&(n.useClass||n.provide));if(Xj(n))r=()=>new i(..._0(n.deps));else return ls(i)||b0(i)}return r}function xa(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Xj(n){return!!n.deps}function Jj(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function e4(n){return typeof n=="function"||typeof n=="object"&&n instanceof X}function E0(n,e){for(let t of n)Array.isArray(t)?E0(t,e):t&&IT(t)?E0(t.\u0275providers,e):e(t)}function Xn(n,e){n instanceof zu&&n.assertNotDestroyed();let t,r=Xi(n),i=Nn(void 0);try{return e()}finally{Xi(r),Nn(i)}}function qT(){return xT()!==void 0||wj()!=null}function t4(n){if(!qT())throw new ae(-203,!1)}function n4(n){let e=Cn.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function r4(n){return typeof n=="function"}var mi=0,be=1,ge=2,cn=3,mr=4,yr=5,bh=6,Eh=7,gr=8,ka=9,kr=10,Ot=11,qu=12,zM=13,za=14,Fr=15,ds=16,Da=17,li=18,Jh=19,HT=20,Ji=21,i0=22,Zn=23,Un=25,GT=1;var fs=7,Ih=8,Fa=9,Bn=10,xh=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(xh||{});function eo(n){return Array.isArray(n)&&typeof n[GT]=="object"}function gi(n){return Array.isArray(n)&&n[GT]===!0}function WT(n){return(n.flags&4)!==0}function ep(n){return n.componentOffset>-1}function __(n){return(n.flags&1)===1}function ro(n){return!!n.template}function I0(n){return(n[ge]&512)!==0}var x0=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function KT(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Jn(){return QT}function QT(n){return n.type.prototype.ngOnChanges&&(n.setInput=o4),i4}Jn.ngInherit=!0;function i4(){let n=ZT(this),e=n?.current;if(e){let t=n.previous;if(t===Oa)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function o4(n,e,t,r,i){let o=this.declaredInputs[r],s=ZT(n)||s4(n,{previous:Oa,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new x0(l&&l.currentValue,t,c===Oa),KT(n,e,i,t)}var YT="__ngSimpleChanges__";function ZT(n){return n[YT]||null}function s4(n,e){return n[YT]=e}var qM=null;var Or=function(n,e,t){qM?.(n,e,t)},XT="svg",a4="math";function Vr(n){for(;Array.isArray(n);)n=n[mi];return n}function JT(n,e){return Vr(e[n])}function er(n,e){return Vr(e[n.index])}function eS(n,e){return n.data[e]}function tp(n,e){return n[e]}function oo(n,e){let t=e[n];return eo(t)?t:t[mi]}function c4(n){return(n[ge]&4)===4}function w_(n){return(n[ge]&128)===128}function u4(n){return gi(n[cn])}function Dh(n,e){return e==null?null:n[e]}function tS(n){n[Da]=0}function nS(n){n[ge]&1024||(n[ge]|=1024,w_(n)&&rp(n))}function l4(n,e){for(;n>0;)e=e[za],n--;return e}function np(n){return!!(n[ge]&9216||n[Zn]?.dirty)}function D0(n){n[kr].changeDetectionScheduler?.notify(8),n[ge]&64&&(n[ge]|=1024),np(n)&&rp(n)}function rp(n){n[kr].changeDetectionScheduler?.notify(0);let e=hs(n);for(;e!==null&&!(e[ge]&8192||(e[ge]|=8192,!w_(e)));)e=hs(e)}function rS(n,e){if((n[ge]&256)===256)throw new ae(911,!1);n[Ji]===null&&(n[Ji]=[]),n[Ji].push(e)}function d4(n,e){if(n[Ji]===null)return;let t=n[Ji].indexOf(e);t!==-1&&n[Ji].splice(t,1)}function hs(n){let e=n[cn];return gi(e)?e[cn]:e}var we={lFrame:fS(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var iS=!1;function f4(){return we.lFrame.elementDepthCount}function h4(){we.lFrame.elementDepthCount++}function p4(){we.lFrame.elementDepthCount--}function oS(){return we.bindingsEnabled}function m4(){return we.skipHydrationRootTNode!==null}function g4(n){return we.skipHydrationRootTNode===n}function y4(){we.skipHydrationRootTNode=null}function Ne(){return we.lFrame.lView}function Ht(){return we.lFrame.tView}function Ze(n){return we.lFrame.contextLView=n,n[gr]}function Xe(n){return we.lFrame.contextLView=null,n}function un(){let n=sS();for(;n!==null&&n.type===64;)n=n.parent;return n}function sS(){return we.lFrame.currentTNode}function v4(){let n=we.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Qu(n,e){let t=we.lFrame;t.currentTNode=n,t.isParent=e}function aS(){return we.lFrame.isParent}function _4(){we.lFrame.isParent=!1}function w4(){return we.lFrame.contextLView}function cS(){return iS}function HM(n){iS=n}function ip(){let n=we.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function C4(){return we.lFrame.bindingIndex}function b4(n){return we.lFrame.bindingIndex=n}function op(){return we.lFrame.bindingIndex++}function C_(n){let e=we.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function E4(){return we.lFrame.inI18n}function I4(n,e){let t=we.lFrame;t.bindingIndex=t.bindingRootIndex=n,M0(e)}function x4(){return we.lFrame.currentDirectiveIndex}function M0(n){we.lFrame.currentDirectiveIndex=n}function D4(n){let e=we.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function uS(){return we.lFrame.currentQueryIndex}function b_(n){we.lFrame.currentQueryIndex=n}function M4(n){let e=n[be];return e.type===2?e.declTNode:e.type===1?n[yr]:null}function lS(n,e,t){if(t&Te.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&Te.Host);)if(i=M4(o),i===null||(o=o[za],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=we.lFrame=dS();return r.currentTNode=e,r.lView=n,!0}function E_(n){let e=dS(),t=n[be];we.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function dS(){let n=we.lFrame,e=n===null?null:n.child;return e===null?fS(n):e}function fS(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function hS(){let n=we.lFrame;return we.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var pS=hS;function I_(){let n=hS();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function T4(n){return(we.lFrame.contextLView=l4(n,we.lFrame.contextLView))[gr]}function so(){return we.lFrame.selectedIndex}function ps(n){we.lFrame.selectedIndex=n}function sp(){let n=we.lFrame;return eS(n.tView,n.selectedIndex)}function bt(){we.lFrame.currentNamespace=XT}function Rt(){S4()}function S4(){we.lFrame.currentNamespace=null}function A4(){return we.lFrame.currentNamespace}var mS=!0;function x_(){return mS}function D_(n){mS=n}function P4(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=QT(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function M_(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function ph(n,e,t){gS(n,e,3,t)}function mh(n,e,t,r){(n[ge]&3)===t&&gS(n,e,t,r)}function o0(n,e){let t=n[ge];(t&3)===e&&(t&=16383,t+=1,n[ge]=t)}function gS(n,e,t,r){let i=r!==void 0?n[Da]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Da]+=65536),(a<o||o==-1)&&(O4(n,t,e,c),n[Da]=(n[Da]&4294901760)+c+2),c++}function GM(n,e){Or(4,n,e);let t=Ue(null);try{e.call(n)}finally{Ue(t),Or(5,n,e)}}function O4(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ge]>>14<n[Da]>>16&&(n[ge]&3)===e&&(n[ge]+=16384,GM(a,o)):GM(a,o)}var Aa=-1,ms=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function N4(n){return n instanceof ms}function R4(n){return(n.flags&8)!==0}function k4(n){return(n.flags&16)!==0}var s0={},T0=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Yh(r);let i=this.injector.get(e,s0,r);return i!==s0||t===s0?i:this.parentInjector.get(e,t,r)}};function yS(n){return n!==Aa}function Mh(n){return n&32767}function F4(n){return n>>16}function Th(n,e){let t=F4(n),r=e;for(;t>0;)r=r[za],t--;return r}var S0=!0;function Sh(n){let e=S0;return S0=n,e}var V4=256,vS=V4-1,_S=5,L4=0,Nr={};function j4(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ju)&&(r=t[ju]),r==null&&(r=t[ju]=L4++);let i=r&vS,o=1<<i;e.data[n+(i>>_S)]|=o}function Ah(n,e){let t=wS(n,e);if(t!==-1)return t;let r=e[be];r.firstCreatePass&&(n.injectorIndex=e.length,a0(r.data,n),a0(e,null),a0(r.blueprint,null));let i=T_(n,e),o=n.injectorIndex;if(yS(i)){let s=Mh(i),a=Th(i,e),c=a[be].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function a0(n,e){n.push(0,0,0,0,0,0,0,0,e)}function wS(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function T_(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=xS(i),r===null)return Aa;if(t++,i=i[za],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Aa}function A0(n,e,t){j4(n,e,t)}function B4(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(OT(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function CS(n,e,t){if(t&Te.Optional||n!==void 0)return n;d_(e,"NodeInjector")}function bS(n,e,t,r){if(t&Te.Optional&&r===void 0&&(r=null),!(t&(Te.Self|Te.Host))){let i=n[ka],o=Nn(void 0);try{return i?i.get(e,r,t&Te.Optional):DT(e,r,t&Te.Optional)}finally{Nn(o)}}return CS(r,e,t)}function ES(n,e,t,r=Te.Default,i){if(n!==null){if(e[ge]&2048&&!(r&Te.Self)){let s=q4(n,e,t,r,Nr);if(s!==Nr)return s}let o=IS(n,e,t,r,Nr);if(o!==Nr)return o}return bS(e,t,r,i)}function IS(n,e,t,r,i){let o=$4(t);if(typeof o=="function"){if(!lS(e,n,r))return r&Te.Host?CS(i,t,r):bS(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&Te.Optional))d_(t);else return s}finally{pS()}}else if(typeof o=="number"){let s=null,a=wS(n,e),c=Aa,l=r&Te.Host?e[Fr][yr]:null;for((a===-1||r&Te.SkipSelf)&&(c=a===-1?T_(n,e):e[a+8],c===Aa||!KM(r,!1)?a=-1:(s=e[be],a=Mh(c),e=Th(c,e)));a!==-1;){let d=e[be];if(WM(o,a,d.data)){let f=U4(a,e,t,s,r,l);if(f!==Nr)return f}c=e[a+8],c!==Aa&&KM(r,e[be].data[a+8]===l)&&WM(o,a,e)?(s=d,a=Mh(c),e=Th(c,e)):a=-1}}return i}function U4(n,e,t,r,i,o){let s=e[be],a=s.data[n+8],c=r==null?ep(a)&&S0:r!=s&&(a.type&3)!==0,l=i&Te.Host&&o===a,d=gh(a,s,t,c,l);return d!==null?gs(e,s,d,a):Nr}function gh(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,d=o>>20,f=r?a:a+d,p=i?a+d:l;for(let g=f;g<p;g++){let v=s[g];if(g<c&&t===v||g>=c&&v.type===t)return g}if(i){let g=s[c];if(g&&ro(g)&&g.type===t)return c}return null}function gs(n,e,t,r){let i=n[t],o=e.data;if(N4(i)){let s=i;s.resolving&&mj(pj(o[t]));let a=Sh(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?Nn(s.injectImpl):null,d=lS(n,r,Te.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&P4(t,o[t],e)}finally{l!==null&&Nn(l),Sh(a),s.resolving=!1,pS()}}return i}function $4(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ju)?n[ju]:void 0;return typeof e=="number"?e>=0?e&vS:z4:e}function WM(n,e,t){let r=1<<n;return!!(t[e+(n>>_S)]&r)}function KM(n,e){return!(n&Te.Self)&&!(n&Te.Host&&e)}var us=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return ES(this._tNode,this._lView,e,Yh(r),t)}};function z4(){return new us(un(),Ne())}function Cs(n){return Wu(()=>{let e=n.prototype.constructor,t=e[vh]||P0(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[vh]||P0(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function P0(n){return wT(n)?()=>{let e=P0(bn(n));return e&&e()}:ls(n)}function q4(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ge]&2048&&!(s[ge]&512);){let a=IS(o,s,t,r|Te.Self,Nr);if(a!==Nr)return a;let c=o.parent;if(!c){let l=s[HT];if(l){let d=l.get(t,Nr,r);if(d!==Nr)return d}c=xS(s),s=s[za]}o=c}return i}function xS(n){let e=n[be],t=e.type;return t===2?e.declTNode:t===1?n[yr]:null}function S_(n){return B4(un(),n)}function QM(n,e=null,t=null,r){let i=DS(n,e,t,r);return i.resolveInjectorInitializers(),i}function DS(n,e=null,t=null,r,i=new Set){let o=[t||Rn,qj(n)];return r=r||(typeof n=="object"?void 0:En(n)),new zu(o,e||v_(),r||null,i)}var kn=class n{static{this.THROW_IF_NOT_FOUND=Uu}static{this.NULL=new Ch}static create(e,t){if(Array.isArray(e))return QM({name:""},t,e,"");{let r=e.name??"";return QM({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=ne({token:n,providedIn:"any",factory:()=>K(ST)})}static{this.__NG_ELEMENT_ID__=-1}};var H4=new X("");H4.__NG_ELEMENT_ID__=n=>{let e=un();if(e===null)throw new ae(204,!1);if(e.type&2)return e.value;if(n&Te.Optional)return null;throw new ae(204,!1)};var G4="ngOriginalError";function c0(n){return n[G4]}var MS=!0,A_=(()=>{class n{static{this.__NG_ELEMENT_ID__=W4}static{this.__NG_ENV_ID__=t=>t}}return n})(),O0=class extends A_{constructor(e){super(),this._lView=e}onDestroy(e){return rS(this._lView,e),()=>d4(this._lView,e)}};function W4(){return new O0(Ne())}var yi=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ut(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=ne({token:n,providedIn:"root",factory:()=>new n})}}return n})();var N0=class extends tt{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,qT()&&(this.destroyRef=z(A_,{optional:!0})??void 0,this.pendingTasks=z(yi,{optional:!0})??void 0)}emit(e){let t=Ue(null);try{super.next(e)}finally{Ue(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof vt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Ke=N0;function Ph(...n){}function TS(n){let e,t;function r(){n=Ph;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function YM(n){return queueMicrotask(()=>n()),()=>{n=Ph}}var P_="isAngularZone",Oh=P_+"_ID",K4=0,ke=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ke(!1),this.onMicrotaskEmpty=new Ke(!1),this.onStable=new Ke(!1),this.onError=new Ke(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=MS}=e;if(typeof Zone>"u")throw new ae(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,Z4(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(P_)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ae(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ae(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Q4,Ph,Ph);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Q4={};function O_(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Y4(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){TS(()=>{n.callbackScheduled=!1,R0(n),n.isCheckStableRunning=!0,O_(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),R0(n)}function Z4(n){let e=()=>{Y4(n)},t=K4++;n._inner=n._inner.fork({name:"angular",properties:{[P_]:!0,[Oh]:t,[Oh+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(X4(c))return r.invokeTask(o,s,a,c);try{return ZM(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),XM(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return ZM(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!J4(c)&&e(),XM(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,R0(n),O_(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function R0(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function ZM(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function XM(n){n._nesting--,O_(n)}var Nh=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ke,this.onMicrotaskEmpty=new Ke,this.onStable=new Ke,this.onError=new Ke}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function X4(n){return SS(n,"__ignore_ng_zone__")}function J4(n){return SS(n,"__scheduler_tick__")}function SS(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function e3(n="zone.js",e){return n==="noop"?new Nh:n==="zone.js"?new ke(e):n}var di=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&c0(e);for(;t&&c0(t);)t=c0(t);return t||null}},t3=new X("",{providedIn:"root",factory:()=>{let n=z(ke),e=z(di);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function n3(){return qa(un(),Ne())}function qa(n,e){return new xn(er(n,e))}var xn=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=n3}}return n})();function r3(n){return n instanceof xn?n.nativeElement:n}function i3(){return this._results[Symbol.iterator]()}var k0=class n{get changes(){return this._changes??=new Ke}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=i3)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=Dj(e);(this._changesDetected=!xj(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function AS(n){return(n.flags&128)===128}var PS=new Map,o3=0;function s3(){return o3++}function a3(n){PS.set(n[Jh],n)}function F0(n){PS.delete(n[Jh])}var JM="__ngContext__";function ys(n,e){eo(e)?(n[JM]=e[Jh],a3(e)):n[JM]=e}function OS(n){return RS(n[qu])}function NS(n){return RS(n[mr])}function RS(n){for(;n!==null&&!gi(n);)n=n[mr];return n}var V0;function kS(n){V0=n}function c3(){if(V0!==void 0)return V0;if(typeof document<"u")return document;throw new ae(210,!1)}var ap=new X("",{providedIn:"root",factory:()=>u3}),u3="ng",N_=new X(""),ln=new X("",{providedIn:"platform",factory:()=>"unknown"});var R_=new X("",{providedIn:"root",factory:()=>c3().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var l3="h",d3="b";var f3=()=>null;function k_(n,e,t=!1){return f3(n,e,t)}var FS=!1,h3=new X("",{providedIn:"root",factory:()=>FS});var ch;function p3(){if(ch===void 0&&(ch=null,Cn.trustedTypes))try{ch=Cn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return ch}function eT(n){return p3()?.createScriptURL(n)||n}var Rh=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${vT})`}};function Ha(n){return n instanceof Rh?n.changingThisBreaksApplicationSecurity:n}function F_(n,e){let t=m3(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${vT})`)}return t===e}function m3(n){return n instanceof Rh&&n.getTypeName()||null}var g3=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function VS(n){return n=String(n),n.match(g3)?n:"unsafe:"+n}var cp=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(cp||{});function Yu(n){let e=jS();return e?e.sanitize(cp.URL,n)||"":F_(n,"URL")?Ha(n):VS(Pa(n))}function y3(n){let e=jS();if(e)return eT(e.sanitize(cp.RESOURCE_URL,n)||"");if(F_(n,"ResourceURL"))return eT(Ha(n));throw new ae(904,!1)}function v3(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?y3:Yu}function LS(n,e,t){return v3(e,t)(n)}function jS(){let n=Ne();return n&&n[kr].sanitizer}function BS(n){return n.ownerDocument.defaultView}function US(n){return n instanceof Function?n():n}function _3(n){return(n??z(kn)).get(ln)==="browser"}var fi=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(fi||{}),w3;function V_(n,e){return w3(n,e)}function Ma(n,e,t,r,i){if(r!=null){let o,s=!1;gi(r)?o=r:eo(r)&&(s=!0,r=r[mi]);let a=Vr(r);n===0&&t!==null?i==null?GS(e,t,a):kh(e,t,a,i||null,!0):n===1&&t!==null?kh(e,t,a,i||null,!0):n===2?k3(e,a,s):n===3&&e.destroyNode(a),o!=null&&V3(e,n,o,t,i)}}function C3(n,e){return n.createText(e)}function b3(n,e,t){n.setValue(e,t)}function $S(n,e,t){return n.createElement(e,t)}function E3(n,e){zS(n,e),e[mi]=null,e[yr]=null}function I3(n,e,t,r,i,o){r[mi]=i,r[yr]=e,up(n,r,t,1,i,o)}function zS(n,e){e[kr].changeDetectionScheduler?.notify(9),up(n,e,e[Ot],2,null,null)}function x3(n){let e=n[qu];if(!e)return u0(n[be],n);for(;e;){let t=null;if(eo(e))t=e[qu];else{let r=e[Bn];r&&(t=r)}if(!t){for(;e&&!e[mr]&&e!==n;)eo(e)&&u0(e[be],e),e=e[cn];e===null&&(e=n),eo(e)&&u0(e[be],e),t=e&&e[mr]}e=t}}function D3(n,e,t,r){let i=Bn+r,o=t.length;r>0&&(t[i-1][mr]=e),r<o-Bn?(e[mr]=t[i],TT(t,Bn+r,e)):(t.push(e),e[mr]=null),e[cn]=t;let s=e[ds];s!==null&&t!==s&&qS(s,e);let a=e[li];a!==null&&a.insertView(n),D0(e),e[ge]|=128}function qS(n,e){let t=n[Fa],r=e[cn];if(eo(r))n[ge]|=xh.HasTransplantedViews;else{let i=r[cn][Fr];e[Fr]!==i&&(n[ge]|=xh.HasTransplantedViews)}t===null?n[Fa]=[e]:t.push(e)}function L_(n,e){let t=n[Fa],r=t.indexOf(e);t.splice(r,1)}function L0(n,e){if(n.length<=Bn)return;let t=Bn+e,r=n[t];if(r){let i=r[ds];i!==null&&i!==n&&L_(i,r),e>0&&(n[t-1][mr]=r[mr]);let o=wh(n,Bn+e);E3(r[be],r);let s=o[li];s!==null&&s.detachView(o[be]),r[cn]=null,r[mr]=null,r[ge]&=-129}return r}function HS(n,e){if(!(e[ge]&256)){let t=e[Ot];t.destroyNode&&up(n,e,t,3,null,null),x3(e)}}function u0(n,e){if(e[ge]&256)return;let t=Ue(null);try{e[ge]&=-129,e[ge]|=256,e[Zn]&&Fv(e[Zn]),T3(n,e),M3(n,e),e[be].type===1&&e[Ot].destroy();let r=e[ds];if(r!==null&&gi(e[cn])){r!==e[cn]&&L_(r,e);let i=e[li];i!==null&&i.detachView(n)}F0(e)}finally{Ue(t)}}function M3(n,e){let t=n.cleanup,r=e[Eh];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[Eh]=null);let i=e[Ji];if(i!==null){e[Ji]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function T3(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof ms)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Or(4,a,c);try{c.call(a)}finally{Or(5,a,c)}}else{Or(4,i,o);try{o.call(i)}finally{Or(5,i,o)}}}}}function S3(n,e,t){return A3(n,e.parent,t)}function A3(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[mi];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Rr.None||o===Rr.Emulated)return null}return er(r,t)}}function kh(n,e,t,r,i){n.insertBefore(e,t,r,i)}function GS(n,e,t){n.appendChild(e,t)}function tT(n,e,t,r,i){r!==null?kh(n,e,t,r,i):GS(n,e,t)}function WS(n,e){return n.parentNode(e)}function P3(n,e){return n.nextSibling(e)}function O3(n,e,t){return R3(n,e,t)}function N3(n,e,t){return n.type&40?er(n,t):null}var R3=N3,nT;function j_(n,e,t,r){let i=S3(n,r,e),o=e[Ot],s=r.parent||e[yr],a=O3(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)tT(o,i,t[c],a,!1);else tT(o,i,t,a,!1);nT!==void 0&&nT(o,r,e,t,i)}function Lu(n,e){if(e!==null){let t=e.type;if(t&3)return er(e,n);if(t&4)return j0(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Lu(n,r);{let i=n[e.index];return gi(i)?j0(-1,i):Vr(i)}}else{if(t&128)return Lu(n,e.next);if(t&32)return V_(e,n)()||Vr(n[e.index]);{let r=KS(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=hs(n[Fr]);return Lu(i,r)}else return Lu(n,e.next)}}}return null}function KS(n,e){if(e!==null){let r=n[Fr][yr],i=e.projection;return r.projection[i]}return null}function j0(n,e){let t=Bn+n+1;if(t<e.length){let r=e[t],i=r[be].firstChild;if(i!==null)return Lu(r,i)}return e[fs]}function k3(n,e,t){n.removeChild(null,e,t)}function B_(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&ys(Vr(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)B_(n,e,t.child,r,i,o,!1),Ma(e,n,i,a,o);else if(c&32){let l=V_(t,r),d;for(;d=l();)Ma(e,n,i,d,o);Ma(e,n,i,a,o)}else c&16?F3(n,e,r,t,i,o):Ma(e,n,i,a,o);t=s?t.projectionNext:t.next}}function up(n,e,t,r,i,o){B_(t,r,n.firstChild,e,i,o,!1)}function F3(n,e,t,r,i,o){let s=t[Fr],c=s[yr].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];Ma(e,n,i,d,o)}else{let l=c,d=s[cn];AS(r)&&(l.flags|=128),B_(n,e,l,d,i,o,!0)}}function V3(n,e,t,r,i){let o=t[fs],s=Vr(t);o!==s&&Ma(e,n,r,o,i);for(let a=Bn;a<t.length;a++){let c=t[a];up(c[be],c,n,e,r,o)}}function L3(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:fi.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=fi.Important),n.setStyle(t,r,i,o))}}function j3(n,e,t){n.setAttribute(e,"style",t)}function QS(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function YS(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&w0(n,e,r),i!==null&&QS(n,e,i),o!==null&&j3(n,e,o)}var $n={};function Q(n=1){ZS(Ht(),Ne(),so()+n,!1)}function ZS(n,e,t,r){if(!r)if((e[ge]&3)===3){let o=n.preOrderCheckHooks;o!==null&&ph(e,o,t)}else{let o=n.preOrderHooks;o!==null&&mh(e,o,0,t)}ps(t)}function oe(n,e=Te.Default){let t=Ne();if(t===null)return K(n,e);let r=un();return ES(r,t,bn(n),e)}function XS(){let n="invalid";throw new Error(n)}function JS(n,e,t,r,i,o){let s=Ue(null);try{let a=null;i&to.SignalBased&&(a=e[r][ri]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&to.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):KT(e,a,r,o)}finally{Ue(s)}}function B3(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)ps(~i);else{let o=i,s=t[++r],a=t[++r];I4(s,o);let c=e[o];a(2,c)}}}finally{ps(-1)}}function lp(n,e,t,r,i,o,s,a,c,l,d){let f=e.blueprint.slice();return f[mi]=i,f[ge]=r|4|128|8|64,(l!==null||n&&n[ge]&2048)&&(f[ge]|=2048),tS(f),f[cn]=f[za]=n,f[gr]=t,f[kr]=s||n&&n[kr],f[Ot]=a||n&&n[Ot],f[ka]=c||n&&n[ka]||null,f[yr]=o,f[Jh]=s3(),f[bh]=d,f[HT]=l,f[Fr]=e.type==2?n[Fr]:f,f}function dp(n,e,t,r,i){let o=n.data[e];if(o===null)o=U3(n,e,t,r,i),E4()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=v4();o.injectorIndex=s===null?-1:s.injectorIndex}return Qu(o,!0),o}function U3(n,e,t,r,i){let o=sS(),s=aS(),a=s?o:o&&o.parent,c=n.data[e]=W3(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function e1(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function t1(n,e,t,r,i){let o=so(),s=r&2;try{ps(-1),s&&e.length>Un&&ZS(n,e,Un,!1),Or(s?2:0,i),t(r,i)}finally{ps(o),Or(s?3:1,i)}}function n1(n,e,t){if(WT(e)){let r=Ue(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{Ue(r)}}}function r1(n,e,t){oS()&&(J3(n,e,t,er(t,e)),(t.flags&64)===64&&u1(n,e,t))}function i1(n,e,t=er){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function o1(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=U_(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function U_(n,e,t,r,i,o,s,a,c,l,d){let f=Un+r,p=f+i,g=$3(f,p),v=typeof l=="function"?l():l;return g[be]={type:n,blueprint:g,template:t,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:v,incompleteFirstPass:!1,ssrId:d}}function $3(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:$n);return t}function z3(n,e,t,r){let o=r.get(h3,FS)||t===Rr.ShadowDom,s=n.selectRootElement(e,o);return q3(s),s}function q3(n){H3(n)}var H3=()=>null;function G3(n,e,t,r){let i=h1(e);i.push(t),n.firstCreatePass&&p1(n).push(r,i.length-1)}function W3(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return m4()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function rT(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=to.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?iT(r,t,l,a,c):iT(r,t,l,a)}return r}function iT(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function K3(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],c=null,l=null;for(let d=r;d<i;d++){let f=o[d],p=t?t.get(f):null,g=p?p.inputs:null,v=p?p.outputs:null;c=rT(0,f.inputs,d,c,g),l=rT(1,f.outputs,d,l,v);let b=c!==null&&s!==null&&!m_(e)?uB(c,d,s):null;a.push(b)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function Q3(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function s1(n,e,t,r,i,o,s,a){let c=er(e,t),l=e.inputs,d;!a&&l!=null&&(d=l[r])?($_(n,t,d,r,i),ep(e)&&Y3(t,e.index)):e.type&3?(r=Q3(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function Y3(n,e){let t=oo(e,n);t[ge]&16||(t[ge]|=64)}function a1(n,e,t,r){if(oS()){let i=r===null?null:{"":-1},o=tB(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&c1(n,e,t,s,i,a),i&&nB(t,r,i)}t.mergedAttrs=$u(t.mergedAttrs,t.attrs)}function c1(n,e,t,r,i,o){for(let l=0;l<r.length;l++)A0(Ah(t,e),n,r[l].type);iB(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,c=e1(n,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];t.mergedAttrs=$u(t.mergedAttrs,d.hostAttrs),oB(n,t,e,c,d),rB(c,d,i),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let f=d.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}K3(n,t,o)}function Z3(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;X3(s)!=a&&s.push(a),s.push(t,r,o)}}function X3(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function J3(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;ep(t)&&sB(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Ah(t,e),ys(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let c=n.data[a],l=gs(e,n,a,t);if(ys(l,e),s!==null&&cB(e,a-i,l,c,t,s),ro(c)){let d=oo(t.index,e);d[gr]=gs(e,n,a,t)}}}function u1(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=x4();try{ps(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];M0(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&eB(c,l)}}finally{ps(-1),M0(s)}}function eB(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function tB(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(kj(e,s.selectors,!1))if(r||(r=[]),ro(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;B0(n,e,c)}else r.unshift(s),B0(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function B0(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function nB(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new ae(-301,!1);r.push(e[i],o)}}}function rB(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;ro(e)&&(t[""]=n)}}function iB(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function oB(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ls(i.type,!0)),s=new ms(o,ro(i),oe);n.blueprint[r]=s,t[r]=s,Z3(n,e,r,e1(n,t,i.hostVars,$n),i)}function sB(n,e,t){let r=er(e,n),i=o1(t),o=n[kr].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=fp(n,lp(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function l1(n,e,t,r,i,o){let s=er(n,e);aB(e[Ot],s,o,n.value,t,r,i)}function aB(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Pa(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function cB(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],d=s[a++],f=s[a++];JS(r,t,c,l,d,f)}}function uB(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function d1(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function f1(n,e){let t=n.contentQueries;if(t!==null){let r=Ue(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];b_(o),a.contentQueries(2,e[s],s)}}}finally{Ue(r)}}}function fp(n,e){return n[qu]?n[zM][mr]=e:n[qu]=e,n[zM]=e,e}function U0(n,e,t){b_(0);let r=Ue(null);try{e(n,t)}finally{Ue(r)}}function h1(n){return n[Eh]??=[]}function p1(n){return n.cleanup??=[]}function m1(n,e){let t=n[ka],r=t?t.get(di,null):null;r&&r.handleError(e)}function $_(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],c=t[o++],l=e[s],d=n.data[s];JS(d,l,r,a,c,i)}}function g1(n,e,t){let r=JT(e,n);b3(n[Ot],r,t)}function lB(n,e){let t=oo(e,n),r=t[be];dB(r,t);let i=t[mi];i!==null&&t[bh]===null&&(t[bh]=k_(i,t[ka])),z_(r,t,t[gr])}function dB(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function z_(n,e,t){E_(e);try{let r=n.viewQuery;r!==null&&U0(1,r,t);let i=n.template;i!==null&&t1(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[li]?.finishViewCreation(n),n.staticContentQueries&&f1(n,e),n.staticViewQueries&&U0(2,n.viewQuery,t);let o=n.components;o!==null&&fB(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ge]&=-5,I_()}}function fB(n,e){for(let t=0;t<e.length;t++)lB(n,e[t])}function hB(n,e,t,r){let i=Ue(null);try{let o=e.tView,a=n[ge]&4096?4096:16,c=lp(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[ds]=l;let d=n[li];return d!==null&&(c[li]=d.createEmbeddedView(o)),z_(o,c,t),c}finally{Ue(i)}}function oT(n,e){return!e||e.firstChild===null||AS(n)}function pB(n,e,t,r=!0){let i=e[be];if(D3(i,e,n,t),r){let s=j0(t,n),a=e[Ot],c=WS(a,n[fs]);c!==null&&I3(i,n[yr],a,e,c,s)}let o=e[bh];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Fh(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Vr(o)),gi(o)&&mB(o,r);let s=t.type;if(s&8)Fh(n,e,t.child,r);else if(s&32){let a=V_(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=KS(e,t);if(Array.isArray(a))r.push(...a);else{let c=hs(e[Fr]);Fh(c[be],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function mB(n,e){for(let t=Bn;t<n.length;t++){let r=n[t],i=r[be].firstChild;i!==null&&Fh(r[be],r,i,e)}n[fs]!==n[mi]&&e.push(n[fs])}var y1=[];function gB(n){return n[Zn]??yB(n)}function yB(n){let e=y1.pop()??Object.create(_B);return e.lView=n,e}function vB(n){n.lView[Zn]!==n&&(n.lView=null,y1.push(n))}var _B=me(Y({},Ou),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{rp(n.lView)},consumerOnSignalRead(){this.lView[Zn]=this}});function wB(n){let e=n[Zn]??Object.create(CB);return e.lView=n,e}var CB=me(Y({},Ou),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=hs(n.lView);for(;e&&!v1(e[be]);)e=hs(e);e&&nS(e)},consumerOnSignalRead(){this.lView[Zn]=this}});function v1(n){return n.type!==2}var bB=100;function _1(n,e=!0,t=0){let r=n[kr],i=r.rendererFactory,o=!1;o||i.begin?.();try{EB(n,t)}catch(s){throw e&&m1(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function EB(n,e){let t=cS();try{HM(!0),$0(n,e);let r=0;for(;np(n);){if(r===bB)throw new ae(103,!1);r++,$0(n,1)}}finally{HM(t)}}function IB(n,e,t,r){let i=e[ge];if((i&256)===256)return;let o=!1,s=!1;!o&&e[kr].inlineEffectRunner?.flush(),E_(e);let a=!0,c=null,l=null;o||(v1(n)?(l=gB(e),c=Pf(l)):JD()===null?(a=!1,l=wB(e),c=Pf(l)):e[Zn]&&(Fv(e[Zn]),e[Zn]=null));try{tS(e),b4(n.bindingStartIndex),t!==null&&t1(n,e,t,2,r);let d=(i&3)===3;if(!o)if(d){let g=n.preOrderCheckHooks;g!==null&&ph(e,g,null)}else{let g=n.preOrderHooks;g!==null&&mh(e,g,0,null),o0(e,0)}if(s||xB(e),w1(e,0),n.contentQueries!==null&&f1(n,e),!o)if(d){let g=n.contentCheckHooks;g!==null&&ph(e,g)}else{let g=n.contentHooks;g!==null&&mh(e,g,1),o0(e,1)}B3(n,e);let f=n.components;f!==null&&b1(e,f,0);let p=n.viewQuery;if(p!==null&&U0(2,p,r),!o)if(d){let g=n.viewCheckHooks;g!==null&&ph(e,g)}else{let g=n.viewHooks;g!==null&&mh(e,g,2),o0(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[i0]){for(let g of e[i0])g();e[i0]=null}o||(e[ge]&=-73)}catch(d){throw o||rp(e),d}finally{l!==null&&(Rv(l,c),a&&vB(l)),I_()}}function w1(n,e){for(let t=OS(n);t!==null;t=NS(t))for(let r=Bn;r<t.length;r++){let i=t[r];C1(i,e)}}function xB(n){for(let e=OS(n);e!==null;e=NS(e)){if(!(e[ge]&xh.HasTransplantedViews))continue;let t=e[Fa];for(let r=0;r<t.length;r++){let i=t[r];nS(i)}}}function DB(n,e,t){let r=oo(e,n);C1(r,t)}function C1(n,e){w_(n)&&$0(n,e)}function $0(n,e){let r=n[be],i=n[ge],o=n[Zn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&kv(o)),s||=!1,o&&(o.dirty=!1),n[ge]&=-9217,s)IB(r,n,r.template,n[gr]);else if(i&8192){w1(n,1);let a=r.components;a!==null&&b1(n,a,1)}}function b1(n,e,t){for(let r=0;r<e.length;r++)DB(n,e[r],t)}function q_(n,e){let t=cS()?64:1088;for(n[kr].changeDetectionScheduler?.notify(e);n;){n[ge]|=t;let r=hs(n);if(I0(n)&&!r)return n;n=r}return null}var vs=class{get rootNodes(){let e=this._lView,t=e[be];return Fh(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[gr]}set context(e){this._lView[gr]=e}get destroyed(){return(this._lView[ge]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[cn];if(gi(e)){let t=e[Ih],r=t?t.indexOf(this):-1;r>-1&&(L0(e,r),wh(t,r))}this._attachedToViewContainer=!1}HS(this._lView[be],this._lView)}onDestroy(e){rS(this._lView,e)}markForCheck(){q_(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ge]&=-129}reattach(){D0(this._lView),this._lView[ge]|=128}detectChanges(){this._lView[ge]|=1024,_1(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ae(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=I0(this._lView),t=this._lView[ds];t!==null&&!e&&L_(t,this._lView),zS(this._lView[be],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ae(902,!1);this._appRef=e;let t=I0(this._lView),r=this._lView[ds];r!==null&&!t&&qS(r,this._lView),D0(this._lView)}},_s=(()=>{class n{static{this.__NG_ELEMENT_ID__=SB}}return n})(),MB=_s,TB=class extends MB{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=hB(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new vs(i)}};function SB(){return hp(un(),Ne())}function hp(n,e){return n.type&4?new TB(e,n,qa(n,e)):null}var cte=new RegExp(`^(\\d+)*(${d3}|${l3})*(.*)`);var AB=()=>null;function sT(n,e){return AB(n,e)}var Va=class{},H_=new X("",{providedIn:"root",factory:()=>!1});var E1=new X(""),I1=new X(""),z0=class{},Vh=class{};function PB(n){let e=Error(`No component factory found for ${En(n)}.`);return e[OB]=n,e}var OB="ngComponent";var q0=class{resolveComponentFactory(e){throw PB(e)}},La=class{static{this.NULL=new q0}},ja=class{},vr=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>NB()}}return n})();function NB(){let n=Ne(),e=un(),t=oo(e.index,n);return(eo(t)?t:n)[Ot]}var RB=(()=>{class n{static{this.\u0275prov=ne({token:n,providedIn:"root",factory:()=>null})}}return n})();function H0(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=g0(i,a);else if(o==2){let c=a,l=e[++s];r=g0(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Lh=class extends La{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=no(e);return new Ba(t,this.ngModule)}};function aT(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:to.None;e?t.push({propName:s,templateName:r,isSignal:(a&to.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function kB(n){let e=n.toLowerCase();return e==="svg"?XT:e==="math"?a4:null}var Ba=class extends Vh{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=aT(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return aT(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=jj(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Ue(null);try{i=i||this.ngModule;let s=i instanceof In?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new T0(e,s):e,c=a.get(ja,null);if(c===null)throw new ae(407,!1);let l=a.get(RB,null),d=a.get(Va,null),f={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:d},p=c.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",v=r?z3(p,r,this.componentDef.encapsulation,a):$S(p,g,kB(g)),b=512;this.componentDef.signals?b|=4096:this.componentDef.onPush||(b|=16);let _=null;v!==null&&(_=k_(v,a,!0));let S=U_(0,null,null,1,0,null,null,null,null,null,null),k=lp(null,S,null,b,null,null,f,p,a,null,_);E_(k);let P,U,H=null;try{let q=this.componentDef,I,w=null;q.findHostDirectiveDefs?(I=[],w=new Map,q.findHostDirectiveDefs(q,I,w),I.push(q)):I=[q];let C=FB(k,v);H=VB(C,v,q,I,k,f,p),U=eS(S,Un),v&&BB(p,q,v,r),t!==void 0&&UB(U,this.ngContentSelectors,t),P=jB(H,q,I,w,k,[$B]),z_(S,k,null)}catch(q){throw H!==null&&F0(H),F0(k),q}finally{I_()}return new G0(this.componentType,P,qa(U,k),k,U)}finally{Ue(o)}}},G0=class extends z0{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new vs(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;$_(o[be],o,i,e,t),this.previousInputValues.set(e,t);let s=oo(this._tNode.index,o);q_(s,1)}}get injector(){return new us(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function FB(n,e){let t=n[be],r=Un;return n[r]=e,dp(t,r,2,"#host",null)}function VB(n,e,t,r,i,o,s){let a=i[be];LB(r,n,e,s);let c=null;e!==null&&(c=k_(e,i[ka]));let l=o.rendererFactory.createRenderer(e,t),d=16;t.signals?d=4096:t.onPush&&(d=64);let f=lp(i,o1(t),null,d,i[n.index],n,o,l,null,null,c);return a.firstCreatePass&&B0(a,n,r.length-1),fp(i,f),i[n.index]=f}function LB(n,e,t,r){for(let i of n)e.mergedAttrs=$u(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(H0(e,e.mergedAttrs,!0),t!==null&&YS(r,t,e))}function jB(n,e,t,r,i,o){let s=un(),a=i[be],c=er(s,i);c1(a,i,s,t,null,r);for(let d=0;d<t.length;d++){let f=s.directiveStart+d,p=gs(i,a,f,s);ys(p,i)}u1(a,i,s),c&&ys(c,i);let l=gs(i,a,s.directiveStart+s.componentOffset,s);if(n[gr]=i[gr]=l,o!==null)for(let d of o)d(l,e);return n1(a,s,i),l}function BB(n,e,t,r){if(r)w0(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=Bj(e.selectors[0]);i&&w0(n,t,i),o&&o.length>0&&QS(n,t,o.join(" "))}}function UB(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function $B(){let n=un();M_(Ne()[be],n)}var ao=(()=>{class n{static{this.__NG_ELEMENT_ID__=zB}}return n})();function zB(){let n=un();return D1(n,Ne())}var qB=ao,x1=class extends qB{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return qa(this._hostTNode,this._hostLView)}get injector(){return new us(this._hostTNode,this._hostLView)}get parentInjector(){let e=T_(this._hostTNode,this._hostLView);if(yS(e)){let t=Th(e,this._hostLView),r=Mh(e),i=t[be].data[r+8];return new us(i,t)}else return new us(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=cT(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Bn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=sT(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,oT(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!r4(e),a;if(s)a=t;else{let v=t||{};a=v.index,r=v.injector,i=v.projectableNodes,o=v.environmentInjector||v.ngModuleRef}let c=s?e:new Ba(no(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let b=(s?l:this.parentInjector).get(In,null);b&&(o=b)}let d=no(c.componentType??{}),f=sT(this._lContainer,d?.id??null),p=f?.firstChild??null,g=c.create(l,i,p,o);return this.insertImpl(g.hostView,a,oT(this._hostTNode,f)),g}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(u4(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[cn],l=new x1(c,c[yr],c[cn]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return pB(s,i,o,r),e.attachToViewContainerRef(),TT(l0(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=cT(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=L0(this._lContainer,t);r&&(wh(l0(this._lContainer),t),HS(r[be],r))}detach(e){let t=this._adjustIndex(e,-1),r=L0(this._lContainer,t);return r&&wh(l0(this._lContainer),t)!=null?new vs(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function cT(n){return n[Ih]}function l0(n){return n[Ih]||(n[Ih]=[])}function D1(n,e){let t,r=e[n.index];return gi(r)?t=r:(t=d1(r,e,null,n),e[n.index]=t,fp(e,t)),GB(t,e,n,r),new x1(t,n,e)}function HB(n,e){let t=n[Ot],r=t.createComment(""),i=er(e,n),o=WS(t,i);return kh(t,o,r,P3(t,i),!1),r}var GB=QB,WB=()=>!1;function KB(n,e,t){return WB(n,e,t)}function QB(n,e,t,r){if(n[fs])return;let i;t.type&8?i=Vr(r):i=HB(e,t),n[fs]=i}var W0=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},K0=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)G_(e,t).matches!==null&&this.queries[t].setDirty()}},jh=class{constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=rU(e):this.predicate=e}},Q0=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Y0=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,YB(t,o)),this.matchTNodeWithReadOption(e,t,gh(t,e,o,!1,!1))}else r===_s?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,gh(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===xn||i===ao||i===_s&&t.type&4)this.addMatch(t.index,-2);else{let o=gh(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function YB(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function ZB(n,e){return n.type&11?qa(n,e):n.type&4?hp(n,e):null}function XB(n,e,t,r){return t===-1?ZB(e,n):t===-2?JB(n,e,r):gs(n,n[be],t,e)}function JB(n,e,t){if(t===xn)return qa(e,n);if(t===_s)return hp(e,n);if(t===ao)return D1(e,n)}function M1(n,e,t,r){let i=e[li].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let d=o[l];a.push(XB(e,d,s[c+1],t.metadata.read))}}i.matches=a}return i.matches}function Z0(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=M1(n,e,i,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let l=o[a+1],d=e[-c];for(let f=Bn;f<d.length;f++){let p=d[f];p[ds]===p[cn]&&Z0(p[be],p,l,r)}if(d[Fa]!==null){let f=d[Fa];for(let p=0;p<f.length;p++){let g=f[p];Z0(g[be],g,l,r)}}}}}return r}function eU(n,e){return n[li].queries[e].queryList}function T1(n,e,t){let r=new k0((t&4)===4);return G3(n,e,r,r.destroy),(e[li]??=new K0).queries.push(new W0(r))-1}function tU(n,e,t){let r=Ht();return r.firstCreatePass&&(S1(r,new jh(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),T1(r,Ne(),e)}function nU(n,e,t,r){let i=Ht();if(i.firstCreatePass){let o=un();S1(i,new jh(e,t,r),o.index),iU(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return T1(i,Ne(),t)}function rU(n){return n.split(",").map(e=>e.trim())}function S1(n,e,t){n.queries===null&&(n.queries=new Q0),n.queries.track(new Y0(e,t))}function iU(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function G_(n,e){return n.queries.getByIndex(e)}function oU(n,e){let t=n[be],r=G_(t,e);return r.crossesNgTemplate?Z0(t,n,e,[]):M1(t,n,r,e)}var uT=new Set;function Ga(n){uT.has(n)||(uT.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function sU(n){return typeof n=="function"&&n[ri]!==void 0}function Zu(n,e){Ga("NgSignals");let t=lM(n),r=t[ri];return e?.equal&&(r.equal=e.equal),t.set=i=>Vv(r,i),t.update=i=>dM(r,i),t.asReadonly=aU.bind(t),t}function aU(){let n=this[ri];if(n.readonlyFn===void 0){let e=()=>this();e[ri]=n,n.readonlyFn=e}return n.readonlyFn}function A1(n){return sU(n)&&typeof n.set=="function"}function cU(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(fU))}return o}return Bh.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,d=i.styleUrls;i.styleUrls.forEach((f,p)=>{a.push(""),s.push(r(f).then(g=>{a[l+p]=g,d.splice(d.indexOf(f),1),d.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>hU(o));e.push(c)}),lU(),Promise.all(e).then(()=>{})}var Bh=new Map,uU=new Set;function lU(){let n=Bh;return Bh=new Map,n}function dU(){return Bh.size===0}function fU(n){return typeof n=="string"?n:n.text()}function hU(n){uU.delete(n)}function pU(n){return Object.getPrototypeOf(n.prototype).constructor}function tr(n){let e=pU(n.type),t=!0,r=[n];for(;e;){let i;if(ro(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ae(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=uh(n.inputs),s.inputTransforms=uh(n.inputTransforms),s.declaredInputs=uh(n.declaredInputs),s.outputs=uh(n.outputs);let a=i.hostBindings;a&&_U(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&yU(n,c),l&&vU(n,l),mU(n,i),sj(n.outputs,i.outputs),ro(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===tr&&(t=!1)}}e=Object.getPrototypeOf(e)}gU(r)}function mU(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function gU(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=$u(i.hostAttrs,t=$u(t,i.hostAttrs))}}function uh(n){return n===Oa?{}:n===Rn?[]:n}function yU(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function vU(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function _U(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function W_(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var io=class{},Hu=class{};var Uh=class extends io{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Lh(this);let o=VT(e);this._bootstrapComponents=US(o.bootstrap),this._r3Injector=DS(e,t,[{provide:io,useValue:this},{provide:La,useValue:this.componentFactoryResolver},...r],En(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},$h=class extends Hu{constructor(e){super(),this.moduleType=e}create(e){return new Uh(this.moduleType,e,[])}};function wU(n,e,t){return new Uh(n,e,t,!1)}var X0=class extends io{constructor(e){super(),this.componentFactoryResolver=new Lh(this),this.instance=null;let t=new zu([...e.providers,{provide:io,useValue:this},{provide:La,useValue:this.componentFactoryResolver}],e.parent||v_(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function pp(n,e,t=null){return new X0({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function P1(n){return bU(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function CU(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function bU(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function mp(n,e,t){return n[e]=t}function EU(n,e){return n[e]}function hi(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function zh(n,e,t,r){let i=hi(n,e,t);return hi(n,e+1,r)||i}function IU(n,e,t,r,i,o){let s=zh(n,e,t,r);return zh(n,e+2,i,o)||s}function xU(n){return(n.flags&32)===32}function DU(n,e,t,r,i,o,s,a,c){let l=e.consts,d=dp(e,n,4,s||null,a||null);a1(e,t,d,Dh(l,c)),M_(e,d);let f=d.tView=U_(2,d,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function MU(n,e,t,r,i,o,s,a,c,l){let d=t+Un,f=e.firstCreatePass?DU(d,e,n,r,i,o,s,a,c):e.data[d];Qu(f,!1);let p=TU(e,n,f,t);x_()&&j_(e,n,p,f),ys(p,n);let g=d1(p,n,p,f);return n[d]=g,fp(n,g),KB(g,f,n),__(f)&&r1(e,n,f),c!=null&&i1(n,f,l),f}function qe(n,e,t,r,i,o,s,a){let c=Ne(),l=Ht(),d=Dh(l.consts,o);return MU(c,l,n,e,t,r,i,d,s,a),qe}var TU=SU;function SU(n,e,t,r){return D_(!0),e[Ot].createComment("")}var Ta=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Ta||{}),O1=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=ne({token:n,providedIn:"root",factory:()=>new n})}}return n})(),J0=class n{constructor(){this.ngZone=z(ke),this.scheduler=z(Va),this.errorHandler=z(di,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Ta.EarlyRead,Ta.Write,Ta.MixedReadWrite,Ta.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=ne({token:n,providedIn:"root",factory:()=>new n})}},e_=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function K_(n,e){!e?.injector&&t4(K_);let t=e?.injector??z(kn);return _3(t)?(Ga("NgAfterNextRender"),PU(n,t,e,!0)):OU}function AU(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function PU(n,e,t,r){let i=e.get(O1);i.impl??=e.get(J0);let o=t?.phase??Ta.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(A_):null,a=new e_(i.impl,AU(n,o),r,s);return i.impl.register(a),a}var OU={destroy(){}};function gp(n,e,t,r){let i=Ne(),o=op();if(hi(i,o,e)){let s=Ht(),a=sp();l1(a,i,n,e,t,r)}return gp}function N1(n,e,t,r){return hi(n,op(),t)?e+Pa(t)+r:$n}function NU(n,e,t,r,i,o){let s=C4(),a=zh(n,s,t,i);return C_(2),a?e+Pa(t)+r+Pa(i)+o:$n}function Q_(n,e,t,r,i,o){let s=Ne(),a=N1(s,e,t,r);if(a!==$n){let c=sp();l1(c,s,n,a,i,o)}return Q_}function lh(n,e){return n<<17|e<<2}function ws(n){return n>>17&32767}function RU(n){return(n&2)==2}function kU(n,e){return n&131071|e<<17}function t_(n){return n|2}function Ua(n){return(n&131068)>>2}function d0(n,e){return n&-131069|e<<2}function FU(n){return(n&1)===1}function n_(n){return n|1}function VU(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ws(s),c=Ua(s);n[r]=t;let l=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||Ku(f,d)>0)&&(l=!0)}else d=t;if(i)if(c!==0){let p=ws(n[a+1]);n[r+1]=lh(p,a),p!==0&&(n[p+1]=d0(n[p+1],r)),n[a+1]=kU(n[a+1],r)}else n[r+1]=lh(a,0),a!==0&&(n[a+1]=d0(n[a+1],r)),a=r;else n[r+1]=lh(c,0),a===0?a=r:n[c+1]=d0(n[c+1],r),c=r;l&&(n[r+1]=t_(n[r+1])),lT(n,d,r,!0),lT(n,d,r,!1),LU(e,d,n,r,o),s=lh(a,c),o?e.classBindings=s:e.styleBindings=s}function LU(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Ku(o,e)>=0&&(t[r+1]=n_(t[r+1]))}function lT(n,e,t,r){let i=n[t+1],o=e===null,s=r?ws(i):Ua(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];jU(c,e)&&(a=!0,n[s+1]=r?n_(l):t_(l)),s=r?ws(l):Ua(l)}a&&(n[t+1]=r?t_(i):n_(i))}function jU(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Ku(n,e)>=0:!1}var pr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function BU(n){return n.substring(pr.key,pr.keyEnd)}function UU(n){return $U(n),R1(n,k1(n,0,pr.textEnd))}function R1(n,e){let t=pr.textEnd;return t===e?-1:(e=pr.keyEnd=zU(n,pr.key=e,t),k1(n,e,t))}function $U(n){pr.key=0,pr.keyEnd=0,pr.value=0,pr.valueEnd=0,pr.textEnd=n.length}function k1(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function zU(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function pe(n,e,t){let r=Ne(),i=op();if(hi(r,i,e)){let o=Ht(),s=sp();s1(o,s,r,n,e,r[Ot],t,!1)}return pe}function r_(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";$_(n,t,o[s],s,r)}function Xu(n,e,t){return V1(n,e,t,!1),Xu}function pt(n,e){return V1(n,e,null,!0),pt}function F1(n){HU(ZU,qU,n,!0)}function qU(n,e){for(let t=UU(e);t>=0;t=R1(e,t))p_(n,BU(e),!0)}function V1(n,e,t,r){let i=Ne(),o=Ht(),s=C_(2);if(o.firstUpdatePass&&j1(o,n,s,r),e!==$n&&hi(i,s,e)){let a=o.data[so()];B1(o,a,i,i[Ot],n,i[s+1]=JU(e,t),r,s)}}function HU(n,e,t,r){let i=Ht(),o=C_(2);i.firstUpdatePass&&j1(i,null,o,r);let s=Ne();if(t!==$n&&hi(s,o,t)){let a=i.data[so()];if(U1(a,r)&&!L1(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=g0(c,t||"")),r_(i,a,s,t,r)}else XU(i,a,s,s[Ot],s[o+1],s[o+1]=YU(n,e,t),r,o)}}function L1(n,e){return e>=n.expandoStartIndex}function j1(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[so()],s=L1(n,t);U1(o,r)&&e===null&&!s&&(e=!1),e=GU(i,o,e,r),VU(i,o,e,t,s,r)}}function GU(n,e,t,r){let i=D4(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=f0(null,n,e,t,r),t=Gu(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=f0(i,n,e,t,r),o===null){let c=WU(n,e,r);c!==void 0&&Array.isArray(c)&&(c=f0(null,n,e,c[1],r),c=Gu(c,e.attrs,r),KU(n,e,r,c))}else o=QU(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function WU(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Ua(r)!==0)return n[ws(r)]}function KU(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[ws(i)]=r}function QU(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Gu(r,s,t)}return Gu(r,e.attrs,t)}function f0(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Gu(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Gu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),p_(n,s,t?!0:e[++o]))}return n===void 0?null:n}function YU(n,e,t){if(t==null||t==="")return Rn;let r=[],i=Ha(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function ZU(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&p_(n,r,t)}function XU(n,e,t,r,i,o,s,a){i===$n&&(i=Rn);let c=0,l=0,d=0<i.length?i[0]:null,f=0<o.length?o[0]:null;for(;d!==null||f!==null;){let p=c<i.length?i[c+1]:void 0,g=l<o.length?o[l+1]:void 0,v=null,b;d===f?(c+=2,l+=2,p!==g&&(v=f,b=g)):f===null||d!==null&&d<f?(c+=2,v=d):(l+=2,v=f,b=g),v!==null&&B1(n,e,t,r,v,b,s,a),d=c<i.length?i[c]:null,f=l<o.length?o[l]:null}}function B1(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],d=FU(l)?dT(c,e,t,i,Ua(l),s):void 0;if(!qh(d)){qh(o)||RU(l)&&(o=dT(c,null,t,i,a,s));let f=JT(so(),t);L3(r,s,f,i,o)}}function dT(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),d=l?c[1]:c,f=d===null,p=t[i+1];p===$n&&(p=f?Rn:void 0);let g=f?n0(p,r):d===r?p:void 0;if(l&&!qh(g)&&(g=n0(c,r)),qh(g)&&(a=g,s))return a;let v=n[i+1];i=s?ws(v):Ua(v)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=n0(c,r))}return a}function qh(n){return n!==void 0}function JU(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=En(Ha(n)))),n}function U1(n,e){return(n.flags&(e?8:16))!==0}function e5(n,e,t,r,i,o){let s=e.consts,a=Dh(s,i),c=dp(e,n,2,r,a);return a1(e,t,c,Dh(s,o)),c.attrs!==null&&H0(c,c.attrs,!1),c.mergedAttrs!==null&&H0(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function M(n,e,t,r){let i=Ne(),o=Ht(),s=Un+n,a=i[Ot],c=o.firstCreatePass?e5(s,o,i,e,t,r):o.data[s],l=t5(o,i,c,a,e,n);i[s]=l;let d=__(c);return Qu(c,!0),YS(a,l,c),!xU(c)&&x_()&&j_(o,i,l,c),f4()===0&&ys(l,i),h4(),d&&(r1(o,i,c),n1(o,c,i)),r!==null&&i1(i,c),M}function T(){let n=un();aS()?_4():(n=n.parent,Qu(n,!1));let e=n;g4(e)&&y4(),p4();let t=Ht();return t.firstCreatePass&&(M_(t,n),WT(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&R4(e)&&r_(t,e,Ne(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&k4(e)&&r_(t,e,Ne(),e.stylesWithoutHost,!1),T}function se(n,e,t,r){return M(n,e,t,r),T(),se}var t5=(n,e,t,r,i,o)=>(D_(!0),$S(r,i,A4()));function Fn(){return Ne()}var cs=void 0;function n5(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var r5=["en",[["a","p"],["AM","PM"],cs],[["AM","PM"],cs,cs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],cs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],cs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",cs,"{1} 'at' {0}",cs],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",n5],h0={};function yp(n){let e=i5(n),t=fT(e);if(t)return t;let r=e.split("-")[0];if(t=fT(r),t)return t;if(r==="en")return r5;throw new ae(701,!1)}function fT(n){return n in h0||(h0[n]=Cn.ng&&Cn.ng.common&&Cn.ng.common.locales&&Cn.ng.common.locales[n]),h0[n]}var bs=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(bs||{});function i5(n){return n.toLowerCase().replace(/_/g,"-")}var Hh="en-US",o5="USD";var s5=Hh;function a5(n){typeof n=="string"&&(s5=n.toLowerCase().replace(/_/g,"-"))}var c5=(n,e,t)=>{};function de(n,e,t,r){let i=Ne(),o=Ht(),s=un();return $1(o,i,i[Ot],s,n,e,r),de}function u5(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Eh],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function $1(n,e,t,r,i,o,s){let a=__(r),l=n.firstCreatePass&&p1(n),d=e[gr],f=h1(e),p=!0;if(r.type&3||s){let b=er(r,e),_=s?s(b):b,S=f.length,k=s?U=>s(Vr(U[r.index])):r.index,P=null;if(!s&&a&&(P=u5(n,e,i,r.index)),P!==null){let U=P.__ngLastListenerFn__||P;U.__ngNextListenerFn__=o,P.__ngLastListenerFn__=o,p=!1}else{o=pT(r,e,d,o),c5(b,i,o);let U=t.listen(_,i,o);f.push(o,U),l&&l.push(i,k,S,S+1)}}else o=pT(r,e,d,o);let g=r.outputs,v;if(p&&g!==null&&(v=g[i])){let b=v.length;if(b)for(let _=0;_<b;_+=2){let S=v[_],k=v[_+1],H=e[S][k].subscribe(o),q=f.length;f.push(o,H),l&&l.push(i,r.index,q,-(q+1))}}}function hT(n,e,t,r){let i=Ue(null);try{return Or(6,e,t),t(r)!==!1}catch(o){return m1(n,o),!1}finally{Or(7,e,t),Ue(i)}}function pT(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?oo(n.index,e):e;q_(s,5);let a=hT(e,t,r,o),c=i.__ngNextListenerFn__;for(;c;)a=hT(e,t,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function Re(n=1){return T4(n)}function z1(n,e,t,r){nU(n,e,t,r)}function q1(n,e,t){tU(n,e,t)}function vp(n){let e=Ne(),t=Ht(),r=uS();b_(r+1);let i=G_(t,r);if(n.dirty&&c4(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=oU(e,r);n.reset(o,r3),n.notifyOnChanges()}return!0}return!1}function _p(){return eU(Ne(),uS())}function l5(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function H1(n){let e=w4();return tp(e,Un+n)}function B(n,e=""){let t=Ne(),r=Ht(),i=n+Un,o=r.firstCreatePass?dp(r,i,1,e,null):r.data[i],s=d5(r,t,o,e,n);t[i]=s,x_()&&j_(r,t,s,o),Qu(o,!1)}var d5=(n,e,t,r,i)=>(D_(!0),C3(e[Ot],r));function rt(n){return en("",n,""),rt}function en(n,e,t){let r=Ne(),i=N1(r,n,e,t);return i!==$n&&g1(r,so(),i),en}function Y_(n,e,t,r,i){let o=Ne(),s=NU(o,n,e,t,r,i);return s!==$n&&g1(o,so(),s),Y_}function vi(n,e,t){A1(e)&&(e=e());let r=Ne(),i=op();if(hi(r,i,e)){let o=Ht(),s=sp();s1(o,s,r,n,e,r[Ot],t,!1)}return vi}function co(n,e){let t=A1(n);return t&&n.set(e),t}function _i(n,e){let t=Ne(),r=Ht(),i=un();return $1(r,t,t[Ot],i,n,e),_i}function f5(n,e,t){let r=Ht();if(r.firstCreatePass){let i=ro(n);i_(t,r.data,r.blueprint,i,!0),i_(e,r.data,r.blueprint,i,!1)}}function i_(n,e,t,r,i){if(n=bn(n),Array.isArray(n))for(let o=0;o<n.length;o++)i_(n[o],e,t,r,i);else{let o=Ht(),s=Ne(),a=un(),c=Ra(n)?n:bn(n.provide),l=zT(n),d=a.providerIndexes&1048575,f=a.directiveStart,p=a.providerIndexes>>20;if(Ra(n)||!n.multi){let g=new ms(l,i,oe),v=m0(c,e,i?d:d+p,f);v===-1?(A0(Ah(a,s),o,c),p0(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(g),s.push(g)):(t[v]=g,s[v]=g)}else{let g=m0(c,e,d+p,f),v=m0(c,e,d,d+p),b=g>=0&&t[g],_=v>=0&&t[v];if(i&&!_||!i&&!b){A0(Ah(a,s),o,c);let S=m5(i?p5:h5,t.length,i,r,l);!i&&_&&(t[v].providerFactory=S),p0(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(S),s.push(S)}else{let S=G1(t[i?v:g],l,!i&&r);p0(o,n,g>-1?g:v,S)}!i&&r&&_&&t[v].componentProviders++}}}function p0(n,e,t,r){let i=Ra(e),o=Kj(e);if(i||o){let c=(o?bn(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(t);d===-1?l.push(t,[r,c]):l[d+1].push(r,c)}else l.push(t,c)}}}function G1(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function m0(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function h5(n,e,t,r){return o_(this.multi,[])}function p5(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=gs(t,t[be],this.providerFactory.index,r);o=a.slice(0,s),o_(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],o_(i,o);return o}function o_(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function m5(n,e,t,r,i){let o=new ms(n,t,oe);return o.multi=[],o.index=e,o.componentProviders=0,G1(o,i,r&&!t),o}function uo(n,e=[]){return t=>{t.providersResolver=(r,i)=>f5(r,i?i(n):n,e)}}var g5=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=BT(!1,t.type),i=r.length>0?pp([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=ne({token:n,providedIn:"environment",factory:()=>new n(K(In))})}}return n})();function W1(n){Ga("NgStandalone"),n.getStandaloneInjector=e=>e.get(g5).getOrCreateStandaloneInjector(n)}function K1(n,e,t){let r=ip()+n,i=Ne();return i[r]===$n?mp(i,r,t?e.call(t):e()):EU(i,r)}function Z_(n,e){let t=n[e];return t===$n?void 0:t}function y5(n,e,t,r,i,o){let s=e+t;return hi(n,s,i)?mp(n,s+1,o?r.call(o,i):r(i)):Z_(n,s+1)}function v5(n,e,t,r,i,o,s){let a=e+t;return zh(n,a,i,o)?mp(n,a+2,s?r.call(s,i,o):r(i,o)):Z_(n,a+2)}function _5(n,e,t,r,i,o,s,a,c){let l=e+t;return IU(n,l,i,o,s,a)?mp(n,l+4,c?r.call(c,i,o,s,a):r(i,o,s,a)):Z_(n,l+4)}function _r(n,e){let t=Ht(),r,i=n+Un;t.firstCreatePass?(r=w5(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=ls(r.type,!0)),s,a=Nn(oe);try{let c=Sh(!1),l=o();return Sh(c),l5(t,Ne(),i,l),l}finally{Nn(a)}}function w5(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function wp(n,e,t){let r=n+Un,i=Ne(),o=tp(i,r);return X_(i,r)?y5(i,ip(),e,o.transform,t,o):o.transform(t)}function Q1(n,e,t,r){let i=n+Un,o=Ne(),s=tp(o,i);return X_(o,i)?v5(o,ip(),e,s.transform,t,r,s):s.transform(t,r)}function Wa(n,e,t,r,i,o){let s=n+Un,a=Ne(),c=tp(a,s);return X_(a,s)?_5(a,ip(),e,c.transform,t,r,i,o,c):c.transform(t,r,i,o)}function X_(n,e){return n[be].data[e].pure}function Y1(n,e){return hp(n,e)}var dh=null;function C5(n){dh!==null&&(n.defaultEncapsulation!==dh.defaultEncapsulation||n.preserveWhitespaces!==dh.preserveWhitespaces)||(dh=n)}var pi=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Z1=new pi("18.2.13");var Cp=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var J_=new X(""),Ju=new X(""),bp=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,ew||(b5(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ke.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(K(ke),K(Ep),K(Ju))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})(),Ep=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return ew?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function b5(n){ew=n}var ew;function Es(n){return!!n&&typeof n.then=="function"}function X1(n){return!!n&&typeof n.subscribe=="function"}var Ip=new X(""),J1=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=z(Ip,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Es(o))t.push(o);else if(X1(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),xp=new X("");function E5(){uM(()=>{throw new ae(600,!1)})}function I5(n){return n.isBoundToModule}var x5=10;function D5(n,e,t){try{let r=t();return Es(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function eA(n,e){return Array.isArray(e)?e.reduce(eA,n):Y(Y({},n),e)}var wi=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=z(t3),this.afterRenderManager=z(O1),this.zonelessEnabled=z(H_),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new tt,this.afterTick=new tt,this.componentTypes=[],this.components=[],this.isStable=z(yi).hasPendingTasks.pipe(ie(t=>!t)),this._injector=z(In)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Vh;if(!this._injector.get(J1).done){let p=!i&&FT(t),g=!1;throw new ae(405,g)}let s;i?s=t:s=this._injector.get(La).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=I5(s)?void 0:this._injector.get(io),c=r||s.selector,l=s.create(kn.NULL,[],c,a),d=l.location.nativeElement,f=l.injector.get(J_,null);return f?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),yh(this.components,l),f?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new ae(101,!1);let t=Ue(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Ue(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(ja,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<x5;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)M5(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>np(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;yh(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(xp,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>yh(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ae(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function yh(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function M5(n,e,t,r){if(!t&&!np(n))return;_1(n,e,t&&!r?0:1)}var s_=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Dp=(()=>{class n{compileModuleSync(t){return new $h(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=VT(t),o=US(i.declarations).reduce((s,a)=>{let c=no(a);return c&&s.push(new Ba(c)),s},[]);return new s_(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),T5=new X("");function S5(n,e,t){let r=new $h(t);return Promise.resolve(r)}function mT(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var A5=(()=>{class n{constructor(){this.zone=z(ke),this.changeDetectionScheduler=z(Va),this.applicationRef=z(wi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function P5({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new ke(me(Y({},tA()),{scheduleInRootZone:t})),[{provide:ke,useFactory:n},{provide:Na,multi:!0,useFactory:()=>{let r=z(A5,{optional:!0});return()=>r.initialize()}},{provide:Na,multi:!0,useFactory:()=>{let r=z(O5);return()=>{r.initialize()}}},e===!0?{provide:E1,useValue:!0}:[],{provide:I1,useValue:t??MS}]}function tA(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var O5=(()=>{class n{constructor(){this.subscription=new vt,this.initialized=!1,this.zone=z(ke),this.pendingTasks=z(yi)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ke.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ke.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var N5=(()=>{class n{constructor(){this.appRef=z(wi),this.taskService=z(yi),this.ngZone=z(ke),this.zonelessEnabled=z(H_),this.disableScheduling=z(E1,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new vt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Oh):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(z(I1,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Nh||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?YM:TS;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Oh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,YM(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function R5(){return typeof $localize<"u"&&$localize.locale||Hh}var Mp=new X("",{providedIn:"root",factory:()=>z(Mp,Te.Optional|Te.SkipSelf)||R5()}),nA=new X("",{providedIn:"root",factory:()=>o5});var Gh=new X("");function fh(n){return!n.moduleRef}function k5(n){let e=fh(n)?n.r3Injector:n.moduleRef.injector,t=e.get(ke);return t.run(()=>{fh(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(di,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),fh(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Gh);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Gh);s.add(o),n.moduleRef.onDestroy(()=>{yh(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return D5(r,t,()=>{let o=e.get(J1);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Mp,Hh);if(a5(s||Hh),fh(n)){let a=e.get(wi);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return F5(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function F5(n,e){let t=n.injector.get(wi);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new ae(-403,!1);e.push(n)}var rA=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>e3(r?.ngZone,me(Y({},tA({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[P5({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:Va,useExisting:N5}],c=wU(t.moduleType,this.injector,a);return k5({moduleRef:c,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=eA({},r);return S5(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ae(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(Gh,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(K(kn))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),Bu=null,iA=new X("");function V5(n){if(Bu&&!Bu.get(iA,!1))throw new ae(400,!1);E5(),Bu=n;let e=n.get(rA);return B5(n),e}function tw(n,e,t=[]){let r=`Platform: ${e}`,i=new X(r);return(o=[])=>{let s=oA();if(!s||s.injector.get(iA,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):V5(L5(a,r))}return j5(i)}}function L5(n=[],e){return kn.create({name:e,providers:[{provide:Xh,useValue:"platform"},{provide:Gh,useValue:new Set([()=>Bu=null])},...n]})}function j5(n){let e=oA();if(!e)throw new ae(401,!1);return e}function oA(){return Bu?.get(rA)??null}function B5(n){n.get(N_,null)?.forEach(t=>t())}function Tp(){return!1}var lo=(()=>{class n{static{this.__NG_ELEMENT_ID__=U5}}return n})();function U5(n){return $5(un(),Ne(),(n&16)===16)}function $5(n,e,t){if(ep(n)&&!t){let r=oo(n.index,e);return new vs(r,r)}else if(n.type&175){let r=e[Fr];return new vs(r,e)}return null}var a_=class{constructor(){}supports(e){return P1(e)}create(e){return new c_(e)}},z5=(n,e)=>e,c_=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||z5}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<gT(r,i,o)?t:r,a=gT(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,d=c-i;if(l!=d){for(let p=0;p<l;p++){let g=p<o.length?o[p]:o[p]=0,v=g+p;d<=v&&v<l&&(o[p]=g+1)}let f=s.previousIndex;o[f]=d-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!P1(e))throw new ae(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,CU(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new u_(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Wh),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Wh),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},u_=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},l_=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Wh=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new l_,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function gT(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function yT(){return new nw([new a_])}var nw=(()=>{class n{static{this.\u0275prov=ne({token:n,providedIn:"root",factory:yT})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||yT()),deps:[[n,new f_,new $a]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new ae(901,!1)}}return n})();var sA=tw(null,"core",[]),aA=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(K(wi))}}static{this.\u0275mod=wt({type:n})}static{this.\u0275inj=_t({})}}return n})();function Is(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function el(n,e){Ga("NgSignals");let t=sM(n);return e?.equal&&(t[ri].equal=e.equal),t}function Ci(n){let e=Ue(null);try{return n()}finally{Ue(e)}}function cA(n){let e=no(n);if(!e)return null;let t=new Ba(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var mA=null;function jr(){return mA}function gA(n){mA??=n}var Sp=class{};var dn=new X(""),uw=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:()=>z(H5),providedIn:"platform"})}}return n})(),yA=new X(""),H5=(()=>{class n extends uw{constructor(){super(),this._doc=z(dn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return jr().getBaseHref(this._doc)}onPopState(t){let r=jr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=jr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function lw(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function uA(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function bi(n){return n&&n[0]!=="?"?"?"+n:n}var Ii=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:()=>z(dw),providedIn:"root"})}}return n})(),vA=new X(""),dw=(()=>{class n extends Ii{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??z(dn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return lw(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+bi(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+bi(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+bi(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(K(uw),K(vA,8))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),_A=(()=>{class n extends Ii{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=lw(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+bi(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+bi(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(K(uw),K(vA,8))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})(),Qa=(()=>{class n{constructor(t){this._subject=new Ke,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=K5(uA(lA(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+bi(r))}normalize(t){return n.stripTrailingSlash(W5(this._basePath,lA(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+bi(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+bi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=bi}static{this.joinWithSlash=lw}static{this.stripTrailingSlash=uA}static{this.\u0275fac=function(r){return new(r||n)(K(Ii))}}static{this.\u0275prov=ne({token:n,factory:()=>G5(),providedIn:"root"})}}return n})();function G5(){return new Qa(K(Ii))}function W5(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function lA(n){return n.replace(/\/index.html$/,"")}function K5(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var wA={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},CA=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(CA||{});var Ei={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function tl(n,e){let t=yp(n),r=t[bs.NumberSymbols][e];if(typeof r>"u"){if(e===Ei.CurrencyDecimal)return t[bs.NumberSymbols][Ei.Decimal];if(e===Ei.CurrencyGroup)return t[bs.NumberSymbols][Ei.Group]}return r}function Q5(n,e){return yp(n)[bs.NumberFormats][e]}function Y5(n){return yp(n)[bs.Currencies]}function Z5(n,e,t="en"){let r=Y5(t)[n]||wA[n]||[],i=r[1];return e==="narrow"&&typeof i=="string"?i:r[0]||n}var X5=2;function J5(n){let e,t=wA[n];return t&&(e=t[2]),typeof e=="number"?e:X5}var e$=/^(\d+)?\.((\d+)(-(\d+))?)?$/,dA=22,Ap=".",nl="0",t$=";",n$=",",rw="#",fA="\xA4";function r$(n,e,t,r,i,o,s=!1){let a="",c=!1;if(!isFinite(n))a=tl(t,Ei.Infinity);else{let l=a$(n);s&&(l=s$(l));let d=e.minInt,f=e.minFrac,p=e.maxFrac;if(o){let k=o.match(e$);if(k===null)throw new Error(`${o} is not a valid digit info`);let P=k[1],U=k[3],H=k[5];P!=null&&(d=iw(P)),U!=null&&(f=iw(U)),H!=null?p=iw(H):U!=null&&f>p&&(p=f)}c$(l,f,p);let g=l.digits,v=l.integerLen,b=l.exponent,_=[];for(c=g.every(k=>!k);v<d;v++)g.unshift(0);for(;v<0;v++)g.unshift(0);v>0?_=g.splice(v,g.length):(_=g,g=[0]);let S=[];for(g.length>=e.lgSize&&S.unshift(g.splice(-e.lgSize,g.length).join(""));g.length>e.gSize;)S.unshift(g.splice(-e.gSize,g.length).join(""));g.length&&S.unshift(g.join("")),a=S.join(tl(t,r)),_.length&&(a+=tl(t,i)+_.join("")),b&&(a+=tl(t,Ei.Exponential)+"+"+b)}return n<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function i$(n,e,t,r,i){let o=Q5(e,CA.Currency),s=o$(o,tl(e,Ei.MinusSign));return s.minFrac=J5(r),s.maxFrac=s.minFrac,r$(n,s,e,Ei.CurrencyGroup,Ei.CurrencyDecimal,i).replace(fA,t).replace(fA,"").trim()}function o$(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(t$),i=r[0],o=r[1],s=i.indexOf(Ap)!==-1?i.split(Ap):[i.substring(0,i.lastIndexOf(nl)+1),i.substring(i.lastIndexOf(nl)+1)],a=s[0],c=s[1]||"";t.posPre=a.substring(0,a.indexOf(rw));for(let d=0;d<c.length;d++){let f=c.charAt(d);f===nl?t.minFrac=t.maxFrac=d+1:f===rw?t.maxFrac=d+1:t.posSuf+=f}let l=a.split(n$);if(t.gSize=l[1]?l[1].length:0,t.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let d=i.length-t.posPre.length-t.posSuf.length,f=o.indexOf(rw);t.negPre=o.substring(0,f).replace(/'/g,""),t.negSuf=o.slice(f+d).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function s$(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function a$(n){let e=Math.abs(n)+"",t=0,r,i,o,s,a;for((i=e.indexOf(Ap))>-1&&(e=e.replace(Ap,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===nl;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===nl;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>dA&&(r=r.splice(0,dA-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function c$(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(e,i),t),s=o+n.integerLen,a=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let f=s;f<r.length;f++)r[f]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let f=1;f<s;f++)r[f]=0}if(a>=5)if(s-1<0){for(let f=0;f>s;f--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let c=o!==0,l=e+n.integerLen,d=r.reduceRight(function(f,p,g,v){return p=p+f,v[g]=p<10?p:p-10,c&&(v[g]===0&&g>=l?v.pop():c=!1),p>=10?1:0},0);d&&(r.unshift(d),n.integerLen++)}function iw(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function Pp(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var ow=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},fo=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new ow(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),hA(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);hA(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(oe(ao),oe(_s),oe(nw))}}static{this.\u0275dir=Ct({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function hA(n,e){n.context.$implicit=e.item}var ho=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new sw,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){pA("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){pA("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(oe(ao),oe(_s))}}static{this.\u0275dir=Ct({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),sw=class{constructor(){this.$implicit=null,this.ngIf=null}};function pA(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${En(e)}'.`)}function bA(n,e){return new ae(2100,!1)}var Op=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw bA(n,t);return t.toUpperCase()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=g_({name:"uppercase",type:n,pure:!0,standalone:!0})}}return n})();var Np=(()=>{class n{constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,i="symbol",o,s){if(!u$(t))return null;s||=this._locale,typeof i=="boolean"&&(i=i?"symbol":"code");let a=r||this._defaultCurrencyCode;i!=="code"&&(i==="symbol"||i==="symbol-narrow"?a=Z5(a,i==="symbol"?"wide":"narrow",s):a=i);try{let c=l$(t);return i$(c,s,a,r,o)}catch(c){throw bA(n,c.message)}}static{this.\u0275fac=function(r){return new(r||n)(oe(Mp,16),oe(nA,16))}}static{this.\u0275pipe=g_({name:"currency",type:n,pure:!0,standalone:!0})}}return n})();function u$(n){return!(n==null||n===""||n!==n)}function l$(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var EA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=wt({type:n})}static{this.\u0275inj=_t({})}}return n})(),fw="browser",d$="server";function f$(n){return n===fw}function po(n){return n===d$}var IA=(()=>{class n{static{this.\u0275prov=ne({token:n,providedIn:"root",factory:()=>f$(z(ln))?new aw(z(dn),window):new cw})}}return n})(),aw=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=h$(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function h$(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var cw=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Ka=class{};var il=class{},kp=class{},xi=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var pw=class{encodeKey(e){return xA(e)}encodeValue(e){return xA(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function p$(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}var m$=/%(\d[a-f0-9])/gi,g$={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function xA(n){return encodeURIComponent(n).replace(m$,(e,t)=>g$[t]??e)}function Rp(n){return`${n}`}var go=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new pw,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=p$(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Rp):[Rp(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Rp(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Rp(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var mw=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function y$(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function DA(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function MA(n){return typeof Blob<"u"&&n instanceof Blob}function TA(n){return typeof FormData<"u"&&n instanceof FormData}function v$(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var rl=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(y$(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new xi,this.context??=new mw,!this.params)this.params=new go,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||DA(this.body)||MA(this.body)||TA(this.body)||v$(this.body)?this.body:this.body instanceof go?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||TA(this.body)?null:MA(this.body)?this.body.type||null:DA(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof go?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,d=e.params||this.params,f=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((p,g)=>p.set(g,e.setHeaders[g]),l)),e.setParams&&(d=Object.keys(e.setParams).reduce((p,g)=>p.set(g,e.setParams[g]),d)),new n(t,r,s,{params:d,headers:l,context:f,reportProgress:c,responseType:i,withCredentials:a,transferCache:o})}},yo=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(yo||{}),ol=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new xi,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Fp=class n extends ol{constructor(e={}){super(e),this.type=yo.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},sl=class n extends ol{constructor(e={}){super(e),this.type=yo.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},mo=class extends ol{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},NA=200,_$=204;function hw(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var vw=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof rl)o=t;else{let c;i.headers instanceof xi?c=i.headers:c=new xi(i.headers);let l;i.params&&(i.params instanceof go?l=i.params:l=new go({fromObject:i.params})),o=new rl(t,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=ue(o).pipe(si(c=>this.handler.handle(c)));if(t instanceof rl||i.observe==="events")return s;let a=s.pipe(at(c=>c instanceof sl));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(ie(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(ie(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(ie(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return a.pipe(ie(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new go().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,hw(i,r))}post(t,r,i={}){return this.request("POST",t,hw(i,r))}put(t,r,i={}){return this.request("PUT",t,hw(i,r))}static{this.\u0275fac=function(r){return new(r||n)(K(il))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})(),w$=/^\)\]\}',?\n/,C$="X-Request-URL";function SA(n){if(n.url)return n.url;let e=C$.toLocaleLowerCase();return n.headers.get(e)}var b$=(()=>{class n{constructor(){this.fetchImpl=z(gw,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=z(ke)}handle(t){return new Ie(r=>{let i=new AbortController;return this.doRequest(t,i.signal,r).then(yw,o=>r.error(new mo({error:o}))),()=>i.abort()})}doRequest(t,r,i){return F(this,null,function*(){let o=this.createRequestInit(t),s;try{let g=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,Y({signal:r},o)));E$(g),i.next({type:yo.Sent}),s=yield g}catch(g){i.error(new mo({error:g,status:g.status??0,statusText:g.statusText,url:t.urlWithParams,headers:g.headers}));return}let a=new xi(s.headers),c=s.statusText,l=SA(s)??t.urlWithParams,d=s.status,f=null;if(t.reportProgress&&i.next(new Fp({headers:a,status:d,statusText:c,url:l})),s.body){let g=s.headers.get("content-length"),v=[],b=s.body.getReader(),_=0,S,k,P=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>F(this,null,function*(){for(;;){let{done:H,value:q}=yield b.read();if(H)break;if(v.push(q),_+=q.length,t.reportProgress){k=t.responseType==="text"?(k??"")+(S??=new TextDecoder).decode(q,{stream:!0}):void 0;let I=()=>i.next({type:yo.DownloadProgress,total:g?+g:void 0,loaded:_,partialText:k});P?P.run(I):I()}}}));let U=this.concatChunks(v,_);try{let H=s.headers.get("Content-Type")??"";f=this.parseBody(t,U,H)}catch(H){i.error(new mo({error:H,headers:new xi(s.headers),status:s.status,statusText:s.statusText,url:SA(s)??t.urlWithParams}));return}}d===0&&(d=f?NA:0),d>=200&&d<300?(i.next(new sl({body:f,headers:a,status:d,statusText:c,url:l})),i.complete()):i.error(new mo({error:f,headers:a,status:d,statusText:c,url:l}))})}parseBody(t,r,i){switch(t.responseType){case"json":let o=new TextDecoder().decode(r).replace(w$,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(t){let r={},i=t.withCredentials?"include":void 0;if(t.headers.forEach((o,s)=>r[o]=s.join(",")),t.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){let o=t.detectContentTypeHeader();o!==null&&(r["Content-Type"]=o)}return{body:t.serializeBody(),method:t.method,headers:r,credentials:i}}concatChunks(t,r){let i=new Uint8Array(r),o=0;for(let s of t)i.set(s,o),o+=s.length;return i}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})(),gw=class{};function yw(){}function E$(n){n.then(yw,yw)}function RA(n,e){return e(n)}function I$(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}function x$(n,e,t){return(r,i)=>Xn(t,()=>e(r,o=>n(o,i)))}var D$=new X(""),_w=new X(""),M$=new X(""),kA=new X("",{providedIn:"root",factory:()=>!0});function T$(){let n=null;return(e,t)=>{n===null&&(n=(z(D$,{optional:!0})??[]).reduceRight(I$,RA));let r=z(yi);if(z(kA)){let o=r.add();return n(e,t).pipe(Zi(()=>r.remove(o)))}else return n(e,t)}}var AA=(()=>{class n extends il{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=z(yi),this.contributeToStability=z(kA)}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(_w),...this.injector.get(M$,[])]));this.chain=r.reduceRight((i,o)=>x$(i,o,this.injector),RA)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Zi(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}static{this.\u0275fac=function(r){return new(r||n)(K(kp),K(In))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})();var S$=/^\)\]\}',?\n/;function A$(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var PA=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new ae(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Me(r.\u0275loadImpl()):ue(null)).pipe(nt(()=>new Ie(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((b,_)=>s.setRequestHeader(b,_.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let b=t.detectContentTypeHeader();b!==null&&s.setRequestHeader("Content-Type",b)}if(t.responseType){let b=t.responseType.toLowerCase();s.responseType=b!=="json"?b:"text"}let a=t.serializeBody(),c=null,l=()=>{if(c!==null)return c;let b=s.statusText||"OK",_=new xi(s.getAllResponseHeaders()),S=A$(s)||t.url;return c=new Fp({headers:_,status:s.status,statusText:b,url:S}),c},d=()=>{let{headers:b,status:_,statusText:S,url:k}=l(),P=null;_!==_$&&(P=typeof s.response>"u"?s.responseText:s.response),_===0&&(_=P?NA:0);let U=_>=200&&_<300;if(t.responseType==="json"&&typeof P=="string"){let H=P;P=P.replace(S$,"");try{P=P!==""?JSON.parse(P):null}catch(q){P=H,U&&(U=!1,P={error:q,text:P})}}U?(o.next(new sl({body:P,headers:b,status:_,statusText:S,url:k||void 0})),o.complete()):o.error(new mo({error:P,headers:b,status:_,statusText:S,url:k||void 0}))},f=b=>{let{url:_}=l(),S=new mo({error:b,status:s.status||0,statusText:s.statusText||"Unknown Error",url:_||void 0});o.error(S)},p=!1,g=b=>{p||(o.next(l()),p=!0);let _={type:yo.DownloadProgress,loaded:b.loaded};b.lengthComputable&&(_.total=b.total),t.responseType==="text"&&s.responseText&&(_.partialText=s.responseText),o.next(_)},v=b=>{let _={type:yo.UploadProgress,loaded:b.loaded};b.lengthComputable&&(_.total=b.total),o.next(_)};return s.addEventListener("load",d),s.addEventListener("error",f),s.addEventListener("timeout",f),s.addEventListener("abort",f),t.reportProgress&&(s.addEventListener("progress",g),a!==null&&s.upload&&s.upload.addEventListener("progress",v)),s.send(a),o.next({type:yo.Sent}),()=>{s.removeEventListener("error",f),s.removeEventListener("abort",f),s.removeEventListener("load",d),s.removeEventListener("timeout",f),t.reportProgress&&(s.removeEventListener("progress",g),a!==null&&s.upload&&s.upload.removeEventListener("progress",v)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(K(Ka))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})(),FA=new X(""),P$="XSRF-TOKEN",O$=new X("",{providedIn:"root",factory:()=>P$}),N$="X-XSRF-TOKEN",R$=new X("",{providedIn:"root",factory:()=>N$}),Vp=class{},k$=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Pp(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(K(dn),K(ln),K(O$))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})();function F$(n,e){let t=n.url.toLowerCase();if(!z(FA)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=z(Vp).getToken(),i=z(R$);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var VA=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(VA||{});function V$(n,e){return{\u0275kind:n,\u0275providers:e}}function L$(...n){let e=[vw,PA,AA,{provide:il,useExisting:AA},{provide:kp,useFactory:()=>z(b$,{optional:!0})??z(PA)},{provide:_w,useValue:F$,multi:!0},{provide:FA,useValue:!0},{provide:Vp,useClass:k$}];for(let t of n)e.push(...t.\u0275providers);return Zh(e)}var OA=new X("");function j$(){return V$(VA.LegacyInterceptors,[{provide:OA,useFactory:T$},{provide:_w,useExisting:OA,multi:!0}])}var LA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=wt({type:n})}static{this.\u0275inj=_t({providers:[L$(j$())]})}}return n})();var bw=class extends Sp{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Ew=class n extends bw{static makeCurrent(){gA(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=B$();return t==null?null:U$(t)}resetBaseElement(){al=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Pp(document.cookie,e)}},al=null;function B$(){return al=al||document.querySelector("base"),al?al.getAttribute("href"):null}function U$(n){return new URL(n,document.baseURI).pathname}var Iw=class{addToWindow(e){Cn.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new ae(5103,!1);return o},Cn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Cn.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=Cn.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};Cn.frameworkStabilizers||(Cn.frameworkStabilizers=[]),Cn.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?jr().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},$$=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})(),xw=new X(""),$A=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new ae(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(K(xw),K(ke))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})(),Lp=class{constructor(e){this._doc=e}},ww="ng-app-id",zA=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=po(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${ww}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(ww),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(ww,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(K(dn),K(ap),K(R_,8),K(ln))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})(),Cw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Mw=/%COMP%/g,qA="%COMP%",z$=`_nghost-${qA}`,q$=`_ngcontent-${qA}`,H$=!0,G$=new X("",{providedIn:"root",factory:()=>H$});function W$(n){return q$.replace(Mw,n)}function K$(n){return z$.replace(Mw,n)}function HA(n,e){return e.map(t=>t.replace(Mw,n))}var jA=(()=>{class n{constructor(t,r,i,o,s,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=po(a),this.defaultRenderer=new cl(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Rr.ShadowDom&&(r=me(Y({},r),{encapsulation:Rr.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof jp?i.applyToHost(t):i instanceof ul&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case Rr.Emulated:o=new jp(c,l,r,this.appId,d,s,a,f);break;case Rr.ShadowDom:return new Dw(c,l,t,r,s,a,this.nonce,f);default:o=new ul(c,l,r,d,s,a,f);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(K($A),K(zA),K(ap),K(G$),K(dn),K(ln),K(ke),K(R_))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})(),cl=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Cw[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(BA(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(BA(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ae(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Cw[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Cw[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(fi.DashCase|fi.Important)?e.style.setProperty(t,r,i&fi.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&fi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=jr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function BA(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Dw=class extends cl{constructor(e,t,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=HA(i.id,i.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ul=class extends cl{constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?HA(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},jp=class extends ul{constructor(e,t,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,t,r,o,s,a,c,l),this.contentAttr=W$(l),this.hostAttr=K$(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},Q$=(()=>{class n extends Lp{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(K(dn))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})(),UA=["alt","control","meta","shift"],Y$={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Z$={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},X$=(()=>{class n extends Lp{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>jr().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),UA.forEach(l=>{let d=r.indexOf(l);d>-1&&(r.splice(d,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=Y$[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),UA.forEach(s=>{if(s!==i){let a=Z$[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(K(dn))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})();function J$(){Ew.makeCurrent()}function ez(){return new di}function tz(){return kS(document),document}var nz=[{provide:ln,useValue:fw},{provide:N_,useValue:J$,multi:!0},{provide:dn,useFactory:tz,deps:[]}],GA=tw(sA,"browser",nz),rz=new X(""),iz=[{provide:Ju,useClass:Iw,deps:[]},{provide:J_,useClass:bp,deps:[ke,Ep,Ju]},{provide:bp,useClass:bp,deps:[ke,Ep,Ju]}],oz=[{provide:Xh,useValue:"root"},{provide:di,useFactory:ez,deps:[]},{provide:xw,useClass:Q$,multi:!0,deps:[dn,ke,ln]},{provide:xw,useClass:X$,multi:!0,deps:[dn]},jA,zA,$A,{provide:ja,useExisting:jA},{provide:Ka,useClass:$$,deps:[]},[]],WA=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:ap,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(K(rz,12))}}static{this.\u0275mod=wt({type:n})}static{this.\u0275inj=_t({providers:[...oz,...iz],imports:[EA,aA]})}}return n})();var KA=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(K(dn))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ee="primary",El=Symbol("RouteTitle"),Ow=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function tc(n){return new Ow(n)}function sz(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function az(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Br(n[t],e[t]))return!1;return!0}function Br(n,e){let t=n?Nw(n):void 0,r=e?Nw(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!sP(n[i],e[i]))return!1;return!0}function Nw(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function sP(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function aP(n){return n.length>0?n[n.length-1]:null}function _o(n){return Qv(n)?n:Es(n)?Me(Promise.resolve(n)):ue(n)}var cz={exact:uP,subset:lP},cP={exact:uz,subset:lz,ignored:()=>!0};function YA(n,e,t){return cz[t.paths](n.root,e.root,t.matrixParams)&&cP[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function uz(n,e){return Br(n,e)}function uP(n,e,t){if(!Ms(n.segments,e.segments)||!$p(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!uP(n.children[r],e.children[r],t))return!1;return!0}function lz(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>sP(n[t],e[t]))}function lP(n,e,t){return dP(n,e,e.segments,t)}function dP(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ms(i,t)||e.hasChildren()||!$p(i,t,r))}else if(n.segments.length===t.length){if(!Ms(n.segments,t)||!$p(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!lP(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Ms(n.segments,i)||!$p(n.segments,i,r)||!n.children[Ee]?!1:dP(n.children[Ee],e,o,r)}}function $p(n,e,t){return e.every((r,i)=>cP[t](n[i].parameters,r.parameters))}var Mi=class{constructor(e=new He([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=tc(this.queryParams),this._queryParamMap}toString(){return hz.serialize(this)}},He=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return zp(this)}},Ds=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=tc(this.parameters),this._parameterMap}toString(){return hP(this)}};function dz(n,e){return Ms(n,e)&&n.every((t,r)=>Br(t.parameters,e[r].parameters))}function Ms(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function fz(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Ee&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Ee&&(t=t.concat(e(i,r)))}),t}var Il=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:()=>new nc,providedIn:"root"})}}return n})(),nc=class{parse(e){let t=new kw(e);return new Mi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${ll(e.root,!0)}`,r=gz(e.queryParams),i=typeof e.fragment=="string"?`#${pz(e.fragment)}`:"";return`${t}${r}${i}`}},hz=new nc;function zp(n){return n.segments.map(e=>hP(e)).join("/")}function ll(n,e){if(!n.hasChildren())return zp(n);if(e){let t=n.children[Ee]?ll(n.children[Ee],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==Ee&&r.push(`${i}:${ll(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=fz(n,(r,i)=>i===Ee?[ll(n.children[Ee],!1)]:[`${i}:${ll(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Ee]!=null?`${zp(n)}/${t[0]}`:`${zp(n)}/(${t.join("//")})`}}function fP(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Bp(n){return fP(n).replace(/%3B/gi,";")}function pz(n){return encodeURI(n)}function Rw(n){return fP(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function qp(n){return decodeURIComponent(n)}function ZA(n){return qp(n.replace(/\+/g,"%20"))}function hP(n){return`${Rw(n.path)}${mz(n.parameters)}`}function mz(n){return Object.entries(n).map(([e,t])=>`;${Rw(e)}=${Rw(t)}`).join("")}function gz(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Bp(t)}=${Bp(i)}`).join("&"):`${Bp(t)}=${Bp(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var yz=/^[^\/()?;#]+/;function Tw(n){let e=n.match(yz);return e?e[0]:""}var vz=/^[^\/()?;=#]+/;function _z(n){let e=n.match(vz);return e?e[0]:""}var wz=/^[^=?&#]+/;function Cz(n){let e=n.match(wz);return e?e[0]:""}var bz=/^[^&#]+/;function Ez(n){let e=n.match(bz);return e?e[0]:""}var kw=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new He([],{}):new He([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ee]=new He(e,t)),r}parseSegment(){let e=Tw(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ae(4009,!1);return this.capture(e),new Ds(qp(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=_z(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Tw(this.remaining);i&&(r=i,this.capture(r))}e[qp(t)]=qp(r)}parseQueryParam(e){let t=Cz(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=Ez(this.remaining);s&&(r=s,this.capture(r))}let i=ZA(t),o=ZA(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Tw(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ae(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Ee);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[Ee]:new He([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ae(4011,!1)}};function pP(n){return n.segments.length>0?new He([],{[Ee]:n}):n}function mP(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=mP(i);if(r===Ee&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new He(n.segments,e);return Iz(t)}function Iz(n){if(n.numberOfChildren===1&&n.children[Ee]){let e=n.children[Ee];return new He(n.segments.concat(e.segments),e.children)}return n}function Ts(n){return n instanceof Mi}function xz(n,e,t=null,r=null){let i=gP(n);return yP(i,e,t,r)}function gP(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new He(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=pP(r);return e??i}function yP(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Sw(i,i,i,t,r);let o=Dz(e);if(o.toRoot())return Sw(i,i,new He([],{}),t,r);let s=Mz(o,i,n),a=s.processChildren?hl(s.segmentGroup,s.index,o.commands):_P(s.segmentGroup,s.index,o.commands);return Sw(i,s.segmentGroup,a,t,r)}function Hp(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function gl(n){return typeof n=="object"&&n!=null&&n.outlets}function Sw(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let s;n===e?s=t:s=vP(n,e,t);let a=pP(mP(s));return new Mi(a,o,i)}function vP(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=vP(o,e,t)}),new He(n.segments,r)}var Gp=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Hp(r[0]))throw new ae(4003,!1);let i=r.find(gl);if(i&&i!==aP(r))throw new ae(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Dz(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Gp(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Gp(t,e,r)}var Xa=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function Mz(n,e,t){if(n.isAbsolute)return new Xa(e,!0,0);if(!t)return new Xa(e,!1,NaN);if(t.parent===null)return new Xa(t,!0,0);let r=Hp(n.commands[0])?0:1,i=t.segments.length-1+r;return Tz(t,i,n.numberOfDoubleDots)}function Tz(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new ae(4005,!1);i=r.segments.length}return new Xa(r,!1,i-o)}function Sz(n){return gl(n[0])?n[0].outlets:{[Ee]:n}}function _P(n,e,t){if(n??=new He([],{}),n.segments.length===0&&n.hasChildren())return hl(n,e,t);let r=Az(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new He(n.segments.slice(0,r.pathIndex),{});return o.children[Ee]=new He(n.segments.slice(r.pathIndex),n.children),hl(o,0,i)}else return r.match&&i.length===0?new He(n.segments,{}):r.match&&!n.hasChildren()?Fw(n,e,t):r.match?hl(n,0,i):Fw(n,e,t)}function hl(n,e,t){if(t.length===0)return new He(n.segments,{});{let r=Sz(t),i={};if(Object.keys(r).some(o=>o!==Ee)&&n.children[Ee]&&n.numberOfChildren===1&&n.children[Ee].segments.length===0){let o=hl(n.children[Ee],e,t);return new He(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=_P(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new He(n.segments,i)}}function Az(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(gl(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!JA(c,l,s))return o;r+=2}else{if(!JA(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Fw(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(gl(o)){let c=Pz(o.outlets);return new He(r,c)}if(i===0&&Hp(t[0])){let c=n.segments[e];r.push(new Ds(c.path,XA(t[0]))),i++;continue}let s=gl(o)?o.outlets[Ee]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Hp(a)?(r.push(new Ds(s,XA(a))),i+=2):(r.push(new Ds(s,{})),i++)}return new He(r,{})}function Pz(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Fw(new He([],{}),0,r))}),e}function XA(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function JA(n,e,t){return n==t.path&&Br(e,t.parameters)}var pl="imperative",Gt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Gt||{}),nr=class{constructor(e,t){this.id=e,this.url=t}},rc=class extends nr{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Gt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Dn=class extends nr{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Gt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},qn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(qn||{}),Wp=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Wp||{}),Di=class extends nr{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Gt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},vo=class extends nr{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Gt.NavigationSkipped}},yl=class extends nr{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Gt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Kp=class extends nr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Gt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vw=class extends nr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Gt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Lw=class extends nr{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Gt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},jw=class extends nr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Gt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bw=class extends nr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Gt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Uw=class{constructor(e){this.route=e,this.type=Gt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},$w=class{constructor(e){this.route=e,this.type=Gt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},zw=class{constructor(e){this.snapshot=e,this.type=Gt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qw=class{constructor(e){this.snapshot=e,this.type=Gt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hw=class{constructor(e){this.snapshot=e,this.type=Gt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gw=class{constructor(e){this.snapshot=e,this.type=Gt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qp=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=Gt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},vl=class{},ic=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function Oz(n,e){return n.providers&&!n._injector&&(n._injector=pp(n.providers,e,`Route: ${n.path}`)),n._injector??e}function wr(n){return n.outlet||Ee}function Nz(n,e){let t=n.filter(r=>wr(r)===e);return t.push(...n.filter(r=>wr(r)!==e)),t}function xl(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Ww=class{get injector(){return xl(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Dl(this.rootInjector),this.attachRef=null}},Dl=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Ww(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(K(In))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Yp=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Kw(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Kw(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Qw(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Qw(e,this._root).map(t=>t.value)}};function Kw(n,e){if(n===e.value)return e;for(let t of e.children){let r=Kw(n,t);if(r)return r}return null}function Qw(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Qw(n,t);if(r.length)return r.unshift(e),r}return[]}var zn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Za(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Zp=class extends Yp{constructor(e,t){super(e),this.snapshot=t,iC(this,e)}toString(){return this.snapshot.toString()}};function wP(n){let e=Rz(n),t=new Ut([new Ds("",{})]),r=new Ut({}),i=new Ut({}),o=new Ut({}),s=new Ut(""),a=new Ti(t,r,o,s,i,Ee,n,e.root);return a.snapshot=e.root,new Zp(new zn(a,[]),e)}function Rz(n){let e={},t={},r={},i="",o=new Ja([],e,r,i,t,Ee,n,null,{});return new Jp("",new zn(o,[]))}var Ti=class{constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ie(l=>l[El]))??ue(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ie(e=>tc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ie(e=>tc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Xp(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:Y(Y({},e.params),n.params),data:Y(Y({},e.data),n.data),resolve:Y(Y(Y(Y({},n.data),e.data),i?.data),n._resolvedData)}:r={params:Y({},n.params),data:Y({},n.data),resolve:Y(Y({},n.data),n._resolvedData??{})},i&&bP(i)&&(r.resolve[El]=i.title),r}var Ja=class{get title(){return this.data?.[El]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=tc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=tc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Jp=class extends Yp{constructor(e,t){super(t),this.url=e,iC(this,t)}toString(){return CP(this._root)}};function iC(n,e){e.value._routerState=n,e.children.forEach(t=>iC(n,t))}function CP(n){let e=n.children.length>0?` { ${n.children.map(CP).join(", ")} } `:"";return`${n.value}${e}`}function Aw(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Br(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Br(e.params,t.params)||n.paramsSubject.next(t.params),az(e.url,t.url)||n.urlSubject.next(t.url),Br(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Yw(n,e){let t=Br(n.params,e.params)&&dz(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Yw(n.parent,e.parent))}function bP(n){return typeof n.title=="string"||n.title===null}var oC=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ee,this.activateEvents=new Ke,this.deactivateEvents=new Ke,this.attachEvents=new Ke,this.detachEvents=new Ke,this.parentContexts=z(Dl),this.location=z(ao),this.changeDetector=z(lo),this.inputBinder=z(im,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ae(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ae(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ae(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new ae(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Zw(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ct({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Jn]})}}return n})(),Zw=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ti?this.route:e===Dl?this.childContexts:this.parent.get(e,t)}},im=new X(""),eP=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Vu([r.queryParams,r.params,r.data]).pipe(nt(([o,s,a],c)=>(a=Y(Y(Y({},o),s),a),c===0?ue(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=cA(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})();function kz(n,e,t){let r=_l(n,e._root,t?t._root:void 0);return new Zp(r,e)}function _l(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=Fz(n,e,t);return new zn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>_l(n,a)),s}}let r=Vz(e.value),i=e.children.map(o=>_l(n,o));return new zn(r,i)}}function Fz(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return _l(n,r,i);return _l(n,r)})}function Vz(n){return new Ti(new Ut(n.url),new Ut(n.params),new Ut(n.queryParams),new Ut(n.fragment),new Ut(n.data),n.outlet,n.component,n)}var wl=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},EP="ngNavigationCancelingError";function em(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Ts(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=IP(!1,qn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function IP(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[EP]=!0,t.cancellationCode=e,t}function Lz(n){return xP(n)&&Ts(n.url)}function xP(n){return!!n&&n[EP]}var jz=(n,e,t,r)=>ie(i=>(new Xw(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Xw=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Aw(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Za(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Za(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Za(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Za(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Gw(o.value.snapshot))}),e.children.length&&this.forwardEvent(new qw(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Aw(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Aw(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},tm=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ec=class{constructor(e,t){this.component=e,this.route=t}};function Bz(n,e,t){let r=n._root,i=e?e._root:null;return dl(r,i,t,[r.value])}function Uz(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ac(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!CT(n)?n:e.get(n):r}function dl(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Za(e);return n.children.forEach(s=>{$z(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ml(a,t.getContext(s),i)),i}function $z(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=zz(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new tm(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?dl(n,e,a?a.children:null,r,i):dl(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ec(a.outlet.component,s))}else s&&ml(e,a,i),i.canActivateChecks.push(new tm(r)),o.component?dl(n,null,a?a.children:null,r,i):dl(n,null,t,r,i);return i}function zz(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ms(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ms(n.url,e.url)||!Br(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Yw(n,e)||!Br(n.queryParams,e.queryParams);case"paramsChange":default:return!Yw(n,e)}}function ml(n,e,t){let r=Za(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?ml(s,e.children.getContext(o),t):ml(s,null,t):ml(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ec(e.outlet.component,i)):t.canDeactivateChecks.push(new ec(null,i)):t.canDeactivateChecks.push(new ec(null,i))}function Ml(n){return typeof n=="function"}function qz(n){return typeof n=="boolean"}function Hz(n){return n&&Ml(n.canLoad)}function Gz(n){return n&&Ml(n.canActivate)}function Wz(n){return n&&Ml(n.canActivateChild)}function Kz(n){return n&&Ml(n.canDeactivate)}function Qz(n){return n&&Ml(n.canMatch)}function DP(n){return n instanceof oi||n?.name==="EmptyError"}var Up=Symbol("INITIAL_VALUE");function oc(){return nt(n=>Vu(n.map(e=>e.pipe(ai(1),ui(Up)))).pipe(ie(e=>{for(let t of e)if(t!==!0){if(t===Up)return Up;if(t===!1||Yz(t))return t}return!0}),at(e=>e!==Up),ai(1)))}function Yz(n){return Ts(n)||n instanceof wl}function Zz(n,e){return At(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ue(me(Y({},t),{guardsResult:!0})):Xz(s,r,i,n).pipe(At(a=>a&&qz(a)?Jz(r,o,n,e):ue(a)),ie(a=>me(Y({},t),{guardsResult:a})))})}function Xz(n,e,t,r){return Me(n).pipe(At(i=>i9(i.component,i.route,t,e,r)),Yn(i=>i!==!0,!0))}function Jz(n,e,t,r){return Me(e).pipe(si(i=>Ea(t9(i.route.parent,r),e9(i.route,r),r9(n,i.path,t),n9(n,i.route,t))),Yn(i=>i!==!0,!0))}function e9(n,e){return n!==null&&e&&e(new Hw(n)),ue(!0)}function t9(n,e){return n!==null&&e&&e(new zw(n)),ue(!0)}function n9(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ue(!0);let i=r.map(o=>rh(()=>{let s=xl(e)??t,a=ac(o,s),c=Gz(a)?a.canActivate(e,n):Xn(s,()=>a(e,n));return _o(c).pipe(Yn())}));return ue(i).pipe(oc())}function r9(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>Uz(s)).filter(s=>s!==null).map(s=>rh(()=>{let a=s.guards.map(c=>{let l=xl(s.node)??t,d=ac(c,l),f=Wz(d)?d.canActivateChild(r,n):Xn(l,()=>d(r,n));return _o(f).pipe(Yn())});return ue(a).pipe(oc())}));return ue(o).pipe(oc())}function i9(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ue(!0);let s=o.map(a=>{let c=xl(e)??i,l=ac(a,c),d=Kz(l)?l.canDeactivate(n,e,t,r):Xn(c,()=>l(n,e,t,r));return _o(d).pipe(Yn())});return ue(s).pipe(oc())}function o9(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ue(!0);let o=i.map(s=>{let a=ac(s,n),c=Hz(a)?a.canLoad(e,t):Xn(n,()=>a(e,t));return _o(c)});return ue(o).pipe(oc(),MP(r))}function MP(n){return zv(Pt(e=>{if(typeof e!="boolean")throw em(n,e)}),ie(e=>e===!0))}function s9(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ue(!0);let o=i.map(s=>{let a=ac(s,n),c=Qz(a)?a.canMatch(e,t):Xn(n,()=>a(e,t));return _o(c)});return ue(o).pipe(oc(),MP(r))}var Cl=class{constructor(e){this.segmentGroup=e||null}},bl=class extends Error{constructor(e){super(),this.urlTree=e}};function Ya(n){return ba(new Cl(n))}function a9(n){return ba(new ae(4e3,!1))}function c9(n){return ba(IP(!1,qn.GuardRejected))}var Jw=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ue(r);if(i.numberOfChildren>1||!i.children[Ee])return a9(`${e.redirectTo}`);i=i.children[Ee]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:d,url:f,outlet:p,params:g,data:v,title:b}=i,_=Xn(o,()=>a({params:g,data:v,queryParams:c,fragment:l,routeConfig:d,url:f,outlet:p,title:b}));if(_ instanceof Mi)throw new bl(_);t=_}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new bl(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Mi(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new He(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new ae(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},eC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function u9(n,e,t,r,i){let o=TP(n,e,t);return o.matched?(r=Oz(e,r),s9(r,e,t,i).pipe(ie(s=>s===!0?o:Y({},eC)))):ue(o)}function TP(n,e,t){if(e.path==="**")return l9(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?Y({},eC):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||sz)(t,n,e);if(!i)return Y({},eC);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?Y(Y({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function l9(n){return{matched:!0,parameters:n.length>0?aP(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function tP(n,e,t,r){return t.length>0&&h9(n,t,r)?{segmentGroup:new He(e,f9(r,new He(t,n.children))),slicedSegments:[]}:t.length===0&&p9(n,t,r)?{segmentGroup:new He(n.segments,d9(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new He(n.segments,n.children),slicedSegments:t}}function d9(n,e,t,r){let i={};for(let o of t)if(om(n,e,o)&&!r[wr(o)]){let s=new He([],{});i[wr(o)]=s}return Y(Y({},r),i)}function f9(n,e){let t={};t[Ee]=e;for(let r of n)if(r.path===""&&wr(r)!==Ee){let i=new He([],{});t[wr(r)]=i}return t}function h9(n,e,t){return t.some(r=>om(n,e,r)&&wr(r)!==Ee)}function p9(n,e,t){return t.some(r=>om(n,e,r))}function om(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function m9(n,e,t){return e.length===0&&!n.children[t]}var tC=class{};function g9(n,e,t,r,i,o,s="emptyOnly"){return new nC(n,e,t,r,i,s,o).recognize()}var y9=31,nC=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Jw(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ae(4002,`'${e.segmentGroup}'`)}recognize(){let e=tP(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ie(({children:t,rootSnapshot:r})=>{let i=new zn(r,t),o=new Jp("",i),s=xz(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Ja([],Object.freeze({}),Object.freeze(Y({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Ee,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Ee,t).pipe(ie(r=>({children:r,rootSnapshot:t})),Qi(r=>{if(r instanceof bl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Cl?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(ie(s=>s instanceof zn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Me(o).pipe(si(s=>{let a=r.children[s],c=Nz(t,s);return this.processSegmentGroup(e,c,a,s,i)}),ci((s,a)=>(s.push(...a),s)),Yi(null),e0(),At(s=>{if(s===null)return Ya(r);let a=SP(s);return v9(a),ue(a)}))}processSegment(e,t,r,i,o,s,a){return Me(t).pipe(si(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(Qi(l=>{if(l instanceof Cl)return ue(null);throw l}))),Yn(c=>!!c),Qi(c=>{if(DP(c))return m9(r,i,o)?ue(new tC):Ya(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return wr(r)!==s&&(s===Ee||!om(i,o,r))?Ya(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):Ya(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:f,remainingSegments:p}=TP(t,i,o);if(!c)return Ya(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>y9&&(this.allowRedirects=!1));let g=new Ja(o,l,Object.freeze(Y({},this.urlTree.queryParams)),this.urlTree.fragment,nP(i),wr(i),i.component??i._loadedComponent??null,i,rP(i)),v=Xp(g,a,this.paramsInheritanceStrategy);g.params=Object.freeze(v.params),g.data=Object.freeze(v.data);let b=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,g,e);return this.applyRedirects.lineralizeSegments(i,b).pipe(At(_=>this.processSegment(e,r,t,_.concat(p),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=u9(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(nt(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(nt(({routes:l})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:p,remainingSegments:g}=c,v=new Ja(p,f,Object.freeze(Y({},this.urlTree.queryParams)),this.urlTree.fragment,nP(r),wr(r),r.component??r._loadedComponent??null,r,rP(r)),b=Xp(v,s,this.paramsInheritanceStrategy);v.params=Object.freeze(b.params),v.data=Object.freeze(b.data);let{segmentGroup:_,slicedSegments:S}=tP(t,p,g,l);if(S.length===0&&_.hasChildren())return this.processChildren(d,l,_,v).pipe(ie(P=>new zn(v,P)));if(l.length===0&&S.length===0)return ue(new zn(v,[]));let k=wr(r)===o;return this.processSegment(d,l,_,S,k?Ee:o,!0,v).pipe(ie(P=>new zn(v,P instanceof zn?[P]:[])))}))):Ya(t)))}getChildConfig(e,t,r){return t.children?ue({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ue({routes:t._loadedRoutes,injector:t._loadedInjector}):o9(e,t,r,this.urlSerializer).pipe(At(i=>i?this.configLoader.loadChildren(e,t).pipe(Pt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):c9(t))):ue({routes:[],injector:e})}};function v9(n){n.sort((e,t)=>e.value.outlet===Ee?-1:t.value.outlet===Ee?1:e.value.outlet.localeCompare(t.value.outlet))}function _9(n){let e=n.value.routeConfig;return e&&e.path===""}function SP(n){let e=[],t=new Set;for(let r of n){if(!_9(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=SP(r.children);e.push(new zn(r.value,i))}return e.filter(r=>!t.has(r))}function nP(n){return n.data||{}}function rP(n){return n.resolve||{}}function w9(n,e,t,r,i,o){return At(s=>g9(n,e,t,r,s.extractedUrl,i,o).pipe(ie(({state:a,tree:c})=>me(Y({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function C9(n,e){return At(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ue(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of AP(c))s.add(l);let a=0;return Me(s).pipe(si(c=>o.has(c)?b9(c,r,n,e):(c.data=Xp(c,c.parent,n).resolve,ue(void 0))),Pt(()=>a++),Ia(1),At(c=>a===s.size?ue(t):wn))})}function AP(n){let e=n.children.map(t=>AP(t)).flat();return[n,...e]}function b9(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!bP(i)&&(o[El]=i.title),E9(o,n,e,r).pipe(ie(s=>(n._resolvedData=s,n.data=Xp(n,n.parent,t).resolve,null)))}function E9(n,e,t,r){let i=Nw(n);if(i.length===0)return ue({});let o={};return Me(i).pipe(At(s=>I9(n[s],e,t,r).pipe(Yn(),Pt(a=>{if(a instanceof wl)throw em(new nc,a);o[s]=a}))),Ia(1),Xv(o),Qi(s=>DP(s)?wn:ba(s)))}function I9(n,e,t,r){let i=xl(e)??r,o=ac(n,i),s=o.resolve?o.resolve(e,t):Xn(i,()=>o(e,t));return _o(s)}function Pw(n){return nt(e=>{let t=n(e);return t?Me(t).pipe(ie(()=>e)):ue(e)})}var PP=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Ee);return r}getResolvedTitleForRoute(t){return t.data[El]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:()=>z(x9),providedIn:"root"})}}return n})(),x9=(()=>{class n extends PP{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(K(KA))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Tl=new X("",{providedIn:"root",factory:()=>({})}),D9=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Nt({type:n,selectors:[["ng-component"]],standalone:!0,features:[W1],decls:1,vars:0,template:function(r,i){r&1&&se(0,"router-outlet")},dependencies:[oC],encapsulation:2})}}return n})();function sC(n){let e=n.children&&n.children.map(sC),t=e?me(Y({},n),{children:e}):Y({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ee&&(t.component=D9),t}var nm=new X(""),aC=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=z(Dp)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ue(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=_o(t.loadComponent()).pipe(ie(OP),Pt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Zi(()=>{this.componentLoaders.delete(t)})),i=new va(r,()=>new tt).pipe(ya());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ue({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=M9(r,this.compiler,t,this.onLoadEndListener).pipe(Zi(()=>{this.childrenLoaders.delete(r)})),s=new va(o,()=>new tt).pipe(ya());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function M9(n,e,t,r){return _o(n.loadChildren()).pipe(ie(OP),At(i=>i instanceof Hu||Array.isArray(i)?ue(i):Me(e.compileModuleAsync(i))),ie(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(nm,[],{optional:!0,self:!0}).flat()),{routes:s.map(sC),injector:o}}))}function T9(n){return n&&typeof n=="object"&&"default"in n}function OP(n){return T9(n)?n.default:n}var cC=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:()=>z(S9),providedIn:"root"})}}return n})(),S9=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),NP=new X(""),RP=new X("");function A9(n,e,t){let r=n.get(RP),i=n.get(dn);return n.get(ke).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),P9(n))),{onViewTransitionCreated:c}=r;return c&&Xn(n,()=>c({transition:a,from:e,to:t})),s})}function P9(n){return new Promise(e=>{K_({read:()=>setTimeout(e)},{injector:n})})}var O9=new X(""),uC=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new tt,this.transitionAbortSubject=new tt,this.configLoader=z(aC),this.environmentInjector=z(In),this.urlSerializer=z(Il),this.rootContexts=z(Dl),this.location=z(Qa),this.inputBindingEnabled=z(im,{optional:!0})!==null,this.titleStrategy=z(PP),this.options=z(Tl,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=z(cC),this.createViewTransition=z(NP,{optional:!0}),this.navigationErrorHandler=z(O9,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ue(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Uw(i)),r=i=>this.events.next(new $w(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(me(Y(Y({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Ut({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:pl,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(at(o=>o.id!==0),ie(o=>me(Y({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),nt(o=>{let s=!1,a=!1;return ue(o).pipe(nt(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",qn.SupersededByNewNavigation),wn;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?me(Y({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&d!=="reload"){let f="";return this.events.next(new vo(c.id,this.urlSerializer.serialize(c.rawUrl),f,Wp.IgnoredSameUrlNavigation)),c.resolve(!1),wn}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return ue(c).pipe(nt(f=>{let p=this.transitions?.getValue();return this.events.next(new rc(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),p!==this.transitions?.getValue()?wn:Promise.resolve(f)}),w9(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Pt(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=me(Y({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let p=new Kp(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:p,source:g,restoredState:v,extras:b}=c,_=new rc(f,this.urlSerializer.serialize(p),g,v);this.events.next(_);let S=wP(this.rootComponentType).snapshot;return this.currentTransition=o=me(Y({},c),{targetSnapshot:S,urlAfterRedirects:p,extras:me(Y({},b),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=p,ue(o)}else{let f="";return this.events.next(new vo(c.id,this.urlSerializer.serialize(c.extractedUrl),f,Wp.IgnoredByUrlHandlingStrategy)),c.resolve(!1),wn}}),Pt(c=>{let l=new Vw(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),ie(c=>(this.currentTransition=o=me(Y({},c),{guards:Bz(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),Zz(this.environmentInjector,c=>this.events.next(c)),Pt(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw em(this.urlSerializer,c.guardsResult);let l=new Lw(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),at(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",qn.GuardRejected),!1)),Pw(c=>{if(c.guards.canActivateChecks.length)return ue(c).pipe(Pt(l=>{let d=new jw(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),nt(l=>{let d=!1;return ue(l).pipe(C9(this.paramsInheritanceStrategy,this.environmentInjector),Pt({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",qn.NoDataFromResolver)}}))}),Pt(l=>{let d=new Bw(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),Pw(c=>{let l=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(Pt(p=>{d.component=p}),ie(()=>{})));for(let p of d.children)f.push(...l(p));return f};return Vu(l(c.targetSnapshot.root)).pipe(Yi(null),ai(1))}),Pw(()=>this.afterPreactivation()),nt(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,d=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return d?Me(d).pipe(ie(()=>o)):ue(o)}),ie(c=>{let l=kz(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=me(Y({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Pt(()=>{this.events.next(new vl)}),jz(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),ai(1),Pt({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Dn(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),as(this.transitionAbortSubject.pipe(Pt(c=>{throw c}))),Zi(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",qn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Qi(c=>{if(a=!0,xP(c))this.events.next(new Di(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),Lz(c)?this.events.next(new ic(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let l=new yl(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let d=Xn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(d instanceof wl){let{message:f,cancellationCode:p}=em(this.urlSerializer,d);this.events.next(new Di(o.id,this.urlSerializer.serialize(o.extractedUrl),f,p)),this.events.next(new ic(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(l);let f=t.errorHandler(c);o.resolve(!!f)}}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return wn}))}))}cancelNavigationTransition(t,r,i){let o=new Di(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function N9(n){return n!==pl}var R9=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:()=>z(k9),providedIn:"root"})}}return n})(),rC=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},k9=(()=>{class n extends rC{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Cs(n)))(i||n)}})()}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),kP=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:()=>z(F9),providedIn:"root"})}}return n})(),F9=(()=>{class n extends kP{constructor(){super(...arguments),this.location=z(Qa),this.urlSerializer=z(Il),this.options=z(Tl,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=z(cC),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Mi,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=wP(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof rc)this.stateMemento=this.createStateMemento();else if(t instanceof vo)this.rawUrlTree=r.initialUrl;else if(t instanceof Kp){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof vl?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Di&&(t.code===qn.GuardRejected||t.code===qn.NoDataFromResolver)?this.restoreHistory(r):t instanceof yl?this.restoreHistory(r,!0):t instanceof Dn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Mi?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=Y(Y({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=Y(Y({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Cs(n)))(i||n)}})()}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),fl=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(fl||{});function FP(n,e){n.events.pipe(at(t=>t instanceof Dn||t instanceof Di||t instanceof yl||t instanceof vo),ie(t=>t instanceof Dn||t instanceof vo?fl.COMPLETE:(t instanceof Di?t.code===qn.Redirect||t.code===qn.SupersededByNewNavigation:!1)?fl.REDIRECTING:fl.FAILED),at(t=>t!==fl.REDIRECTING),ai(1)).subscribe(()=>{e()})}function V9(n){throw n}var L9={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},j9={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},$t=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=z(Cp),this.stateManager=z(kP),this.options=z(Tl,{optional:!0})||{},this.pendingTasks=z(yi),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=z(uC),this.urlSerializer=z(Il),this.location=z(Qa),this.urlHandlingStrategy=z(cC),this._events=new tt,this.errorHandler=this.options.errorHandler||V9,this.navigated=!1,this.routeReuseStrategy=z(R9),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=z(nm,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!z(im,{optional:!0}),this.eventsSubscription=new vt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Di&&r.code!==qn.Redirect&&r.code!==qn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Dn)this.navigated=!0;else if(r instanceof ic){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=Y({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||N9(i.source)},s);this.scheduleNavigation(a,pl,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}U9(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),pl,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=Y({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(sC),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=Y(Y({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let p=i?i.snapshot:this.routerState.snapshot.root;f=gP(p)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return yP(f,t,d,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Ts(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,pl,null,r)}navigate(t,r={skipLocationChange:!1}){return B9(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=Y({},L9):r===!1?i=Y({},j9):i=r,Ts(t))return YA(this.currentUrlTree,t,i);let o=this.parseUrl(t);return YA(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((f,p)=>{a=f,c=p});let d=this.pendingTasks.add();return FP(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function B9(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ae(4008,!1)}function U9(n){return!(n instanceof vl)&&!(n instanceof ic)}var sc=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new tt,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Dn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ts(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:LS(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Ts(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(oe($t),oe(Ti),S_("tabindex"),oe(vr),oe(xn),oe(Ii))}}static{this.\u0275dir=Ct({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&de("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&gp("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Is],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Is],replaceUrl:[2,"replaceUrl","replaceUrl",Is],routerLink:"routerLink"},standalone:!0,features:[W_,Jn]})}}return n})(),VP=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Ke,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof Dn&&this.update()})}ngAfterContentInit(){ue(this.links.changes,ue(null)).pipe(Pr()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Me(t).pipe(Pr()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=$9(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static{this.\u0275fac=function(r){return new(r||n)(oe($t),oe(xn),oe(vr),oe(lo),oe(sc,8))}}static{this.\u0275dir=Ct({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&z1(o,sc,5),r&2){let s;vp(s=_p())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Jn]})}}return n})();function $9(n){return!!n.paths}var rm=class{};var z9=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(at(t=>t instanceof Dn),si(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=pp(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Me(i).pipe(Pr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=ue(null);let o=i.pipe(At(s=>s===null?ue(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Me([o,s]).pipe(Pr())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(K($t),K(Dp),K(In),K(rm),K(aC))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),LP=new X(""),q9=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof rc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Dn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof vo&&t.code===Wp.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Qp&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Qp(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){XS()}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})();function H9(n){return n.routerState.root}function Sl(n,e){return{\u0275kind:n,\u0275providers:e}}function G9(){let n=z(kn);return e=>{let t=n.get(wi);if(e!==t.components[0])return;let r=n.get($t),i=n.get(jP);n.get(lC)===1&&r.initialNavigation(),n.get(BP,null,Te.Optional)?.setUpPreloading(),n.get(LP,null,Te.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var jP=new X("",{factory:()=>new tt}),lC=new X("",{providedIn:"root",factory:()=>1});function W9(){return Sl(2,[{provide:lC,useValue:0},{provide:Ip,multi:!0,deps:[kn],useFactory:e=>{let t=e.get(yA,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get($t),o=e.get(jP);FP(i,()=>{r(!0)}),e.get(uC).afterPreactivation=()=>(r(!0),o.closed?ue(void 0):o),i.initialNavigation()}))}}])}function K9(){return Sl(3,[{provide:Ip,multi:!0,useFactory:()=>{let e=z($t);return()=>{e.setUpLocationChangeListener()}}},{provide:lC,useValue:2}])}var BP=new X("");function Q9(n){return Sl(0,[{provide:BP,useExisting:z9},{provide:rm,useExisting:n}])}function Y9(){return Sl(8,[eP,{provide:im,useExisting:eP}])}function Z9(n){let e=[{provide:NP,useValue:A9},{provide:RP,useValue:Y({skipNextTransition:!!n?.skipInitialTransition},n)}];return Sl(9,e)}var iP=new X("ROUTER_FORROOT_GUARD"),X9=[Qa,{provide:Il,useClass:nc},$t,Dl,{provide:Ti,useFactory:H9,deps:[$t]},aC,[]],dC=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[X9,[],{provide:nm,multi:!0,useValue:t},{provide:iP,useFactory:n6,deps:[[$t,new $a,new f_]]},{provide:Tl,useValue:r||{}},r?.useHash?e6():t6(),J9(),r?.preloadingStrategy?Q9(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?r6(r):[],r?.bindToComponentInputs?Y9().\u0275providers:[],r?.enableViewTransitions?Z9().\u0275providers:[],i6()]}}static forChild(t){return{ngModule:n,providers:[{provide:nm,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(K(iP,8))}}static{this.\u0275mod=wt({type:n})}static{this.\u0275inj=_t({})}}return n})();function J9(){return{provide:LP,useFactory:()=>{let n=z(IA),e=z(ke),t=z(Tl),r=z(uC),i=z(Il);return t.scrollOffset&&n.setOffset(t.scrollOffset),new q9(i,r,n,e,t)}}}function e6(){return{provide:Ii,useClass:_A}}function t6(){return{provide:Ii,useClass:dw}}function n6(n){return"guarded"}function r6(n){return[n.initialNavigation==="disabled"?K9().\u0275providers:[],n.initialNavigation==="enabledBlocking"?W9().\u0275providers:[]]}var oP=new X("");function i6(){return[{provide:oP,useFactory:G9},{provide:xp,multi:!0,useExisting:oP}]}var o6="firebase",s6="10.12.0";Ki(o6,s6,"app");var Pl=new pi("ANGULARFIRE2_VERSION");var a6=(n,e)=>{let t=e?[e]:ZD(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Ol=class{constructor(){return a6(c6)}},c6="app-check";function fC(){}var UP=class{zone;delegate;constructor(n,e=Wv){this.zone=n,this.delegate=e}now(){return this.delegate.now()}schedule(n,e,t){let r=this.zone,i=function(o){r.runGuarded(()=>{n.apply(this,[o])})};return this.delegate.schedule(i,e,t)}},u6=class{zone;task=null;constructor(n){this.zone=n}call(n,e){let t=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",fC,{},fC,fC)),e.pipe(Pt({next:t,complete:t,error:t})).subscribe(n).add(t)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},am=class sm{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new UP(Zone.current)),this.insideAngular=t.run(()=>new UP(Zone.current,Fu)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||sm)(K(ke))};static \u0275prov=ne({token:sm,factory:sm.\u0275fac,providedIn:"root"})};function l6(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function fn(n){return d6(l6())(n)}function d6(n){return function(t){return t=t.lift(new u6(n.ngZone)),t.pipe(fr(n.outsideAngular),Qn(n.insideAngular))}}var p6=new Map,m6={activated:!1,tokenObservers:[]},g6={initialized:!1,enabled:!1};function Cr(n){return p6.get(n)||Object.assign({},m6)}function WP(){return g6}var y6="https://content-firebaseappcheck.googleapis.com/v1";var v6="exchangeDebugToken",zP={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},qne=24*60*60*1e3;var pC=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return F(this,null,function*(){this.stop();try{this.pending=new Tv,this.pending.promise.catch(t=>{}),yield _6(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Tv,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function _6(n){return new Promise(e=>{setTimeout(e,n)})}var w6={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},wo=new QD("appCheck","AppCheck",w6);function KP(n){if(!Cr(n).activated)throw wo.create("use-before-activation",{appName:n.name})}function QP(r,i){return F(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let g=yield s.getHeartbeatsHeader();g&&(o["X-Firebase-Client"]=g)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(g){throw wo.create("fetch-network-error",{originalErrorMessage:g?.message})}if(c.status!==200)throw wo.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(g){throw wo.create("fetch-parse-error",{originalErrorMessage:g?.message})}let d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw wo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let f=Number(d[1])*1e3,p=Date.now();return{token:l.token,expireTimeMillis:p+f,issuedAtTimeMillis:p}})}function YP(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${y6}/projects/${t}/apps/${r}:${v6}?key=${i}`,body:{debug_token:e}}}var C6="firebase-app-check-database",b6=1,mC="firebase-app-check-store";var cm=null;function E6(){return cm||(cm=new Promise((n,e)=>{try{let t=indexedDB.open(C6,b6);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(wo.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(mC,{keyPath:"compositeKey"})}}}catch(t){e(wo.create("storage-open",{originalErrorMessage:t?.message}))}}),cm)}function I6(n,e){return x6(D6(n),e)}function x6(n,e){return F(this,null,function*(){let r=(yield E6()).transaction(mC,"readwrite"),o=r.objectStore(mC).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(wo.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function D6(n){return`${n.options.appId}-${n.name}`}var gC=new Mf("@firebase/app-check");function hC(n,e){return Df()?I6(n,e).catch(t=>{gC.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function ZP(){return WP().enabled}function XP(){return F(this,null,function*(){let n=WP();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var M6={error:"UNKNOWN_ERROR"};function T6(n){return GD.encodeString(JSON.stringify(n),!1)}function yC(n,e=!1){return F(this,null,function*(){let t=n.app;KP(t);let r=Cr(t),i=r.token,o;if(i&&!Nl(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(Nl(c)?i=c:yield hC(t,void 0))}if(!e&&i&&Nl(i))return{token:i.token};let s=!1;if(ZP()){r.exchangeTokenPromise||(r.exchangeTokenPromise=QP(YP(t,yield XP()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield hC(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield Cr(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?gC.warn(c.message):gC.error(c),o=c}let a;return i?o?Nl(i)?a={token:i.token,internalError:o}:a=HP(o):(a={token:i.token},r.token=i,yield hC(t,i)):a=HP(o),s&&O6(t,a),a})}function S6(n){return F(this,null,function*(){let e=n.app;KP(e);let{provider:t}=Cr(e);if(ZP()){let r=yield XP(),{token:i}=yield QP(YP(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function A6(n,e,t,r){let{app:i}=n,o=Cr(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Nl(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),qP(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>qP(n))}function JP(n,e){let t=Cr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function qP(n){let{app:e}=n,t=Cr(e),r=t.tokenRefresher;r||(r=P6(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function P6(n){let{app:e}=n;return new pC(()=>F(this,null,function*(){let t=Cr(e),r;if(t.token?r=yield yC(n,!0):r=yield yC(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Cr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},zP.RETRIAL_MIN_WAIT,zP.RETRIAL_MAX_WAIT)}function O6(n,e){let t=Cr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Nl(n){return n.expireTimeMillis-Date.now()>0}function HP(n){return{token:T6(M6),error:n}}var vC=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Cr(this.app);for(let t of e)JP(this.app,t.next);return Promise.resolve()}};function N6(n,e){return new vC(n,e)}function R6(n){return{getToken:e=>yC(n,e),getLimitedUseToken:()=>S6(n),addTokenListener:e=>A6(n,"INTERNAL",e),removeTokenListener:e=>JP(n.app,e)}}var k6="@firebase/app-check",F6="0.8.4";var V6="app-check",GP="app-check-internal";function L6(){Au(new ns(V6,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return N6(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(GP).initialize()})),Au(new ns(GP,n=>{let e=n.getProvider("app-check").getImmediate();return R6(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ki(k6,F6)}L6();var B6=["localhost","0.0.0.0","127.0.0.1"],ere=typeof window<"u"&&B6.includes(window.location.hostname);var U6="firebase",$6="10.12.0";Pn.registerVersion(U6,$6,"app-compat");var z6=["ngOnDestroy"],nO=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(z6.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(d=>{let f=d?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,f),f})})})});var rO=class{constructor(n){return n}},cc=new X("angularfire2.app.options"),uc=new X("angularfire2.app.name");function Rl(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=Pn.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Pn.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;q6("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new rO(s)}var q6=(n,...e)=>{Tp()&&typeof console<"u"&&console[n](...e)},H6={provide:rO,useFactory:Rl,deps:[cc,ke,[new $a,uc]]},iO=class um{static initializeApp(t,r){return{ngModule:um,providers:[{provide:cc,useValue:t},{provide:uc,useValue:r}]}}constructor(t){Pn.registerVersion("angularfire",Pl.full,"core"),Pn.registerVersion("angularfire",Pl.full,"app-compat"),Pn.registerVersion("angular",Z1.full,t.toString())}static \u0275fac=function(r){return new(r||um)(K(ln))};static \u0275mod=wt({type:um});static \u0275inj=_t({providers:[H6]})};function lm(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return G6(i,s)||(tO("error",`${e} was already initialized on the ${t} Firebase App with different settings.${W6?" You may need to reload as Firebase is not HMR aware.":""}`),tO("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function G6(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var W6=typeof module<"u"&&!!module.hot,tO=(n,...e)=>{Tp()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var _C=new X("angularfire2.auth.use-emulator"),wC=new X("angularfire2.auth.settings"),CC=new X("angularfire2.auth.tenant-id"),bC=new X("angularfire2.auth.langugage-code"),EC=new X("angularfire2.auth.use-device-language"),IC=new X("angularfire.auth.persistence"),xC=(n,e,t,r,i,o,s,a)=>lm(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[l,d]of Object.entries(s))c.settings[l]=d;return a&&c.setPersistence(a),c},[t,r,i,o,s,a]),fm=class dm{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,c,l,d,f,p,g){let v=new tt,b=ue(void 0).pipe(Qn(s.outsideAngular),nt(()=>o.runOutsideAngular(()=>import("./chunk-2FL5T6Z3.js"))),ie(()=>Rl(t,o,r)),ie(_=>xC(_,o,a,l,d,f,c,p)),oh({bufferSize:1,refCount:!1}));if(po(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ue(null);else{b.pipe(Yn()).subscribe();let _=b.pipe(nt(P=>P.getRedirectResult().then(U=>U,()=>null)),fn,oh({bufferSize:1,refCount:!1})),S=b.pipe(nt(P=>new Ie(U=>({unsubscribe:o.runOutsideAngular(()=>P.onAuthStateChanged(H=>U.next(H),H=>U.error(H),()=>U.complete()))})))),k=b.pipe(nt(P=>new Ie(U=>({unsubscribe:o.runOutsideAngular(()=>P.onIdTokenChanged(H=>U.next(H),H=>U.error(H),()=>U.complete()))}))));this.authState=_.pipe(sh(S),fr(s.outsideAngular),Qn(s.insideAngular)),this.user=_.pipe(sh(k),fr(s.outsideAngular),Qn(s.insideAngular)),this.idToken=this.user.pipe(nt(P=>P?Me(P.getIdToken()):ue(null))),this.idTokenResult=this.user.pipe(nt(P=>P?Me(P.getIdTokenResult()):ue(null))),this.credential=Zv(_,v,this.authState.pipe(at(P=>!P))).pipe(ie(P=>P?.user?P:null),fr(s.outsideAngular),Qn(s.insideAngular))}return nO(this,b,o,{spy:{apply:(_,S,k)=>{(_.startsWith("signIn")||_.startsWith("createUser"))&&k.then(P=>v.next(P))}}})}static \u0275fac=function(r){return new(r||dm)(K(cc),K(uc,8),K(ln),K(ke),K(am),K(_C,8),K(wC,8),K(CC,8),K(bC,8),K(EC,8),K(IC,8),K(Ol,8))};static \u0275prov=ne({token:dm,factory:dm.\u0275fac,providedIn:"any"})};var sO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},aO={};var Co,DC;(function(){var n;function e(I,w){function C(){}C.prototype=w.prototype,I.D=w.prototype,I.prototype=new C,I.prototype.constructor=I,I.C=function(D,x,A){for(var E=Array(arguments.length-2),N=2;N<arguments.length;N++)E[N-2]=arguments[N];return w.prototype[x].apply(D,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,w,C){C||(C=0);var D=Array(16);if(typeof w=="string")for(var x=0;16>x;++x)D[x]=w.charCodeAt(C++)|w.charCodeAt(C++)<<8|w.charCodeAt(C++)<<16|w.charCodeAt(C++)<<24;else for(x=0;16>x;++x)D[x]=w[C++]|w[C++]<<8|w[C++]<<16|w[C++]<<24;w=I.g[0],C=I.g[1],x=I.g[2];var A=I.g[3],E=w+(A^C&(x^A))+D[0]+3614090360&4294967295;w=C+(E<<7&4294967295|E>>>25),E=A+(x^w&(C^x))+D[1]+3905402710&4294967295,A=w+(E<<12&4294967295|E>>>20),E=x+(C^A&(w^C))+D[2]+606105819&4294967295,x=A+(E<<17&4294967295|E>>>15),E=C+(w^x&(A^w))+D[3]+3250441966&4294967295,C=x+(E<<22&4294967295|E>>>10),E=w+(A^C&(x^A))+D[4]+4118548399&4294967295,w=C+(E<<7&4294967295|E>>>25),E=A+(x^w&(C^x))+D[5]+1200080426&4294967295,A=w+(E<<12&4294967295|E>>>20),E=x+(C^A&(w^C))+D[6]+2821735955&4294967295,x=A+(E<<17&4294967295|E>>>15),E=C+(w^x&(A^w))+D[7]+4249261313&4294967295,C=x+(E<<22&4294967295|E>>>10),E=w+(A^C&(x^A))+D[8]+1770035416&4294967295,w=C+(E<<7&4294967295|E>>>25),E=A+(x^w&(C^x))+D[9]+2336552879&4294967295,A=w+(E<<12&4294967295|E>>>20),E=x+(C^A&(w^C))+D[10]+4294925233&4294967295,x=A+(E<<17&4294967295|E>>>15),E=C+(w^x&(A^w))+D[11]+2304563134&4294967295,C=x+(E<<22&4294967295|E>>>10),E=w+(A^C&(x^A))+D[12]+1804603682&4294967295,w=C+(E<<7&4294967295|E>>>25),E=A+(x^w&(C^x))+D[13]+4254626195&4294967295,A=w+(E<<12&4294967295|E>>>20),E=x+(C^A&(w^C))+D[14]+2792965006&4294967295,x=A+(E<<17&4294967295|E>>>15),E=C+(w^x&(A^w))+D[15]+1236535329&4294967295,C=x+(E<<22&4294967295|E>>>10),E=w+(x^A&(C^x))+D[1]+4129170786&4294967295,w=C+(E<<5&4294967295|E>>>27),E=A+(C^x&(w^C))+D[6]+3225465664&4294967295,A=w+(E<<9&4294967295|E>>>23),E=x+(w^C&(A^w))+D[11]+643717713&4294967295,x=A+(E<<14&4294967295|E>>>18),E=C+(A^w&(x^A))+D[0]+3921069994&4294967295,C=x+(E<<20&4294967295|E>>>12),E=w+(x^A&(C^x))+D[5]+3593408605&4294967295,w=C+(E<<5&4294967295|E>>>27),E=A+(C^x&(w^C))+D[10]+38016083&4294967295,A=w+(E<<9&4294967295|E>>>23),E=x+(w^C&(A^w))+D[15]+3634488961&4294967295,x=A+(E<<14&4294967295|E>>>18),E=C+(A^w&(x^A))+D[4]+3889429448&4294967295,C=x+(E<<20&4294967295|E>>>12),E=w+(x^A&(C^x))+D[9]+568446438&4294967295,w=C+(E<<5&4294967295|E>>>27),E=A+(C^x&(w^C))+D[14]+3275163606&4294967295,A=w+(E<<9&4294967295|E>>>23),E=x+(w^C&(A^w))+D[3]+4107603335&4294967295,x=A+(E<<14&4294967295|E>>>18),E=C+(A^w&(x^A))+D[8]+1163531501&4294967295,C=x+(E<<20&4294967295|E>>>12),E=w+(x^A&(C^x))+D[13]+2850285829&4294967295,w=C+(E<<5&4294967295|E>>>27),E=A+(C^x&(w^C))+D[2]+4243563512&4294967295,A=w+(E<<9&4294967295|E>>>23),E=x+(w^C&(A^w))+D[7]+1735328473&4294967295,x=A+(E<<14&4294967295|E>>>18),E=C+(A^w&(x^A))+D[12]+2368359562&4294967295,C=x+(E<<20&4294967295|E>>>12),E=w+(C^x^A)+D[5]+4294588738&4294967295,w=C+(E<<4&4294967295|E>>>28),E=A+(w^C^x)+D[8]+2272392833&4294967295,A=w+(E<<11&4294967295|E>>>21),E=x+(A^w^C)+D[11]+1839030562&4294967295,x=A+(E<<16&4294967295|E>>>16),E=C+(x^A^w)+D[14]+4259657740&4294967295,C=x+(E<<23&4294967295|E>>>9),E=w+(C^x^A)+D[1]+2763975236&4294967295,w=C+(E<<4&4294967295|E>>>28),E=A+(w^C^x)+D[4]+1272893353&4294967295,A=w+(E<<11&4294967295|E>>>21),E=x+(A^w^C)+D[7]+4139469664&4294967295,x=A+(E<<16&4294967295|E>>>16),E=C+(x^A^w)+D[10]+3200236656&4294967295,C=x+(E<<23&4294967295|E>>>9),E=w+(C^x^A)+D[13]+681279174&4294967295,w=C+(E<<4&4294967295|E>>>28),E=A+(w^C^x)+D[0]+3936430074&4294967295,A=w+(E<<11&4294967295|E>>>21),E=x+(A^w^C)+D[3]+3572445317&4294967295,x=A+(E<<16&4294967295|E>>>16),E=C+(x^A^w)+D[6]+76029189&4294967295,C=x+(E<<23&4294967295|E>>>9),E=w+(C^x^A)+D[9]+3654602809&4294967295,w=C+(E<<4&4294967295|E>>>28),E=A+(w^C^x)+D[12]+3873151461&4294967295,A=w+(E<<11&4294967295|E>>>21),E=x+(A^w^C)+D[15]+530742520&4294967295,x=A+(E<<16&4294967295|E>>>16),E=C+(x^A^w)+D[2]+3299628645&4294967295,C=x+(E<<23&4294967295|E>>>9),E=w+(x^(C|~A))+D[0]+4096336452&4294967295,w=C+(E<<6&4294967295|E>>>26),E=A+(C^(w|~x))+D[7]+1126891415&4294967295,A=w+(E<<10&4294967295|E>>>22),E=x+(w^(A|~C))+D[14]+2878612391&4294967295,x=A+(E<<15&4294967295|E>>>17),E=C+(A^(x|~w))+D[5]+4237533241&4294967295,C=x+(E<<21&4294967295|E>>>11),E=w+(x^(C|~A))+D[12]+1700485571&4294967295,w=C+(E<<6&4294967295|E>>>26),E=A+(C^(w|~x))+D[3]+2399980690&4294967295,A=w+(E<<10&4294967295|E>>>22),E=x+(w^(A|~C))+D[10]+4293915773&4294967295,x=A+(E<<15&4294967295|E>>>17),E=C+(A^(x|~w))+D[1]+2240044497&4294967295,C=x+(E<<21&4294967295|E>>>11),E=w+(x^(C|~A))+D[8]+1873313359&4294967295,w=C+(E<<6&4294967295|E>>>26),E=A+(C^(w|~x))+D[15]+4264355552&4294967295,A=w+(E<<10&4294967295|E>>>22),E=x+(w^(A|~C))+D[6]+2734768916&4294967295,x=A+(E<<15&4294967295|E>>>17),E=C+(A^(x|~w))+D[13]+1309151649&4294967295,C=x+(E<<21&4294967295|E>>>11),E=w+(x^(C|~A))+D[4]+4149444226&4294967295,w=C+(E<<6&4294967295|E>>>26),E=A+(C^(w|~x))+D[11]+3174756917&4294967295,A=w+(E<<10&4294967295|E>>>22),E=x+(w^(A|~C))+D[2]+718787259&4294967295,x=A+(E<<15&4294967295|E>>>17),E=C+(A^(x|~w))+D[9]+3951481745&4294967295,I.g[0]=I.g[0]+w&4294967295,I.g[1]=I.g[1]+(x+(E<<21&4294967295|E>>>11))&4294967295,I.g[2]=I.g[2]+x&4294967295,I.g[3]=I.g[3]+A&4294967295}r.prototype.u=function(I,w){w===void 0&&(w=I.length);for(var C=w-this.blockSize,D=this.B,x=this.h,A=0;A<w;){if(x==0)for(;A<=C;)i(this,I,A),A+=this.blockSize;if(typeof I=="string"){for(;A<w;)if(D[x++]=I.charCodeAt(A++),x==this.blockSize){i(this,D),x=0;break}}else for(;A<w;)if(D[x++]=I[A++],x==this.blockSize){i(this,D),x=0;break}}this.h=x,this.o+=w},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var w=1;w<I.length-8;++w)I[w]=0;var C=8*this.o;for(w=I.length-8;w<I.length;++w)I[w]=C&255,C/=256;for(this.u(I),I=Array(16),w=C=0;4>w;++w)for(var D=0;32>D;D+=8)I[C++]=this.g[w]>>>D&255;return I};function o(I,w){var C=a;return Object.prototype.hasOwnProperty.call(C,I)?C[I]:C[I]=w(I)}function s(I,w){this.h=w;for(var C=[],D=!0,x=I.length-1;0<=x;x--){var A=I[x]|0;D&&A==w||(C[x]=A,D=!1)}this.g=C}var a={};function c(I){return-128<=I&&128>I?o(I,function(w){return new s([w|0],0>w?-1:0)}):new s([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return _(l(-I));for(var w=[],C=1,D=0;I>=C;D++)w[D]=I/C|0,C*=4294967296;return new s(w,0)}function d(I,w){if(I.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(I.charAt(0)=="-")return _(d(I.substring(1),w));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=l(Math.pow(w,8)),D=f,x=0;x<I.length;x+=8){var A=Math.min(8,I.length-x),E=parseInt(I.substring(x,x+A),w);8>A?(A=l(Math.pow(w,A)),D=D.j(A).add(l(E))):(D=D.j(C),D=D.add(l(E)))}return D}var f=c(0),p=c(1),g=c(16777216);n=s.prototype,n.m=function(){if(b(this))return-_(this).m();for(var I=0,w=1,C=0;C<this.g.length;C++){var D=this.i(C);I+=(0<=D?D:4294967296+D)*w,w*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(v(this))return"0";if(b(this))return"-"+_(this).toString(I);for(var w=l(Math.pow(I,6)),C=this,D="";;){var x=U(C,w).g;C=S(C,x.j(w));var A=((0<C.g.length?C.g[0]:C.h)>>>0).toString(I);if(C=x,v(C))return A+D;for(;6>A.length;)A="0"+A;D=A+D}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function v(I){if(I.h!=0)return!1;for(var w=0;w<I.g.length;w++)if(I.g[w]!=0)return!1;return!0}function b(I){return I.h==-1}n.l=function(I){return I=S(this,I),b(I)?-1:v(I)?0:1};function _(I){for(var w=I.g.length,C=[],D=0;D<w;D++)C[D]=~I.g[D];return new s(C,~I.h).add(p)}n.abs=function(){return b(this)?_(this):this},n.add=function(I){for(var w=Math.max(this.g.length,I.g.length),C=[],D=0,x=0;x<=w;x++){var A=D+(this.i(x)&65535)+(I.i(x)&65535),E=(A>>>16)+(this.i(x)>>>16)+(I.i(x)>>>16);D=E>>>16,A&=65535,E&=65535,C[x]=E<<16|A}return new s(C,C[C.length-1]&-2147483648?-1:0)};function S(I,w){return I.add(_(w))}n.j=function(I){if(v(this)||v(I))return f;if(b(this))return b(I)?_(this).j(_(I)):_(_(this).j(I));if(b(I))return _(this.j(_(I)));if(0>this.l(g)&&0>I.l(g))return l(this.m()*I.m());for(var w=this.g.length+I.g.length,C=[],D=0;D<2*w;D++)C[D]=0;for(D=0;D<this.g.length;D++)for(var x=0;x<I.g.length;x++){var A=this.i(D)>>>16,E=this.i(D)&65535,N=I.i(x)>>>16,R=I.i(x)&65535;C[2*D+2*x]+=E*R,k(C,2*D+2*x),C[2*D+2*x+1]+=A*R,k(C,2*D+2*x+1),C[2*D+2*x+1]+=E*N,k(C,2*D+2*x+1),C[2*D+2*x+2]+=A*N,k(C,2*D+2*x+2)}for(D=0;D<w;D++)C[D]=C[2*D+1]<<16|C[2*D];for(D=w;D<2*w;D++)C[D]=0;return new s(C,0)};function k(I,w){for(;(I[w]&65535)!=I[w];)I[w+1]+=I[w]>>>16,I[w]&=65535,w++}function P(I,w){this.g=I,this.h=w}function U(I,w){if(v(w))throw Error("division by zero");if(v(I))return new P(f,f);if(b(I))return w=U(_(I),w),new P(_(w.g),_(w.h));if(b(w))return w=U(I,_(w)),new P(_(w.g),w.h);if(30<I.g.length){if(b(I)||b(w))throw Error("slowDivide_ only works with positive integers.");for(var C=p,D=w;0>=D.l(I);)C=H(C),D=H(D);var x=q(C,1),A=q(D,1);for(D=q(D,2),C=q(C,2);!v(D);){var E=A.add(D);0>=E.l(I)&&(x=x.add(C),A=E),D=q(D,1),C=q(C,1)}return w=S(I,x.j(w)),new P(x,w)}for(x=f;0<=I.l(w);){for(C=Math.max(1,Math.floor(I.m()/w.m())),D=Math.ceil(Math.log(C)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),A=l(C),E=A.j(w);b(E)||0<E.l(I);)C-=D,A=l(C),E=A.j(w);v(A)&&(A=p),x=x.add(A),I=S(I,E)}return new P(x,I)}n.A=function(I){return U(this,I).h},n.and=function(I){for(var w=Math.max(this.g.length,I.g.length),C=[],D=0;D<w;D++)C[D]=this.i(D)&I.i(D);return new s(C,this.h&I.h)},n.or=function(I){for(var w=Math.max(this.g.length,I.g.length),C=[],D=0;D<w;D++)C[D]=this.i(D)|I.i(D);return new s(C,this.h|I.h)},n.xor=function(I){for(var w=Math.max(this.g.length,I.g.length),C=[],D=0;D<w;D++)C[D]=this.i(D)^I.i(D);return new s(C,this.h^I.h)};function H(I){for(var w=I.g.length+1,C=[],D=0;D<w;D++)C[D]=I.i(D)<<1|I.i(D-1)>>>31;return new s(C,I.h)}function q(I,w){var C=w>>5;w%=32;for(var D=I.g.length-C,x=[],A=0;A<D;A++)x[A]=0<w?I.i(A+C)>>>w|I.i(A+C+1)<<32-w:I.i(A+C);return new s(x,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,DC=aO.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=d,Co=aO.Integer=s}).apply(typeof sO<"u"?sO:typeof self<"u"?self:typeof window<"u"?window:{});var hm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Si={};var MC,TC,lc,SC,kl,pm,AC,PC,OC;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,h,m){return u==Array.prototype||u==Object.prototype||(u[h]=m.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof hm=="object"&&hm];for(var h=0;h<u.length;++h){var m=u[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=t(this);function i(u,h){if(h)e:{var m=r;u=u.split(".");for(var y=0;y<u.length-1;y++){var O=u[y];if(!(O in m))break e;m=m[O]}u=u[u.length-1],y=m[u],h=h(y),h!=y&&h!=null&&e(m,u,{configurable:!0,writable:!0,value:h})}}function o(u,h){u instanceof String&&(u+="");var m=0,y=!1,O={next:function(){if(!y&&m<u.length){var L=m++;return{value:h(L,u[L]),done:!1}}return y=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}i("Array.prototype.values",function(u){return u||function(){return o(this,function(h,m){return m})}});var s=s||{},a=this||self;function c(u){var h=typeof u;return h=h!="object"?h:u?Array.isArray(u)?"array":h:"null",h=="array"||h=="object"&&typeof u.length=="number"}function l(u){var h=typeof u;return h=="object"&&u!=null||h=="function"}function d(u,h,m){return u.call.apply(u.bind,arguments)}function f(u,h,m){if(!u)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,y),u.apply(h,O)}}return function(){return u.apply(h,arguments)}}function p(u,h,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,p.apply(null,arguments)}function g(u,h){var m=Array.prototype.slice.call(arguments,1);return function(){var y=m.slice();return y.push.apply(y,arguments),u.apply(this,y)}}function v(u,h){function m(){}m.prototype=h.prototype,u.aa=h.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(y,O,L){for(var Z=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)Z[Qe-2]=arguments[Qe];return h.prototype[O].apply(y,Z)}}function b(u){let h=u.length;if(0<h){let m=Array(h);for(let y=0;y<h;y++)m[y]=u[y];return m}return[]}function _(u,h){for(let m=1;m<arguments.length;m++){let y=arguments[m];if(c(y)){let O=u.length||0,L=y.length||0;u.length=O+L;for(let Z=0;Z<L;Z++)u[O+Z]=y[Z]}else u.push(y)}}class S{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function k(u){return/^[\s\xa0]*$/.test(u)}function P(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function U(u){return U[" "](u),u}U[" "]=function(){};var H=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function q(u,h,m){for(let y in u)h.call(m,u[y],y,u)}function I(u,h){for(let m in u)h.call(void 0,u[m],m,u)}function w(u){let h={};for(let m in u)h[m]=u[m];return h}let C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(u,h){let m,y;for(let O=1;O<arguments.length;O++){y=arguments[O];for(m in y)u[m]=y[m];for(let L=0;L<C.length;L++)m=C[L],Object.prototype.hasOwnProperty.call(y,m)&&(u[m]=y[m])}}function x(u){var h=1;u=u.split(":");let m=[];for(;0<h&&u.length;)m.push(u.shift()),h--;return u.length&&m.push(u.join(":")),m}function A(u){a.setTimeout(()=>{throw u},0)}function E(){var u=he;let h=null;return u.g&&(h=u.g,u.g=u.g.next,u.g||(u.h=null),h.next=null),h}class N{constructor(){this.h=this.g=null}add(h,m){let y=R.get();y.set(h,m),this.h?this.h.next=y:this.g=y,this.h=y}}var R=new S(()=>new $,u=>u.reset());class ${constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let J,ce=!1,he=new N,ve=()=>{let u=a.Promise.resolve(void 0);J=()=>{u.then(Ae)}};var Ae=()=>{for(var u;u=E();){try{u.h.call(u.g)}catch(m){A(m)}var h=R;h.j(u),100>h.h&&(h.h++,u.next=h.g,h.g=u)}ce=!1};function Pe(){this.s=this.s,this.C=this.C}Pe.prototype.s=!1,Pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},Pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Oe(u,h){this.type=u,this.g=this.target=h,this.defaultPrevented=!1}Oe.prototype.h=function(){this.defaultPrevented=!0};var lt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,h=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let m=()=>{};a.addEventListener("test",m,h),a.removeEventListener("test",m,h)}catch{}return u}();function dt(u,h){if(Oe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,y=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=h,h=u.relatedTarget){if(H){e:{try{U(h.nodeName);var O=!0;break e}catch{}O=!1}O||(h=null)}}else m=="mouseover"?h=u.fromElement:m=="mouseout"&&(h=u.toElement);this.relatedTarget=h,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:cr[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&dt.aa.h.call(this)}}v(dt,Oe);var cr={2:"touch",3:"pen",4:"mouse"};dt.prototype.h=function(){dt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Xt="closure_listenable_"+(1e6*Math.random()|0),ur=0;function pu(u,h,m,y,O){this.listener=u,this.proxy=null,this.src=h,this.type=m,this.capture=!!y,this.ha=O,this.key=++ur,this.da=this.fa=!1}function cf(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function uf(u){this.src=u,this.g={},this.h=0}uf.prototype.add=function(u,h,m,y,O){var L=u.toString();u=this.g[L],u||(u=this.g[L]=[],this.h++);var Z=rv(u,h,y,O);return-1<Z?(h=u[Z],m||(h.fa=!1)):(h=new pu(h,this.src,L,!!y,O),h.fa=m,u.push(h)),h};function nv(u,h){var m=h.type;if(m in u.g){var y=u.g[m],O=Array.prototype.indexOf.call(y,h,void 0),L;(L=0<=O)&&Array.prototype.splice.call(y,O,1),L&&(cf(h),u.g[m].length==0&&(delete u.g[m],u.h--))}}function rv(u,h,m,y){for(var O=0;O<u.length;++O){var L=u[O];if(!L.da&&L.listener==h&&L.capture==!!m&&L.ha==y)return O}return-1}var iv="closure_lm_"+(1e6*Math.random()|0),ov={};function $x(u,h,m,y,O){if(y&&y.once)return qx(u,h,m,y,O);if(Array.isArray(h)){for(var L=0;L<h.length;L++)$x(u,h[L],m,y,O);return null}return m=uv(m),u&&u[Xt]?u.K(h,m,l(y)?!!y.capture:!!y,O):zx(u,h,m,!1,y,O)}function zx(u,h,m,y,O,L){if(!h)throw Error("Invalid event type");var Z=l(O)?!!O.capture:!!O,Qe=av(u);if(Qe||(u[iv]=Qe=new uf(u)),m=Qe.add(h,m,y,Z,L),m.proxy)return m;if(y=rL(),m.proxy=y,y.src=u,y.listener=m,u.addEventListener)lt||(O=Z),O===void 0&&(O=!1),u.addEventListener(h.toString(),y,O);else if(u.attachEvent)u.attachEvent(Gx(h.toString()),y);else if(u.addListener&&u.removeListener)u.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return m}function rL(){function u(m){return h.call(u.src,u.listener,m)}let h=iL;return u}function qx(u,h,m,y,O){if(Array.isArray(h)){for(var L=0;L<h.length;L++)qx(u,h[L],m,y,O);return null}return m=uv(m),u&&u[Xt]?u.L(h,m,l(y)?!!y.capture:!!y,O):zx(u,h,m,!0,y,O)}function Hx(u,h,m,y,O){if(Array.isArray(h))for(var L=0;L<h.length;L++)Hx(u,h[L],m,y,O);else y=l(y)?!!y.capture:!!y,m=uv(m),u&&u[Xt]?(u=u.i,h=String(h).toString(),h in u.g&&(L=u.g[h],m=rv(L,m,y,O),-1<m&&(cf(L[m]),Array.prototype.splice.call(L,m,1),L.length==0&&(delete u.g[h],u.h--)))):u&&(u=av(u))&&(h=u.g[h.toString()],u=-1,h&&(u=rv(h,m,y,O)),(m=-1<u?h[u]:null)&&sv(m))}function sv(u){if(typeof u!="number"&&u&&!u.da){var h=u.src;if(h&&h[Xt])nv(h.i,u);else{var m=u.type,y=u.proxy;h.removeEventListener?h.removeEventListener(m,y,u.capture):h.detachEvent?h.detachEvent(Gx(m),y):h.addListener&&h.removeListener&&h.removeListener(y),(m=av(h))?(nv(m,u),m.h==0&&(m.src=null,h[iv]=null)):cf(u)}}}function Gx(u){return u in ov?ov[u]:ov[u]="on"+u}function iL(u,h){if(u.da)u=!0;else{h=new dt(h,this);var m=u.listener,y=u.ha||u.src;u.fa&&sv(u),u=m.call(y,h)}return u}function av(u){return u=u[iv],u instanceof uf?u:null}var cv="__closure_events_fn_"+(1e9*Math.random()>>>0);function uv(u){return typeof u=="function"?u:(u[cv]||(u[cv]=function(h){return u.handleEvent(h)}),u[cv])}function on(){Pe.call(this),this.i=new uf(this),this.M=this,this.F=null}v(on,Pe),on.prototype[Xt]=!0,on.prototype.removeEventListener=function(u,h,m,y){Hx(this,u,h,m,y)};function yn(u,h){var m,y=u.F;if(y)for(m=[];y;y=y.F)m.push(y);if(u=u.M,y=h.type||h,typeof h=="string")h=new Oe(h,u);else if(h instanceof Oe)h.target=h.target||u;else{var O=h;h=new Oe(y,u),D(h,O)}if(O=!0,m)for(var L=m.length-1;0<=L;L--){var Z=h.g=m[L];O=lf(Z,y,!0,h)&&O}if(Z=h.g=u,O=lf(Z,y,!0,h)&&O,O=lf(Z,y,!1,h)&&O,m)for(L=0;L<m.length;L++)Z=h.g=m[L],O=lf(Z,y,!1,h)&&O}on.prototype.N=function(){if(on.aa.N.call(this),this.i){var u=this.i,h;for(h in u.g){for(var m=u.g[h],y=0;y<m.length;y++)cf(m[y]);delete u.g[h],u.h--}}this.F=null},on.prototype.K=function(u,h,m,y){return this.i.add(String(u),h,!1,m,y)},on.prototype.L=function(u,h,m,y){return this.i.add(String(u),h,!0,m,y)};function lf(u,h,m,y){if(h=u.i.g[String(h)],!h)return!0;h=h.concat();for(var O=!0,L=0;L<h.length;++L){var Z=h[L];if(Z&&!Z.da&&Z.capture==m){var Qe=Z.listener,Jt=Z.ha||Z.src;Z.fa&&nv(u.i,Z),O=Qe.call(Jt,y)!==!1&&O}}return O&&!y.defaultPrevented}function Wx(u,h,m){if(typeof u=="function")m&&(u=p(u,m));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(u,h||0)}function Kx(u){u.g=Wx(()=>{u.g=null,u.i&&(u.i=!1,Kx(u))},u.l);let h=u.h;u.h=null,u.m.apply(null,h)}class oL extends Pe{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Kx(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mu(u){Pe.call(this),this.h=u,this.g={}}v(mu,Pe);var Qx=[];function Yx(u){q(u.g,function(h,m){this.g.hasOwnProperty(m)&&sv(h)},u),u.g={}}mu.prototype.N=function(){mu.aa.N.call(this),Yx(this)},mu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var lv=a.JSON.stringify,sL=a.JSON.parse,aL=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function dv(){}dv.prototype.h=null;function Zx(u){return u.h||(u.h=u.i())}function Xx(){}var gu={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fv(){Oe.call(this,"d")}v(fv,Oe);function hv(){Oe.call(this,"c")}v(hv,Oe);var Xo={},Jx=null;function df(){return Jx=Jx||new on}Xo.La="serverreachability";function eD(u){Oe.call(this,Xo.La,u)}v(eD,Oe);function yu(u){let h=df();yn(h,new eD(h))}Xo.STAT_EVENT="statevent";function tD(u,h){Oe.call(this,Xo.STAT_EVENT,u),this.stat=h}v(tD,Oe);function vn(u){let h=df();yn(h,new tD(h,u))}Xo.Ma="timingevent";function nD(u,h){Oe.call(this,Xo.Ma,u),this.size=h}v(nD,Oe);function vu(u,h){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},h)}function _u(){this.g=!0}_u.prototype.xa=function(){this.g=!1};function cL(u,h,m,y,O,L){u.info(function(){if(u.g)if(L)for(var Z="",Qe=L.split("&"),Jt=0;Jt<Qe.length;Jt++){var $e=Qe[Jt].split("=");if(1<$e.length){var sn=$e[0];$e=$e[1];var an=sn.split("_");Z=2<=an.length&&an[1]=="type"?Z+(sn+"="+$e+"&"):Z+(sn+"=redacted&")}}else Z=null;else Z=L;return"XMLHTTP REQ ("+y+") [attempt "+O+"]: "+h+`
`+m+`
`+Z})}function uL(u,h,m,y,O,L,Z){u.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+O+"]: "+h+`
`+m+`
`+L+" "+Z})}function ua(u,h,m,y){u.info(function(){return"XMLHTTP TEXT ("+h+"): "+dL(u,m)+(y?" "+y:"")})}function lL(u,h){u.info(function(){return"TIMEOUT: "+h})}_u.prototype.info=function(){};function dL(u,h){if(!u.g)return h;if(!h)return null;try{var m=JSON.parse(h);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var y=m[u];if(!(2>y.length)){var O=y[1];if(Array.isArray(O)&&!(1>O.length)){var L=O[0];if(L!="noop"&&L!="stop"&&L!="close")for(var Z=1;Z<O.length;Z++)O[Z]=""}}}}return lv(m)}catch{return h}}var ff={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},rD={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},pv;function hf(){}v(hf,dv),hf.prototype.g=function(){return new XMLHttpRequest},hf.prototype.i=function(){return{}},pv=new hf;function Hi(u,h,m,y){this.j=u,this.i=h,this.l=m,this.R=y||1,this.U=new mu(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new iD}function iD(){this.i=null,this.g="",this.h=!1}var oD={},mv={};function gv(u,h,m){u.L=1,u.v=yf(ti(h)),u.m=m,u.P=!0,sD(u,null)}function sD(u,h){u.F=Date.now(),pf(u),u.A=ti(u.v);var m=u.A,y=u.R;Array.isArray(y)||(y=[String(y)]),wD(m.i,"t",y),u.C=0,m=u.j.J,u.h=new iD,u.g=LD(u.j,m?h:null,!u.m),0<u.O&&(u.M=new oL(p(u.Y,u,u.g),u.O)),h=u.U,m=u.g,y=u.ca;var O="readystatechange";Array.isArray(O)||(O&&(Qx[0]=O.toString()),O=Qx);for(var L=0;L<O.length;L++){var Z=$x(m,O[L],y||h.handleEvent,!1,h.h||h);if(!Z)break;h.g[Z.key]=Z}h=u.H?w(u.H):{},u.m?(u.u||(u.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,h)):(u.u="GET",u.g.ea(u.A,u.u,null,h)),yu(),cL(u.i,u.u,u.A,u.l,u.R,u.m)}Hi.prototype.ca=function(u){u=u.target;let h=this.M;h&&ni(u)==3?h.j():this.Y(u)},Hi.prototype.Y=function(u){try{if(u==this.g)e:{let an=ni(this.g);var h=this.g.Ba();let fa=this.g.Z();if(!(3>an)&&(an!=3||this.g&&(this.h.h||this.g.oa()||MD(this.g)))){this.J||an!=4||h==7||(h==8||0>=fa?yu(3):yu(2)),yv(this);var m=this.g.Z();this.X=m;t:if(aD(this)){var y=MD(this.g);u="";var O=y.length,L=ni(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jo(this),wu(this);var Z="";break t}this.h.i=new a.TextDecoder}for(h=0;h<O;h++)this.h.h=!0,u+=this.h.i.decode(y[h],{stream:!(L&&h==O-1)});y.length=0,this.h.g+=u,this.C=0,Z=this.h.g}else Z=this.g.oa();if(this.o=m==200,uL(this.i,this.u,this.A,this.l,this.R,an,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Qe,Jt=this.g;if((Qe=Jt.g?Jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(Qe)){var $e=Qe;break t}}$e=null}if(m=$e)ua(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vv(this,m);else{this.o=!1,this.s=3,vn(12),Jo(this),wu(this);break e}}if(this.P){m=!0;let lr;for(;!this.J&&this.C<Z.length;)if(lr=fL(this,Z),lr==mv){an==4&&(this.s=4,vn(14),m=!1),ua(this.i,this.l,null,"[Incomplete Response]");break}else if(lr==oD){this.s=4,vn(15),ua(this.i,this.l,Z,"[Invalid Chunk]"),m=!1;break}else ua(this.i,this.l,lr,null),vv(this,lr);if(aD(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),an!=4||Z.length!=0||this.h.h||(this.s=1,vn(16),m=!1),this.o=this.o&&m,!m)ua(this.i,this.l,Z,"[Invalid Chunked Response]"),Jo(this),wu(this);else if(0<Z.length&&!this.W){this.W=!0;var sn=this.j;sn.g==this&&sn.ba&&!sn.M&&(sn.j.info("Great, no buffering proxy detected. Bytes received: "+Z.length),Iv(sn),sn.M=!0,vn(11))}}else ua(this.i,this.l,Z,null),vv(this,Z);an==4&&Jo(this),this.o&&!this.J&&(an==4?RD(this.j,this):(this.o=!1,pf(this)))}else SL(this.g),m==400&&0<Z.indexOf("Unknown SID")?(this.s=3,vn(12)):(this.s=0,vn(13)),Jo(this),wu(this)}}}catch{}finally{}};function aD(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function fL(u,h){var m=u.C,y=h.indexOf(`
`,m);return y==-1?mv:(m=Number(h.substring(m,y)),isNaN(m)?oD:(y+=1,y+m>h.length?mv:(h=h.slice(y,y+m),u.C=y+m,h)))}Hi.prototype.cancel=function(){this.J=!0,Jo(this)};function pf(u){u.S=Date.now()+u.I,cD(u,u.I)}function cD(u,h){if(u.B!=null)throw Error("WatchDog timer not null");u.B=vu(p(u.ba,u),h)}function yv(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Hi.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(lL(this.i,this.A),this.L!=2&&(yu(),vn(17)),Jo(this),this.s=2,wu(this)):cD(this,this.S-u)};function wu(u){u.j.G==0||u.J||RD(u.j,u)}function Jo(u){yv(u);var h=u.M;h&&typeof h.ma=="function"&&h.ma(),u.M=null,Yx(u.U),u.g&&(h=u.g,u.g=null,h.abort(),h.ma())}function vv(u,h){try{var m=u.j;if(m.G!=0&&(m.g==u||_v(m.h,u))){if(!u.K&&_v(m.h,u)&&m.G==3){try{var y=m.Da.g.parse(h)}catch{y=null}if(Array.isArray(y)&&y.length==3){var O=y;if(O[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)bf(m),wf(m);else break e;Ev(m),vn(18)}}else m.za=O[1],0<m.za-m.T&&37500>O[2]&&m.F&&m.v==0&&!m.C&&(m.C=vu(p(m.Za,m),6e3));if(1>=dD(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else ts(m,11)}else if((u.K||m.g==u)&&bf(m),!k(h))for(O=m.Da.g.parse(h),h=0;h<O.length;h++){let $e=O[h];if(m.T=$e[0],$e=$e[1],m.G==2)if($e[0]=="c"){m.K=$e[1],m.ia=$e[2];let sn=$e[3];sn!=null&&(m.la=sn,m.j.info("VER="+m.la));let an=$e[4];an!=null&&(m.Aa=an,m.j.info("SVER="+m.Aa));let fa=$e[5];fa!=null&&typeof fa=="number"&&0<fa&&(y=1.5*fa,m.L=y,m.j.info("backChannelRequestTimeoutMs_="+y)),y=m;let lr=u.g;if(lr){let If=lr.g?lr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(If){var L=y.h;L.g||If.indexOf("spdy")==-1&&If.indexOf("quic")==-1&&If.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(wv(L,L.h),L.h=null))}if(y.D){let xv=lr.g?lr.g.getResponseHeader("X-HTTP-Session-Id"):null;xv&&(y.ya=xv,ot(y.I,y.D,xv))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),y=m;var Z=u;if(y.qa=VD(y,y.J?y.ia:null,y.W),Z.K){fD(y.h,Z);var Qe=Z,Jt=y.L;Jt&&(Qe.I=Jt),Qe.B&&(yv(Qe),pf(Qe)),y.g=Z}else OD(y);0<m.i.length&&Cf(m)}else $e[0]!="stop"&&$e[0]!="close"||ts(m,7);else m.G==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?ts(m,7):bv(m):$e[0]!="noop"&&m.l&&m.l.ta($e),m.v=0)}}yu(4)}catch{}}var hL=class{constructor(u,h){this.g=u,this.map=h}};function uD(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function lD(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function dD(u){return u.h?1:u.g?u.g.size:0}function _v(u,h){return u.h?u.h==h:u.g?u.g.has(h):!1}function wv(u,h){u.g?u.g.add(h):u.h=h}function fD(u,h){u.h&&u.h==h?u.h=null:u.g&&u.g.has(h)&&u.g.delete(h)}uD.prototype.cancel=function(){if(this.i=hD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function hD(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let h=u.i;for(let m of u.g.values())h=h.concat(m.D);return h}return b(u.i)}function pL(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var h=[],m=u.length,y=0;y<m;y++)h.push(u[y]);return h}h=[],m=0;for(y in u)h[m++]=u[y];return h}function mL(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var h=[];u=u.length;for(var m=0;m<u;m++)h.push(m);return h}h=[],m=0;for(let y in u)h[m++]=y;return h}}}function pD(u,h){if(u.forEach&&typeof u.forEach=="function")u.forEach(h,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,h,void 0);else for(var m=mL(u),y=pL(u),O=y.length,L=0;L<O;L++)h.call(void 0,y[L],m&&m[L],u)}var mD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gL(u,h){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var y=u[m].indexOf("="),O=null;if(0<=y){var L=u[m].substring(0,y);O=u[m].substring(y+1)}else L=u[m];h(L,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function es(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof es){this.h=u.h,mf(this,u.j),this.o=u.o,this.g=u.g,gf(this,u.s),this.l=u.l;var h=u.i,m=new Eu;m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),gD(this,m),this.m=u.m}else u&&(h=String(u).match(mD))?(this.h=!1,mf(this,h[1]||"",!0),this.o=Cu(h[2]||""),this.g=Cu(h[3]||"",!0),gf(this,h[4]),this.l=Cu(h[5]||"",!0),gD(this,h[6]||"",!0),this.m=Cu(h[7]||"")):(this.h=!1,this.i=new Eu(null,this.h))}es.prototype.toString=function(){var u=[],h=this.j;h&&u.push(bu(h,yD,!0),":");var m=this.g;return(m||h=="file")&&(u.push("//"),(h=this.o)&&u.push(bu(h,yD,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(bu(m,m.charAt(0)=="/"?_L:vL,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",bu(m,CL)),u.join("")};function ti(u){return new es(u)}function mf(u,h,m){u.j=m?Cu(h,!0):h,u.j&&(u.j=u.j.replace(/:$/,""))}function gf(u,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);u.s=h}else u.s=null}function gD(u,h,m){h instanceof Eu?(u.i=h,bL(u.i,u.h)):(m||(h=bu(h,wL)),u.i=new Eu(h,u.h))}function ot(u,h,m){u.i.set(h,m)}function yf(u){return ot(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Cu(u,h){return u?h?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function bu(u,h,m){return typeof u=="string"?(u=encodeURI(u).replace(h,yL),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function yL(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var yD=/[#\/\?@]/g,vL=/[#\?:]/g,_L=/[#\?]/g,wL=/[#\?@]/g,CL=/#/g;function Eu(u,h){this.h=this.g=null,this.i=u||null,this.j=!!h}function Gi(u){u.g||(u.g=new Map,u.h=0,u.i&&gL(u.i,function(h,m){u.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}n=Eu.prototype,n.add=function(u,h){Gi(this),this.i=null,u=la(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(h),this.h+=1,this};function vD(u,h){Gi(u),h=la(u,h),u.g.has(h)&&(u.i=null,u.h-=u.g.get(h).length,u.g.delete(h))}function _D(u,h){return Gi(u),h=la(u,h),u.g.has(h)}n.forEach=function(u,h){Gi(this),this.g.forEach(function(m,y){m.forEach(function(O){u.call(h,O,y,this)},this)},this)},n.na=function(){Gi(this);let u=Array.from(this.g.values()),h=Array.from(this.g.keys()),m=[];for(let y=0;y<h.length;y++){let O=u[y];for(let L=0;L<O.length;L++)m.push(h[y])}return m},n.V=function(u){Gi(this);let h=[];if(typeof u=="string")_D(this,u)&&(h=h.concat(this.g.get(la(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)h=h.concat(u[m])}return h},n.set=function(u,h){return Gi(this),this.i=null,u=la(this,u),_D(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[h]),this.h+=1,this},n.get=function(u,h){return u?(u=this.V(u),0<u.length?String(u[0]):h):h};function wD(u,h,m){vD(u,h),0<m.length&&(u.i=null,u.g.set(la(u,h),b(m)),u.h+=m.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],h=Array.from(this.g.keys());for(var m=0;m<h.length;m++){var y=h[m];let L=encodeURIComponent(String(y)),Z=this.V(y);for(y=0;y<Z.length;y++){var O=L;Z[y]!==""&&(O+="="+encodeURIComponent(String(Z[y]))),u.push(O)}}return this.i=u.join("&")};function la(u,h){return h=String(h),u.j&&(h=h.toLowerCase()),h}function bL(u,h){h&&!u.j&&(Gi(u),u.i=null,u.g.forEach(function(m,y){var O=y.toLowerCase();y!=O&&(vD(this,y),wD(this,O,m))},u)),u.j=h}function EL(u,h){let m=new _u;if(a.Image){let y=new Image;y.onload=g(Wi,m,"TestLoadImage: loaded",!0,h,y),y.onerror=g(Wi,m,"TestLoadImage: error",!1,h,y),y.onabort=g(Wi,m,"TestLoadImage: abort",!1,h,y),y.ontimeout=g(Wi,m,"TestLoadImage: timeout",!1,h,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=u}else h(!1)}function IL(u,h){let m=new _u,y=new AbortController,O=setTimeout(()=>{y.abort(),Wi(m,"TestPingServer: timeout",!1,h)},1e4);fetch(u,{signal:y.signal}).then(L=>{clearTimeout(O),L.ok?Wi(m,"TestPingServer: ok",!0,h):Wi(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(O),Wi(m,"TestPingServer: error",!1,h)})}function Wi(u,h,m,y,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),y(m)}catch{}}function xL(){this.g=new aL}function DL(u,h,m){let y=m||"";try{pD(u,function(O,L){let Z=O;l(O)&&(Z=lv(O)),h.push(y+L+"="+encodeURIComponent(Z))})}catch(O){throw h.push(y+"type="+encodeURIComponent("_badmap")),O}}function Iu(u){this.l=u.Ub||null,this.j=u.eb||!1}v(Iu,dv),Iu.prototype.g=function(){return new vf(this.l,this.j)},Iu.prototype.i=function(u){return function(){return u}}({});function vf(u,h){on.call(this),this.D=u,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(vf,on),n=vf.prototype,n.open=function(u,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=h,this.readyState=1,Du(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(h.body=u),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xu(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Du(this)),this.g&&(this.readyState=3,Du(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;CD(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function CD(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var h=u.value?u.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!u.done}))&&(this.response=this.responseText+=h)}u.done?xu(this):Du(this),this.readyState==3&&CD(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,xu(this))},n.Qa=function(u){this.g&&(this.response=u,xu(this))},n.ga=function(){this.g&&xu(this)};function xu(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Du(u)}n.setRequestHeader=function(u,h){this.u.append(u,h)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=h.next();return u.join(`\r
`)};function Du(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(vf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function bD(u){let h="";return q(u,function(m,y){h+=y,h+=":",h+=m,h+=`\r
`}),h}function Cv(u,h,m){e:{for(y in m){var y=!1;break e}y=!0}y||(m=bD(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):ot(u,h,m))}function yt(u){on.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(yt,on);var ML=/^https?$/i,TL=["POST","PUT"];n=yt.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,h,m,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);h=h?h.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pv.g(),this.v=this.o?Zx(this.o):Zx(pv),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(h,String(u),!0),this.B=!1}catch(L){ED(this,L);return}if(u=m||"",m=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var O in y)m.set(O,y[O]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(let L of y.keys())m.set(L,y.get(L));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(m.keys()).find(L=>L.toLowerCase()=="content-type"),O=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(TL,h,void 0))||y||O||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[L,Z]of m)this.g.setRequestHeader(L,Z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{DD(this),this.u=!0,this.g.send(u),this.u=!1}catch(L){ED(this,L)}};function ED(u,h){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=h,u.m=5,ID(u),_f(u)}function ID(u){u.A||(u.A=!0,yn(u,"complete"),yn(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,yn(this,"complete"),yn(this,"abort"),_f(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_f(this,!0)),yt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?xD(this):this.bb())},n.bb=function(){xD(this)};function xD(u){if(u.h&&typeof s<"u"&&(!u.v[1]||ni(u)!=4||u.Z()!=2)){if(u.u&&ni(u)==4)Wx(u.Ea,0,u);else if(yn(u,"readystatechange"),ni(u)==4){u.h=!1;try{let Z=u.Z();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var y;if(y=Z===0){var O=String(u.D).match(mD)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),y=!ML.test(O?O.toLowerCase():"")}m=y}if(m)yn(u,"complete"),yn(u,"success");else{u.m=6;try{var L=2<ni(u)?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.Z()+"]",ID(u)}}finally{_f(u)}}}}function _f(u,h){if(u.g){DD(u);let m=u.g,y=u.v[0]?()=>{}:null;u.g=null,u.v=null,h||yn(u,"ready");try{m.onreadystatechange=y}catch{}}}function DD(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function ni(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<ni(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var h=this.g.responseText;return u&&h.indexOf(u)==0&&(h=h.substring(u.length)),sL(h)}};function MD(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function SL(u){let h={};u=(u.g&&2<=ni(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<u.length;y++){if(k(u[y]))continue;var m=x(u[y]);let O=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();let L=h[O]||[];h[O]=L,L.push(m)}I(h,function(y){return y.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mu(u,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||h}function TD(u){this.Aa=0,this.i=[],this.j=new _u,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Mu("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Mu("baseRetryDelayMs",5e3,u),this.cb=Mu("retryDelaySeedMs",1e4,u),this.Wa=Mu("forwardChannelMaxRetries",2,u),this.wa=Mu("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new uD(u&&u.concurrentRequestLimit),this.Da=new xL,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=TD.prototype,n.la=8,n.G=1,n.connect=function(u,h,m,y){vn(0),this.W=u,this.H=h||{},m&&y!==void 0&&(this.H.OSID=m,this.H.OAID=y),this.F=this.X,this.I=VD(this,null,this.W),Cf(this)};function bv(u){if(SD(u),u.G==3){var h=u.U++,m=ti(u.I);if(ot(m,"SID",u.K),ot(m,"RID",h),ot(m,"TYPE","terminate"),Tu(u,m),h=new Hi(u,u.j,h),h.L=2,h.v=yf(ti(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=h.v,m=!0),m||(h.g=LD(h.j,null),h.g.ea(h.v)),h.F=Date.now(),pf(h)}FD(u)}function wf(u){u.g&&(Iv(u),u.g.cancel(),u.g=null)}function SD(u){wf(u),u.u&&(a.clearTimeout(u.u),u.u=null),bf(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Cf(u){if(!lD(u.h)&&!u.s){u.s=!0;var h=u.Ga;J||ve(),ce||(J(),ce=!0),he.add(h,u),u.B=0}}function AL(u,h){return dD(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=h.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=vu(p(u.Ga,u,h),kD(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let O=new Hi(this,this.j,u),L=this.o;if(this.S&&(L?(L=w(L),D(L,this.S)):L=this.S),this.m!==null||this.O||(O.H=L,L=null),this.P)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var y=this.i[m];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(h+=y,4096<h){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=PD(this,O,h),m=ti(this.I),ot(m,"RID",u),ot(m,"CVER",22),this.D&&ot(m,"X-HTTP-Session-Id",this.D),Tu(this,m),L&&(this.O?h="headers="+encodeURIComponent(String(bD(L)))+"&"+h:this.m&&Cv(m,this.m,L)),wv(this.h,O),this.Ua&&ot(m,"TYPE","init"),this.P?(ot(m,"$req",h),ot(m,"SID","null"),O.T=!0,gv(O,m,null)):gv(O,m,h),this.G=2}}else this.G==3&&(u?AD(this,u):this.i.length==0||lD(this.h)||AD(this))};function AD(u,h){var m;h?m=h.l:m=u.U++;let y=ti(u.I);ot(y,"SID",u.K),ot(y,"RID",m),ot(y,"AID",u.T),Tu(u,y),u.m&&u.o&&Cv(y,u.m,u.o),m=new Hi(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),h&&(u.i=h.D.concat(u.i)),h=PD(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),wv(u.h,m),gv(m,y,h)}function Tu(u,h){u.H&&q(u.H,function(m,y){ot(h,y,m)}),u.l&&pD({},function(m,y){ot(h,y,m)})}function PD(u,h,m){m=Math.min(u.i.length,m);var y=u.l?p(u.l.Na,u.l,u):null;e:{var O=u.i;let L=-1;for(;;){let Z=["count="+m];L==-1?0<m?(L=O[0].g,Z.push("ofs="+L)):L=0:Z.push("ofs="+L);let Qe=!0;for(let Jt=0;Jt<m;Jt++){let $e=O[Jt].g,sn=O[Jt].map;if($e-=L,0>$e)L=Math.max(0,O[Jt].g-100),Qe=!1;else try{DL(sn,Z,"req"+$e+"_")}catch{y&&y(sn)}}if(Qe){y=Z.join("&");break e}}}return u=u.i.splice(0,m),h.D=u,y}function OD(u){if(!u.g&&!u.u){u.Y=1;var h=u.Fa;J||ve(),ce||(J(),ce=!0),he.add(h,u),u.v=0}}function Ev(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=vu(p(u.Fa,u),kD(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,ND(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=vu(p(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vn(10),wf(this),ND(this))};function Iv(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function ND(u){u.g=new Hi(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var h=ti(u.qa);ot(h,"RID","rpc"),ot(h,"SID",u.K),ot(h,"AID",u.T),ot(h,"CI",u.F?"0":"1"),!u.F&&u.ja&&ot(h,"TO",u.ja),ot(h,"TYPE","xmlhttp"),Tu(u,h),u.m&&u.o&&Cv(h,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=yf(ti(h)),m.m=null,m.P=!0,sD(m,u)}n.Za=function(){this.C!=null&&(this.C=null,wf(this),Ev(this),vn(19))};function bf(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function RD(u,h){var m=null;if(u.g==h){bf(u),Iv(u),u.g=null;var y=2}else if(_v(u.h,h))m=h.D,fD(u.h,h),y=1;else return;if(u.G!=0){if(h.o)if(y==1){m=h.m?h.m.length:0,h=Date.now()-h.F;var O=u.B;y=df(),yn(y,new nD(y,m)),Cf(u)}else OD(u);else if(O=h.s,O==3||O==0&&0<h.X||!(y==1&&AL(u,h)||y==2&&Ev(u)))switch(m&&0<m.length&&(h=u.h,h.i=h.i.concat(m)),O){case 1:ts(u,5);break;case 4:ts(u,10);break;case 3:ts(u,6);break;default:ts(u,2)}}}function kD(u,h){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*h}function ts(u,h){if(u.j.info("Error code "+h),h==2){var m=p(u.fb,u),y=u.Xa;let O=!y;y=new es(y||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||mf(y,"https"),yf(y),O?EL(y.toString(),m):IL(y.toString(),m)}else vn(2);u.G=0,u.l&&u.l.sa(h),FD(u),SD(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),vn(2)):(this.j.info("Failed to ping google.com"),vn(1))};function FD(u){if(u.G=0,u.ka=[],u.l){let h=hD(u.h);(h.length!=0||u.i.length!=0)&&(_(u.ka,h),_(u.ka,u.i),u.h.i.length=0,b(u.i),u.i.length=0),u.l.ra()}}function VD(u,h,m){var y=m instanceof es?ti(m):new es(m);if(y.g!="")h&&(y.g=h+"."+y.g),gf(y,y.s);else{var O=a.location;y=O.protocol,h=h?h+"."+O.hostname:O.hostname,O=+O.port;var L=new es(null);y&&mf(L,y),h&&(L.g=h),O&&gf(L,O),m&&(L.l=m),y=L}return m=u.D,h=u.ya,m&&h&&ot(y,m,h),ot(y,"VER",u.la),Tu(u,y),y}function LD(u,h,m){if(h&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=u.Ca&&!u.pa?new yt(new Iu({eb:m})):new yt(u.pa),h.Ha(u.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function jD(){}n=jD.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ef(){}Ef.prototype.g=function(u,h){return new jn(u,h)};function jn(u,h){on.call(this),this.g=new TD(h),this.l=u,this.h=h&&h.messageUrlParams||null,u=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(u?u["X-WebChannel-Content-Type"]=h.messageContentType:u={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(u?u["X-WebChannel-Client-Profile"]=h.va:u={"X-WebChannel-Client-Profile":h.va}),this.g.S=u,(u=h&&h.Sb)&&!k(u)&&(this.g.m=u),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!k(h)&&(this.g.D=h,u=this.h,u!==null&&h in u&&(u=this.h,h in u&&delete u[h])),this.j=new da(this)}v(jn,on),jn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},jn.prototype.close=function(){bv(this.g)},jn.prototype.o=function(u){var h=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=lv(u),u=m);h.i.push(new hL(h.Ya++,u)),h.G==3&&Cf(h)},jn.prototype.N=function(){this.g.l=null,delete this.j,bv(this.g),delete this.g,jn.aa.N.call(this)};function BD(u){fv.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var h=u.__sm__;if(h){e:{for(let m in h){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,h=h!==null&&u in h?h[u]:void 0),this.data=h}else this.data=u}v(BD,fv);function UD(){hv.call(this),this.status=1}v(UD,hv);function da(u){this.g=u}v(da,jD),da.prototype.ua=function(){yn(this.g,"a")},da.prototype.ta=function(u){yn(this.g,new BD(u))},da.prototype.sa=function(u){yn(this.g,new UD)},da.prototype.ra=function(){yn(this.g,"b")},Ef.prototype.createWebChannel=Ef.prototype.g,jn.prototype.send=jn.prototype.o,jn.prototype.open=jn.prototype.m,jn.prototype.close=jn.prototype.close,OC=Si.createWebChannelTransport=function(){return new Ef},PC=Si.getStatEventTarget=function(){return df()},AC=Si.Event=Xo,pm=Si.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ff.NO_ERROR=0,ff.TIMEOUT=8,ff.HTTP_ERROR=6,kl=Si.ErrorCode=ff,rD.COMPLETE="complete",SC=Si.EventType=rD,Xx.EventType=gu,gu.OPEN="a",gu.CLOSE="b",gu.ERROR="c",gu.MESSAGE="d",on.prototype.listen=on.prototype.K,lc=Si.WebChannel=Xx,TC=Si.FetchXmlHttpFactory=Iu,yt.prototype.listenOnce=yt.prototype.L,yt.prototype.getLastError=yt.prototype.Ka,yt.prototype.getLastErrorCode=yt.prototype.Ba,yt.prototype.getStatus=yt.prototype.Z,yt.prototype.getResponseJson=yt.prototype.Oa,yt.prototype.getResponseText=yt.prototype.oa,yt.prototype.send=yt.prototype.ea,yt.prototype.setWithCredentials=yt.prototype.Ha,MC=Si.XhrIo=yt}).apply(typeof hm<"u"?hm:typeof self<"u"?self:typeof window<"u"?window:{});var cO="@firebase/firestore";var Vt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Vt.UNAUTHENTICATED=new Vt(null),Vt.GOOGLE_CREDENTIALS=new Vt("google-credentials-uid"),Vt.FIRST_PARTY=new Vt("first-party-uid"),Vt.MOCK_USER=new Vt("mock-user");var Uc="10.12.0";var To=new Mf("@firebase/firestore");function mc(){return To.logLevel}function cN(n){To.setLogLevel(n)}function W(n,...e){if(To.logLevel<=Sr.DEBUG){let t=e.map(kE);To.debug(`Firestore (${Uc}): ${n}`,...t)}}function Dt(n,...e){if(To.logLevel<=Sr.ERROR){let t=e.map(kE);To.error(`Firestore (${Uc}): ${n}`,...t)}}function ir(n,...e){if(To.logLevel<=Sr.WARN){let t=e.map(kE);To.warn(`Firestore (${Uc}): ${n}`,...t)}}function kE(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function re(n="Unexpected state"){let e=`FIRESTORE (${Uc}) INTERNAL ASSERTION FAILED: `+n;throw Dt(e),new Error(e)}function le(n,e){n||re()}function uN(n,e){n||re()}function te(n,e){return n}var j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},G=class extends KD{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Lt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var xm=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},VC=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Vt.UNAUTHENTICATED))}shutdown(){}},LC=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},jC=class{constructor(e){this.t=e,this.currentUser=Vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new Lt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Lt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>F(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Lt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(le(typeof r.accessToken=="string"),new xm(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return le(e===null||typeof e=="string"),new Vt(e)}},BC=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Vt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},UC=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new BC(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},$C=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},zC=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let r=o=>{o.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,W("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(le(typeof t.token=="string"),this.R=t.token,new $C(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function K6(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Dm=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=K6(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function _e(n,e){return n<e?-1:n>e?1:0}function Ic(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function lN(n){return n+"\0"}var gt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new G(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new G(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new G(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?_e(this.nanoseconds,e.nanoseconds):_e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var fe=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new gt(0,0))}static max(){return new n(new gt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Mm=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&re(),r===void 0?r=e.length-t:r>e.length-t&&re(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},je=class n extends Mm{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new G(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Q6=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Mt=class n extends Mm{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Q6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new G(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new G(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new G(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new G(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ee=class n{constructor(e){this.path=e}static fromPath(e){return new n(je.fromString(e))}static fromName(e){return new n(je.fromString(e).popFirst(5))}static empty(){return new n(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new je(e.slice()))}};var xc=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function qC(n){return n.fields.find(e=>e.kind===2)}function As(n){return n.fields.filter(e=>e.kind!==2)}xc.UNKNOWN_ID=-1;var Cc=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var Wl=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,or.min())}};function dN(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=fe.fromTimestamp(r===1e9?new gt(t+1,0):new gt(t,r));return new or(i,ee.empty(),e)}function fN(n){return new or(n.readTime,n.key,-1)}var or=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(fe.min(),ee.empty(),-1)}static max(){return new n(fe.max(),ee.empty(),-1)}};function FE(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ee.comparator(n.documentKey,e.documentKey),t!==0?t:_e(n.largestBatchId,e.largestBatchId))}var hN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Tm=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Lo(n){return F(this,null,function*(){if(n.code!==j.FAILED_PRECONDITION||n.message!==hN)throw n;W("LocalStore","Unexpectedly lost primary lease")})}var V=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(d=>{s[l]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var Sm=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Lt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Fs(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=VE(r.target.error);this.V.reject(new Fs(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new Fs(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(W("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new GC(t)}},So=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(Su())===12.2&&Dt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return W("SimpleDb","Removing database:",e),Ps(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Df())return!1;if(n.C())return!0;let e=Su(),t=n.S(e),r=0<t&&t<10,i=pN(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return F(this,null,function*(){return this.db||(W("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new Fs(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new G(j.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new G(j.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Fs(e,s))},i.onupgradeneeded=o=>{W("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{W("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return F(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=Sm.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),V.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(W("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function pN(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var HC=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ps(this.B.delete())}},Fs=class extends G{constructor(e,t){super(j.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function jo(n){return n.name==="IndexedDbTransactionError"}var GC=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(W("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(W("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ps(r)}add(e){return W("SimpleDb","ADD",this.store.name,e,e),Ps(this.store.add(e))}get(e){return Ps(this.store.get(e)).next(t=>(t===void 0&&(t=null),W("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return W("SimpleDb","DELETE",this.store.name,e),Ps(this.store.delete(e))}count(){return W("SimpleDb","COUNT",this.store.name),Ps(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new V((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new V((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){W("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new V((r,i)=>{t.onerror=o=>{let s=VE(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new V((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new HC(a),l=t(a.primaryKey,a.value,c);if(l instanceof V){let d=l.catch(f=>(c.done(),V.reject(f)));r.push(d)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>V.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Ps(n){return new V((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=VE(r.target.error);t(i)}})}var uO=!1;function VE(n){let e=So.S(Su());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new G("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return uO||(uO=!0,setTimeout(()=>{throw r},0)),r}}return n}var WC=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){W("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>F(this,null,function*(){this.task=null;try{W("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){jo(t)?W("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield Lo(t)}yield this.X(6e4)}))}},KC=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return F(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return V.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return W("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(W("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=fN(o);FE(s,r)>0&&(r=s)}),new or(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Hn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function md(n){return n==null}function Kl(n){return n===0&&1/n==-1/0}function mN(n){return typeof n=="number"&&Number.isInteger(n)&&!Kl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Mn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=lO(e)),e=Y6(n.get(t),e);return lO(e)}function Y6(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function lO(n){return n+""}function Ur(n){let e=n.length;if(le(e>=2),e===2)return le(n.charAt(0)===""&&n.charAt(1)===""),je.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&re(),n.charAt(s+1)){case"":let a=n.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:re()}o=s+2}return new je(r)}var dO=["userId","batchId"];function _m(n,e){return[n,Mn(e)]}function gN(n,e,t){return[n,Mn(e),t]}var Z6={},X6=["prefixPath","collectionGroup","readTime","documentId"],J6=["prefixPath","collectionGroup","documentId"],e8=["collectionGroup","readTime","prefixPath","documentId"],t8=["canonicalId","targetId"],n8=["targetId","path"],r8=["path","targetId"],i8=["collectionId","parent"],o8=["indexId","uid"],s8=["uid","sequenceNumber"],a8=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],c8=["indexId","uid","orderedDocumentKey"],u8=["userId","collectionPath","documentId"],l8=["userId","collectionPath","largestBatchId"],d8=["userId","collectionGroup","largestBatchId"],yN=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],f8=[...yN,"documentOverlays"],vN=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],_N=vN,wN=[..._N,"indexConfiguration","indexState","indexEntries"],h8=wN;var Ql=class extends Tm{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function Kt(n,e){let t=te(n);return So.F(t._e,e)}function fO(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ks(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function CN(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var ct=class n{constructor(e,t){this.comparator=e,this.root=t||zr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,zr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wc(this.root,e,this.comparator,!1)}getReverseIterator(){return new wc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wc(this.root,e,this.comparator,!0)}},wc=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},zr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw re();let e=this.left.check();if(e!==this.right.check())throw re();return e+(this.isRed()?0:1)}};zr.EMPTY=null,zr.RED=!0,zr.BLACK=!1;zr.EMPTY=new class{constructor(){this.size=0}get key(){throw re()}get value(){throw re()}get color(){throw re()}get left(){throw re()}get right(){throw re()}copy(e,t,r,i,o){return this}insert(e,t,r){return new zr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Je=class n{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Am(this.data.getIterator())}getIteratorFrom(e){return new Am(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Am=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function dc(n){return n.hasNext()?n.getNext():void 0}var Gn=class n{constructor(e){this.fields=e,e.sort(Mt.comparator)}static empty(){return new n([])}unionWith(e){let t=new Je(Mt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ic(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Pm=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function bN(){return typeof atob<"u"}var Wt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Pm("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Wt.EMPTY_BYTE_STRING=new Wt("");var p8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oi(n){if(le(!!n),typeof n=="string"){let e=0,t=p8.exec(n);if(le(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Et(n.seconds),nanos:Et(n.nanos)}}function Et(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ao(n){return typeof n=="string"?Wt.fromBase64String(n):Wt.fromUint8Array(n)}function Cg(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function LE(n){let e=n.mapValue.fields.__previous_value__;return Cg(e)?LE(e):e}function Yl(n){let e=Oi(n.mapValue.fields.__local_write_time__.timestampValue);return new gt(e.seconds,e.nanos)}var QC=class{constructor(e,t,r,i,o,s,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Po=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Do={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},wm={nullValue:"NULL_VALUE"};function Vs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Cg(n)?4:EN(n)?9007199254740991:10:re()}function Gr(n,e){if(n===e)return!0;let t=Vs(n);if(t!==Vs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Yl(n).isEqual(Yl(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Oi(i.timestampValue),a=Oi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Ao(i.bytesValue).isEqual(Ao(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Et(i.geoPointValue.latitude)===Et(o.geoPointValue.latitude)&&Et(i.geoPointValue.longitude)===Et(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Et(i.integerValue)===Et(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Et(i.doubleValue),a=Et(o.doubleValue);return s===a?Kl(s)===Kl(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Ic(n.arrayValue.values||[],e.arrayValue.values||[],Gr);case 10:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(fO(s)!==fO(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Gr(s[c],a[c])))return!1;return!0}(n,e);default:return re()}}function Zl(n,e){return(n.values||[]).find(t=>Gr(t,e))!==void 0}function Oo(n,e){if(n===e)return 0;let t=Vs(n),r=Vs(e);if(t!==r)return _e(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return _e(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Et(o.integerValue||o.doubleValue),c=Et(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return hO(n.timestampValue,e.timestampValue);case 4:return hO(Yl(n),Yl(e));case 5:return _e(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Ao(o),c=Ao(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=_e(a[l],c[l]);if(d!==0)return d}return _e(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=_e(Et(o.latitude),Et(s.latitude));return a!==0?a:_e(Et(o.longitude),Et(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,s){let a=o.values||[],c=s.values||[];for(let l=0;l<a.length&&l<c.length;++l){let d=Oo(a[l],c[l]);if(d)return d}return _e(a.length,c.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===Do.mapValue&&s===Do.mapValue)return 0;if(o===Do.mapValue)return 1;if(s===Do.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let p=_e(c[f],d[f]);if(p!==0)return p;let g=Oo(a[c[f]],l[d[f]]);if(g!==0)return g}return _e(c.length,d.length)}(n.mapValue,e.mapValue);default:throw re()}}function hO(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return _e(n,e);let t=Oi(n),r=Oi(e),i=_e(t.seconds,r.seconds);return i!==0?i:_e(t.nanos,r.nanos)}function Dc(n){return YC(n)}function YC(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Oi(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ao(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ee.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=YC(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${YC(t.fields[s])}`;return i+"}"}(n.mapValue):re()}function Ls(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ZC(n){return!!n&&"integerValue"in n}function Xl(n){return!!n&&"arrayValue"in n}function pO(n){return!!n&&"nullValue"in n}function mO(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Cm(n){return!!n&&"mapValue"in n}function $l(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Ks(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=$l(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=$l(n.arrayValue.values[t]);return e}return Object.assign({},n)}function EN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function m8(n){return"nullValue"in n?wm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ls(Po.empty(),ee.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:re()}function g8(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ls(Po.empty(),ee.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Do:re()}function gO(n,e){let t=Oo(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function yO(n,e){let t=Oo(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var pn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Cm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$l(t)}setAll(e){let t=Mt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=$l(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Cm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Cm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ks(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n($l(this.value))}};function IN(n){let e=[];return Ks(n.fields,(t,r)=>{let i=new Mt([t]);if(Cm(r)){let o=IN(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Gn(e)}var jt=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,fe.min(),fe.min(),fe.min(),pn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,fe.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,fe.min(),fe.min(),pn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,fe.min(),fe.min(),pn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Wr=class{constructor(e,t){this.position=e,this.inclusive=t}};function vO(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=ee.comparator(ee.fromName(s.referenceValue),t.key):r=Oo(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function _O(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Gr(n.position[t],e.position[t]))return!1;return!0}var js=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function y8(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Om=class{},Fe=class n extends Om{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new eb(e,t,r):t==="array-contains"?new rb(e,r):t==="in"?new Nm(e,r):t==="not-in"?new ib(e,r):t==="array-contains-any"?new ob(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new tb(e,r):new nb(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Oo(t,this.value)):t!==null&&Vs(this.value)===Vs(t)&&this.matchesComparison(Oo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ge=class n extends Om{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Mc(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Mc(n){return n.op==="and"}function XC(n){return n.op==="or"}function jE(n){return xN(n)&&Mc(n)}function xN(n){for(let e of n.filters)if(e instanceof Ge)return!1;return!0}function JC(n){if(n instanceof Fe)return n.field.canonicalString()+n.op.toString()+Dc(n.value);if(jE(n))return n.filters.map(e=>JC(e)).join(",");{let e=n.filters.map(t=>JC(t)).join(",");return`${n.op}(${e})`}}function DN(n,e){return n instanceof Fe?function(r,i){return i instanceof Fe&&r.op===i.op&&r.field.isEqual(i.field)&&Gr(r.value,i.value)}(n,e):n instanceof Ge?function(r,i){return i instanceof Ge&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&DN(s,i.filters[a]),!0):!1}(n,e):void re()}function MN(n,e){let t=n.filters.concat(e);return Ge.create(t,n.op)}function TN(n){return n instanceof Fe?function(t){return`${t.field.canonicalString()} ${t.op} ${Dc(t.value)}`}(n):n instanceof Ge?function(t){return t.op.toString()+" {"+t.getFilters().map(TN).join(" ,")+"}"}(n):"Filter"}var eb=class extends Fe{constructor(e,t,r){super(e,t,r),this.key=ee.fromName(r.referenceValue)}matches(e){let t=ee.comparator(e.key,this.key);return this.matchesComparison(t)}},tb=class extends Fe{constructor(e,t){super(e,"in",t),this.keys=SN("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},nb=class extends Fe{constructor(e,t){super(e,"not-in",t),this.keys=SN("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function SN(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ee.fromName(r.referenceValue))}var rb=class extends Fe{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Xl(t)&&Zl(t.arrayValue,this.value)}},Nm=class extends Fe{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Zl(this.value.arrayValue,t)}},ib=class extends Fe{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Zl(this.value.arrayValue,t)}},ob=class extends Fe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Xl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Zl(this.value.arrayValue,r))}};var sb=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function ab(n,e=null,t=[],r=[],i=null,o=null,s=null){return new sb(n,e,t,r,i,o,s)}function Bs(n){let e=te(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>JC(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),md(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Dc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Dc(r)).join(",")),e.ue=t}return e.ue}function gd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!y8(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!DN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!_O(n.startAt,e.startAt)&&_O(n.endAt,e.endAt)}function Rm(n){return ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function km(n,e){return n.filters.filter(t=>t instanceof Fe&&t.field.isEqual(e))}function wO(n,e,t){let r=wm,i=!0;for(let o of km(n,e)){let s=wm,a=!0;switch(o.op){case"<":case"<=":s=m8(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=wm}gO({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];gO({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function CO(n,e,t){let r=Do,i=!0;for(let o of km(n,e)){let s=Do,a=!0;switch(o.op){case">=":case">":s=g8(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Do}yO({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];yO({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var br=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function AN(n,e,t,r,i,o,s,a){return new br(n,e,t,r,i,o,s,a)}function $c(n){return new br(n)}function bO(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function BE(n){return n.collectionGroup!==null}function bc(n){let e=te(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Je(Mt.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new js(o,r))}),t.has(Mt.keyField().canonicalString())||e.ce.push(new js(Mt.keyField(),r))}return e.ce}function Tn(n){let e=te(n);return e.le||(e.le=v8(e,bc(n))),e.le}function v8(n,e){if(n.limitType==="F")return ab(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new js(i.field,o)});let t=n.endAt?new Wr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Wr(n.startAt.position,n.startAt.inclusive):null;return ab(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function cb(n,e){let t=n.filters.concat([e]);return new br(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Fm(n,e,t){return new br(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function yd(n,e){return gd(Tn(n),Tn(e))&&n.limitType===e.limitType}function PN(n){return`${Bs(Tn(n))}|lt:${n.limitType}`}function gc(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>TN(i)).join(", ")}]`),md(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Dc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Dc(i)).join(",")),`Target(${r})`}(Tn(n))}; limitType=${n.limitType})`}function vd(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ee.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of bc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=vO(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,bc(r),i)||r.endAt&&!function(s,a,c){let l=vO(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,bc(r),i))}(n,e)}function ON(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function NN(n){return(e,t)=>{let r=!1;for(let i of bc(n)){let o=_8(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function _8(n,e,t){let r=n.field.isKeyField()?ee.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?Oo(c,l):re()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return re()}}var Kr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ks(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return CN(this.inner)}size(){return this.innerSize}};var w8=new ct(ee.comparator);function Vn(){return w8}var RN=new ct(ee.comparator);function Bl(...n){let e=RN;for(let t of n)e=e.insert(t.key,t);return e}function kN(n){let e=RN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function $r(){return zl()}function FN(){return zl()}function zl(){return new Kr(n=>n.toString(),(n,e)=>n.isEqual(e))}var C8=new ct(ee.comparator),b8=new Je(ee.comparator);function Ce(...n){let e=b8;for(let t of n)e=e.add(t);return e}var E8=new Je(_e);function UE(){return E8}function VN(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kl(e)?"-0":e}}function LN(n){return{integerValue:""+n}}function jN(n,e){return mN(e)?LN(e):VN(n,e)}var Tc=class{constructor(){this._=void 0}};function I8(n,e,t){return n instanceof No?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Cg(o)&&(o=LE(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Ni?UN(n,e):n instanceof Ri?$N(n,e):function(i,o){let s=BN(i,o),a=EO(s)+EO(i.Pe);return ZC(s)&&ZC(i.Pe)?LN(a):VN(i.serializer,a)}(n,e)}function x8(n,e,t){return n instanceof Ni?UN(n,e):n instanceof Ri?$N(n,e):t}function BN(n,e){return n instanceof Ro?function(r){return ZC(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var No=class extends Tc{},Ni=class extends Tc{constructor(e){super(),this.elements=e}};function UN(n,e){let t=zN(e);for(let r of n.elements)t.some(i=>Gr(i,r))||t.push(r);return{arrayValue:{values:t}}}var Ri=class extends Tc{constructor(e){super(),this.elements=e}};function $N(n,e){let t=zN(e);for(let r of n.elements)t=t.filter(i=>!Gr(i,r));return{arrayValue:{values:t}}}var Ro=class extends Tc{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function EO(n){return Et(n.integerValue||n.doubleValue)}function zN(n){return Xl(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Us=class{constructor(e,t){this.field=e,this.transform=t}};function D8(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Ni&&i instanceof Ni||r instanceof Ri&&i instanceof Ri?Ic(r.elements,i.elements,Gr):r instanceof Ro&&i instanceof Ro?Gr(r.Pe,i.Pe):r instanceof No&&i instanceof No}(n.transform,e.transform)}var ub=class{constructor(e,t){this.version=e,this.transformResults=t}},It=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function bm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Sc=class{};function qN(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Fo(n.key,It.none()):new ko(n.key,n.data,It.none());{let t=n.data,r=pn.empty(),i=new Je(Mt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Er(n.key,r,new Gn(i.toArray()),It.none())}}function M8(n,e,t){n instanceof ko?function(i,o,s){let a=i.value.clone(),c=xO(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Er?function(i,o,s){if(!bm(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=xO(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(HN(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function ql(n,e,t,r){return n instanceof ko?function(o,s,a,c){if(!bm(o.precondition,s))return a;let l=o.value.clone(),d=DO(o.fieldTransforms,c,s);return l.setAll(d),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Er?function(o,s,a,c){if(!bm(o.precondition,s))return a;let l=DO(o.fieldTransforms,c,s),d=s.data;return d.setAll(HN(o)),d.setAll(l),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(o,s,a){return bm(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function T8(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=BN(r.transform,i||null);o!=null&&(t===null&&(t=pn.empty()),t.set(r.field,o))}return t||null}function IO(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ic(r,i,(o,s)=>D8(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ko=class extends Sc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Er=class extends Sc{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function HN(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function xO(n,e,t){let r=new Map;le(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,x8(s,a,t[i]))}return r}function DO(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,I8(o,s,e))}return r}var Fo=class extends Sc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Jl=class extends Sc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var ed=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&M8(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=ql(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=ql(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=FN();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=qN(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(fe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ce())}isEqual(e){return this.batchId===e.batchId&&Ic(this.mutations,e.mutations,(t,r)=>IO(t,r))&&Ic(this.baseMutations,e.baseMutations,(t,r)=>IO(t,r))}},lb=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){le(e.mutations.length===r.length);let i=function(){return C8}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var td=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var db=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var kt,Le;function GN(n){switch(n){default:return re();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function WN(n){if(n===void 0)return Dt("GRPC error has no .code"),j.UNKNOWN;switch(n){case kt.OK:return j.OK;case kt.CANCELLED:return j.CANCELLED;case kt.UNKNOWN:return j.UNKNOWN;case kt.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case kt.INTERNAL:return j.INTERNAL;case kt.UNAVAILABLE:return j.UNAVAILABLE;case kt.UNAUTHENTICATED:return j.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case kt.NOT_FOUND:return j.NOT_FOUND;case kt.ALREADY_EXISTS:return j.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return j.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case kt.ABORTED:return j.ABORTED;case kt.OUT_OF_RANGE:return j.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return j.UNIMPLEMENTED;case kt.DATA_LOSS:return j.DATA_LOSS;default:return re()}}(Le=kt||(kt={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";var MO=null;function KN(){return new TextEncoder}var S8=new Co([4294967295,4294967295],0);function TO(n){let e=KN().encode(n),t=new DC;return t.update(e),new Uint8Array(t.digest())}function SO(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Co([t,r],0),new Co([i,o],0)]}var fb=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ks(`Invalid padding: ${t}`);if(r<0)throw new ks(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ks(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ks(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Co.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Co.fromNumber(r)));return i.compare(S8)===1&&(i=new Co([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=TO(e),[r,i]=SO(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=TO(e),[r,i]=SO(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},ks=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var nd=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,rd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(fe.min(),i,new ct(_e),Vn(),Ce())}},rd=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Ce(),Ce(),Ce())}};var Ec=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Vm=class{constructor(e,t){this.targetId=e,this.me=t}},Lm=class{constructor(e,t,r=Wt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},jm=class{constructor(){this.fe=0,this.ge=PO(),this.pe=Wt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Ce(),t=Ce(),r=Ce();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:re()}}),new rd(this.pe,this.ye,e,t,r)}ve(){this.we=!1,this.ge=PO()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,le(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},hb=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Vn(),this.qe=AO(),this.Qe=new ct(_e)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:re()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(Rm(o))if(r===0){let s=new ee(o.path);this.Ue(t,s,jt.newNoDocument(s,fe.min()))}else le(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}MO?.et(function(d,f,p,g,v){var b,_,S,k,P,U;let H={localCacheCount:d,existenceFilterCount:f.count,databaseId:p.database,projectId:p.projectId},q=f.unchangedNames;return q&&(H.bloomFilter={applied:v===0,hashCount:(b=q?.hashCount)!==null&&b!==void 0?b:0,bitmapLength:(k=(S=(_=q?.bits)===null||_===void 0?void 0:_.bitmap)===null||S===void 0?void 0:S.length)!==null&&k!==void 0?k:0,padding:(U=(P=q?.bits)===null||P===void 0?void 0:P.padding)!==null&&U!==void 0?U:0,mightContain:I=>{var w;return(w=g?.mightContain(I))!==null&&w!==void 0&&w}}),H}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Ao(r).toUint8Array()}catch(c){if(c instanceof Pm)return ir("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new fb(s,i,o)}catch(c){return ir(c instanceof ks?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&Rm(a.target)){let c=new ee(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,jt.newNoDocument(c,e))}o.be&&(t.set(s,o.Ce()),o.ve())}});let r=Ce();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new nd(e,t,this.Qe,this.ke,r);return this.ke=Vn(),this.qe=AO(),this.Qe=new ct(_e),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new jm,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Je(_e),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||W("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new jm),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function AO(){return new ct(ee.comparator)}function PO(){return new ct(ee.comparator)}var A8={asc:"ASCENDING",desc:"DESCENDING"},P8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},O8={and:"AND",or:"OR"},pb=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function mb(n,e){return n.useProto3Json||md(e)?e:{value:e}}function Ac(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function QN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function N8(n,e){return Ac(n,e.toTimestamp())}function Tt(n){return le(!!n),fe.fromTimestamp(function(t){let r=Oi(t);return new gt(r.seconds,r.nanos)}(n))}function $E(n,e){return gb(n,e).canonicalString()}function gb(n,e){let t=function(i){return new je(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function YN(n){let e=je.fromString(n);return le(sR(e)),e}function id(n,e){return $E(n.databaseId,e.path)}function qr(n,e){let t=YN(e);if(t.get(1)!==n.databaseId.projectId)throw new G(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new G(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ee(JN(t))}function ZN(n,e){return $E(n.databaseId,e)}function XN(n){let e=YN(n);return e.length===4?je.emptyPath():JN(e)}function yb(n){return new je(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function JN(n){return le(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function OO(n,e,t){return{name:id(n,e),fields:t.value.mapValue.fields}}function eR(n,e,t){let r=qr(n,e.name),i=Tt(e.updateTime),o=e.createTime?Tt(e.createTime):fe.min(),s=new pn({mapValue:{fields:e.fields}}),a=jt.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function R8(n,e){return"found"in e?function(r,i){le(!!i.found),i.found.name,i.found.updateTime;let o=qr(r,i.found.name),s=Tt(i.found.updateTime),a=i.found.createTime?Tt(i.found.createTime):fe.min(),c=new pn({mapValue:{fields:i.found.fields}});return jt.newFoundDocument(o,s,a,c)}(n,e):"missing"in e?function(r,i){le(!!i.missing),le(!!i.readTime);let o=qr(r,i.missing),s=Tt(i.readTime);return jt.newNoDocument(o,s)}(n,e):re()}function k8(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:re()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,d){return l.useProto3Json?(le(d===void 0||typeof d=="string"),Wt.fromBase64String(d||"")):(le(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Wt.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let d=l.code===void 0?j.UNKNOWN:WN(l.code);return new G(d,l.message||"")}(s);t=new Lm(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=qr(n,r.document.name),o=Tt(r.document.updateTime),s=r.document.createTime?Tt(r.document.createTime):fe.min(),a=new pn({mapValue:{fields:r.document.fields}}),c=jt.newFoundDocument(i,o,s,a),l=r.targetIds||[],d=r.removedTargetIds||[];t=new Ec(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=qr(n,r.document),o=r.readTime?Tt(r.readTime):fe.min(),s=jt.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Ec([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=qr(n,r.document),o=r.removedTargetIds||[];t=new Ec([],o,i,null)}else{if(!("filter"in e))return re();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new db(i,o),a=r.targetId;t=new Vm(a,s)}}return t}function od(n,e){let t;if(e instanceof ko)t={update:OO(n,e.key,e.value)};else if(e instanceof Fo)t={delete:id(n,e.key)};else if(e instanceof Er)t={update:OO(n,e.key,e.data),updateMask:U8(e.fieldMask)};else{if(!(e instanceof Jl))return re();t={verify:id(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof No)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ni)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ri)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ro)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw re()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:N8(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:re()}(n,e.precondition)),t}function vb(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?It.updateTime(Tt(o.updateTime)):o.exists!==void 0?It.exists(o.exists):It.none()}(e.currentDocument):It.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)le(a.setToServerValue==="REQUEST_TIME"),c=new No;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];c=new Ni(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];c=new Ri(d)}else"increment"in a?c=new Ro(s,a.increment):re();let l=Mt.fromServerFormat(a.fieldPath);return new Us(l,c)}(n,i)):[];if(e.update){e.update.name;let i=qr(n,e.update.name),o=new pn({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let l=c.fieldPaths||[];return new Gn(l.map(d=>Mt.fromServerFormat(d)))}(e.updateMask);return new Er(i,o,s,t,r)}return new ko(i,o,t,r)}if(e.delete){let i=qr(n,e.delete);return new Fo(i,t)}if(e.verify){let i=qr(n,e.verify);return new Jl(i,t)}return re()}function F8(n,e){return n&&n.length>0?(le(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Tt(i.updateTime):Tt(o);return s.isEqual(fe.min())&&(s=Tt(o)),new ub(s,i.transformResults||[])}(t,e))):[]}function tR(n,e){return{documents:[ZN(n,e.path)]}}function nR(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=ZN(n,i);let o=function(l){if(l.length!==0)return oR(Ge.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(d=>function(p){return{field:yc(p.field),direction:L8(p.dir)}}(d))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=mb(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function rR(n){let e=XN(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){le(r===1);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=function(f){let p=iR(f);return p instanceof Ge&&jE(p)?p.getFilters():[p]}(t.where));let s=[];t.orderBy&&(s=function(f){return f.map(p=>function(v){return new js(vc(v.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(p))}(t.orderBy));let a=null;t.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,md(p)?null:p}(t.limit));let c=null;t.startAt&&(c=function(f){let p=!!f.before,g=f.values||[];return new Wr(g,p)}(t.startAt));let l=null;return t.endAt&&(l=function(f){let p=!f.before,g=f.values||[];return new Wr(g,p)}(t.endAt)),AN(e,i,s,o,a,"F",c,l)}function V8(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function iR(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=vc(t.unaryFilter.field);return Fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=vc(t.unaryFilter.field);return Fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=vc(t.unaryFilter.field);return Fe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=vc(t.unaryFilter.field);return Fe.create(s,"!=",{nullValue:"NULL_VALUE"});default:return re()}}(n):n.fieldFilter!==void 0?function(t){return Fe.create(vc(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return re()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ge.create(t.compositeFilter.filters.map(r=>iR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return re()}}(t.compositeFilter.op))}(n):re()}function L8(n){return A8[n]}function j8(n){return P8[n]}function B8(n){return O8[n]}function yc(n){return{fieldPath:n.canonicalString()}}function vc(n){return Mt.fromServerFormat(n.fieldPath)}function oR(n){return n instanceof Fe?function(t){if(t.op==="=="){if(mO(t.value))return{unaryFilter:{field:yc(t.field),op:"IS_NAN"}};if(pO(t.value))return{unaryFilter:{field:yc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(mO(t.value))return{unaryFilter:{field:yc(t.field),op:"IS_NOT_NAN"}};if(pO(t.value))return{unaryFilter:{field:yc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yc(t.field),op:j8(t.op),value:t.value}}}(n):n instanceof Ge?function(t){let r=t.getFilters().map(i=>oR(i));return r.length===1?r[0]:{compositeFilter:{op:B8(t.op),filters:r}}}(n):re()}function U8(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function sR(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Pc=class n{constructor(e,t,r,i,o=fe.min(),s=fe.min(),a=Wt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Bm=class{constructor(e){this.ct=e}};function $8(n,e){let t;if(e.document)t=eR(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=ee.fromSegments(e.noDocument.path),i=zs(e.noDocument.readTime);t=jt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return re();{let r=ee.fromSegments(e.unknownDocument.path),i=zs(e.unknownDocument.version);t=jt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new gt(i[0],i[1]);return fe.fromTimestamp(o)}(e.readTime)),t}function NO(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Um(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:id(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Ac(o,s.version.toTimestamp()),createTime:Ac(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:$s(e.version)};else{if(!e.isUnknownDocument())return re();r.unknownDocument={path:t.path.toArray(),version:$s(e.version)}}return r}function Um(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function $s(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function zs(n){let e=new gt(n.seconds,n.nanoseconds);return fe.fromTimestamp(e)}function Os(n,e){let t=(e.baseMutations||[]).map(o=>vb(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>vb(n.ct,o)),i=gt.fromMillis(e.localWriteTimeMs);return new ed(e.batchId,i,t,r)}function Ul(n){let e=zs(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?zs(n.lastLimboFreeSnapshotVersion):fe.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return le(o.documents.length===1),Tn($c(XN(o.documents[0])))}(n.query):function(o){return Tn(rR(o))}(n.query),new Pc(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Wt.fromBase64String(n.resumeToken))}function aR(n,e){let t=$s(e.snapshotVersion),r=$s(e.lastLimboFreeSnapshotVersion),i;i=Rm(e.target)?tR(n.ct,e.target):nR(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Bs(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function zE(n){let e=rR({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Fm(e,e.limit,"L"):e}function NC(n,e){return new td(e.largestBatchId,vb(n.ct,e.overlayMutation))}function RO(n,e){let t=e.path.lastSegment();return[n,Mn(e.path.popLast()),t]}function kO(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:$s(r.readTime),documentKey:Mn(r.documentKey.path),largestBatchId:r.largestBatchId}}var _b=class{getBundleMetadata(e,t){return FO(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:zs(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return FO(e).put(function(i){return{bundleId:i.id,createTime:$s(Tt(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return VO(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:zE(o.bundledQuery),readTime:zs(o.readTime)}}(r)})}saveNamedQuery(e,t){return VO(e).put(function(i){return{name:i.name,readTime:$s(Tt(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function FO(n){return Kt(n,"bundles")}function VO(n){return Kt(n,"namedQueries")}var $m=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return Fl(e).get(RO(this.userId,t)).next(r=>r?NC(this.serializer,r):null)}getOverlays(e,t){let r=$r();return V.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new td(t,s);i.push(this.ht(e,a))}),V.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(Mn(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Fl(e).j("collectionPathOverlayIndex",a))}),V.waitFor(o)}getOverlaysForCollection(e,t,r){let i=$r(),o=Mn(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Fl(e).U("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let l=NC(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=$r(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Fl(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,d)=>{let f=NC(this.serializer,l);o.size()<i||f.largestBatchId===s?(o.set(f.getKey(),f),s=f.largestBatchId):d.done()}).next(()=>o)}ht(e,t){return Fl(e).put(function(i,o,s){let[a,c,l]=RO(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:od(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function Fl(n){return Kt(n,"documentOverlays")}var Ai=class{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Et(e.integerValue));else if("doubleValue"in e){let r=Et(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),Kl(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(t,20),typeof r=="string"&&(r=Oi(r)),t.At(`${r.seconds||""}`),t.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Ao(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?EN(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):re()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){let r=e.fields||{};this.Et(t,55);for(let i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){let r=e.values||[];this.Et(t,50);for(let i of r)this.It(i,t)}gt(e,t){this.Et(t,37),ee.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}};Ai.bt=new Ai;function z8(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function LO(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=z8(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var wb=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ct(r.value),r=t.next();this.vt()}Ft(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Mt(r.value),r=t.next();this.xt()}Ot(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{let i=t.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{let i=t.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){let t=this.Bt(e),r=LO(t);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}qt(e){let t=this.Bt(e),r=LO(t);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ct(e){let t=255&e;t===0?(this.Kt(0),this.Kt(255)):t===255?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Cb=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}},bb=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},Ns=class{constructor(){this.Gt=new wb,this.zt=new Cb(this.Gt),this.jt=new bb(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var Rs=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Jt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function bo(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=jO(n.arrayValue,e.arrayValue),t!==0?t:(t=jO(n.directionalValue,e.directionalValue),t!==0?t:ee.comparator(n.documentKey,e.documentKey)))}function jO(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var zm=class{constructor(e){this.Yt=new Je((t,r)=>Mt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let t of e.filters){let r=t;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(le(e.collectionGroup===this.collectionId),this.en)return!1;let t=qC(e);if(t!==void 0&&!this.nn(t))return!1;let r=As(e),i=new Set,o=0,s=0;for(;o<r.length&&this.nn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.rn(a,c)||!this.sn(this.Zt[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.Zt.length||!this.sn(this.Zt[s++],a))return!1}return!0}on(){if(this.en)return null;let e=new Je(Mt.comparator),t=[];for(let r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Cc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Cc(r.field,0))}for(let r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Cc(r.field,r.dir==="asc"?0:1)));return new xc(xc.UNKNOWN_ID,this.collectionId,t,Wl.empty())}nn(e){for(let t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function cR(n){var e,t;if(le(n instanceof Fe||n instanceof Ge),n instanceof Fe){if(n instanceof Nm){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>Fe.create(n.field,"==",o)))||[];return Ge.create(i,"or")}return n}let r=n.filters.map(i=>cR(i));return Ge.create(r,n.op)}function q8(n){if(n.getFilters().length===0)return[];let e=xb(cR(n));return le(uR(e)),Eb(e)||Ib(e)?[e]:e.getFilters()}function Eb(n){return n instanceof Fe}function Ib(n){return n instanceof Ge&&jE(n)}function uR(n){return Eb(n)||Ib(n)||function(t){if(t instanceof Ge&&XC(t)){for(let r of t.getFilters())if(!Eb(r)&&!Ib(r))return!1;return!0}return!1}(n)}function xb(n){if(le(n instanceof Fe||n instanceof Ge),n instanceof Fe)return n;if(n.filters.length===1)return xb(n.filters[0]);let e=n.filters.map(r=>xb(r)),t=Ge.create(e,n.op);return t=qm(t),uR(t)?t:(le(t instanceof Ge),le(Mc(t)),le(t.filters.length>1),t.filters.reduce((r,i)=>qE(r,i)))}function qE(n,e){let t;return le(n instanceof Fe||n instanceof Ge),le(e instanceof Fe||e instanceof Ge),t=n instanceof Fe?e instanceof Fe?function(i,o){return Ge.create([i,o],"and")}(n,e):BO(n,e):e instanceof Fe?BO(e,n):function(i,o){if(le(i.filters.length>0&&o.filters.length>0),Mc(i)&&Mc(o))return MN(i,o.getFilters());let s=XC(i)?i:o,a=XC(i)?o:i,c=s.filters.map(l=>qE(l,a));return Ge.create(c,"or")}(n,e),qm(t)}function BO(n,e){if(Mc(e))return MN(e,n.getFilters());{let t=e.filters.map(r=>qE(n,r));return Ge.create(t,"or")}}function qm(n){if(le(n instanceof Fe||n instanceof Ge),n instanceof Fe)return n;let e=n.getFilters();if(e.length===1)return qm(e[0]);if(xN(n))return n;let t=e.map(i=>qm(i)),r=[];return t.forEach(i=>{i instanceof Fe?r.push(i):i instanceof Ge&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Ge.create(r,n.op)}var Db=class{constructor(){this._n=new sd}addToCollectionParentIndex(e,t){return this._n.add(t),V.resolve()}getCollectionParents(e,t){return V.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return V.resolve()}deleteFieldIndex(e,t){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,t){return V.resolve()}getDocumentsMatchingTarget(e,t){return V.resolve(null)}getIndexType(e,t){return V.resolve(0)}getFieldIndexes(e,t){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,t){return V.resolve(or.min())}getMinOffsetFromCollectionGroup(e,t){return V.resolve(or.min())}updateCollectionGroup(e,t,r){return V.resolve()}updateIndexEntries(e,t){return V.resolve()}},sd=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Je(je.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Je(je.comparator)).toArray()}};var mm=new Uint8Array(0),Mb=class{constructor(e,t){this.databaseId=t,this.an=new sd,this.un=new Kr(r=>Bs(r),(r,i)=>gd(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});let o={collectionId:r,parent:Mn(i)};return UO(e).put(o)}return V.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[lN(t),""],!1,!0);return UO(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Ur(s.parent))}return r})}addFieldIndex(e,t){let r=Vl(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=hc(e);return o.next(a=>{s.put(kO(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=Vl(e),i=hc(e),o=fc(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=Vl(e),r=fc(e),i=hc(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return V.forEach(this.cn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new zm(r).on();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=fc(e),i=!0,o=new Map;return V.forEach(this.cn(t),s=>this.ln(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=Ce(),a=[];return V.forEach(o,(c,l)=>{W("IndexedDbIndexManager",`Using index ${function(P){return`id=${P.indexId}|cg=${P.collectionGroup}|f=${P.fields.map(U=>`${U.fieldPath}:${U.kind}`).join(",")}`}(c)} to execute ${Bs(t)}`);let d=function(P,U){let H=qC(U);if(H===void 0)return null;for(let q of km(P,H.fieldPath))switch(q.op){case"array-contains-any":return q.value.arrayValue.values||[];case"array-contains":return[q.value]}return null}(l,c),f=function(P,U){let H=new Map;for(let q of As(U))for(let I of km(P,q.fieldPath))switch(I.op){case"==":case"in":H.set(q.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return H.set(q.fieldPath.canonicalString(),I.value),Array.from(H.values())}return null}(l,c),p=function(P,U){let H=[],q=!0;for(let I of As(U)){let w=I.kind===0?wO(P,I.fieldPath,P.startAt):CO(P,I.fieldPath,P.startAt);H.push(w.value),q&&(q=w.inclusive)}return new Wr(H,q)}(l,c),g=function(P,U){let H=[],q=!0;for(let I of As(U)){let w=I.kind===0?CO(P,I.fieldPath,P.endAt):wO(P,I.fieldPath,P.endAt);H.push(w.value),q&&(q=w.inclusive)}return new Wr(H,q)}(l,c),v=this.hn(c,l,p),b=this.hn(c,l,g),_=this.Pn(c,l,f),S=this.In(c.indexId,d,v,p.inclusive,b,g.inclusive,_);return V.forEach(S,k=>r.G(k,t.limit).next(P=>{P.forEach(U=>{let H=ee.fromSegments(U.documentKey);s.has(H)||(s=s.add(H),a.push(H))})}))}).next(()=>a)}return V.resolve(null)})}cn(e){let t=this.un.get(e);return t||(e.filters.length===0?t=[e]:t=q8(Ge.create(e.filters,"and")).map(r=>ab(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}In(e,t,r,i,o,s,a){let c=(t!=null?t.length:1)*Math.max(r.length,o.length),l=c/(t!=null?t.length:1),d=[];for(let f=0;f<c;++f){let p=t?this.Tn(t[f/l]):mm,g=this.En(e,p,r[f%l],i),v=this.dn(e,p,o[f%l],s),b=a.map(_=>this.En(e,p,_,!0));d.push(...this.createRange(g,v,b))}return d}En(e,t,r,i){let o=new Rs(e,ee.empty(),t,r);return i?o:o.Jt()}dn(e,t,r,i){let o=new Rs(e,ee.empty(),t,r);return i?o.Jt():o}ln(e,t){let r=new zm(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.tn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.cn(t);return V.forEach(i,o=>this.ln(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let l=new Je(Mt.comparator),d=!1;for(let f of c.filters)for(let p of f.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?d=!0:l=l.add(p.field));for(let f of c.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(d?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}An(e,t){let r=new Ns;for(let i of As(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Ht(i.kind);Ai.bt.Pt(o,s)}return r.Wt()}Tn(e){let t=new Ns;return Ai.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){let r=new Ns;return Ai.bt.Pt(Ls(this.databaseId,t),r.Ht(function(o){let s=As(o);return s.length===0?0:s[s.length-1].kind}(e))),r.Wt()}Pn(e,t,r){if(r===null)return[];let i=[];i.push(new Ns);let o=0;for(let s of As(e)){let a=r[o++];for(let c of i)if(this.Vn(t,s.fieldPath)&&Xl(a))i=this.mn(i,s,a);else{let l=c.Ht(s.kind);Ai.bt.Pt(a,l)}}return this.fn(i)}hn(e,t,r){return this.Pn(e,t,r.position)}fn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Wt();return t}mn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new Ns;c.seed(a.Wt()),Ai.bt.Pt(s,c.Ht(t.kind)),o.push(c)}return o}Vn(e,t){return!!e.filters.find(r=>r instanceof Fe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=Vl(e),i=hc(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return V.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(d,f){let p=f?new Wl(f.sequenceNumber,new or(zs(f.readTime),new ee(Ur(f.documentKey)),f.largestBatchId)):Wl.empty(),g=d.fields.map(([v,b])=>new Cc(Mt.fromServerFormat(v),b));return new xc(d.indexId,d.collectionGroup,g,p)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:_e(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=Vl(e),o=hc(e);return this.gn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>V.forEach(a,c=>o.put(kO(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return V.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?V.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),V.forEach(a,c=>this.pn(e,i,c).next(l=>{let d=this.yn(o,c);return l.isEqual(d)?V.resolve():this.wn(e,o,c,l,d)}))))})}Sn(e,t,r,i){return fc(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,t.key),documentKey:t.key.path.toArray()})}bn(e,t,r,i){return fc(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,t.key),t.key.path.toArray()])}pn(e,t,r){let i=fc(e),o=new Je(bo);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,t)])},(s,a)=>{o=o.add(new Rs(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}yn(e,t){let r=new Je(bo),i=this.An(t,e);if(i==null)return r;let o=qC(t);if(o!=null){let s=e.data.field(o.fieldPath);if(Xl(s))for(let a of s.arrayValue.values||[])r=r.add(new Rs(t.indexId,e.key,this.Tn(a),i))}else r=r.add(new Rs(t.indexId,e.key,mm,i));return r}wn(e,t,r,i,o){W("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(c,l,d,f,p){let g=c.getIterator(),v=l.getIterator(),b=dc(g),_=dc(v);for(;b||_;){let S=!1,k=!1;if(b&&_){let P=d(b,_);P<0?k=!0:P>0&&(S=!0)}else b!=null?k=!0:S=!0;S?(f(_),_=dc(v)):k?(p(b),b=dc(g)):(b=dc(g),_=dc(v))}}(i,o,bo,a=>{s.push(this.Sn(e,t,r,a))},a=>{s.push(this.bn(e,t,r,a))}),V.waitFor(s)}gn(e){let t=1;return hc(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>bo(s,a)).filter((s,a,c)=>!a||bo(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=bo(s,e),c=bo(s,t);if(a===0)i[0]=e.Jt();else if(a>0&&c<0)i.push(s),i.push(s.Jt());else if(c>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Dn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,mm,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,mm,[]];o.push(IDBKeyRange.bound(a,c))}return o}Dn(e,t){return bo(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next($O)}getMinOffset(e,t){return V.mapArray(this.cn(t),r=>this.ln(e,r).next(i=>i||re())).next($O)}};function UO(n){return Kt(n,"collectionParents")}function fc(n){return Kt(n,"indexEntries")}function Vl(n){return Kt(n,"indexConfiguration")}function hc(n){return Kt(n,"indexState")}function $O(n){le(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;FE(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new or(e.readTime,e.documentKey,t)}var zO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rr=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function lR(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,c=r.J({range:s},(d,f,p)=>(a++,p.delete()));o.push(c.next(()=>{le(a===1)}));let l=[];for(let d of t.mutations){let f=gN(e,d.key.path,t.batchId);o.push(i.delete(f)),l.push(d.key)}return V.waitFor(o).next(()=>l)}function Hm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw re();e=n.noDocument}return JSON.stringify(e).length}rr.DEFAULT_COLLECTION_PERCENTILE=10,rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rr.DEFAULT=new rr(41943040,rr.DEFAULT_COLLECTION_PERCENTILE,rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rr.DISABLED=new rr(-1,0,0);var Gm=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,t,r,i){le(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Eo(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=_c(e),s=Eo(e);return s.add({}).next(a=>{le(typeof a=="number");let c=new ed(a,t,r,i),l=function(g,v,b){let _=b.baseMutations.map(k=>od(g.ct,k)),S=b.mutations.map(k=>od(g.ct,k));return{userId:v,batchId:b.batchId,localWriteTimeMs:b.localWriteTime.toMillis(),baseMutations:_,mutations:S}}(this.serializer,this.userId,c),d=[],f=new Je((p,g)=>_e(p.canonicalString(),g.canonicalString()));for(let p of i){let g=gN(this.userId,p.key.path,a);f=f.add(p.key.path.popLast()),d.push(s.put(l)),d.push(o.put(g,Z6))}return f.forEach(p=>{d.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),V.waitFor(d).next(()=>c)})}lookupMutationBatch(e,t){return Eo(e).get(t).next(r=>r?(le(r.userId===this.userId),Os(this.serializer,r)):null)}vn(e,t){return this.Cn[t]?V.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Cn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Eo(e).J({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(le(a.batchId>=r),o=Os(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Eo(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Eo(e).U("userMutationsIndex",t).next(r=>r.map(i=>Os(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=_m(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return _c(e).J({range:i},(s,a,c)=>{let[l,d,f]=s,p=Ur(d);if(l===this.userId&&t.path.isEqual(p))return Eo(e).get(f).next(g=>{if(!g)throw re();le(g.userId===this.userId),o.push(Os(this.serializer,g))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Je(_e),i=[];return t.forEach(o=>{let s=_m(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=_c(e).J({range:a},(l,d,f)=>{let[p,g,v]=l,b=Ur(g);p===this.userId&&o.path.isEqual(b)?r=r.add(v):f.done()});i.push(c)}),V.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=_m(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Je(_e);return _c(e).J({range:s},(c,l,d)=>{let[f,p,g]=c,v=Ur(p);f===this.userId&&r.isPrefixOf(v)?v.length===i&&(a=a.add(g)):d.done()}).next(()=>this.Fn(e,a))}Fn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(Eo(e).get(o).next(s=>{if(s===null)throw re();le(s.userId===this.userId),r.push(Os(this.serializer,s))}))}),V.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return lR(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),V.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return V.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return _c(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=Ur(o[1]);i.push(c)}else a.done()}).next(()=>{le(i.length===0)})})}containsKey(e,t){return dR(e,this.userId,t)}xn(e){return fR(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function dR(n,e,t){let r=_m(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return _c(n).J({range:o,H:!0},(a,c,l)=>{let[d,f,p]=a;d===e&&f===i&&(s=!0),l.done()}).next(()=>s)}function Eo(n){return Kt(n,"mutations")}function _c(n){return Kt(n,"documentMutations")}function fR(n){return Kt(n,"mutationQueues")}var Oc=class n{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new n(0)}static Ln(){return new n(-1)}};var Tb=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{let r=new Oc(t.highestTargetId);return t.highestTargetId=r.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>fe.fromTimestamp(new gt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.kn(e,i)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(t,r),this.kn(e,r))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>pc(e).delete(t.targetId)).next(()=>this.Bn(e)).next(r=>(le(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return pc(e).J((s,a)=>{let c=Ul(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>V.waitFor(o)).next(()=>i)}forEachTarget(e,t){return pc(e).J((r,i)=>{let o=Ul(i);t(o)})}Bn(e){return qO(e).get("targetGlobalKey").next(t=>(le(t!==null),t))}kn(e,t){return qO(e).put("targetGlobalKey",t)}qn(e,t){return pc(e).put(aR(this.serializer,t))}Qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=Bs(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return pc(e).J({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let l=Ul(a);gd(t,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=Io(e);return t.forEach(s=>{let a=Mn(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),V.waitFor(i)}removeMatchingKeys(e,t,r){let i=Io(e);return V.forEach(t,o=>{let s=Mn(o.path);return V.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=Io(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Io(e),o=Ce();return i.J({range:r,H:!0},(s,a,c)=>{let l=Ur(s[1]),d=new ee(l);o=o.add(d)}).next(()=>o)}containsKey(e,t){let r=Mn(t.path),i=IDBKeyRange.bound([r],[lN(r)],!1,!0),o=0;return Io(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return pc(e).get(t).next(r=>r?Ul(r):null)}};function pc(n){return Kt(n,"targets")}function qO(n){return Kt(n,"targetGlobal")}function Io(n){return Kt(n,"targetDocuments")}function HO([n,e],[t,r]){let i=_e(n,t);return i===0?_e(e,r):i}var Sb=class{constructor(e){this.Kn=e,this.buffer=new Je(HO),this.$n=0}Un(){return++this.$n}Wn(e){let t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();HO(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Ab=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){W("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>F(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){jo(t)?W("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Lo(t)}yield this.zn(3e5)}))}},Pb=class{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return V.resolve(Hn.oe);let r=new Sb(t);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(zO)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zO):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let r,i,o,s,a,c,l,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(o=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),mc()<=Sr.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(l-c)+`ms
Total Duration: ${l-d}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function H8(n,e){return new Pb(n,e)}var Ob=class{constructor(e,t){this.db=e,this.garbageCollector=H8(this,t)}Hn(e){let t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Zn(e){let t=0;return this.Jn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(r,i)=>t(i))}addReference(e,t,r){return gm(e,r)}removeReference(e,t,r){return gm(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return gm(e,t)}er(e,t){return function(i,o){let s=!1;return fR(i).Y(a=>dR(i,a,o).next(c=>(c&&(s=!0),V.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.Xn(e,(s,a)=>{if(a<=t){let c=this.er(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,fe.min()),Io(e).delete(function(f){return[0,Mn(f.path)]}(s))))});i.push(c)}}).next(()=>V.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return gm(e,t)}Xn(e,t){let r=Io(e),i,o=Hn.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==Hn.oe&&t(new ee(Ur(i)),o),o=l,i=c):o=Hn.oe}).next(()=>{o!==Hn.oe&&t(new ee(Ur(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function gm(n,e){return Io(n).put(function(r,i){return{targetId:0,path:Mn(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var Wm=class{constructor(){this.changes=new Kr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,jt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?V.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Nb=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ss(e).put(r)}removeEntry(e,t,r){return Ss(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Um(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.tr(e,r)))}getEntry(e,t){let r=jt.newInvalidDocument(t);return Ss(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ll(t))},(i,o)=>{r=this.nr(t,o)}).next(()=>r)}rr(e,t){let r={size:0,document:jt.newInvalidDocument(t)};return Ss(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ll(t))},(i,o)=>{r={document:this.nr(t,o),size:Hm(o)}}).next(()=>r)}getEntries(e,t){let r=Vn();return this.ir(e,t,(i,o)=>{let s=this.nr(i,o);r=r.insert(i,s)}).next(()=>r)}sr(e,t){let r=Vn(),i=new ct(ee.comparator);return this.ir(e,t,(o,s)=>{let a=this.nr(o,s);r=r.insert(o,a),i=i.insert(o,Hm(s))}).next(()=>({documents:r,_r:i}))}ir(e,t,r){if(t.isEmpty())return V.resolve();let i=new Je(KO);t.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(Ll(i.first()),Ll(i.last())),s=i.getIterator(),a=s.getNext();return Ss(e).J({index:"documentKeyIndex",range:o},(c,l,d)=>{let f=ee.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&KO(a,f)<0;)r(a,null),a=s.getNext();a&&a.isEqual(f)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?d.$(Ll(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Um(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ss(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let d=Vn();for(let f of l){let p=this.nr(ee.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);p.isFoundDocument()&&(vd(t,p)||i.has(p.key))&&(d=d.insert(p.key,p))}return d})}getAllFromCollectionGroup(e,t,r,i){let o=Vn(),s=WO(t,r),a=WO(t,or.max());return Ss(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,l,d)=>{let f=this.nr(ee.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(f.key,f),o.size===i&&d.done()}).next(()=>o)}newChangeBuffer(e){return new Rb(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return GO(e).get("remoteDocumentGlobalKey").next(t=>(le(!!t),t))}tr(e,t){return GO(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){let r=$8(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(fe.min())))return r}return jt.newInvalidDocument(e)}};function hR(n){return new Nb(n)}var Rb=class extends Wm{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new Kr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Je((o,s)=>_e(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.ur.get(o);if(t.push(this.ar.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=NO(this.ar.serializer,s);i=i.add(o.path.popLast());let l=Hm(c);r+=l-a.size,t.push(this.ar.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=NO(this.ar.serializer,s.convertToNoDocument(fe.min()));t.push(this.ar.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.ar.updateMetadata(e,r)),V.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(r=>(this.ur.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:r,_r:i})=>(i.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function GO(n){return Kt(n,"remoteDocumentGlobal")}function Ss(n){return Kt(n,"remoteDocumentsV14")}function Ll(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function WO(n,e){let t=e.documentKey.path.toArray();return[n,Um(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function KO(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=_e(t[o],r[o]),i)return i;return i=_e(t.length,r.length),i||(i=_e(t[t.length-2],r[r.length-2]),i||_e(t[t.length-1],r[r.length-1]))}var kb=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Km=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&ql(r.mutation,i,Gn.empty(),gt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ce()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ce()){let i=$r();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Bl();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=$r();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ce()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Vn(),s=zl(),a=function(){return zl()}();return t.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof Er)?o=o.insert(l.key,l):d!==void 0?(s.set(l.key,d.mutation.getFieldMask()),ql(d.mutation,l,d.mutation.getFieldMask(),gt.now())):s.set(l.key,Gn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,d)=>s.set(l,d)),t.forEach((l,d)=>{var f;return a.set(l,new kb(d,(f=s.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=zl(),i=new ct((s,a)=>s-a),o=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let d=r.get(c)||Gn.empty();d=a.applyToLocalView(l,d),r.set(c,d);let f=(i.get(a.batchId)||Ce()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,f=FN();d.forEach(p=>{if(!o.has(p)){let g=qN(t.get(p),r.get(p));g!==null&&f.set(p,g),o=o.add(p)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,f))}return V.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return ee.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):BE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):V.resolve($r()),a=-1,c=o;return s.next(l=>V.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?V.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{c=c.insert(d,p)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,Ce())).next(d=>({batchId:a,changes:kN(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ee(t)).next(r=>{let i=Bl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Bl();return this.indexManager.getCollectionParents(e,o).next(a=>V.forEach(a,c=>{let l=function(f,p){return new br(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,p)=>{s=s.insert(f,p)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let d=l.getKey();s.get(d)===null&&(s=s.insert(d,jt.newInvalidDocument(d)))});let a=Bl();return s.forEach((c,l)=>{let d=o.get(c);d!==void 0&&ql(d.mutation,l,Gn.empty(),gt.now()),vd(t,l)&&(a=a.insert(c,l))}),a})}};var Fb=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return V.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Tt(i.createTime)}}(t)),V.resolve()}getNamedQuery(e,t){return V.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(i){return{name:i.name,query:zE(i.bundledQuery),readTime:Tt(i.readTime)}}(t)),V.resolve()}};var Vb=class{constructor(){this.overlays=new ct(ee.comparator),this.hr=new Map}getOverlay(e,t){return V.resolve(this.overlays.get(t))}getOverlays(e,t){let r=$r();return V.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),V.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),V.resolve()}getOverlaysForCollection(e,t,r){let i=$r(),o=t.length+1,s=new ee(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return V.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new ct((l,d)=>l-d),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let d=o.get(l.largestBatchId);d===null&&(d=$r(),o=o.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=$r(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return V.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new td(t,r));let o=this.hr.get(t);o===void 0&&(o=Ce(),this.hr.set(t,o)),this.hr.set(t,o.add(r.key))}};var ad=class{constructor(){this.Pr=new Je(Ft.Ir),this.Tr=new Je(Ft.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){let r=new Ft(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new Ft(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){let t=new ee(new je([])),r=new Ft(t,e),i=new Ft(t,e+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let t=new ee(new je([])),r=new Ft(t,e),i=new Ft(t,e+1),o=Ce();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Ft(e,0),r=this.Pr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ft=class{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return ee.comparator(e.key,t.key)||_e(e.pr,t.pr)}static Er(e,t){return _e(e.pr,t.pr)||ee.comparator(e.key,t.key)}};var Lb=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Je(Ft.Ir)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new ed(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.wr=this.wr.add(new Ft(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(s)}lookupMutationBatch(e,t){return V.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.br(r),o=i<0?0:i;return V.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ft(t,0),i=new Ft(t,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{let a=this.Sr(s.pr);o.push(a)}),V.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Je(_e);return t.forEach(i=>{let o=new Ft(i,0),s=new Ft(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),V.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;ee.isDocumentKey(o)||(o=o.child(""));let s=new Ft(new ee(o),0),a=new Je(_e);return this.wr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.pr)),!0)},s),V.resolve(this.Dr(a))}Dr(e){let t=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){le(this.Cr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return V.forEach(t.mutations,i=>{let o=new Ft(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){let r=new Ft(t,0),i=this.wr.firstAfterOrEqual(r);return V.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Cr(e,t){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var jb=class{constructor(e){this.vr=e,this.docs=function(){return new ct(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return V.resolve(r?r.document.mutableCopy():jt.newInvalidDocument(t))}getEntries(e,t){let r=Vn();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():jt.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Vn(),s=t.path,a=new ee(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||FE(fN(d),r)<=0||(i.has(d.key)||vd(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return V.resolve(o)}getAllFromCollectionGroup(e,t,r,i){re()}Fr(e,t){return V.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Bb(this)}getSize(e){return V.resolve(this.size)}},Bb=class extends Wm{constructor(e){super(),this.ar=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),V.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}};var Ub=class{constructor(e){this.persistence=e,this.Mr=new Kr(t=>Bs(t),gd),this.lastRemoteSnapshotVersion=fe.min(),this.highestTargetId=0,this.Or=0,this.Nr=new ad,this.targetCount=0,this.Lr=Oc.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),V.resolve()}qn(e){this.Mr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Lr=new Oc(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,V.resolve()}updateTargetData(e,t){return this.qn(t),V.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),V.waitFor(o).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,t){let r=this.Mr.get(t)||null;return V.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),V.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),V.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),V.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Nr.gr(t);return V.resolve(r)}containsKey(e,t){return V.resolve(this.Nr.containsKey(t))}};var Qm=class{constructor(e,t){this.Br={},this.overlays={},this.kr=new Hn(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Ub(this),this.indexManager=new Db,this.remoteDocumentCache=function(i){return new jb(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Bm(t),this.$r=new Fb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Vb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new Lb(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){W("MemoryPersistence","Starting transaction:",e);let i=new $b(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,t){return V.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}},$b=class extends Tm{constructor(e){super(),this.currentSequenceNumber=e}},Ym=class n{constructor(e){this.persistence=e,this.zr=new ad,this.jr=null}static Hr(e){return new n(e)}get Jr(){if(this.jr)return this.jr;throw re()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),V.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),V.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Jr,r=>{let i=ee.fromPath(r);return this.Yr(e,i).next(o=>{o||t.removeEntry(i,fe.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return V.or([()=>V.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}};var zb=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new Sm("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dO,{unique:!0}),c.createObjectStore("documentMutations")}(e),QO(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=V.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),QO(e)),s=s.next(()=>function(c){let l=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:fe.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",d)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,l){return l.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dO,{unique:!0});let f=l.store("mutations"),p=d.map(g=>f.put(g));return V.waitFor(p)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.Xr(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),r<7&&i>=7&&(s=s.next(()=>this.ti(o))),r<8&&i>=8&&(s=s.next(()=>this.ni(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.ri(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:u8});l.createIndex("collectionPathOverlayIndex",l8,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",d8,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:X6});l.createIndex("documentKeyIndex",J6),l.createIndex("collectionGroupIndex",e8)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.si(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:o8}).createIndex("sequenceNumberIndex",s8,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:a8}).createIndex("documentKeyIndex",c8,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),s}ei(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Hm(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>V.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>V.forEach(a,c=>{le(c.userId===o.userId);let l=Os(this.serializer,c);return lR(e,o.userId,l).next(()=>{})}))}))}ti(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let c=new je(s),l=function(f){return[0,Mn(f)]}(c);o.push(t.get(l).next(d=>d?V.resolve():(f=>t.put({targetId:0,path:Mn(f),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>V.waitFor(o))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:i8});let r=t.store("collectionParents"),i=new sd,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:Mn(c)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let c=new je(s);return o(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,c],l)=>{let d=Ur(a);return o(d.popLast())}))}ri(e){let t=e.store("targets");return t.J((r,i)=>{let o=Ul(i),s=aR(this.serializer,o);return t.put(s)})}ii(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),c=function(f){return f.document?new ee(je.fromString(f.document.name).popFirst(5)):f.noDocument?ee.fromSegments(f.noDocument.path):f.unknownDocument?ee.fromSegments(f.unknownDocument.path):re()}(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>V.waitFor(i))}si(e,t){let r=t.store("mutations"),i=hR(this.serializer),o=new Qm(Ym.Hr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(c=>{var l;let d=(l=a.get(c.userId))!==null&&l!==void 0?l:Ce();Os(this.serializer,c).keys().forEach(f=>d=d.add(f)),a.set(c.userId,d)}),V.forEach(a,(c,l)=>{let d=new Vt(l),f=$m.lt(this.serializer,d),p=o.getIndexManager(d),g=Gm.lt(d,this.serializer,p,o.referenceDelegate);return new Km(i,g,f,p).recalculateAndSaveOverlaysForDocumentKeys(new Ql(t,Hn.oe),c).next()})})}};function QO(n){n.createObjectStore("targetDocuments",{keyPath:n8}).createIndex("documentTargetsIndex",r8,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",t8,{unique:!0}),n.createObjectStore("targetGlobal")}var RC="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",qb=class n{constructor(e,t,r,i,o,s,a,c,l,d,f=16){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.oi=o,this.window=s,this.document=a,this._i=l,this.ai=d,this.ui=f,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=p=>Promise.resolve(),!n.D())throw new G(j.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ob(this,i),this.Ti=t+"main",this.serializer=new Bm(c),this.Ei=new So(this.Ti,this.ui,new zb(this.serializer)),this.Qr=new Tb(this.referenceDelegate,this.serializer),this.remoteDocumentCache=hR(this.serializer),this.$r=new _b,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,d===!1&&Dt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new G(j.FAILED_PRECONDITION,RC);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Hn(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=t=>F(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(t=>F(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>F(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ym(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(jo(e))return W("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return W("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return jl(e).get("owner").next(t=>V.resolve(this.Si(t)))}bi(e){return ym(e).delete(this.clientId)}Di(){return F(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=Kt(t,"clientMetadata");return r.U().next(i=>{let o=this.vi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return V.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.di)for(let t of e)this.di.removeItem(this.Fi(t.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?V.resolve(!0):jl(e).get("owner").next(t=>{if(t!==null&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new G(j.FAILED_PRECONDITION,RC);return!1}}return!(!this.networkEnabled||!this.inForeground)||ym(e).U().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&W("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return F(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new Ql(e,Hn.oe);return this.yi(t).next(()=>this.bi(t))}),this.Ei.close(),this.Li()})}vi(e,t){return e.filter(r=>this.Ci(r.updateTimeMs,t)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>ym(e).U().next(t=>this.vi(t,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return Gm.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Mb(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return $m.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,r){W("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(c){return c===16?h8:c===15?wN:c===14?_N:c===13?vN:c===12?f8:c===11?yN:void re()}(this.ui),s;return this.Ei.runTransaction(e,i,o,a=>(s=new Ql(a,this.kr?this.kr.next():Hn.oe),t==="readwrite-primary"?this.gi(s).next(c=>!!c||this.pi(s)).next(c=>{if(!c)throw Dt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new G(j.FAILED_PRECONDITION,hN);return r(s)}).next(c=>this.wi(s).next(()=>c)):this.ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ki(e){return jl(e).get("owner").next(t=>{if(t!==null&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new G(j.FAILED_PRECONDITION,RC)})}wi(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return jl(e).put("owner",t)}static D(){return So.D()}yi(e){let t=jl(e);return t.get("owner").next(r=>this.Si(r)?(W("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):V.resolve())}Ci(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(Dt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let t=/(?:Version|Mobile)\/1[456]/;Sv()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{let r=((t=this.di)===null||t===void 0?void 0:t.getItem(this.Fi(e)))!==null;return W("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Dt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Dt("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function jl(n){return Kt(n,"owner")}function ym(n){return Kt(n,"clientMetadata")}function HE(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var Hb=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=Ce(),i=Ce();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Gb=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Zm=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Sv()?8:pN(Su())>0?6:4}()}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ji(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Gb;return this.Ji(e,t,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,t,s,a.size)})}).next(()=>o.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(mc()<=Sr.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",gc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),V.resolve()):(mc()<=Sr.DEBUG&&W("QueryEngine","Query:",gc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(mc()<=Sr.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",gc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tn(t))):V.resolve())}ji(e,t){if(bO(t))return V.resolve(null);let r=Tn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Fm(t,null,"F"),r=Tn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Ce(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.Zi(t,a);return this.Xi(t,l,s,c.readTime)?this.ji(e,Fm(t,null,"F")):this.es(e,l,t,c)}))})))}Hi(e,t,r,i){return bO(t)||i.isEqual(fe.min())?V.resolve(null):this.zi.getDocuments(e,r).next(o=>{let s=this.Zi(t,o);return this.Xi(t,s,r,i)?V.resolve(null):(mc()<=Sr.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),gc(t)),this.es(e,s,t,dN(i,-1)).next(a=>a))})}Zi(e,t){let r=new Je(NN(e));return t.forEach((i,o)=>{vd(e,o)&&(r=r.add(o))}),r}Xi(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,t,r){return mc()<=Sr.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",gc(t)),this.zi.getDocumentsMatchingQuery(e,t,or.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Wb=class{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new ct(_e),this.rs=new Kr(o=>Bs(o),gd),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Km(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}};function pR(n,e,t,r){return new Wb(n,e,t,r)}function mR(n,e){return F(this,null,function*(){let t=te(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=Ce();for(let l of i){s.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of o){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(l=>({us:l,removedBatchIds:s,addedBatchIds:a}))})})})}function G8(n,e){let t=te(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let f=l.batch,p=f.keys(),g=V.resolve();return p.forEach(v=>{g=g.next(()=>d.getEntry(c,v)).next(b=>{let _=l.docVersions.get(v);le(_!==null),b.version.compareTo(_)<0&&(f.applyToRemoteDocument(b,l),b.isValidDocument()&&(b.setReadTime(l.commitVersion),d.addEntry(b)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Ce();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function gR(n){let e=te(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function W8(n,e){let t=te(n),r=e.snapshotVersion,i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;let a=[];e.targetChanges.forEach((d,f)=>{let p=i.get(f);if(!p)return;a.push(t.Qr.removeMatchingKeys(o,d.removedDocuments,f).next(()=>t.Qr.addMatchingKeys(o,d.addedDocuments,f)));let g=p.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(Wt.EMPTY_BYTE_STRING,fe.min()).withLastLimboFreeSnapshotVersion(fe.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),i=i.insert(f,g),function(b,_,S){return b.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(p,g,d)&&a.push(t.Qr.updateTargetData(o,g))});let c=Vn(),l=Ce();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(yR(o,s,e.documentUpdates).next(d=>{c=d.cs,l=d.ls})),!r.isEqual(fe.min())){let d=t.Qr.getLastRemoteSnapshotVersion(o).next(f=>t.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return V.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.ns=i,o))}function yR(n,e,t){let r=Ce(),i=Ce();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Vn();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(fe.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):W("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:s,ls:i}})}function K8(n,e){let t=te(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Nc(n,e){let t=te(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(o=>o?(i=o,V.resolve(i)):t.Qr.allocateTargetId(r).next(s=>(i=new Pc(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}function Rc(n,e,t){return F(this,null,function*(){let r=te(n),i=r.ns.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!jo(s))throw s;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function Xm(n,e,t){let r=te(n),i=fe.min(),o=Ce();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,d){let f=te(c),p=f.rs.get(d);return p!==void 0?V.resolve(f.ns.get(p)):f.Qr.getTargetData(l,d)}(r,s,Tn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ts.getDocumentsMatchingQuery(s,e,t?i:fe.min(),t?o:Ce())).next(a=>(wR(r,ON(e),a),{documents:a,hs:o})))}function vR(n,e){let t=te(n),r=te(t.Qr),i=t.ns.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function _R(n,e){let t=te(n),r=t.ss.get(e)||fe.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.os.getAllFromCollectionGroup(i,e,dN(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(wR(t,e,i),i))}function wR(n,e,t){let r=n.ss.get(e)||fe.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.ss.set(e,r)}function Q8(n,e,t,r){return F(this,null,function*(){let i=te(n),o=Ce(),s=Vn();for(let l of t){let d=e.Ps(l.metadata.name);l.document&&(o=o.add(d));let f=e.Is(l);f.setReadTime(e.Ts(l.metadata.readTime)),s=s.insert(d,f)}let a=i.os.newChangeBuffer({trackRemovals:!0}),c=yield Nc(i,function(d){return Tn($c(je.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>yR(l,a,s).next(d=>(a.apply(l),d)).next(d=>i.Qr.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Qr.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,d.cs,d.ls)).next(()=>d.cs)))})}function Y8(r,i){return F(this,arguments,function*(n,e,t=Ce()){let o=yield Nc(n,Tn(zE(e.bundledQuery))),s=te(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=Tt(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.$r.saveNamedQuery(a,e);let l=o.withResumeToken(Wt.EMPTY_BYTE_STRING,c);return s.ns=s.ns.insert(l.targetId,l),s.Qr.updateTargetData(a,l).next(()=>s.Qr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Qr.addMatchingKeys(a,t,o.targetId)).next(()=>s.$r.saveNamedQuery(a,e))})})}function YO(n,e){return`firestore_clients_${n}_${e}`}function ZO(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function kC(n,e){return`firestore_targets_${n}_${e}`}var Jm=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Es(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new G(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(Dt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Hl=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Es(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new G(r.error.code,r.error.message))),o?new n(e,r.state,i):(Dt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},eg=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=UE();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=mN(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(Dt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},Kb=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(Dt("SharedClientState",`Failed to parse online state: ${e}`),null)}},cd=class{constructor(){this.activeTargetIds=UE()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Gl=class{constructor(e,t,r,i,o){this.window=e,this.oi=t,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new ct(_e),this.started=!1,this.ys=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=YO(this.persistenceKey,this.Vs),this.Ss=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new cd),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return F(this,null,function*(){let e=yield this.syncEngine.Bi();for(let r of e){if(r===this.Vs)continue;let i=this.getItem(YO(this.persistenceKey,r));if(i){let o=eg.Es(r,i);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();let t=this.storage.getItem(this.vs);if(t){let r=this.xs(t);r&&this.Os(r)}for(let r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,r){this.Ls(e,t,r),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(kC(this.persistenceKey,e));if(r){let i=Hl.Es(e,r);i&&(t=i.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(kC(this.persistenceKey,e))}updateQueryState(e,t,r){this.qs(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return W("SharedClientState","READ",e,t),t}setItem(e,t){W("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){W("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let t=e;if(t.storageArea===this.storage){if(W("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void Dt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>F(this,null,function*(){if(this.started){if(t.key!==null){if(this.bs.test(t.key)){if(t.newValue==null){let r=this.$s(t.key);return this.Us(r,null)}{let r=this.Ws(t.key,t.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(t.key)){if(t.newValue!==null){let r=this.Gs(t.key,t.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(t.key)){if(t.newValue!==null){let r=this.js(t.key,t.newValue);if(r)return this.Hs(r)}}else if(t.key===this.vs){if(t.newValue!==null){let r=this.xs(t.newValue);if(r)return this.Os(r)}}else if(t.key===this.Ss){let r=function(o){let s=Hn.oe;if(o!=null)try{let a=JSON.parse(o);le(typeof a=="number"),s=a}catch(a){Dt("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==Hn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Fs){let r=this.Js(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,r){let i=new Jm(this.currentUser,e,t,r),o=ZO(this.persistenceKey,this.currentUser,e);this.setItem(o,i.ds())}Bs(e){let t=ZO(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){let t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,r){let i=kC(this.persistenceKey,e),o=new Hl(e,t,r);this.setItem(i,o.ds())}Ks(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){let t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){let r=this.$s(e);return eg.Es(r,t)}Gs(e,t){let r=this.Ds.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Jm.Es(new Vt(o),i,t)}js(e,t){let r=this.Cs.exec(e),i=Number(r[1]);return Hl.Es(i,t)}xs(e){return Kb.Es(e)}Js(e){return JSON.parse(e)}zs(e){return F(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);W("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){let r=t?this.ps.insert(e,t):this.ps.remove(e),i=this.Ns(this.ps),o=this.Ns(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.eo(s,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=UE();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},tg=class{constructor(){this.no=new cd,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new cd,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Qb=class{io(e){}shutdown(){}};var ng=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var vm=null;function FC(){return vm===null?vm=function(){return 268435456+Math.round(2147483648*Math.random())}():vm++,"0x"+vm.toString(16)}var Z8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Yb=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var hn="WebChannelConnection",Zb=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+t.host,this.So=`projects/${i}/databases/${o}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Do(){return!1}Co(t,r,i,o,s){let a=FC(),c=this.vo(t,r.toUriEncodedString());W("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,o,s),this.Mo(t,c,l,i).then(d=>(W("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw ir("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}xo(t,r,i,o,s,a){return this.Co(t,r,i,o,s)}Fo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Uc}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}vo(t,r){let i=Z8[t];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,r,i){let o=FC();return new Promise((s,a)=>{let c=new MC;c.setWithCredentials(!0),c.listenOnce(SC.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case kl.NO_ERROR:let d=c.getResponseJson();W(hn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case kl.TIMEOUT:W(hn,`RPC '${e}' ${o} timed out`),a(new G(j.DEADLINE_EXCEEDED,"Request time out"));break;case kl.HTTP_ERROR:let f=c.getStatus();if(W(hn,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);let g=p?.error;if(g&&g.status&&g.message){let v=function(_){let S=_.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(S)>=0?S:j.UNKNOWN}(g.status);a(new G(v,g.message))}else a(new G(j.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new G(j.UNAVAILABLE,"Connection failed."));break;default:re()}}finally{W(hn,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);W(hn,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",l,r,15)})}Oo(e,t,r){let i=FC(),o=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=OC(),a=PC(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.xmlHttpFactory=new TC({})),this.Fo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=o.join("");W(hn,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=s.createWebChannel(d,c),p=!1,g=!1,v=new Yb({lo:_=>{g?W(hn,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(p||(W(hn,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),W(hn,`RPC '${e}' stream ${i} sending:`,_),f.send(_))},ho:()=>f.close()}),b=(_,S,k)=>{_.listen(S,P=>{try{k(P)}catch(U){setTimeout(()=>{throw U},0)}})};return b(f,lc.EventType.OPEN,()=>{g||(W(hn,`RPC '${e}' stream ${i} transport opened.`),v.mo())}),b(f,lc.EventType.CLOSE,()=>{g||(g=!0,W(hn,`RPC '${e}' stream ${i} transport closed`),v.po())}),b(f,lc.EventType.ERROR,_=>{g||(g=!0,ir(hn,`RPC '${e}' stream ${i} transport errored:`,_),v.po(new G(j.UNAVAILABLE,"The operation could not be completed")))}),b(f,lc.EventType.MESSAGE,_=>{var S;if(!g){let k=_.data[0];le(!!k);let P=k,U=P.error||((S=P[0])===null||S===void 0?void 0:S.error);if(U){W(hn,`RPC '${e}' stream ${i} received error:`,U);let H=U.status,q=function(C){let D=kt[C];if(D!==void 0)return WN(D)}(H),I=U.message;q===void 0&&(q=j.INTERNAL,I="Unknown error status: "+H+" with message "+U.message),g=!0,v.po(new G(q,I)),f.close()}else W(hn,`RPC '${e}' stream ${i} received:`,k),v.yo(k)}}),b(a,AC.STAT_EVENT,_=>{_.stat===pm.PROXY?W(hn,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===pm.NOPROXY&&W(hn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.fo()},0),v}};function CR(){return typeof window<"u"?window:null}function Em(){return typeof document<"u"?document:null}function _d(n){return new pb(n,!0)}var ud=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=t,this.No=r,this.Lo=i,this.Bo=o,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let t=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,t-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var rg=class{constructor(e,t,r,i,o,s,a,c){this.oi=e,this.Go=r,this.zo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new ud(e,t)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return F(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return F(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,t){return F(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():t&&t.code===j.RESOURCE_EXHAUSTED?(Dt(t.toString()),Dt("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):t&&t.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(t)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===t&&this.u_(r,i)},r=>{e(()=>{let i=new G(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,t){let r=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(()=>F(this,null,function*(){this.state=0,this.start()}))}c_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget(()=>this.jo===e?t():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Xb=class extends rg{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();let t=k8(this.serializer,e),r=function(o){if(!("targetChange"in o))return fe.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?fe.min():s.readTime?Tt(s.readTime):fe.min()}(e);return this.listener.h_(t,r)}P_(e){let t={};t.database=yb(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=Rm(c)?{documents:tR(o,c)}:{query:nR(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=QN(o,s.resumeToken);let l=mb(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(fe.min())>0){a.readTime=Ac(o,s.snapshotVersion.toTimestamp());let l=mb(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=V8(this.serializer,e);r&&(t.labels=r),this.i_(t)}I_(e){let t={};t.database=yb(this.serializer),t.removeTarget=e,this.i_(t)}},Jb=class extends rg{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let t=F8(e.writeResults,e.commitTime),r=Tt(e.commitTime);return this.listener.A_(r,t)}return le(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=yb(this.serializer),this.i_(e)}d_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>od(this.serializer,r))};this.i_(t)}};var eE=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new G(j.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Co(e,gb(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(j.UNKNOWN,o.toString())})}xo(e,t,r,i,o){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.xo(e,gb(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(j.UNKNOWN,s.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},tE=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Dt(t),this.y_=!1):W("OnlineStateTracker",t)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var nE=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=o,this.O_.io(s=>{r.enqueueAndForget(()=>F(this,null,function*(){Bo(this)&&(W("RemoteStore","Restarting streams for network reachability change."),yield function(c){return F(this,null,function*(){let l=te(c);l.M_.add(4),yield zc(l),l.N_.set("Unknown"),l.M_.delete(4),yield wd(l)})}(this))}))}),this.N_=new tE(r,i)}};function wd(n){return F(this,null,function*(){if(Bo(n))for(let e of n.x_)yield e(!0)})}function zc(n){return F(this,null,function*(){for(let e of n.x_)yield e(!1)})}function bg(n,e){let t=te(n);t.F_.has(e.targetId)||(t.F_.set(e.targetId,e),KE(t)?WE(t):Hc(t).Xo()&&GE(t,e))}function kc(n,e){let t=te(n),r=Hc(t);t.F_.delete(e),r.Xo()&&bR(t,e),t.F_.size===0&&(r.Xo()?r.n_():Bo(t)&&t.N_.set("Unknown"))}function GE(n,e){if(n.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fe.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Hc(n).P_(e)}function bR(n,e){n.L_.xe(e),Hc(n).I_(e)}function WE(n){n.L_=new hb({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.F_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Hc(n).start(),n.N_.w_()}function KE(n){return Bo(n)&&!Hc(n).Zo()&&n.F_.size>0}function Bo(n){return te(n).M_.size===0}function ER(n){n.L_=void 0}function X8(n){return F(this,null,function*(){n.N_.set("Online")})}function J8(n){return F(this,null,function*(){n.F_.forEach((e,t)=>{GE(n,e)})})}function eq(n,e){return F(this,null,function*(){ER(n),KE(n)?(n.N_.D_(e),WE(n)):n.N_.set("Unknown")})}function tq(n,e,t){return F(this,null,function*(){if(n.N_.set("Online"),e instanceof Lm&&e.state===2&&e.cause)try{yield function(i,o){return F(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.F_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.F_.delete(a),i.L_.removeTarget(a))})}(n,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ig(n,r)}else if(e instanceof Ec?n.L_.Ke(e):e instanceof Vm?n.L_.He(e):n.L_.We(e),!t.isEqual(fe.min()))try{let r=yield gR(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.L_.rt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=o.F_.get(l);d&&o.F_.set(l,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let d=o.F_.get(c);if(!d)return;o.F_.set(c,d.withResumeToken(Wt.EMPTY_BYTE_STRING,d.snapshotVersion)),bR(o,c);let f=new Pc(d.target,c,l,d.sequenceNumber);GE(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){W("RemoteStore","Failed to raise snapshot:",r),yield ig(n,r)}})}function ig(n,e,t){return F(this,null,function*(){if(!jo(e))throw e;n.M_.add(1),yield zc(n),n.N_.set("Offline"),t||(t=()=>gR(n.localStore)),n.asyncQueue.enqueueRetryable(()=>F(this,null,function*(){W("RemoteStore","Retrying IndexedDB access"),yield t(),n.M_.delete(1),yield wd(n)}))})}function IR(n,e){return e().catch(t=>ig(n,t,e))}function qc(n){return F(this,null,function*(){let e=te(n),t=Vo(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;nq(e);)try{let i=yield K8(e.localStore,r);if(i===null){e.v_.length===0&&t.n_();break}r=i.batchId,rq(e,i)}catch(i){yield ig(e,i)}xR(e)&&DR(e)})}function nq(n){return Bo(n)&&n.v_.length<10}function rq(n,e){n.v_.push(e);let t=Vo(n);t.Xo()&&t.E_&&t.d_(e.mutations)}function xR(n){return Bo(n)&&!Vo(n).Zo()&&n.v_.length>0}function DR(n){Vo(n).start()}function iq(n){return F(this,null,function*(){Vo(n).V_()})}function oq(n){return F(this,null,function*(){let e=Vo(n);for(let t of n.v_)e.d_(t.mutations)})}function sq(n,e,t){return F(this,null,function*(){let r=n.v_.shift(),i=lb.from(r,e,t);yield IR(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield qc(n)})}function aq(n,e){return F(this,null,function*(){e&&Vo(n).E_&&(yield function(r,i){return F(this,null,function*(){if(function(s){return GN(s)&&s!==j.ABORTED}(i.code)){let o=r.v_.shift();Vo(r).t_(),yield IR(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield qc(r)}})}(n,e)),xR(n)&&DR(n)})}function XO(n,e){return F(this,null,function*(){let t=te(n);t.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");let r=Bo(t);t.M_.add(3),yield zc(t),r&&t.N_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),yield wd(t)})}function rE(n,e){return F(this,null,function*(){let t=te(n);e?(t.M_.delete(2),yield wd(t)):e||(t.M_.add(2),yield zc(t),t.N_.set("Unknown"))})}function Hc(n){return n.B_||(n.B_=function(t,r,i){let o=te(t);return o.f_(),new Xb(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Po:X8.bind(null,n),To:J8.bind(null,n),Ao:eq.bind(null,n),h_:tq.bind(null,n)}),n.x_.push(e=>F(this,null,function*(){e?(n.B_.t_(),KE(n)?WE(n):n.N_.set("Unknown")):(yield n.B_.stop(),ER(n))}))),n.B_}function Vo(n){return n.k_||(n.k_=function(t,r,i){let o=te(t);return o.f_(),new Jb(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:iq.bind(null,n),Ao:aq.bind(null,n),R_:oq.bind(null,n),A_:sq.bind(null,n)}),n.x_.push(e=>F(this,null,function*(){e?(n.k_.t_(),yield qc(n)):(yield n.k_.stop(),n.v_.length>0&&(W("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))}))),n.k_}var iE=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Lt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Gc(n,e){if(Dt("AsyncQueue",`${e}: ${n}`),jo(n))return new G(j.UNAVAILABLE,`${e}: ${n}`);throw n}var og=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ee.comparator(t.key,r.key):(t,r)=>ee.comparator(t.key,r.key),this.keyedMap=Bl(),this.sortedSet=new ct(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var sg=class{constructor(){this.q_=new ct(ee.comparator)}track(e){let t=e.doc.key,r=this.q_.get(t);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(t,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(t):e.type===1&&r.type===2?this.q_=this.q_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):re():this.q_=this.q_.insert(t,e)}Q_(){let e=[];return this.q_.inorderTraversal((t,r)=>{e.push(r)}),e}},Fc=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,og.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var oE=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},sE=class{constructor(){this.queries=new Kr(e=>PN(e),yd),this.onlineState="Unknown",this.z_=new Set}};function QE(n,e){return F(this,null,function*(){let t=te(n),r=3,i=e.query,o=t.queries.get(i);o?!o.W_()&&e.G_()&&(r=2):(o=new oE,r=e.G_()?0:1);try{switch(r){case 0:o.K_=yield t.onListen(i,!0);break;case 1:o.K_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Gc(s,`Initialization of query '${gc(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.U_.push(e),e.j_(t.onlineState),o.K_&&e.H_(o.K_)&&ZE(t)})}function YE(n,e){return F(this,null,function*(){let t=te(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.U_.indexOf(e);s>=0&&(o.U_.splice(s,1),o.U_.length===0?i=e.G_()?0:1:!o.W_()&&e.G_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function cq(n,e){let t=te(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.U_)a.H_(i)&&(r=!0);s.K_=i}}r&&ZE(t)}function uq(n,e,t){let r=te(n),i=r.queries.get(e);if(i)for(let o of i.U_)o.onError(t);r.queries.delete(e)}function ZE(n){n.z_.forEach(e=>{e.next()})}var aE,JO;(JO=aE||(aE={})).J_="default",JO.Cache="cache";var ld=class{constructor(e,t,r){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Fc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache||!this.G_())return!0;let r=t!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}na(e){e=Fc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==aE.Cache}};var cE=class{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}};var ag=class{constructor(e){this.serializer=e}Ps(e){return qr(this.serializer,e)}Is(e){return e.metadata.exists?eR(this.serializer,e.document,!1):jt.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Tt(e)}},uE=class{constructor(e,t,r){this.oa=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=MR(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;let r=je.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){let t=new Map,r=new ag(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Ps(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||Ce()).add(o);t.set(s,a)}}return t}complete(){return F(this,null,function*(){let e=yield Q8(this.localStore,new ag(this.serializer),this.documents,this.oa.id),t=this.aa(this.documents);for(let r of this.queries)yield Y8(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}})}};function MR(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var cg=class{constructor(e){this.key=e}},ug=class{constructor(e){this.key=e}},lg=class{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Ce(),this.mutatedKeys=Ce(),this.Ia=NN(e),this.Ta=new og(this.Ia)}get Ea(){return this.la}da(e,t){let r=t?t.Aa:new sg,i=t?t.Ta:this.Ta,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let p=i.get(d),g=vd(this.query,f)?f:null,v=!!p&&this.mutatedKeys.has(p.key),b=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations),_=!1;p&&g?p.data.isEqual(g.data)?v!==b&&(r.track({type:3,doc:g}),_=!0):this.Ra(p,g)||(r.track({type:2,doc:g}),_=!0,(c&&this.Ia(g,c)>0||l&&this.Ia(g,l)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),_=!0):p&&!g&&(r.track({type:1,doc:p}),_=!0,(c||l)&&(a=!0)),_&&(g?(s=s.add(g),o=b?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{Ta:s,Aa:r,Xi:a,mutatedKeys:o}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let s=e.Aa.Q_();s.sort((d,f)=>function(g,v){let b=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re()}};return b(g)-b(v)}(d.type,f.type)||this.Ia(d.doc,f.doc)),this.Va(r),i=i!=null&&i;let a=t&&!i?this.ma():[],c=this.Pa.size===0&&this.current&&!i?1:0,l=c!==this.ha;return this.ha=c,s.length!==0||l?{snapshot:new Fc(this.query,e.Ta,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new sg,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(t=>this.la=this.la.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.la=this.la.delete(t)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=Ce(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});let t=[];return e.forEach(r=>{this.Pa.has(r)||t.push(new ug(r))}),this.Pa.forEach(r=>{e.has(r)||t.push(new cg(r))}),t}pa(e){this.la=e.hs,this.Pa=Ce();let t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return Fc.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},lE=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},dE=class{constructor(e){this.key=e,this.wa=!1}},fE=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new Kr(a=>PN(a),yd),this.Da=new Map,this.Ca=new Set,this.va=new ct(ee.comparator),this.Fa=new Map,this.Ma=new ad,this.xa={},this.Oa=new Map,this.Na=Oc.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function lq(n,e,t=!0){return F(this,null,function*(){let r=Eg(n),i,o=r.ba.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ya()):i=yield TR(r,e,t,!0),i})}function dq(n,e){return F(this,null,function*(){let t=Eg(n);yield TR(t,e,!0,!1)})}function TR(n,e,t,r){return F(this,null,function*(){let i=yield Nc(n.localStore,Tn(e)),o=i.targetId,s=t?n.sharedClientState.addLocalQueryTarget(o):"not-current",a;return r&&(a=yield XE(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&bg(n.remoteStore,i),a})}function XE(n,e,t,r,i){return F(this,null,function*(){n.Ba=(f,p,g)=>function(b,_,S,k){return F(this,null,function*(){let P=_.view.da(S);P.Xi&&(P=yield Xm(b.localStore,_.query,!1).then(({documents:I})=>_.view.da(I,P)));let U=k&&k.targetChanges.get(_.targetId),H=k&&k.targetMismatches.get(_.targetId)!=null,q=_.view.applyChanges(P,b.isPrimaryClient,U,H);return hE(b,_.targetId,q.fa),q.snapshot})}(n,f,p,g);let o=yield Xm(n.localStore,e,!0),s=new lg(e,o.hs),a=s.da(o.documents),c=rd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);hE(n,t,l.fa);let d=new lE(e,t,s);return n.ba.set(e,d),n.Da.has(t)?n.Da.get(t).push(e):n.Da.set(t,[e]),l.snapshot})}function fq(n,e,t){return F(this,null,function*(){let r=te(n),i=r.ba.get(e),o=r.Da.get(i.targetId);if(o.length>1)return r.Da.set(i.targetId,o.filter(s=>!yd(s,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Rc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&kc(r.remoteStore,i.targetId),Vc(r,i.targetId)}).catch(Lo))):(Vc(r,i.targetId),yield Rc(r.localStore,i.targetId,!0))})}function hq(n,e){return F(this,null,function*(){let t=te(n),r=t.ba.get(e),i=t.Da.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),kc(t.remoteStore,r.targetId))})}function pq(n,e,t){return F(this,null,function*(){let r=nI(n);try{let i=yield function(s,a){let c=te(s),l=gt.now(),d=a.reduce((g,v)=>g.add(v.key),Ce()),f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let v=Vn(),b=Ce();return c.os.getEntries(g,d).next(_=>{v=_,v.forEach((S,k)=>{k.isValidDocument()||(b=b.add(S))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,v)).next(_=>{f=_;let S=[];for(let k of a){let P=T8(k,f.get(k.key).overlayedDocument);P!=null&&S.push(new Er(k.key,P,IN(P.value.mapValue),It.exists(!0)))}return c.mutationQueue.addMutationBatch(g,l,S,a)}).next(_=>{p=_;let S=_.applyToLocalDocumentSet(f,b);return c.documentOverlayCache.saveOverlays(g,_.batchId,S)})}).then(()=>({batchId:p.batchId,changes:kN(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.xa[s.currentUser.toKey()];l||(l=new ct(_e)),l=l.insert(a,c),s.xa[s.currentUser.toKey()]=l}(r,i.batchId,t),yield Vi(r,i.changes),yield qc(r.remoteStore)}catch(i){let o=Gc(i,"Failed to persist write");t.reject(o)}})}function SR(n,e){return F(this,null,function*(){let t=te(n);try{let r=yield W8(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Fa.get(o);s&&(le(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.wa=!0:i.modifiedDocuments.size>0?le(s.wa):i.removedDocuments.size>0&&(le(s.wa),s.wa=!1))}),yield Vi(t,r,e)}catch(r){yield Lo(r)}})}function eN(n,e,t){let r=te(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.ba.forEach((o,s)=>{let a=s.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=te(s);c.onlineState=a;let l=!1;c.queries.forEach((d,f)=>{for(let p of f.U_)p.j_(a)&&(l=!0)}),l&&ZE(c)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function mq(n,e,t){return F(this,null,function*(){let r=te(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Fa.get(e),o=i&&i.key;if(o){let s=new ct(ee.comparator);s=s.insert(o,jt.newNoDocument(o,fe.min()));let a=Ce().add(o),c=new nd(fe.min(),new Map,new ct(_e),s,a);yield SR(r,c),r.va=r.va.remove(o),r.Fa.delete(e),tI(r)}else yield Rc(r.localStore,e,!1).then(()=>Vc(r,e,t)).catch(Lo)})}function gq(n,e){return F(this,null,function*(){let t=te(n),r=e.batch.batchId;try{let i=yield G8(t.localStore,e);eI(t,r,null),JE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Vi(t,i)}catch(i){yield Lo(i)}})}function yq(n,e,t){return F(this,null,function*(){let r=te(n);try{let i=yield function(s,a){let c=te(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(f=>(le(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(l,f))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(r.localStore,e);eI(r,e,t),JE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Vi(r,i)}catch(i){yield Lo(i)}})}function vq(n,e){return F(this,null,function*(){let t=te(n);Bo(t.remoteStore)||W("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=te(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===-1)return void e.resolve();let i=t.Oa.get(r)||[];i.push(e),t.Oa.set(r,i)}catch(r){let i=Gc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function JE(n,e){(n.Oa.get(e)||[]).forEach(t=>{t.resolve()}),n.Oa.delete(e)}function eI(n,e,t){let r=te(n),i=r.xa[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function Vc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Da.get(e))n.ba.delete(r),t&&n.Sa.ka(r,t);n.Da.delete(e),n.isPrimaryClient&&n.Ma.Vr(e).forEach(r=>{n.Ma.containsKey(r)||AR(n,r)})}function AR(n,e){n.Ca.delete(e.path.canonicalString());let t=n.va.get(e);t!==null&&(kc(n.remoteStore,t),n.va=n.va.remove(e),n.Fa.delete(t),tI(n))}function hE(n,e,t){for(let r of t)r instanceof cg?(n.Ma.addReference(r.key,e),_q(n,r)):r instanceof ug?(W("SyncEngine","Document no longer in limbo: "+r.key),n.Ma.removeReference(r.key,e),n.Ma.containsKey(r.key)||AR(n,r.key)):re()}function _q(n,e){let t=e.key,r=t.path.canonicalString();n.va.get(t)||n.Ca.has(r)||(W("SyncEngine","New document in limbo: "+t),n.Ca.add(r),tI(n))}function tI(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){let e=n.Ca.values().next().value;n.Ca.delete(e);let t=new ee(je.fromString(e)),r=n.Na.next();n.Fa.set(r,new dE(t)),n.va=n.va.insert(t,r),bg(n.remoteStore,new Pc(Tn($c(t.path)),r,"TargetPurposeLimboResolution",Hn.oe))}}function Vi(n,e,t){return F(this,null,function*(){let r=te(n),i=[],o=[],s=[];r.ba.isEmpty()||(r.ba.forEach((a,c)=>{s.push(r.Ba(c,e,t).then(l=>{if((l||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,l?.fromCache?"not-current":"current"),l){i.push(l);let d=Hb.Ki(c.targetId,l);o.push(d)}}))}),yield Promise.all(s),r.Sa.h_(i),yield function(c,l){return F(this,null,function*(){let d=te(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>V.forEach(l,p=>V.forEach(p.qi,g=>d.persistence.referenceDelegate.addReference(f,p.targetId,g)).next(()=>V.forEach(p.Qi,g=>d.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))}catch(f){if(!jo(f))throw f;W("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let p=f.targetId;if(!f.fromCache){let g=d.ns.get(p),v=g.snapshotVersion,b=g.withLastLimboFreeSnapshotVersion(v);d.ns=d.ns.insert(p,b)}}})}(r.localStore,o))})}function wq(n,e){return F(this,null,function*(){let t=te(n);if(!t.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());let r=yield mR(t.localStore,e);t.currentUser=e,function(o,s){o.Oa.forEach(a=>{a.forEach(c=>{c.reject(new G(j.CANCELLED,s))})}),o.Oa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Vi(t,r.us)}})}function Cq(n,e){let t=te(n),r=t.Fa.get(e);if(r&&r.wa)return Ce().add(r.key);{let i=Ce(),o=t.Da.get(e);if(!o)return i;for(let s of o){let a=t.ba.get(s);i=i.unionWith(a.view.Ea)}return i}}function bq(n,e){return F(this,null,function*(){let t=te(n),r=yield Xm(t.localStore,e.query,!0),i=e.view.pa(r);return t.isPrimaryClient&&hE(t,e.targetId,i.fa),i})}function Eq(n,e){return F(this,null,function*(){let t=te(n);return _R(t.localStore,e).then(r=>Vi(t,r))})}function Iq(n,e,t,r){return F(this,null,function*(){let i=te(n),o=yield function(a,c){let l=te(a),d=te(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.vn(f,c).next(p=>p?l.localDocuments.getDocuments(f,p):V.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield qc(i.remoteStore):t==="acknowledged"||t==="rejected"?(eI(i,e,r||null),JE(i,e),function(a,c){te(te(a).mutationQueue).Mn(c)}(i.localStore,e)):re(),yield Vi(i,o)):W("SyncEngine","Cannot apply mutation batch with id: "+e)})}function xq(n,e){return F(this,null,function*(){let t=te(n);if(Eg(t),nI(t),e===!0&&t.La!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield tN(t,r.toArray());t.La=!0,yield rE(t.remoteStore,!0);for(let o of i)bg(t.remoteStore,o)}else if(e===!1&&t.La!==!1){let r=[],i=Promise.resolve();t.Da.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Vc(t,s),Rc(t.localStore,s,!0))),kc(t.remoteStore,s)}),yield i,yield tN(t,r),function(s){let a=te(s);a.Fa.forEach((c,l)=>{kc(a.remoteStore,l)}),a.Ma.mr(),a.Fa=new Map,a.va=new ct(ee.comparator)}(t),t.La=!1,yield rE(t.remoteStore,!1)}})}function tN(n,e,t){return F(this,null,function*(){let r=te(n),i=[],o=[];for(let s of e){let a,c=r.Da.get(s);if(c&&c.length!==0){a=yield Nc(r.localStore,Tn(c[0]));for(let l of c){let d=r.ba.get(l),f=yield bq(r,d);f.snapshot&&o.push(f.snapshot)}}else{let l=yield vR(r.localStore,s);a=yield Nc(r.localStore,l),yield XE(r,PR(l),s,!1,a.resumeToken)}i.push(a)}return r.Sa.h_(o),i})}function PR(n){return AN(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Dq(n){return function(t){return te(te(t).persistence).Bi()}(te(n).localStore)}function Mq(n,e,t,r){return F(this,null,function*(){let i=te(n);if(i.La)return void W("SyncEngine","Ignoring unexpected query state notification.");let o=i.Da.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield _R(i.localStore,ON(o[0])),a=nd.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Wt.EMPTY_BYTE_STRING);yield Vi(i,s,a);break}case"rejected":yield Rc(i.localStore,e,!0),Vc(i,e,r);break;default:re()}})}function Tq(n,e,t){return F(this,null,function*(){let r=Eg(n);if(r.La){for(let i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){W("SyncEngine","Adding an already active target "+i);continue}let o=yield vR(r.localStore,i),s=yield Nc(r.localStore,o);yield XE(r,PR(o),s.targetId,!1,s.resumeToken),bg(r.remoteStore,s)}for(let i of t)r.Da.has(i)&&(yield Rc(r.localStore,i,!1).then(()=>{kc(r.remoteStore,i),Vc(r,i)}).catch(Lo))}})}function Eg(n){let e=te(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=SR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Cq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mq.bind(null,e),e.Sa.h_=cq.bind(null,e.eventManager),e.Sa.ka=uq.bind(null,e.eventManager),e}function nI(n){let e=te(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yq.bind(null,e),e}function Sq(n,e,t){let r=te(n);(function(o,s,a){return F(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(g,v){let b=te(g),_=Tt(v.createTime);return b.persistence.runTransaction("hasNewerBundle","readonly",S=>b.$r.getBundleMetadata(S,v.id)).then(S=>!!S&&S.createTime.compareTo(_)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(g){return{taskState:"Success",documentsLoaded:g.totalDocuments,bytesLoaded:g.totalBytes,totalDocuments:g.totalDocuments,totalBytes:g.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(MR(c));let l=new uE(c,o.localStore,s.serializer),d=yield s.qa();for(;d;){let p=yield l._a(d);p&&a._updateProgress(p),d=yield s.qa()}let f=yield l.complete();return yield Vi(o,f.ca,void 0),yield function(g,v){let b=te(g);return b.persistence.runTransaction("Save bundle","readwrite",_=>b.$r.saveBundleMetadata(_,v))}(o.localStore,c),a._completeWith(f.progress),Promise.resolve(f.ua)}catch(c){return ir("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var dd=class{constructor(){this.synchronizeTabs=!1}initialize(e){return F(this,null,function*(){this.serializer=_d(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return pR(this.persistence,new Zm,e.initialUser,this.serializer)}createPersistence(e){return new Qm(Ym.Hr,this.serializer)}createSharedClientState(e){return new tg}terminate(){return F(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var dg=class n extends dd{constructor(e,t,r){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return F(this,null,function*(){yield Mv(n.prototype,this,"initialize").call(this,e),yield this.Qa.initialize(this,e),yield nI(this.Qa.syncEngine),yield qc(this.Qa.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return pR(this.persistence,new Zm,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new Ab(r,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){let r=new KC(t,this.persistence);return new WC(e.asyncQueue,r)}createPersistence(e){let t=HE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?rr.withCacheSize(this.cacheSizeBytes):rr.DEFAULT;return new qb(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,CR(),Em(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new tg}},pE=class n extends dg{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return F(this,null,function*(){yield Mv(n.prototype,this,"initialize").call(this,e);let t=this.Qa.syncEngine;this.sharedClientState instanceof Gl&&(this.sharedClientState.syncEngine={Zs:Iq.bind(null,t),Xs:Mq.bind(null,t),eo:Tq.bind(null,t),Bi:Dq.bind(null,t),Ys:Eq.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.fi(r=>F(this,null,function*(){yield xq(this.Qa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let t=CR();if(!Gl.D(t))throw new G(j.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=HE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Gl(t,e.asyncQueue,r,e.clientId,e.initialUser)}},fd=class{initialize(e,t){return F(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>eN(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=wq.bind(null,this.syncEngine),yield rE(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new sE}()}createDatastore(e){let t=_d(e.databaseInfo.databaseId),r=function(o){return new Zb(o)}(e.databaseInfo);return function(o,s,a,c){return new eE(o,s,a,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,o,s,a){return new nE(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,t=>eN(this.syncEngine,t,0),function(){return ng.D()?new ng:new Qb}())}createSyncEngine(e,t){return function(i,o,s,a,c,l,d){let f=new fE(i,o,s,a,c,l);return d&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return F(this,null,function*(){var e;yield function(r){return F(this,null,function*(){let i=te(r);W("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield zc(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function nN(n,e=10240){let t=0;return{read(){return F(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return F(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Lc=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Dt("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}};var mE=class{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new Lt,this.buffer=new Uint8Array,this.Wa=function(){return new TextDecoder("utf-8")}(),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}getMetadata(){return F(this,null,function*(){return this.metadata.promise})}qa(){return F(this,null,function*(){return yield this.getMetadata(),this.Ga()})}Ga(){return F(this,null,function*(){let e=yield this.za();if(e===null)return null;let t=this.Wa.decode(e),r=Number(t);isNaN(r)&&this.ja(`length string (${t}) is not valid number`);let i=yield this.Ha(r);return new cE(JSON.parse(i),e.length+r)})}Ja(){return this.buffer.findIndex(e=>e===123)}za(){return F(this,null,function*(){for(;this.Ja()<0&&!(yield this.Ya()););if(this.buffer.length===0)return null;let e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}Ha(e){return F(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ya())&&this.ja("Reached the end of bundle when more is expected.");let t=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){return F(this,null,function*(){let e=yield this.Ua.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var gE=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return F(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new G(j.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return F(this,null,function*(){let s=te(i),a={documents:o.map(f=>id(s.serializer,f))},c=yield s.xo("BatchGetDocuments",s.serializer.databaseId,je.emptyPath(),a,o.length),l=new Map;c.forEach(f=>{let p=R8(s.serializer,f);l.set(p.key.toString(),p)});let d=[];return o.forEach(f=>{let p=l.get(f.toString());le(!!p),d.push(p)}),d})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Fo(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return F(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=ee.fromPath(r);this.mutations.push(new Jl(i,this.precondition(i)))}),yield function(r,i){return F(this,null,function*(){let o=te(r),s={writes:i.map(a=>od(o.serializer,a))};yield o.Co("Commit",o.serializer.databaseId,je.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw re();t=fe.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new G(j.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(fe.min())?It.exists(!1):It.updateTime(t):It.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(fe.min()))throw new G(j.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return It.updateTime(t)}return It.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var yE=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Za=r.maxAttempts,this.Yo=new ud(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o(()=>F(this,null,function*(){let e=new gE(this.datastore),t=this.tu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.nu(i)}))}).catch(r=>{this.nu(r)})}))}tu(e){try{let t=this.updateFunction(e);return!md(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!GN(t)}return!1}};var vE=class{constructor(e,t,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Vt.UNAUTHENTICATED,this.clientId=Dm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>F(this,null,function*(){W("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new G(j.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Lt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>F(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Gc(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Im(n,e){return F(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>F(this,null,function*(){r.isEqual(i)||(yield mR(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function _E(n,e){return F(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield rI(n);W("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>XO(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>XO(e.remoteStore,i)),n._onlineComponents=e})}function OR(n){return n.name==="FirebaseError"?n.code===j.FAILED_PRECONDITION||n.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function rI(n){return F(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Im(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!OR(t))throw t;ir("Error using user provided cache. Falling back to memory cache: "+t),yield Im(n,new dd)}}else W("FirestoreClient","Using default OfflineComponentProvider"),yield Im(n,new dd);return n._offlineComponents})}function Ig(n){return F(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),yield _E(n,n._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),yield _E(n,new fd))),n._onlineComponents})}function NR(n){return rI(n).then(e=>e.persistence)}function iI(n){return rI(n).then(e=>e.localStore)}function RR(n){return Ig(n).then(e=>e.remoteStore)}function oI(n){return Ig(n).then(e=>e.syncEngine)}function Aq(n){return Ig(n).then(e=>e.datastore)}function jc(n){return F(this,null,function*(){let e=yield Ig(n),t=e.eventManager;return t.onListen=lq.bind(null,e.syncEngine),t.onUnlisten=fq.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=dq.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=hq.bind(null,e.syncEngine),t})}function Pq(n){return n.asyncQueue.enqueue(()=>F(this,null,function*(){let e=yield NR(n),t=yield RR(n);return e.setNetworkEnabled(!0),function(i){let o=te(i);return o.M_.delete(0),wd(o)}(t)}))}function Oq(n){return n.asyncQueue.enqueue(()=>F(this,null,function*(){let e=yield NR(n),t=yield RR(n);return e.setNetworkEnabled(!1),function(i){return F(this,null,function*(){let o=te(i);o.M_.add(0),yield zc(o),o.N_.set("Offline")})}(t)}))}function Nq(n,e){let t=new Lt;return n.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return function(i,o,s){return F(this,null,function*(){try{let a=yield function(l,d){let f=te(l);return f.persistence.runTransaction("read document","readonly",p=>f.localDocuments.getDocument(p,d))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new G(j.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=Gc(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield iI(n),e,t)})),t.promise}function kR(n,e,t={}){let r=new Lt;return n.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return function(o,s,a,c,l){let d=new Lc({next:p=>{s.enqueueAndForget(()=>YE(o,f));let g=p.docs.has(a);!g&&p.fromCache?l.reject(new G(j.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&c&&c.source==="server"?l.reject(new G(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(p)},error:p=>l.reject(p)}),f=new ld($c(a.path),d,{includeMetadataChanges:!0,ra:!0});return QE(o,f)}(yield jc(n),n.asyncQueue,e,t,r)})),r.promise}function Rq(n,e){let t=new Lt;return n.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return function(i,o,s){return F(this,null,function*(){try{let a=yield Xm(i,o,!0),c=new lg(o,a.hs),l=c.da(a.documents),d=c.applyChanges(l,!1);s.resolve(d.snapshot)}catch(a){let c=Gc(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield iI(n),e,t)})),t.promise}function FR(n,e,t={}){let r=new Lt;return n.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return function(o,s,a,c,l){let d=new Lc({next:p=>{s.enqueueAndForget(()=>YE(o,f)),p.fromCache&&c.source==="server"?l.reject(new G(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(p)},error:p=>l.reject(p)}),f=new ld(a,d,{includeMetadataChanges:!0,ra:!0});return QE(o,f)}(yield jc(n),n.asyncQueue,e,t,r)})),r.promise}function kq(n,e){let t=new Lc(e);return n.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return function(i,o){te(i).z_.add(o),o.next()}(yield jc(n),t)})),()=>{t.$a(),n.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return function(i,o){te(i).z_.delete(o)}(yield jc(n),t)}))}}function Fq(n,e,t,r){let i=function(s,a){let c;return c=typeof s=="string"?KN().encode(s):s,function(d,f){return new mE(d,f)}(function(d,f){if(d instanceof Uint8Array)return nN(d,f);if(d instanceof ArrayBuffer)return nN(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,_d(e));n.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){Sq(yield oI(n),i,r)}))}function Vq(n,e){return n.asyncQueue.enqueue(()=>F(this,null,function*(){return function(r,i){let o=te(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,i))}(yield iI(n),e)}))}function VR(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var rN=new Map;function sI(n,e,t){if(!t)throw new G(j.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function aI(n,e,t,r){if(e===!0&&r===!0)throw new G(j.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function iN(n){if(!ee.isDocumentKey(n))throw new G(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function oN(n){if(ee.isDocumentKey(n))throw new G(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function xg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":re()}function Be(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new G(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=xg(n);throw new G(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function LR(n,e){if(e<=0)throw new G(j.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var fg=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}aI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new G(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new G(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new G(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},qs=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new G(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new G(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fg(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new VC;switch(r.type){case"firstParty":return new UC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=rN.get(t);r&&(W("ComponentProvider","Removing Datastore"),rN.delete(t),r.terminate())}(this),Promise.resolve()}};function jR(n,e,t,r={}){var i;let o=(n=Be(n,qs))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&ir("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Vt.MOCK_USER;else{a=WD(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new G(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Vt(l)}n._authCredentials=new LC(new xm(a,c))}}var tn=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},it=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Hr=class n extends tn{constructor(e,t,r){super(e,t,$c(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new it(this.firestore,null,new ee(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function cI(n,e,...t){if(n=ht(n),sI("collection","path",e),n instanceof qs){let r=je.fromString(e,...t);return oN(r),new Hr(n,null,r)}{if(!(n instanceof it||n instanceof Hr))throw new G(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(je.fromString(e,...t));return oN(r),new Hr(n.firestore,null,r)}}function BR(n,e){if(n=Be(n,qs),sI("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new G(j.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new tn(n,null,function(r){return new br(je.emptyPath(),r)}(e))}function Cd(n,e,...t){if(n=ht(n),arguments.length===1&&(e=Dm.newId()),sI("doc","path",e),n instanceof qs){let r=je.fromString(e,...t);return iN(r),new it(n,null,new ee(r))}{if(!(n instanceof it||n instanceof Hr))throw new G(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(je.fromString(e,...t));return iN(r),new it(n.firestore,n instanceof Hr?n.converter:null,new ee(r))}}function uI(n,e){return n=ht(n),e=ht(e),(n instanceof it||n instanceof Hr)&&(e instanceof it||e instanceof Hr)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function lI(n,e){return n=ht(n),e=ht(e),n instanceof tn&&e instanceof tn&&n.firestore===e.firestore&&yd(n._query,e._query)&&n.converter===e.converter}var wE=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new ud(this,"async_queue_retry"),this.hu=()=>{let t=Em();t&&W("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};let e=Em();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let t=Em();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let t=new Lt;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return F(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!jo(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let t=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Dt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=t,t}enqueueAfterDelay(e,t,r){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);let i=iE.createAndSchedule(this,e,t,r,o=>this.Eu(o));return this._u.push(i),i}Pu(){this.au&&re()}verifyOperationInProgress(){}du(){return F(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this._u)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let t=this._u.indexOf(e);this._u.splice(t,1)}};function CE(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var bE=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Lt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var UR=-1,ft=class extends qs{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=function(){return new wE}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||$R(this),this._firestoreClient.terminate()}};function zt(n){return n._firestoreClient||$R(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function $R(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,l,d){return new QC(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,VR(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._firestoreClient=new vE(n._authCredentials,n._appCheckCredentials,n._queue,o),!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function zR(n,e){XR(n=Be(n,ft));let t=zt(n);if(t._uninitializedComponentsProvider)throw new G(j.FAILED_PRECONDITION,"SDK cache is already specified.");ir("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=n._freezeSettings(),i=new fd;return HR(t,i,new dg(i,r.cacheSizeBytes,e?.forceOwnership))}function qR(n){XR(n=Be(n,ft));let e=zt(n);if(e._uninitializedComponentsProvider)throw new G(j.FAILED_PRECONDITION,"SDK cache is already specified.");ir("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings(),r=new fd;return HR(e,r,new pE(r,t.cacheSizeBytes))}function HR(n,e,t){let r=new Lt;return n.asyncQueue.enqueue(()=>F(this,null,function*(){try{yield Im(n,t),yield _E(n,e),r.resolve()}catch(i){let o=i;if(!OR(o))throw o;ir("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function GR(n){if(n._initialized&&!n._terminated)throw new G(j.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Lt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>F(this,null,function*(){try{yield function(r){return F(this,null,function*(){if(!So.D())return Promise.resolve();let i=r+"main";yield So.delete(i)})}(HE(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function WR(n){return function(t){let r=new Lt;return t.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return vq(yield oI(t),r)})),r.promise}(zt(n=Be(n,ft)))}function KR(n){return Pq(zt(n=Be(n,ft)))}function QR(n){return Oq(zt(n=Be(n,ft)))}function YR(n,e){let t=zt(n=Be(n,ft)),r=new bE;return Fq(t,n._databaseId,e,r),r}function ZR(n,e){return Vq(zt(n=Be(n,ft)),e).then(t=>t?new tn(n,null,t.query):null)}function XR(n){if(n._initialized||n._terminated)throw new G(j.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Qr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Wt.fromBase64String(e))}catch(t){throw new G(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Ir=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new G(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ki=class{constructor(e){this._methodName=e}};var Hs=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new G(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new G(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return _e(this._lat,e._lat)||_e(this._long,e._long)}};var Lq=/^__.*__$/,EE=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Er(e,this.data,this.fieldMask,t,this.fieldTransforms):new ko(e,this.data,t,this.fieldTransforms)}},hg=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Er(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function JR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re()}}var pg=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.mu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return mg(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(JR(this.fu)&&Lq.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},IE=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||_d(e)}Fu(e,t,r,i=!1){return new pg({fu:e,methodName:t,vu:r,path:Mt.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Qs(n){let e=n._freezeSettings(),t=_d(n._databaseId);return new IE(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Dg(n,e,t,r,i,o={}){let s=n.Fu(o.merge||o.mergeFields?2:0,e,t,i);hI("Data must be an object, but it was:",s,r);let a=nk(r,s),c,l;if(o.merge)c=new Gn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let p=SE(e,f,t);if(!s.contains(p))throw new G(j.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);ik(d,p)||d.push(p)}c=new Gn(d),l=s.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,l=s.fieldTransforms;return new EE(new pn(a),c,l)}var hd=class n extends ki{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function ek(n,e,t){return new pg({fu:3,vu:e.settings.vu,methodName:n._methodName,yu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var xE=class n extends ki{_toFieldTransform(e){return new Us(e.path,new No)}isEqual(e){return e instanceof n}},DE=class n extends ki{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){let t=ek(this,e,!0),r=this.Mu.map(o=>Ys(o,t)),i=new Ni(r);return new Us(e.path,i)}isEqual(e){return e instanceof n&&Av(this.Mu,e.Mu)}},ME=class n extends ki{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){let t=ek(this,e,!0),r=this.Mu.map(o=>Ys(o,t)),i=new Ri(r);return new Us(e.path,i)}isEqual(e){return e instanceof n&&Av(this.Mu,e.Mu)}},TE=class n extends ki{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){let t=new Ro(e.serializer,jN(e.serializer,this.xu));return new Us(e.path,t)}isEqual(e){return e instanceof n&&this.xu===e.xu}};function dI(n,e,t,r){let i=n.Fu(1,e,t);hI("Data must be an object, but it was:",i,r);let o=[],s=pn.empty();Ks(r,(c,l)=>{let d=pI(e,c,t);l=ht(l);let f=i.Su(d);if(l instanceof hd)o.push(d);else{let p=Ys(l,f);p!=null&&(o.push(d),s.set(d,p))}});let a=new Gn(o);return new hg(s,a,i.fieldTransforms)}function fI(n,e,t,r,i,o){let s=n.Fu(1,e,t),a=[SE(e,r,t)],c=[i];if(o.length%2!=0)throw new G(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<o.length;p+=2)a.push(SE(e,o[p])),c.push(o[p+1]);let l=[],d=pn.empty();for(let p=a.length-1;p>=0;--p)if(!ik(l,a[p])){let g=a[p],v=c[p];v=ht(v);let b=s.Su(g);if(v instanceof hd)l.push(g);else{let _=Ys(v,b);_!=null&&(l.push(g),d.set(g,_))}}let f=new Gn(l);return new hg(d,f,s.fieldTransforms)}function tk(n,e,t,r=!1){return Ys(t,n.Fu(r?4:3,e))}function Ys(n,e){if(rk(n=ht(n)))return hI("Unsupported field value:",e,n),nk(n,e);if(n instanceof ki)return function(r,i){if(!JR(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=Ys(a,i.bu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=ht(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return jN(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=gt.fromDate(r);return{timestampValue:Ac(i.serializer,o)}}if(r instanceof gt){let o=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ac(i.serializer,o)}}if(r instanceof Hs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qr)return{bytesValue:QN(i.serializer,r._byteString)};if(r instanceof it){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Du(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:$E(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${xg(r)}`)}(n,e)}function nk(n,e){let t={};return CN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ks(n,(r,i)=>{let o=Ys(i,e.pu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function rk(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof gt||n instanceof Hs||n instanceof Qr||n instanceof it||n instanceof ki)}function hI(n,e,t){if(!rk(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=xg(t);throw r==="an object"?e.Du(n+" a custom object"):e.Du(n+" "+r)}}function SE(n,e,t){if((e=ht(e))instanceof Ir)return e._internalPath;if(typeof e=="string")return pI(n,e);throw mg("Field path arguments must be of type string or ",n,!1,void 0,t)}var jq=new RegExp("[~\\*/\\[\\]]");function pI(n,e,t){if(e.search(jq)>=0)throw mg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ir(...e.split("."))._internalPath}catch{throw mg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function mg(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new G(j.INVALID_ARGUMENT,a+n+c)}function ik(n,e){return n.some(t=>t.isEqual(e))}var Gs=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new it(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new AE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Mg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},AE=class extends Gs{data(){return super.data()}};function Mg(n,e){return typeof e=="string"?pI(n,e):e instanceof Ir?e._internalPath:e._delegate._internalPath}function ok(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new G(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var pd=class{},Ws=class extends pd{};function Li(n,e,...t){let r=[];e instanceof pd&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof PE).length,a=o.filter(c=>c instanceof gg).length;if(s>1||s>0&&a>0)throw new G(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var gg=class n extends Ws{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return mk(e._query,t),new tn(e.firestore,e.converter,cb(e._query,t))}_parse(e){let t=Qs(e.firestore);return function(o,s,a,c,l,d,f){let p;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new G(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){aN(f,d);let g=[];for(let v of f)g.push(sN(c,o,v));p={arrayValue:{values:g}}}else p=sN(c,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||aN(f,d),p=tk(a,s,f,d==="in"||d==="not-in");return Fe.create(l,d,p)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function sk(n,e,t){let r=e,i=Mg("where",n);return gg._create(i,r,t)}var PE=class n extends pd{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Ge.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)mk(s,c),s=cb(s,c)}(e._query,t),new tn(e.firestore,e.converter,cb(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var OE=class n extends Ws{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new G(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new G(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new js(o,s)}(e._query,this._field,this._direction);return new tn(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new br(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function ak(n,e="asc"){let t=e,r=Mg("orderBy",n);return OE._create(r,t)}var yg=class n extends Ws{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new tn(e.firestore,e.converter,Fm(e._query,this._limit,this._limitType))}};function ck(n){return LR("limit",n),yg._create("limit",n,"F")}function uk(n){return LR("limitToLast",n),yg._create("limitToLast",n,"L")}var vg=class n extends Ws{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=pk(e,this.type,this._docOrFields,this._inclusive);return new tn(e.firestore,e.converter,function(i,o){return new br(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function lk(...n){return vg._create("startAt",n,!0)}function dk(...n){return vg._create("startAfter",n,!1)}var _g=class n extends Ws{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=pk(e,this.type,this._docOrFields,this._inclusive);return new tn(e.firestore,e.converter,function(i,o){return new br(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function fk(...n){return _g._create("endBefore",n,!1)}function hk(...n){return _g._create("endAt",n,!0)}function pk(n,e,t,r){if(t[0]=ht(t[0]),t[0]instanceof Gs)return function(o,s,a,c,l){if(!c)throw new G(j.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of bc(o))if(f.field.isKeyField())d.push(Ls(s,c.key));else{let p=c.data.field(f.field);if(Cg(p))throw new G(j.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){let g=f.field.canonicalString();throw new G(j.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}d.push(p)}return new Wr(d,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Qs(n.firestore);return function(s,a,c,l,d,f){let p=s.explicitOrderBy;if(d.length>p.length)throw new G(j.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let g=[];for(let v=0;v<d.length;v++){let b=d[v];if(p[v].field.isKeyField()){if(typeof b!="string")throw new G(j.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof b}`);if(!BE(s)&&b.indexOf("/")!==-1)throw new G(j.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${b}' contains a slash.`);let _=s.path.child(je.fromString(b));if(!ee.isDocumentKey(_))throw new G(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${_}' is not because it contains an odd number of segments.`);let S=new ee(_);g.push(Ls(a,S))}else{let _=tk(c,l,b);g.push(_)}}return new Wr(g,f)}(n._query,n.firestore._databaseId,i,e,t,r)}}function sN(n,e,t){if(typeof(t=ht(t))=="string"){if(t==="")throw new G(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BE(e)&&t.indexOf("/")!==-1)throw new G(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(je.fromString(t));if(!ee.isDocumentKey(r))throw new G(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ls(n,new ee(r))}if(t instanceof it)return Ls(n,t._key);throw new G(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xg(t)}.`)}function aN(n,e){if(!Array.isArray(n)||n.length===0)throw new G(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mk(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new G(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Bc=class{convertValue(e,t="none"){switch(Vs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ao(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw re()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Ks(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new Hs(Et(e.latitude),Et(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=LE(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Yl(e));default:return null}}convertTimestamp(e){let t=Oi(e);return new gt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=je.fromString(e);le(sR(r));let i=new Po(r.get(1),r.get(3)),o=new ee(r.popFirst(5));return i.isEqual(t)||Dt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Tg(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var NE=class extends Bc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new it(this.firestore,null,t)}};var Pi=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},sr=class extends Gs{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Mo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Mg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Mo=class extends sr{data(e={}){return super.data(e)}},xr=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Pi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Mo(this._firestore,this._userDataWriter,r.key,r,new Pi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new G(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Mo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Pi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Mo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Pi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:Bq(a.type),doc:c,oldIndex:l,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function Bq(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re()}}function mI(n,e){return n instanceof sr&&e instanceof sr?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof xr&&e instanceof xr&&n._firestore===e._firestore&&lI(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function gk(n){n=Be(n,it);let e=Be(n.firestore,ft);return kR(zt(e),n._key).then(t=>_I(e,n,t))}var Fi=class extends Bc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new it(this.firestore,null,t)}};function yk(n){n=Be(n,it);let e=Be(n.firestore,ft),t=zt(e),r=new Fi(e);return Nq(t,n._key).then(i=>new sr(e,r,n._key,i,new Pi(i!==null&&i.hasLocalMutations,!0),n.converter))}function vk(n){n=Be(n,it);let e=Be(n.firestore,ft);return kR(zt(e),n._key,{source:"server"}).then(t=>_I(e,n,t))}function _k(n){n=Be(n,tn);let e=Be(n.firestore,ft),t=zt(e),r=new Fi(e);return ok(n._query),FR(t,n._query).then(i=>new xr(e,r,n,i))}function wk(n){n=Be(n,tn);let e=Be(n.firestore,ft),t=zt(e),r=new Fi(e);return Rq(t,n._query).then(i=>new xr(e,r,n,i))}function Ck(n){n=Be(n,tn);let e=Be(n.firestore,ft),t=zt(e),r=new Fi(e);return FR(t,n._query,{source:"server"}).then(i=>new xr(e,r,n,i))}function gI(n,e,t){n=Be(n,it);let r=Be(n.firestore,ft),i=Tg(n.converter,e,t);return Wc(r,[Dg(Qs(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,It.none())])}function yI(n,e,t,...r){n=Be(n,it);let i=Be(n.firestore,ft),o=Qs(i),s;return s=typeof(e=ht(e))=="string"||e instanceof Ir?fI(o,"updateDoc",n._key,e,t,r):dI(o,"updateDoc",n._key,e),Wc(i,[s.toMutation(n._key,It.exists(!0))])}function bk(n){return Wc(Be(n.firestore,ft),[new Fo(n._key,It.none())])}function Ek(n,e){let t=Be(n.firestore,ft),r=Cd(n),i=Tg(n.converter,e);return Wc(t,[Dg(Qs(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,It.exists(!1))]).then(()=>r)}function vI(n,...e){var t,r,i;n=ht(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||CE(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(CE(e[s])){let f=e[s];e[s]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,l,d;if(n instanceof it)l=Be(n.firestore,ft),d=$c(n._key.path),c={next:f=>{e[s]&&e[s](_I(l,n,f))},error:e[s+1],complete:e[s+2]};else{let f=Be(n,tn);l=Be(f.firestore,ft),d=f._query;let p=new Fi(l);c={next:g=>{e[s]&&e[s](new xr(l,p,f,g))},error:e[s+1],complete:e[s+2]},ok(n._query)}return function(p,g,v,b){let _=new Lc(b),S=new ld(g,_,v);return p.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return QE(yield jc(p),S)})),()=>{_.$a(),p.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return YE(yield jc(p),S)}))}}(zt(l),d,a,c)}function Ik(n,e){return kq(zt(n=Be(n,ft)),CE(e)?e:{next:e})}function Wc(n,e){return function(r,i){let o=new Lt;return r.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return pq(yield oI(r),i,o)})),o.promise}(zt(n),e)}function _I(n,e,t){let r=t.docs.get(e._key),i=new Fi(n);return new sr(n,i,e._key,r,new Pi(t.hasPendingWrites,t.fromCache),e.converter)}var Uq={maxAttempts:5};var wg=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Qs(e)}set(e,t,r){this._verifyNotCommitted();let i=xo(e,this._firestore),o=Tg(i.converter,t,r),s=Dg(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,It.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=xo(e,this._firestore),s;return s=typeof(t=ht(t))=="string"||t instanceof Ir?fI(this._dataReader,"WriteBatch.update",o._key,t,r,i):dI(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,It.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=xo(e,this._firestore);return this._mutations=this._mutations.concat(new Fo(t._key,It.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new G(j.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function xo(n,e){if((n=ht(n)).firestore!==e)throw new G(j.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var RE=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Qs(t)}get(t){let r=xo(t,this._firestore),i=new NE(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return re();let s=o[0];if(s.isFoundDocument())return new Gs(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Gs(this._firestore,i,r._key,null,r.converter);throw re()})}set(t,r,i){let o=xo(t,this._firestore),s=Tg(o.converter,r,i),a=Dg(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=xo(t,this._firestore),a;return a=typeof(r=ht(r))=="string"||r instanceof Ir?fI(this._dataReader,"Transaction.update",s._key,r,i,o):dI(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=xo(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=xo(e,this._firestore),r=new Fi(this._firestore);return super.get(e).then(i=>new sr(this._firestore,r,t._key,i._document,new Pi(!1,!1),t.converter))}};function xk(n,e,t){n=Be(n,ft);let r=Object.assign(Object.assign({},Uq),t);return function(o){if(o.maxAttempts<1)throw new G(j.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new Lt;return o.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){let l=yield Aq(o);new yE(o.asyncQueue,l,a,s,c).Xa()})),c.promise}(zt(n),i=>e(new RE(n,i)),r)}function Dk(){return new hd("deleteField")}function Sg(){return new xE("serverTimestamp")}function Mk(...n){return new DE("arrayUnion",n)}function Tk(...n){return new ME("arrayRemove",n)}function Sk(n){return new TE("increment",n)}(function(e,t=!0){(function(i){Uc=i})(YD),Au(new ns("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new ft(new jC(r.getProvider("auth-internal")),new zC(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new G(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Po(l.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ki(cO,"4.6.2",e),Ki(cO,"4.6.2","esm2017")})();var $q="@firebase/firestore-compat",zq="0.3.31";function xI(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new G("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Ak(){if(typeof Uint8Array>"u")throw new G("unimplemented","Uint8Arrays are not available in this environment.")}function Pk(){if(!bN())throw new G("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Ag=class n{constructor(e){this._delegate=e}static fromBase64String(e){return Pk(),new n(Qr.fromBase64String(e))}static fromUint8Array(e){return Ak(),new n(Qr.fromUint8Array(e))}toBase64(){return Pk(),this._delegate.toBase64()}toUint8Array(){return Ak(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function wI(n){return qq(n,["next","error","complete"])}function qq(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var CI=class{enableIndexedDbPersistence(e,t){return zR(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return qR(e._delegate)}clearIndexedDbPersistence(e){return GR(e._delegate)}},Pg=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Po||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ir("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){jR(this._delegate,e,t,r)}enableNetwork(){return KR(this._delegate)}disableNetwork(){return QR(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,aI("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return WR(this._delegate)}onSnapshotsInSync(e){return Ik(this._delegate,e)}get app(){if(!this._appCompat)throw new G("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Yc(this,cI(this._delegate,e))}catch(t){throw Sn(t,"collection()","Firestore.collection()")}}doc(e){try{return new Yr(this,Cd(this._delegate,e))}catch(t){throw Sn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ea(this,BR(this._delegate,e))}catch(t){throw Sn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return xk(this._delegate,t=>e(new Og(this,t)))}batch(){return zt(this._delegate),new Ng(new wg(this._delegate,e=>Wc(this._delegate,e)))}loadBundle(e){return YR(this._delegate,e)}namedQuery(e){return ZR(this._delegate,e).then(t=>t?new ea(this,t):null)}},Kc=class extends Bc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ag(new Qr(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Yr.forKey(t,this.firestore,null)}};function Hq(n){cN(n)}var Og=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Kc(e)}get(e){let t=Zs(e);return this._delegate.get(t).then(r=>new Xs(this._firestore,new sr(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=Zs(e);return r?(xI("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Zs(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Zs(e);return this._delegate.delete(t),this}},Ng=class{constructor(e){this._delegate=e}set(e,t,r){let i=Zs(e);return r?(xI("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Zs(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Zs(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Qc=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Mo(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Js(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new Kc(e),t),i.set(t,o)),o}};Qc.INSTANCES=new WeakMap;var Yr=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Kc(e)}static forPath(e,t,r){if(e.length%2!==0)throw new G("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new it(t._delegate,r,new ee(e)))}static forKey(e,t,r){return new n(t,new it(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Yc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Yc(this.firestore,cI(this._delegate,e))}catch(t){throw Sn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ht(e),e instanceof it?uI(this._delegate,e):!1}set(e,t){t=xI("DocumentReference.set",t);try{return t?gI(this._delegate,e,t):gI(this._delegate,e)}catch(r){throw Sn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?yI(this._delegate,e):yI(this._delegate,e,t,...r)}catch(i){throw Sn(i,"updateDoc()","DocumentReference.update()")}}delete(){return bk(this._delegate)}onSnapshot(...e){let t=Ok(e),r=Nk(e,i=>new Xs(this.firestore,new sr(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return vI(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=yk(this._delegate):e?.source==="server"?t=vk(this._delegate):t=gk(this._delegate),t.then(r=>new Xs(this.firestore,new sr(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Qc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Sn(n,e,t){return n.message=n.message.replace(e,t),n}function Ok(n){for(let e of n)if(typeof e=="object"&&!wI(e))return e;return{}}function Nk(n,e){var t,r;let i;return wI(n[0])?i=n[0]:wI(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Xs=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Yr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return mI(this._delegate,e._delegate)}},Js=class extends Xs{data(e){let t=this._delegate.data(e);return this._delegate._converter||uN(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},ea=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Kc(e)}where(e,t,r){try{return new n(this.firestore,Li(this._delegate,sk(e,t,r)))}catch(i){throw Sn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,Li(this._delegate,ak(e,t)))}catch(r){throw Sn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,Li(this._delegate,ck(e)))}catch(t){throw Sn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,Li(this._delegate,uk(e)))}catch(t){throw Sn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,Li(this._delegate,lk(...e)))}catch(t){throw Sn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,Li(this._delegate,dk(...e)))}catch(t){throw Sn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,Li(this._delegate,fk(...e)))}catch(t){throw Sn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,Li(this._delegate,hk(...e)))}catch(t){throw Sn(t,"endAt()","Query.endAt()")}}isEqual(e){return lI(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=wk(this._delegate):e?.source==="server"?t=Ck(this._delegate):t=_k(this._delegate),t.then(r=>new bd(this.firestore,new xr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=Ok(e),r=Nk(e,i=>new bd(this.firestore,new xr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return vI(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Qc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},bI=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Js(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},bd=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ea(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Js(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new bI(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Js(this._firestore,r))})}isEqual(e){return mI(this._delegate,e._delegate)}},Yc=class n extends ea{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Yr(this.firestore,e):null}doc(e){try{return e===void 0?new Yr(this.firestore,Cd(this._delegate)):new Yr(this.firestore,Cd(this._delegate,e))}catch(t){throw Sn(t,"doc()","CollectionReference.doc()")}}add(e){return Ek(this._delegate,e).then(t=>new Yr(this.firestore,t))}isEqual(e){return uI(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Qc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Zs(n){return Be(n,it)}var EI=class n{constructor(...e){this._delegate=new Ir(...e)}static documentId(){return new n(Mt.keyField().canonicalString())}isEqual(e){return e=ht(e),e instanceof Ir?this._delegate._internalPath.isEqual(e._internalPath):!1}};var II=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=Sg();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=Dk();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=Mk(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=Tk(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=Sk(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var Gq={Firestore:Pg,GeoPoint:Hs,Timestamp:gt,Blob:Ag,Transaction:Og,WriteBatch:Ng,DocumentReference:Yr,DocumentSnapshot:Xs,Query:ea,QueryDocumentSnapshot:Js,QuerySnapshot:bd,CollectionReference:Yc,FieldPath:EI,FieldValue:II,setLogLevel:Hq,CACHE_SIZE_UNLIMITED:UR};function Wq(n,e){n.INTERNAL.registerComponent(new ns("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Gq)))}function Kq(n){Wq(n,(e,t)=>new Pg(e,t,new CI)),n.registerVersion($q,zq)}Kq(Pn);function Qq(n,e=Fu){return new Ie(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function Rk(n,e){return Qq(n,e)}function Yq(n,e){return Rk(n,e).pipe(ui(void 0),ss(),ie(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function MI(n,e){return Rk(n,e).pipe(ie(t=>({payload:t,type:"query"})))}var kk=class{ref;afs;constructor(n,e){this.ref=n,this.afs=e}set(n,e){return this.ref.set(n,e)}update(n){return this.ref.update(n)}delete(){return this.ref.delete()}collection(n,e){let t=this.ref.collection(n),{ref:r,query:i}=Uk(t,e);return new Lk(r,i,this.afs)}snapshotChanges(){return Yq(this.ref,this.afs.schedulers.outsideAngular).pipe(fn)}valueChanges(n={}){return this.snapshotChanges().pipe(ie(({payload:e})=>n.idField?me(Y({},e.data()),{[n.idField]:e.id}):e.data()))}get(n){return Me(this.ref.get(n)).pipe(fn)}};function Fg(n,e){return MI(n,e).pipe(ui(void 0),ss(),ie(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=o.find(f=>f.doc.ref.isEqual(a.ref)),d=r?.payload.docs.find(f=>f.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function Fk(n,e,t){return Fg(n,t).pipe(ci((r,i)=>Zq(r,i.map(o=>o.payload),e),[]),Jv(),ie(r=>r.map(i=>({type:i.type,payload:i}))))}function Zq(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=Xq(n,r))}),n}function DI(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function Xq(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return DI(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return DI(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return DI(n,e.oldIndex,1);break}return n}function Vk(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var Lk=class{ref;query;afs;constructor(n,e,t){this.ref=n,this.query=e,this.afs=t}stateChanges(n){let e=Fg(this.query,this.afs.schedulers.outsideAngular);return n&&n.length>0&&(e=e.pipe(ie(t=>t.filter(r=>n.indexOf(r.type)>-1)))),e.pipe(ui(void 0),ss(),at(([t,r])=>r.length>0||!t),ie(([,t])=>t),fn)}auditTrail(n){return this.stateChanges(n).pipe(ci((e,t)=>[...e,...t],[]))}snapshotChanges(n){let e=Vk(n);return Fk(this.query,e,this.afs.schedulers.outsideAngular).pipe(fn)}valueChanges(n={}){return MI(this.query,this.afs.schedulers.outsideAngular).pipe(ie(e=>e.payload.docs.map(t=>n.idField?me(Y({},t.data()),{[n.idField]:t.id}):t.data())),fn)}get(n){return Me(this.query.get(n)).pipe(fn)}add(n){return this.ref.add(n)}doc(n){return new kk(this.ref.doc(n),this.afs)}},Jq=class{query;afs;constructor(n,e){this.query=n,this.afs=e}stateChanges(n){return!n||n.length===0?Fg(this.query,this.afs.schedulers.outsideAngular).pipe(fn):Fg(this.query,this.afs.schedulers.outsideAngular).pipe(ie(e=>e.filter(t=>n.indexOf(t.type)>-1)),at(e=>e.length>0),fn)}auditTrail(n){return this.stateChanges(n).pipe(ci((e,t)=>[...e,...t],[]))}snapshotChanges(n){let e=Vk(n);return Fk(this.query,e,this.afs.schedulers.outsideAngular).pipe(fn)}valueChanges(n={}){return MI(this.query,this.afs.schedulers.outsideAngular).pipe(ie(t=>t.payload.docs.map(r=>n.idField?Y({[n.idField]:r.id},r.data()):r.data())),fn)}get(n){return Me(this.query.get(n)).pipe(fn)}},jk=new X("angularfire2.enableFirestorePersistence"),Bk=new X("angularfire2.firestore.persistenceSettings"),eH=new X("angularfire2.firestore.settings"),tH=new X("angularfire2.firestore.use-emulator");function Uk(n,e=t=>t){return{query:e(n),ref:n}}var ta=class Rg{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,c,l,d,f,p,g,v,b,_,S,k){this.schedulers=c;let P=Rl(t,a,r),U=d;f&&xC(P,a,p,v,b,_,g,S),[this.firestore,this.persistenceEnabled$]=lm(`${P.name}.firestore`,"AngularFirestore",P.name,()=>{let H=a.runOutsideAngular(()=>P.firestore());if(o&&H.settings(o),U&&H.useEmulator(...U),i&&!po(s)){let q=()=>{try{return Me(H.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),ue(!1)}};return[H,a.runOutsideAngular(q)]}else return[H,ue(!1)]},[o,U,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=Uk(i,r),a=this.schedulers.ngZone.run(()=>o);return new Lk(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new Jq(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new kk(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||Rg)(K(cc),K(uc,8),K(jk,8),K(eH,8),K(ln),K(ke),K(am),K(Bk,8),K(tH,8),K(fm,8),K(_C,8),K(wC,8),K(CC,8),K(bC,8),K(EC,8),K(IC,8),K(Ol,8))};static \u0275prov=ne({token:Rg,factory:Rg.\u0275fac,providedIn:"any"})},$k=class kg{constructor(){Pn.registerVersion("angularfire",Pl.full,"fst-compat")}static enablePersistence(t){return{ngModule:kg,providers:[{provide:jk,useValue:!0},{provide:Bk,useValue:t}]}}static \u0275fac=function(r){return new(r||kg)};static \u0275mod=wt({type:kg});static \u0275inj=_t({providers:[ta]})};var mn=class n{constructor(e){this.firestore=e}getAllPerfumes(){return this.firestore.collection("perfumes").valueChanges({idField:"id"})}getPerfumesByCountry(e){return this.firestore.collection("perfumes",t=>t.where("country","==",e)).valueChanges({idField:"id"})}getPerfumeById(e){return this.firestore.doc(`perfumes/${e}`).valueChanges()}getCountries(){return this.firestore.collection("perfumes").valueChanges().pipe(ie(e=>(console.log("Perfumes:",e),[...new Set(e.map(r=>r.country))].sort())))}getFeaturedPerfumes(){return this.firestore.collection("perfumes",e=>e.where("isBestSeller","==",!0).limit(3)).valueChanges({idField:"id"})}updatePerfume(e,t){return this.firestore.doc(`perfumes/${e}`).update(t)}static \u0275fac=function(t){return new(t||n)(K(ta))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})};var Wn=class{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){let t=this._partials,r=0;for(let i=0;i<this._n&&i<32;i++){let o=t[i],s=e+o,a=Math.abs(e)<Math.abs(o)?e-(s-o):o-(s-e);a&&(t[r++]=a),e=s}return t[r]=e,this._n=r+1,this}valueOf(){let e=this._partials,t=this._n,r,i,o,s=0;if(t>0){for(s=e[--t];t>0&&(r=s,i=e[--t],s=r+i,o=i-(s-r),!o););t>0&&(o<0&&e[t-1]<0||o>0&&e[t-1]>0)&&(i=o*2,r=s+i,i==r-s&&(s=r))}return s}};function*nH(n){for(let e of n)yield*$D(e)}function Zc(n){return Array.from(nH(n))}var rH={value:()=>{}};function Hk(){for(var n=0,e=arguments.length,t={},r;n<e;++n){if(!(r=arguments[n]+"")||r in t||/[\s.]/.test(r))throw new Error("illegal type: "+r);t[r]=[]}return new Lg(t)}function Lg(n){this._=n}function iH(n,e){return n.trim().split(/^|\s+/).map(function(t){var r="",i=t.indexOf(".");if(i>=0&&(r=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}})}Lg.prototype=Hk.prototype={constructor:Lg,on:function(n,e){var t=this._,r=iH(n+"",t),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(n=r[o]).type)&&(i=oH(t[i],n.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(i=(n=r[o]).type)t[i]=qk(t[i],n.name,e);else if(e==null)for(i in t)t[i]=qk(t[i],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new Lg(n)},call:function(n,e){if((i=arguments.length-2)>0)for(var t=new Array(i),r=0,i,o;r<i;++r)t[r]=arguments[r+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(o=this._[n],r=0,i=o.length;r<i;++r)o[r].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],i=0,o=r.length;i<o;++i)r[i].value.apply(e,t)}};function oH(n,e){for(var t=0,r=n.length,i;t<r;++t)if((i=n[t]).name===e)return i.value}function qk(n,e,t){for(var r=0,i=n.length;r<i;++r)if(n[r].name===e){n[r]=rH,n=n.slice(0,r).concat(n.slice(r+1));break}return t!=null&&n.push({name:e,value:t}),n}var Ed=Hk;var jg="http://www.w3.org/1999/xhtml",TI={svg:"http://www.w3.org/2000/svg",xhtml:jg,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ji(n){var e=n+="",t=e.indexOf(":");return t>=0&&(e=n.slice(0,t))!=="xmlns"&&(n=n.slice(t+1)),TI.hasOwnProperty(e)?{space:TI[e],local:n}:n}function sH(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===jg&&e.documentElement.namespaceURI===jg?e.createElement(n):e.createElementNS(t,n)}}function aH(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function Bg(n){var e=ji(n);return(e.local?aH:sH)(e)}function cH(){}function na(n){return n==null?cH:function(){return this.querySelector(n)}}function Gk(n){typeof n!="function"&&(n=na(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var o=e[i],s=o.length,a=r[i]=new Array(s),c,l,d=0;d<s;++d)(c=o[d])&&(l=n.call(c,c.__data__,d,o))&&("__data__"in c&&(l.__data__=c.__data__),a[d]=l);return new xt(r,this._parents)}function SI(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function uH(){return[]}function Id(n){return n==null?uH:function(){return this.querySelectorAll(n)}}function lH(n){return function(){return SI(n.apply(this,arguments))}}function Wk(n){typeof n=="function"?n=lH(n):n=Id(n);for(var e=this._groups,t=e.length,r=[],i=[],o=0;o<t;++o)for(var s=e[o],a=s.length,c,l=0;l<a;++l)(c=s[l])&&(r.push(n.call(c,c.__data__,l,s)),i.push(c));return new xt(r,i)}function xd(n){return function(){return this.matches(n)}}function Ug(n){return function(e){return e.matches(n)}}var dH=Array.prototype.find;function fH(n){return function(){return dH.call(this.children,n)}}function hH(){return this.firstElementChild}function Kk(n){return this.select(n==null?hH:fH(typeof n=="function"?n:Ug(n)))}var pH=Array.prototype.filter;function mH(){return Array.from(this.children)}function gH(n){return function(){return pH.call(this.children,n)}}function Qk(n){return this.selectAll(n==null?mH:gH(typeof n=="function"?n:Ug(n)))}function Yk(n){typeof n!="function"&&(n=xd(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var o=e[i],s=o.length,a=r[i]=[],c,l=0;l<s;++l)(c=o[l])&&n.call(c,c.__data__,l,o)&&a.push(c);return new xt(r,this._parents)}function $g(n){return new Array(n.length)}function Zk(){return new xt(this._enter||this._groups.map($g),this._parents)}function Dd(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}Dd.prototype={constructor:Dd,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function Xk(n){return function(){return n}}function yH(n,e,t,r,i,o){for(var s=0,a,c=e.length,l=o.length;s<l;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):t[s]=new Dd(n,o[s]);for(;s<c;++s)(a=e[s])&&(i[s]=a)}function vH(n,e,t,r,i,o,s){var a,c,l=new Map,d=e.length,f=o.length,p=new Array(d),g;for(a=0;a<d;++a)(c=e[a])&&(p[a]=g=s.call(c,c.__data__,a,e)+"",l.has(g)?i[a]=c:l.set(g,c));for(a=0;a<f;++a)g=s.call(n,o[a],a,o)+"",(c=l.get(g))?(r[a]=c,c.__data__=o[a],l.delete(g)):t[a]=new Dd(n,o[a]);for(a=0;a<d;++a)(c=e[a])&&l.get(p[a])===c&&(i[a]=c)}function _H(n){return n.__data__}function Jk(n,e){if(!arguments.length)return Array.from(this,_H);var t=e?vH:yH,r=this._parents,i=this._groups;typeof n!="function"&&(n=Xk(n));for(var o=i.length,s=new Array(o),a=new Array(o),c=new Array(o),l=0;l<o;++l){var d=r[l],f=i[l],p=f.length,g=wH(n.call(d,d&&d.__data__,l,r)),v=g.length,b=a[l]=new Array(v),_=s[l]=new Array(v),S=c[l]=new Array(p);t(d,f,b,_,S,g,e);for(var k=0,P=0,U,H;k<v;++k)if(U=b[k]){for(k>=P&&(P=k+1);!(H=_[P])&&++P<v;);U._next=H||null}}return s=new xt(s,r),s._enter=a,s._exit=c,s}function wH(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function eF(){return new xt(this._exit||this._groups.map($g),this._parents)}function tF(n,e,t){var r=this.enter(),i=this,o=this.exit();return typeof n=="function"?(r=n(r),r&&(r=r.selection())):r=r.append(n+""),e!=null&&(i=e(i),i&&(i=i.selection())),t==null?o.remove():t(o),r&&i?r.merge(i).order():i}function nF(n){for(var e=n.selection?n.selection():n,t=this._groups,r=e._groups,i=t.length,o=r.length,s=Math.min(i,o),a=new Array(i),c=0;c<s;++c)for(var l=t[c],d=r[c],f=l.length,p=a[c]=new Array(f),g,v=0;v<f;++v)(g=l[v]||d[v])&&(p[v]=g);for(;c<i;++c)a[c]=t[c];return new xt(a,this._parents)}function rF(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var r=n[e],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function iF(n){n||(n=CH);function e(f,p){return f&&p?n(f.__data__,p.__data__):!f-!p}for(var t=this._groups,r=t.length,i=new Array(r),o=0;o<r;++o){for(var s=t[o],a=s.length,c=i[o]=new Array(a),l,d=0;d<a;++d)(l=s[d])&&(c[d]=l);c.sort(e)}return new xt(i,this._parents).order()}function CH(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function oF(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function sF(){return Array.from(this)}function aF(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function cF(){let n=0;for(let e of this)++n;return n}function uF(){return!this.node()}function lF(n){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var i=e[t],o=0,s=i.length,a;o<s;++o)(a=i[o])&&n.call(a,a.__data__,o,i);return this}function bH(n){return function(){this.removeAttribute(n)}}function EH(n){return function(){this.removeAttributeNS(n.space,n.local)}}function IH(n,e){return function(){this.setAttribute(n,e)}}function xH(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function DH(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(n):this.setAttribute(n,t)}}function MH(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function dF(n,e){var t=ji(n);if(arguments.length<2){var r=this.node();return t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}return this.each((e==null?t.local?EH:bH:typeof e=="function"?t.local?MH:DH:t.local?xH:IH)(t,e))}function zg(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function TH(n){return function(){this.style.removeProperty(n)}}function SH(n,e,t){return function(){this.style.setProperty(n,e,t)}}function AH(n,e,t){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(n):this.style.setProperty(n,r,t)}}function fF(n,e,t){return arguments.length>1?this.each((e==null?TH:typeof e=="function"?AH:SH)(n,e,t??"")):Uo(this.node(),n)}function Uo(n,e){return n.style.getPropertyValue(e)||zg(n).getComputedStyle(n,null).getPropertyValue(e)}function PH(n){return function(){delete this[n]}}function OH(n,e){return function(){this[n]=e}}function NH(n,e){return function(){var t=e.apply(this,arguments);t==null?delete this[n]:this[n]=t}}function hF(n,e){return arguments.length>1?this.each((e==null?PH:typeof e=="function"?NH:OH)(n,e)):this.node()[n]}function pF(n){return n.trim().split(/^|\s+/)}function AI(n){return n.classList||new mF(n)}function mF(n){this._node=n,this._names=pF(n.getAttribute("class")||"")}mF.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function gF(n,e){for(var t=AI(n),r=-1,i=e.length;++r<i;)t.add(e[r])}function yF(n,e){for(var t=AI(n),r=-1,i=e.length;++r<i;)t.remove(e[r])}function RH(n){return function(){gF(this,n)}}function kH(n){return function(){yF(this,n)}}function FH(n,e){return function(){(e.apply(this,arguments)?gF:yF)(this,n)}}function vF(n,e){var t=pF(n+"");if(arguments.length<2){for(var r=AI(this.node()),i=-1,o=t.length;++i<o;)if(!r.contains(t[i]))return!1;return!0}return this.each((typeof e=="function"?FH:e?RH:kH)(t,e))}function VH(){this.textContent=""}function LH(n){return function(){this.textContent=n}}function jH(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function _F(n){return arguments.length?this.each(n==null?VH:(typeof n=="function"?jH:LH)(n)):this.node().textContent}function BH(){this.innerHTML=""}function UH(n){return function(){this.innerHTML=n}}function $H(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function wF(n){return arguments.length?this.each(n==null?BH:(typeof n=="function"?$H:UH)(n)):this.node().innerHTML}function zH(){this.nextSibling&&this.parentNode.appendChild(this)}function CF(){return this.each(zH)}function qH(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function bF(){return this.each(qH)}function EF(n){var e=typeof n=="function"?n:Bg(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function HH(){return null}function IF(n,e){var t=typeof n=="function"?n:Bg(n),r=e==null?HH:typeof e=="function"?e:na(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),r.apply(this,arguments)||null)})}function GH(){var n=this.parentNode;n&&n.removeChild(this)}function xF(){return this.each(GH)}function WH(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function KH(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function DF(n){return this.select(n?KH:WH)}function MF(n){return arguments.length?this.property("__data__",n):this.node().__data__}function QH(n){return function(e){n.call(this,e,this.__data__)}}function YH(n){return n.trim().split(/^|\s+/).map(function(e){var t="",r=e.indexOf(".");return r>=0&&(t=e.slice(r+1),e=e.slice(0,r)),{type:e,name:t}})}function ZH(n){return function(){var e=this.__on;if(e){for(var t=0,r=-1,i=e.length,o;t<i;++t)o=e[t],(!n.type||o.type===n.type)&&o.name===n.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function XH(n,e,t){return function(){var r=this.__on,i,o=QH(e);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===n.type&&i.name===n.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=t),i.value=e;return}}this.addEventListener(n.type,o,t),i={type:n.type,name:n.name,value:e,listener:o,options:t},r?r.push(i):this.__on=[i]}}function TF(n,e,t){var r=YH(n+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,l=a.length,d;c<l;++c)for(i=0,d=a[c];i<o;++i)if((s=r[i]).type===d.type&&s.name===d.name)return d.value}return}for(a=e?XH:ZH,i=0;i<o;++i)this.each(a(r[i],e,t));return this}function SF(n,e,t){var r=zg(n),i=r.CustomEvent;typeof i=="function"?i=new i(e,t):(i=r.document.createEvent("Event"),t?(i.initEvent(e,t.bubbles,t.cancelable),i.detail=t.detail):i.initEvent(e,!1,!1)),n.dispatchEvent(i)}function JH(n,e){return function(){return SF(this,n,e)}}function eG(n,e){return function(){return SF(this,n,e.apply(this,arguments))}}function AF(n,e){return this.each((typeof e=="function"?eG:JH)(n,e))}function*PF(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var PI=[null];function xt(n,e){this._groups=n,this._parents=e}function OF(){return new xt([[document.documentElement]],PI)}function tG(){return this}xt.prototype=OF.prototype={constructor:xt,select:Gk,selectAll:Wk,selectChild:Kk,selectChildren:Qk,filter:Yk,data:Jk,enter:Zk,exit:eF,join:tF,merge:nF,selection:tG,order:rF,sort:iF,call:oF,nodes:sF,node:aF,size:cF,empty:uF,each:lF,attr:dF,style:fF,property:hF,classed:vF,text:_F,html:wF,raise:CF,lower:bF,append:EF,insert:IF,remove:xF,clone:DF,datum:MF,on:TF,dispatch:AF,[Symbol.iterator]:PF};var Bi=OF;function nn(n){return typeof n=="string"?new xt([[document.querySelector(n)]],[document.documentElement]):new xt([[n]],PI)}function NF(n){let e;for(;e=n.sourceEvent;)n=e;return n}function Ui(n,e){if(n=NF(n),e===void 0&&(e=n.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var r=t.createSVGPoint();return r.x=n.clientX,r.y=n.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[n.clientX-i.left-e.clientLeft,n.clientY-i.top-e.clientTop]}}return[n.pageX,n.pageY]}var qg={capture:!0,passive:!1};function Hg(n){n.preventDefault(),n.stopImmediatePropagation()}function OI(n){var e=n.document.documentElement,t=nn(n).on("dragstart.drag",Hg,qg);"onselectstart"in e?t.on("selectstart.drag",Hg,qg):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function NI(n,e){var t=n.document.documentElement,r=nn(n).on("dragstart.drag",null);e&&(r.on("click.drag",Hg,qg),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in t?r.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}function Gg(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function RI(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function Sd(){}var Md=.7,Qg=1/Md,Xc="\\s*([+-]?\\d+)\\s*",Td="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Zr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nG=/^#([0-9a-f]{3,8})$/,rG=new RegExp(`^rgb\\(${Xc},${Xc},${Xc}\\)$`),iG=new RegExp(`^rgb\\(${Zr},${Zr},${Zr}\\)$`),oG=new RegExp(`^rgba\\(${Xc},${Xc},${Xc},${Td}\\)$`),sG=new RegExp(`^rgba\\(${Zr},${Zr},${Zr},${Td}\\)$`),aG=new RegExp(`^hsl\\(${Td},${Zr},${Zr}\\)$`),cG=new RegExp(`^hsla\\(${Td},${Zr},${Zr},${Td}\\)$`),RF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Gg(Sd,$o,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:kF,formatHex:kF,formatHex8:uG,formatHsl:lG,formatRgb:FF,toString:FF});function kF(){return this.rgb().formatHex()}function uG(){return this.rgb().formatHex8()}function lG(){return $F(this).formatHsl()}function FF(){return this.rgb().formatRgb()}function $o(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=nG.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?VF(e):t===3?new Ln(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Wg(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Wg(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=rG.exec(n))?new Ln(e[1],e[2],e[3],1):(e=iG.exec(n))?new Ln(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=oG.exec(n))?Wg(e[1],e[2],e[3],e[4]):(e=sG.exec(n))?Wg(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=aG.exec(n))?BF(e[1],e[2]/100,e[3]/100,1):(e=cG.exec(n))?BF(e[1],e[2]/100,e[3]/100,e[4]):RF.hasOwnProperty(n)?VF(RF[n]):n==="transparent"?new Ln(NaN,NaN,NaN,0):null}function VF(n){return new Ln(n>>16&255,n>>8&255,n&255,1)}function Wg(n,e,t,r){return r<=0&&(n=e=t=NaN),new Ln(n,e,t,r)}function dG(n){return n instanceof Sd||(n=$o(n)),n?(n=n.rgb(),new Ln(n.r,n.g,n.b,n.opacity)):new Ln}function Jc(n,e,t,r){return arguments.length===1?dG(n):new Ln(n,e,t,r??1)}function Ln(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}Gg(Ln,Jc,RI(Sd,{brighter(n){return n=n==null?Qg:Math.pow(Qg,n),new Ln(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Md:Math.pow(Md,n),new Ln(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Ln(ia(this.r),ia(this.g),ia(this.b),Yg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:LF,formatHex:LF,formatHex8:fG,formatRgb:jF,toString:jF}));function LF(){return`#${ra(this.r)}${ra(this.g)}${ra(this.b)}`}function fG(){return`#${ra(this.r)}${ra(this.g)}${ra(this.b)}${ra((isNaN(this.opacity)?1:this.opacity)*255)}`}function jF(){let n=Yg(this.opacity);return`${n===1?"rgb(":"rgba("}${ia(this.r)}, ${ia(this.g)}, ${ia(this.b)}${n===1?")":`, ${n})`}`}function Yg(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function ia(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function ra(n){return n=ia(n),(n<16?"0":"")+n.toString(16)}function BF(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Dr(n,e,t,r)}function $F(n){if(n instanceof Dr)return new Dr(n.h,n.s,n.l,n.opacity);if(n instanceof Sd||(n=$o(n)),!n)return new Dr;if(n instanceof Dr)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),o=Math.max(e,t,r),s=NaN,a=o-i,c=(o+i)/2;return a?(e===o?s=(t-r)/a+(t<r)*6:t===o?s=(r-e)/a+2:s=(e-t)/a+4,a/=c<.5?o+i:2-o-i,s*=60):a=c>0&&c<1?0:s,new Dr(s,a,c,n.opacity)}function zF(n,e,t,r){return arguments.length===1?$F(n):new Dr(n,e,t,r??1)}function Dr(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}Gg(Dr,zF,RI(Sd,{brighter(n){return n=n==null?Qg:Math.pow(Qg,n),new Dr(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Md:Math.pow(Md,n),new Dr(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new Ln(kI(n>=240?n-240:n+120,i,r),kI(n,i,r),kI(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new Dr(UF(this.h),Kg(this.s),Kg(this.l),Yg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let n=Yg(this.opacity);return`${n===1?"hsl(":"hsla("}${UF(this.h)}, ${Kg(this.s)*100}%, ${Kg(this.l)*100}%${n===1?")":`, ${n})`}`}}));function UF(n){return n=(n||0)%360,n<0?n+360:n}function Kg(n){return Math.max(0,Math.min(1,n||0))}function kI(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}function FI(n,e,t,r,i){var o=n*n,s=o*n;return((1-3*n+3*o-s)*e+(4-6*o+3*s)*t+(1+3*n+3*o-3*s)*r+s*i)/6}function qF(n){var e=n.length-1;return function(t){var r=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),i=n[r],o=n[r+1],s=r>0?n[r-1]:2*i-o,a=r<e-1?n[r+2]:2*o-i;return FI((t-r/e)*e,s,i,o,a)}}function HF(n){var e=n.length;return function(t){var r=Math.floor(((t%=1)<0?++t:t)*e),i=n[(r+e-1)%e],o=n[r%e],s=n[(r+1)%e],a=n[(r+2)%e];return FI((t-r/e)*e,i,o,s,a)}}var VI=n=>()=>n;function hG(n,e){return function(t){return n+t*e}}function pG(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function GF(n){return(n=+n)==1?Zg:function(e,t){return t-e?pG(e,t,n):VI(isNaN(e)?t:e)}}function Zg(n,e){var t=e-n;return t?hG(n,t):VI(isNaN(n)?e:n)}var Xg=function n(e){var t=GF(e);function r(i,o){var s=t((i=Jc(i)).r,(o=Jc(o)).r),a=t(i.g,o.g),c=t(i.b,o.b),l=Zg(i.opacity,o.opacity);return function(d){return i.r=s(d),i.g=a(d),i.b=c(d),i.opacity=l(d),i+""}}return r.gamma=n,r}(1);function WF(n){return function(e){var t=e.length,r=new Array(t),i=new Array(t),o=new Array(t),s,a;for(s=0;s<t;++s)a=Jc(e[s]),r[s]=a.r||0,i[s]=a.g||0,o[s]=a.b||0;return r=n(r),i=n(i),o=n(o),a.opacity=1,function(c){return a.r=r(c),a.g=i(c),a.b=o(c),a+""}}}var mG=WF(qF),gG=WF(HF);function ar(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var jI=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,LI=new RegExp(jI.source,"g");function yG(n){return function(){return n}}function vG(n){return function(e){return n(e)+""}}function BI(n,e){var t=jI.lastIndex=LI.lastIndex=0,r,i,o,s=-1,a=[],c=[];for(n=n+"",e=e+"";(r=jI.exec(n))&&(i=LI.exec(e));)(o=i.index)>t&&(o=e.slice(t,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,c.push({i:s,x:ar(r,i)})),t=LI.lastIndex;return t<e.length&&(o=e.slice(t),a[s]?a[s]+=o:a[++s]=o),a.length<2?c[0]?vG(c[0].x):yG(e):(e=c.length,function(l){for(var d=0,f;d<e;++d)a[(f=c[d]).i]=f.x(l);return a.join("")})}var KF=180/Math.PI,Jg={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function UI(n,e,t,r,i,o){var s,a,c;return(s=Math.sqrt(n*n+e*e))&&(n/=s,e/=s),(c=n*t+e*r)&&(t-=n*c,r-=e*c),(a=Math.sqrt(t*t+r*r))&&(t/=a,r/=a,c/=a),n*r<e*t&&(n=-n,e=-e,c=-c,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,n)*KF,skewX:Math.atan(c)*KF,scaleX:s,scaleY:a}}var ey;function QF(n){let e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?Jg:UI(e.a,e.b,e.c,e.d,e.e,e.f)}function YF(n){return n==null?Jg:(ey||(ey=document.createElementNS("http://www.w3.org/2000/svg","g")),ey.setAttribute("transform",n),(n=ey.transform.baseVal.consolidate())?(n=n.matrix,UI(n.a,n.b,n.c,n.d,n.e,n.f)):Jg)}function ZF(n,e,t,r){function i(l){return l.length?l.pop()+" ":""}function o(l,d,f,p,g,v){if(l!==f||d!==p){var b=g.push("translate(",null,e,null,t);v.push({i:b-4,x:ar(l,f)},{i:b-2,x:ar(d,p)})}else(f||p)&&g.push("translate("+f+e+p+t)}function s(l,d,f,p){l!==d?(l-d>180?d+=360:d-l>180&&(l+=360),p.push({i:f.push(i(f)+"rotate(",null,r)-2,x:ar(l,d)})):d&&f.push(i(f)+"rotate("+d+r)}function a(l,d,f,p){l!==d?p.push({i:f.push(i(f)+"skewX(",null,r)-2,x:ar(l,d)}):d&&f.push(i(f)+"skewX("+d+r)}function c(l,d,f,p,g,v){if(l!==f||d!==p){var b=g.push(i(g)+"scale(",null,",",null,")");v.push({i:b-4,x:ar(l,f)},{i:b-2,x:ar(d,p)})}else(f!==1||p!==1)&&g.push(i(g)+"scale("+f+","+p+")")}return function(l,d){var f=[],p=[];return l=n(l),d=n(d),o(l.translateX,l.translateY,d.translateX,d.translateY,f,p),s(l.rotate,d.rotate,f,p),a(l.skewX,d.skewX,f,p),c(l.scaleX,l.scaleY,d.scaleX,d.scaleY,f,p),l=d=null,function(g){for(var v=-1,b=p.length,_;++v<b;)f[(_=p[v]).i]=_.x(g);return f.join("")}}}var $I=ZF(QF,"px, ","px)","deg)"),zI=ZF(YF,", ",")",")");var _G=1e-12;function XF(n){return((n=Math.exp(n))+1/n)/2}function wG(n){return((n=Math.exp(n))-1/n)/2}function CG(n){return((n=Math.exp(2*n))-1)/(n+1)}var qI=function n(e,t,r){function i(o,s){var a=o[0],c=o[1],l=o[2],d=s[0],f=s[1],p=s[2],g=d-a,v=f-c,b=g*g+v*v,_,S;if(b<_G)S=Math.log(p/l)/e,_=function(I){return[a+I*g,c+I*v,l*Math.exp(e*I*S)]};else{var k=Math.sqrt(b),P=(p*p-l*l+r*b)/(2*l*t*k),U=(p*p-l*l-r*b)/(2*p*t*k),H=Math.log(Math.sqrt(P*P+1)-P),q=Math.log(Math.sqrt(U*U+1)-U);S=(q-H)/e,_=function(I){var w=I*S,C=XF(H),D=l/(t*k)*(C*CG(e*w+H)-wG(H));return[a+D*g,c+D*v,l*C/XF(e*w+H)]}}return _.duration=S*1e3*e/Math.SQRT2,_}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,c=a*a;return n(s,a,c)},i}(Math.SQRT2,2,4);var eu=0,Pd=0,Ad=0,e2=1e3,ty,Od,ny=0,oa=0,ry=0,Nd=typeof performance=="object"&&performance.now?performance:Date,t2=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function kd(){return oa||(t2(bG),oa=Nd.now()+ry)}function bG(){oa=0}function Rd(){this._call=this._time=this._next=null}Rd.prototype=iy.prototype={constructor:Rd,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?kd():+t)+(e==null?0:+e),!this._next&&Od!==this&&(Od?Od._next=this:ty=this,Od=this),this._call=n,this._time=t,HI()},stop:function(){this._call&&(this._call=null,this._time=1/0,HI())}};function iy(n,e,t){var r=new Rd;return r.restart(n,e,t),r}function n2(){kd(),++eu;for(var n=ty,e;n;)(e=oa-n._time)>=0&&n._call.call(void 0,e),n=n._next;--eu}function JF(){oa=(ny=Nd.now())+ry,eu=Pd=0;try{n2()}finally{eu=0,IG(),oa=0}}function EG(){var n=Nd.now(),e=n-ny;e>e2&&(ry-=e,ny=n)}function IG(){for(var n,e=ty,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:ty=t);Od=n,HI(r)}function HI(n){if(!eu){Pd&&(Pd=clearTimeout(Pd));var e=n-oa;e>24?(n<1/0&&(Pd=setTimeout(JF,n-Nd.now()-ry)),Ad&&(Ad=clearInterval(Ad))):(Ad||(ny=Nd.now(),Ad=setInterval(EG,e2)),eu=1,t2(JF))}}function oy(n,e,t){var r=new Rd;return e=e==null?0:+e,r.restart(i=>{r.stop(),n(i+e)},e,t),r}var xG=Ed("start","end","cancel","interrupt"),DG=[],o2=0,r2=1,ay=2,sy=3,i2=4,cy=5,Fd=6;function zo(n,e,t,r,i,o){var s=n.__transition;if(!s)n.__transition={};else if(t in s)return;MG(n,t,{name:e,index:r,group:i,on:xG,tween:DG,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:o2})}function Vd(n,e){var t=qt(n,e);if(t.state>o2)throw new Error("too late; already scheduled");return t}function rn(n,e){var t=qt(n,e);if(t.state>sy)throw new Error("too late; already running");return t}function qt(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function MG(n,e,t){var r=n.__transition,i;r[e]=t,t.timer=iy(o,0,t.time);function o(l){t.state=r2,t.timer.restart(s,t.delay,t.time),t.delay<=l&&s(l-t.delay)}function s(l){var d,f,p,g;if(t.state!==r2)return c();for(d in r)if(g=r[d],g.name===t.name){if(g.state===sy)return oy(s);g.state===i2?(g.state=Fd,g.timer.stop(),g.on.call("interrupt",n,n.__data__,g.index,g.group),delete r[d]):+d<e&&(g.state=Fd,g.timer.stop(),g.on.call("cancel",n,n.__data__,g.index,g.group),delete r[d])}if(oy(function(){t.state===sy&&(t.state=i2,t.timer.restart(a,t.delay,t.time),a(l))}),t.state=ay,t.on.call("start",n,n.__data__,t.index,t.group),t.state===ay){for(t.state=sy,i=new Array(p=t.tween.length),d=0,f=-1;d<p;++d)(g=t.tween[d].value.call(n,n.__data__,t.index,t.group))&&(i[++f]=g);i.length=f+1}}function a(l){for(var d=l<t.duration?t.ease.call(null,l/t.duration):(t.timer.restart(c),t.state=cy,1),f=-1,p=i.length;++f<p;)i[f].call(n,d);t.state===cy&&(t.on.call("end",n,n.__data__,t.index,t.group),c())}function c(){t.state=Fd,t.timer.stop(),delete r[e];for(var l in r)return;delete n.__transition}}function qo(n,e){var t=n.__transition,r,i,o=!0,s;if(t){e=e==null?null:e+"";for(s in t){if((r=t[s]).name!==e){o=!1;continue}i=r.state>ay&&r.state<cy,r.state=Fd,r.timer.stop(),r.on.call(i?"interrupt":"cancel",n,n.__data__,r.index,r.group),delete t[s]}o&&delete n.__transition}}function s2(n){return this.each(function(){qo(this,n)})}function TG(n,e){var t,r;return function(){var i=rn(this,n),o=i.tween;if(o!==t){r=t=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function SG(n,e,t){var r,i;if(typeof t!="function")throw new Error;return function(){var o=rn(this,n),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:e,value:t},c=0,l=i.length;c<l;++c)if(i[c].name===e){i[c]=a;break}c===l&&i.push(a)}o.tween=i}}function a2(n,e){var t=this._id;if(n+="",arguments.length<2){for(var r=qt(this.node(),t).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===n)return s.value;return null}return this.each((e==null?TG:SG)(t,n,e))}function tu(n,e,t){var r=n._id;return n.each(function(){var i=rn(this,r);(i.value||(i.value={}))[e]=t.apply(this,arguments)}),function(i){return qt(i,r).value[e]}}function uy(n,e){var t;return(typeof e=="number"?ar:e instanceof $o?Xg:(t=$o(e))?(e=t,Xg):BI)(n,e)}function AG(n){return function(){this.removeAttribute(n)}}function PG(n){return function(){this.removeAttributeNS(n.space,n.local)}}function OG(n,e,t){var r,i=t+"",o;return function(){var s=this.getAttribute(n);return s===i?null:s===r?o:o=e(r=s,t)}}function NG(n,e,t){var r,i=t+"",o;return function(){var s=this.getAttributeNS(n.space,n.local);return s===i?null:s===r?o:o=e(r=s,t)}}function RG(n,e,t){var r,i,o;return function(){var s,a=t(this),c;return a==null?void this.removeAttribute(n):(s=this.getAttribute(n),c=a+"",s===c?null:s===r&&c===i?o:(i=c,o=e(r=s,a)))}}function kG(n,e,t){var r,i,o;return function(){var s,a=t(this),c;return a==null?void this.removeAttributeNS(n.space,n.local):(s=this.getAttributeNS(n.space,n.local),c=a+"",s===c?null:s===r&&c===i?o:(i=c,o=e(r=s,a)))}}function c2(n,e){var t=ji(n),r=t==="transform"?zI:uy;return this.attrTween(n,typeof e=="function"?(t.local?kG:RG)(t,r,tu(this,"attr."+n,e)):e==null?(t.local?PG:AG)(t):(t.local?NG:OG)(t,r,e))}function FG(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function VG(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function LG(n,e){var t,r;function i(){var o=e.apply(this,arguments);return o!==r&&(t=(r=o)&&VG(n,o)),t}return i._value=e,i}function jG(n,e){var t,r;function i(){var o=e.apply(this,arguments);return o!==r&&(t=(r=o)&&FG(n,o)),t}return i._value=e,i}function u2(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var r=ji(n);return this.tween(t,(r.local?LG:jG)(r,e))}function BG(n,e){return function(){Vd(this,n).delay=+e.apply(this,arguments)}}function UG(n,e){return e=+e,function(){Vd(this,n).delay=e}}function l2(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?BG:UG)(e,n)):qt(this.node(),e).delay}function $G(n,e){return function(){rn(this,n).duration=+e.apply(this,arguments)}}function zG(n,e){return e=+e,function(){rn(this,n).duration=e}}function d2(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?$G:zG)(e,n)):qt(this.node(),e).duration}function qG(n,e){if(typeof e!="function")throw new Error;return function(){rn(this,n).ease=e}}function f2(n){var e=this._id;return arguments.length?this.each(qG(e,n)):qt(this.node(),e).ease}function HG(n,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;rn(this,n).ease=t}}function h2(n){if(typeof n!="function")throw new Error;return this.each(HG(this._id,n))}function p2(n){typeof n!="function"&&(n=xd(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var o=e[i],s=o.length,a=r[i]=[],c,l=0;l<s;++l)(c=o[l])&&n.call(c,c.__data__,l,o)&&a.push(c);return new An(r,this._parents,this._name,this._id)}function m2(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,r=e.length,i=t.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var c=e[a],l=t[a],d=c.length,f=s[a]=new Array(d),p,g=0;g<d;++g)(p=c[g]||l[g])&&(f[g]=p);for(;a<r;++a)s[a]=e[a];return new An(s,this._parents,this._name,this._id)}function GG(n){return(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function WG(n,e,t){var r,i,o=GG(e)?Vd:rn;return function(){var s=o(this,n),a=s.on;a!==r&&(i=(r=a).copy()).on(e,t),s.on=i}}function g2(n,e){var t=this._id;return arguments.length<2?qt(this.node(),t).on.on(n):this.each(WG(t,n,e))}function KG(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}function y2(){return this.on("end.remove",KG(this._id))}function v2(n){var e=this._name,t=this._id;typeof n!="function"&&(n=na(n));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],c=a.length,l=o[s]=new Array(c),d,f,p=0;p<c;++p)(d=a[p])&&(f=n.call(d,d.__data__,p,a))&&("__data__"in d&&(f.__data__=d.__data__),l[p]=f,zo(l[p],e,t,p,l,qt(d,t)));return new An(o,this._parents,e,t)}function _2(n){var e=this._name,t=this._id;typeof n!="function"&&(n=Id(n));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var c=r[a],l=c.length,d,f=0;f<l;++f)if(d=c[f]){for(var p=n.call(d,d.__data__,f,c),g,v=qt(d,t),b=0,_=p.length;b<_;++b)(g=p[b])&&zo(g,e,t,b,p,v);o.push(p),s.push(d)}return new An(o,s,e,t)}var QG=Bi.prototype.constructor;function w2(){return new QG(this._groups,this._parents)}function YG(n,e){var t,r,i;return function(){var o=Uo(this,n),s=(this.style.removeProperty(n),Uo(this,n));return o===s?null:o===t&&s===r?i:i=e(t=o,r=s)}}function C2(n){return function(){this.style.removeProperty(n)}}function ZG(n,e,t){var r,i=t+"",o;return function(){var s=Uo(this,n);return s===i?null:s===r?o:o=e(r=s,t)}}function XG(n,e,t){var r,i,o;return function(){var s=Uo(this,n),a=t(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(n),Uo(this,n))),s===c?null:s===r&&c===i?o:(i=c,o=e(r=s,a))}}function JG(n,e){var t,r,i,o="style."+e,s="end."+o,a;return function(){var c=rn(this,n),l=c.on,d=c.value[o]==null?a||(a=C2(e)):void 0;(l!==t||i!==d)&&(r=(t=l).copy()).on(s,i=d),c.on=r}}function b2(n,e,t){var r=(n+="")=="transform"?$I:uy;return e==null?this.styleTween(n,YG(n,r)).on("end.style."+n,C2(n)):typeof e=="function"?this.styleTween(n,XG(n,r,tu(this,"style."+n,e))).each(JG(this._id,n)):this.styleTween(n,ZG(n,r,e),t).on("end.style."+n,null)}function e7(n,e,t){return function(r){this.style.setProperty(n,e.call(this,r),t)}}function t7(n,e,t){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&e7(n,s,t)),r}return o._value=e,o}function E2(n,e,t){var r="style."+(n+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,t7(n,e,t??""))}function n7(n){return function(){this.textContent=n}}function r7(n){return function(){var e=n(this);this.textContent=e??""}}function I2(n){return this.tween("text",typeof n=="function"?r7(tu(this,"text",n)):n7(n==null?"":n+""))}function i7(n){return function(e){this.textContent=n.call(this,e)}}function o7(n){var e,t;function r(){var i=n.apply(this,arguments);return i!==t&&(e=(t=i)&&i7(i)),e}return r._value=n,r}function x2(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,o7(n))}function D2(){for(var n=this._name,e=this._id,t=ly(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,c,l=0;l<a;++l)if(c=s[l]){var d=qt(c,e);zo(c,n,t,l,s,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new An(r,this._parents,n,t)}function M2(){var n,e,t=this,r=t._id,i=t.size();return new Promise(function(o,s){var a={value:s},c={value:function(){--i===0&&o()}};t.each(function(){var l=rn(this,r),d=l.on;d!==n&&(e=(n=d).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(c)),l.on=e}),i===0&&o()})}var s7=0;function An(n,e,t,r){this._groups=n,this._parents=e,this._name=t,this._id=r}function T2(n){return Bi().transition(n)}function ly(){return++s7}var $i=Bi.prototype;An.prototype=T2.prototype={constructor:An,select:v2,selectAll:_2,selectChild:$i.selectChild,selectChildren:$i.selectChildren,filter:p2,merge:m2,selection:w2,transition:D2,call:$i.call,nodes:$i.nodes,node:$i.node,size:$i.size,empty:$i.empty,each:$i.each,on:g2,attr:c2,attrTween:u2,style:b2,styleTween:E2,text:I2,textTween:x2,remove:y2,tween:a2,delay:l2,duration:d2,ease:f2,easeVarying:h2,end:M2,[Symbol.iterator]:$i[Symbol.iterator]};function dy(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var a7={time:null,delay:0,duration:250,ease:dy};function c7(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}function S2(n){var e,t;n instanceof An?(e=n._id,n=n._name):(e=ly(),(t=a7).time=kd(),n=n==null?null:n+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,c,l=0;l<a;++l)(c=s[l])&&zo(c,n,e,l,s,t||c7(c,e));return new An(r,this._parents,n,e)}Bi.prototype.interrupt=s2;Bi.prototype.transition=S2;var{abs:que,max:Hue,min:Gue}=Math;function A2(n){return[+n[0],+n[1]]}function u7(n){return[A2(n[0]),A2(n[1])]}var Wue={name:"x",handles:["w","e"].map(GI),input:function(n,e){return n==null?null:[[+n[0],e[0][1]],[+n[1],e[1][1]]]},output:function(n){return n&&[n[0][0],n[1][0]]}},Kue={name:"y",handles:["n","s"].map(GI),input:function(n,e){return n==null?null:[[e[0][0],+n[0]],[e[1][0],+n[1]]]},output:function(n){return n&&[n[0][1],n[1][1]]}},Que={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(GI),input:function(n){return n==null?null:u7(n)},output:function(n){return n}};function GI(n){return{type:n}}function l7(n){if(!n.ok)throw new Error(n.status+" "+n.statusText);if(!(n.status===204||n.status===205))return n.json()}function WI(n,e){return fetch(n,e).then(l7)}var Ve=1e-6,P2=1e-12,Se=Math.PI,Qt=Se/2,KI=Se/4,Yt=Se*2,gn=180/Se,ut=Se/180,ze=Math.abs,fy=Math.atan,zi=Math.atan2,We=Math.cos;var O2=Math.exp;var N2=Math.log;var et=Math.sin,R2=Math.sign||function(n){return n>0?1:n<0?-1:0},Kn=Math.sqrt,k2=Math.tan;function F2(n){return n>1?0:n<-1?Se:Math.acos(n)}function qi(n){return n>1?Qt:n<-1?-Qt:Math.asin(n)}function Zt(){}function hy(n,e){n&&L2.hasOwnProperty(n.type)&&L2[n.type](n,e)}var V2={Feature:function(n,e){hy(n.geometry,e)},FeatureCollection:function(n,e){for(var t=n.features,r=-1,i=t.length;++r<i;)hy(t[r].geometry,e)}},L2={Sphere:function(n,e){e.sphere()},Point:function(n,e){n=n.coordinates,e.point(n[0],n[1],n[2])},MultiPoint:function(n,e){for(var t=n.coordinates,r=-1,i=t.length;++r<i;)n=t[r],e.point(n[0],n[1],n[2])},LineString:function(n,e){QI(n.coordinates,e,0)},MultiLineString:function(n,e){for(var t=n.coordinates,r=-1,i=t.length;++r<i;)QI(t[r],e,0)},Polygon:function(n,e){j2(n.coordinates,e)},MultiPolygon:function(n,e){for(var t=n.coordinates,r=-1,i=t.length;++r<i;)j2(t[r],e)},GeometryCollection:function(n,e){for(var t=n.geometries,r=-1,i=t.length;++r<i;)hy(t[r],e)}};function QI(n,e,t){var r=-1,i=n.length-t,o;for(e.lineStart();++r<i;)o=n[r],e.point(o[0],o[1],o[2]);e.lineEnd()}function j2(n,e){var t=-1,r=n.length;for(e.polygonStart();++t<r;)QI(n[t],e,1);e.polygonEnd()}function Ho(n,e){n&&V2.hasOwnProperty(n.type)?V2[n.type](n,e):hy(n,e)}function Ld(n){return[zi(n[1],n[0]),qi(n[2])]}function Xr(n){var e=n[0],t=n[1],r=We(t);return[r*We(e),r*et(e),et(t)]}function jd(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function nu(n,e){return[n[1]*e[2]-n[2]*e[1],n[2]*e[0]-n[0]*e[2],n[0]*e[1]-n[1]*e[0]]}function py(n,e){n[0]+=e[0],n[1]+=e[1],n[2]+=e[2]}function Bd(n,e){return[n[0]*e,n[1]*e,n[2]*e]}function Ud(n){var e=Kn(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=e,n[1]/=e,n[2]/=e}function $d(n,e){function t(r,i){return r=n(r,i),e(r[0],r[1])}return n.invert&&e.invert&&(t.invert=function(r,i){return r=e.invert(r,i),r&&n.invert(r[0],r[1])}),t}function YI(n,e){return ze(n)>Se&&(n-=Math.round(n/Yt)*Yt),[n,e]}YI.invert=YI;function ZI(n,e,t){return(n%=Yt)?e||t?$d(U2(n),$2(e,t)):U2(n):e||t?$2(e,t):YI}function B2(n){return function(e,t){return e+=n,ze(e)>Se&&(e-=Math.round(e/Yt)*Yt),[e,t]}}function U2(n){var e=B2(n);return e.invert=B2(-n),e}function $2(n,e){var t=We(n),r=et(n),i=We(e),o=et(e);function s(a,c){var l=We(c),d=We(a)*l,f=et(a)*l,p=et(c),g=p*t+d*r;return[zi(f*i-g*o,d*t-p*r),qi(g*i+f*o)]}return s.invert=function(a,c){var l=We(c),d=We(a)*l,f=et(a)*l,p=et(c),g=p*i-f*o;return[zi(f*i+p*o,d*t+g*r),qi(g*t-d*r)]},s}function z2(n){n=ZI(n[0]*ut,n[1]*ut,n.length>2?n[2]*ut:0);function e(t){return t=n(t[0]*ut,t[1]*ut),t[0]*=gn,t[1]*=gn,t}return e.invert=function(t){return t=n.invert(t[0]*ut,t[1]*ut),t[0]*=gn,t[1]*=gn,t},e}function H2(n,e,t,r,i,o){if(t){var s=We(e),a=et(e),c=r*t;i==null?(i=e+r*Yt,o=e-c/2):(i=q2(s,i),o=q2(s,o),(r>0?i<o:i>o)&&(i+=r*Yt));for(var l,d=i;r>0?d>o:d<o;d-=c)l=Ld([s,-a*We(d),-a*et(d)]),n.point(l[0],l[1])}}function q2(n,e){e=Xr(e),e[0]-=n,Ud(e);var t=F2(-e[1]);return((-e[2]<0?-t:t)+Yt-Ve)%Yt}function my(){var n=[],e;return{point:function(t,r,i){e.push([t,r,i])},lineStart:function(){n.push(e=[])},lineEnd:Zt,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var t=n;return n=[],e=null,t}}}function ru(n,e){return ze(n[0]-e[0])<Ve&&ze(n[1]-e[1])<Ve}function gy(n,e,t,r){this.x=n,this.z=e,this.o=t,this.e=r,this.v=!1,this.n=this.p=null}function yy(n,e,t,r,i){var o=[],s=[],a,c;if(n.forEach(function(v){if(!((b=v.length-1)<=0)){var b,_=v[0],S=v[b],k;if(ru(_,S)){if(!_[2]&&!S[2]){for(i.lineStart(),a=0;a<b;++a)i.point((_=v[a])[0],_[1]);i.lineEnd();return}S[0]+=2*Ve}o.push(k=new gy(_,v,null,!0)),s.push(k.o=new gy(_,null,k,!1)),o.push(k=new gy(S,v,null,!1)),s.push(k.o=new gy(S,null,k,!0))}}),!!o.length){for(s.sort(e),G2(o),G2(s),a=0,c=s.length;a<c;++a)s[a].e=t=!t;for(var l=o[0],d,f;;){for(var p=l,g=!0;p.v;)if((p=p.n)===l)return;d=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(g)for(a=0,c=d.length;a<c;++a)i.point((f=d[a])[0],f[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(g)for(d=p.p.z,a=d.length-1;a>=0;--a)i.point((f=d[a])[0],f[1]);else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,d=p.z,g=!g}while(!p.v);i.lineEnd()}}}function G2(n){if(e=n.length){for(var e,t=0,r=n[0],i;++t<e;)r.n=i=n[t],i.p=r,r=i;r.n=i=n[0],i.p=r}}function XI(n){return ze(n[0])<=Se?n[0]:R2(n[0])*((ze(n[0])+Se)%Yt-Se)}function W2(n,e){var t=XI(e),r=e[1],i=et(r),o=[et(t),-We(t),0],s=0,a=0,c=new Wn;i===1?r=Qt+Ve:i===-1&&(r=-Qt-Ve);for(var l=0,d=n.length;l<d;++l)if(p=(f=n[l]).length)for(var f,p,g=f[p-1],v=XI(g),b=g[1]/2+KI,_=et(b),S=We(b),k=0;k<p;++k,v=U,_=q,S=I,g=P){var P=f[k],U=XI(P),H=P[1]/2+KI,q=et(H),I=We(H),w=U-v,C=w>=0?1:-1,D=C*w,x=D>Se,A=_*q;if(c.add(zi(A*C*et(D),S*I+A*We(D))),s+=x?w+C*Yt:w,x^v>=t^U>=t){var E=nu(Xr(g),Xr(P));Ud(E);var N=nu(o,E);Ud(N);var R=(x^w>=0?-1:1)*qi(N[2]);(r>R||r===R&&(E[0]||E[1]))&&(a+=x^w>=0?1:-1)}}return(s<-Ve||s<Ve&&c<-P2)^a&1}function vy(n,e,t,r){return function(i){var o=e(i),s=my(),a=e(s),c=!1,l,d,f,p={point:g,lineStart:b,lineEnd:_,polygonStart:function(){p.point=S,p.lineStart=k,p.lineEnd=P,d=[],l=[]},polygonEnd:function(){p.point=g,p.lineStart=b,p.lineEnd=_,d=Zc(d);var U=W2(l,r);d.length?(c||(i.polygonStart(),c=!0),yy(d,f7,U,t,i)):U&&(c||(i.polygonStart(),c=!0),i.lineStart(),t(null,null,1,i),i.lineEnd()),c&&(i.polygonEnd(),c=!1),d=l=null},sphere:function(){i.polygonStart(),i.lineStart(),t(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function g(U,H){n(U,H)&&i.point(U,H)}function v(U,H){o.point(U,H)}function b(){p.point=v,o.lineStart()}function _(){p.point=g,o.lineEnd()}function S(U,H){f.push([U,H]),a.point(U,H)}function k(){a.lineStart(),f=[]}function P(){S(f[0][0],f[0][1]),a.lineEnd();var U=a.clean(),H=s.result(),q,I=H.length,w,C,D;if(f.pop(),l.push(f),f=null,!!I){if(U&1){if(C=H[0],(w=C.length-1)>0){for(c||(i.polygonStart(),c=!0),i.lineStart(),q=0;q<w;++q)i.point((D=C[q])[0],D[1]);i.lineEnd()}return}I>1&&U&2&&H.push(H.pop().concat(H.shift())),d.push(H.filter(d7))}}return p}}function d7(n){return n.length>1}function f7(n,e){return((n=n.x)[0]<0?n[1]-Qt-Ve:Qt-n[1])-((e=e.x)[0]<0?e[1]-Qt-Ve:Qt-e[1])}var JI=vy(function(){return!0},h7,m7,[-Se,-Qt]);function h7(n){var e=NaN,t=NaN,r=NaN,i;return{lineStart:function(){n.lineStart(),i=1},point:function(o,s){var a=o>0?Se:-Se,c=ze(o-e);ze(c-Se)<Ve?(n.point(e,t=(t+s)/2>0?Qt:-Qt),n.point(r,t),n.lineEnd(),n.lineStart(),n.point(a,t),n.point(o,t),i=0):r!==a&&c>=Se&&(ze(e-r)<Ve&&(e-=r*Ve),ze(o-a)<Ve&&(o-=a*Ve),t=p7(e,t,o,s),n.point(r,t),n.lineEnd(),n.lineStart(),n.point(a,t),i=0),n.point(e=o,t=s),r=a},lineEnd:function(){n.lineEnd(),e=t=NaN},clean:function(){return 2-i}}}function p7(n,e,t,r){var i,o,s=et(n-t);return ze(s)>Ve?fy((et(e)*(o=We(r))*et(t)-et(r)*(i=We(e))*et(n))/(i*o*s)):(e+r)/2}function m7(n,e,t,r){var i;if(n==null)i=t*Qt,r.point(-Se,i),r.point(0,i),r.point(Se,i),r.point(Se,0),r.point(Se,-i),r.point(0,-i),r.point(-Se,-i),r.point(-Se,0),r.point(-Se,i);else if(ze(n[0]-e[0])>Ve){var o=n[0]<e[0]?Se:-Se;i=t*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}function K2(n){var e=We(n),t=2*ut,r=e>0,i=ze(e)>Ve;function o(d,f,p,g){H2(g,n,t,p,d,f)}function s(d,f){return We(d)*We(f)>e}function a(d){var f,p,g,v,b;return{lineStart:function(){v=g=!1,b=1},point:function(_,S){var k=[_,S],P,U=s(_,S),H=r?U?0:l(_,S):U?l(_+(_<0?Se:-Se),S):0;if(!f&&(v=g=U)&&d.lineStart(),U!==g&&(P=c(f,k),(!P||ru(f,P)||ru(k,P))&&(k[2]=1)),U!==g)b=0,U?(d.lineStart(),P=c(k,f),d.point(P[0],P[1])):(P=c(f,k),d.point(P[0],P[1],2),d.lineEnd()),f=P;else if(i&&f&&r^U){var q;!(H&p)&&(q=c(k,f,!0))&&(b=0,r?(d.lineStart(),d.point(q[0][0],q[0][1]),d.point(q[1][0],q[1][1]),d.lineEnd()):(d.point(q[1][0],q[1][1]),d.lineEnd(),d.lineStart(),d.point(q[0][0],q[0][1],3)))}U&&(!f||!ru(f,k))&&d.point(k[0],k[1]),f=k,g=U,p=H},lineEnd:function(){g&&d.lineEnd(),f=null},clean:function(){return b|(v&&g)<<1}}}function c(d,f,p){var g=Xr(d),v=Xr(f),b=[1,0,0],_=nu(g,v),S=jd(_,_),k=_[0],P=S-k*k;if(!P)return!p&&d;var U=e*S/P,H=-e*k/P,q=nu(b,_),I=Bd(b,U),w=Bd(_,H);py(I,w);var C=q,D=jd(I,C),x=jd(C,C),A=D*D-x*(jd(I,I)-1);if(!(A<0)){var E=Kn(A),N=Bd(C,(-D-E)/x);if(py(N,I),N=Ld(N),!p)return N;var R=d[0],$=f[0],J=d[1],ce=f[1],he;$<R&&(he=R,R=$,$=he);var ve=$-R,Ae=ze(ve-Se)<Ve,Pe=Ae||ve<Ve;if(!Ae&&ce<J&&(he=J,J=ce,ce=he),Pe?Ae?J+ce>0^N[1]<(ze(N[0]-R)<Ve?J:ce):J<=N[1]&&N[1]<=ce:ve>Se^(R<=N[0]&&N[0]<=$)){var Oe=Bd(C,(-D+E)/x);return py(Oe,I),[N,Ld(Oe)]}}}function l(d,f){var p=r?n:Se-n,g=0;return d<-p?g|=1:d>p&&(g|=2),f<-p?g|=4:f>p&&(g|=8),g}return vy(s,a,o,r?[0,-n]:[-Se,n-Se])}function Q2(n,e,t,r,i,o){var s=n[0],a=n[1],c=e[0],l=e[1],d=0,f=1,p=c-s,g=l-a,v;if(v=t-s,!(!p&&v>0)){if(v/=p,p<0){if(v<d)return;v<f&&(f=v)}else if(p>0){if(v>f)return;v>d&&(d=v)}if(v=i-s,!(!p&&v<0)){if(v/=p,p<0){if(v>f)return;v>d&&(d=v)}else if(p>0){if(v<d)return;v<f&&(f=v)}if(v=r-a,!(!g&&v>0)){if(v/=g,g<0){if(v<d)return;v<f&&(f=v)}else if(g>0){if(v>f)return;v>d&&(d=v)}if(v=o-a,!(!g&&v<0)){if(v/=g,g<0){if(v>f)return;v>d&&(d=v)}else if(g>0){if(v<d)return;v<f&&(f=v)}return d>0&&(n[0]=s+d*p,n[1]=a+d*g),f<1&&(e[0]=s+f*p,e[1]=a+f*g),!0}}}}}var zd=1e9,_y=-zd;function ex(n,e,t,r){function i(l,d){return n<=l&&l<=t&&e<=d&&d<=r}function o(l,d,f,p){var g=0,v=0;if(l==null||(g=s(l,f))!==(v=s(d,f))||c(l,d)<0^f>0)do p.point(g===0||g===3?n:t,g>1?r:e);while((g=(g+f+4)%4)!==v);else p.point(d[0],d[1])}function s(l,d){return ze(l[0]-n)<Ve?d>0?0:3:ze(l[0]-t)<Ve?d>0?2:1:ze(l[1]-e)<Ve?d>0?1:0:d>0?3:2}function a(l,d){return c(l.x,d.x)}function c(l,d){var f=s(l,1),p=s(d,1);return f!==p?f-p:f===0?d[1]-l[1]:f===1?l[0]-d[0]:f===2?l[1]-d[1]:d[0]-l[0]}return function(l){var d=l,f=my(),p,g,v,b,_,S,k,P,U,H,q,I={point:w,lineStart:A,lineEnd:E,polygonStart:D,polygonEnd:x};function w(R,$){i(R,$)&&d.point(R,$)}function C(){for(var R=0,$=0,J=g.length;$<J;++$)for(var ce=g[$],he=1,ve=ce.length,Ae=ce[0],Pe,Oe,lt=Ae[0],dt=Ae[1];he<ve;++he)Pe=lt,Oe=dt,Ae=ce[he],lt=Ae[0],dt=Ae[1],Oe<=r?dt>r&&(lt-Pe)*(r-Oe)>(dt-Oe)*(n-Pe)&&++R:dt<=r&&(lt-Pe)*(r-Oe)<(dt-Oe)*(n-Pe)&&--R;return R}function D(){d=f,p=[],g=[],q=!0}function x(){var R=C(),$=q&&R,J=(p=Zc(p)).length;($||J)&&(l.polygonStart(),$&&(l.lineStart(),o(null,null,1,l),l.lineEnd()),J&&yy(p,a,R,o,l),l.polygonEnd()),d=l,p=g=v=null}function A(){I.point=N,g&&g.push(v=[]),H=!0,U=!1,k=P=NaN}function E(){p&&(N(b,_),S&&U&&f.rejoin(),p.push(f.result())),I.point=w,U&&d.lineEnd()}function N(R,$){var J=i(R,$);if(g&&v.push([R,$]),H)b=R,_=$,S=J,H=!1,J&&(d.lineStart(),d.point(R,$));else if(J&&U)d.point(R,$);else{var ce=[k=Math.max(_y,Math.min(zd,k)),P=Math.max(_y,Math.min(zd,P))],he=[R=Math.max(_y,Math.min(zd,R)),$=Math.max(_y,Math.min(zd,$))];Q2(ce,he,n,e,t,r)?(U||(d.lineStart(),d.point(ce[0],ce[1])),d.point(he[0],he[1]),J||d.lineEnd(),q=!1):J&&(d.lineStart(),d.point(R,$),q=!1)}k=R,P=$,U=J}return I}}var qd=n=>n;var tx=new Wn,nx=new Wn,Y2,Z2,rx,ix,Go={point:Zt,lineStart:Zt,lineEnd:Zt,polygonStart:function(){Go.lineStart=g7,Go.lineEnd=v7},polygonEnd:function(){Go.lineStart=Go.lineEnd=Go.point=Zt,tx.add(ze(nx)),nx=new Wn},result:function(){var n=tx/2;return tx=new Wn,n}};function g7(){Go.point=y7}function y7(n,e){Go.point=X2,Y2=rx=n,Z2=ix=e}function X2(n,e){nx.add(ix*n-rx*e),rx=n,ix=e}function v7(){X2(Y2,Z2)}var ox=Go;var iu=1/0,wy=iu,Hd=-iu,Cy=Hd,_7={point:w7,lineStart:Zt,lineEnd:Zt,polygonStart:Zt,polygonEnd:Zt,result:function(){var n=[[iu,wy],[Hd,Cy]];return Hd=Cy=-(wy=iu=1/0),n}};function w7(n,e){n<iu&&(iu=n),n>Hd&&(Hd=n),e<wy&&(wy=e),e>Cy&&(Cy=e)}var ou=_7;var sx=0,ax=0,Gd=0,by=0,Ey=0,su=0,cx=0,ux=0,Wd=0,tV,nV,Jr,ei,Mr={point:sa,lineStart:J2,lineEnd:eV,polygonStart:function(){Mr.lineStart=E7,Mr.lineEnd=I7},polygonEnd:function(){Mr.point=sa,Mr.lineStart=J2,Mr.lineEnd=eV},result:function(){var n=Wd?[cx/Wd,ux/Wd]:su?[by/su,Ey/su]:Gd?[sx/Gd,ax/Gd]:[NaN,NaN];return sx=ax=Gd=by=Ey=su=cx=ux=Wd=0,n}};function sa(n,e){sx+=n,ax+=e,++Gd}function J2(){Mr.point=C7}function C7(n,e){Mr.point=b7,sa(Jr=n,ei=e)}function b7(n,e){var t=n-Jr,r=e-ei,i=Kn(t*t+r*r);by+=i*(Jr+n)/2,Ey+=i*(ei+e)/2,su+=i,sa(Jr=n,ei=e)}function eV(){Mr.point=sa}function E7(){Mr.point=x7}function I7(){rV(tV,nV)}function x7(n,e){Mr.point=rV,sa(tV=Jr=n,nV=ei=e)}function rV(n,e){var t=n-Jr,r=e-ei,i=Kn(t*t+r*r);by+=i*(Jr+n)/2,Ey+=i*(ei+e)/2,su+=i,i=ei*n-Jr*e,cx+=i*(Jr+n),ux+=i*(ei+e),Wd+=i*3,sa(Jr=n,ei=e)}var lx=Mr;function Iy(n){this._context=n}Iy.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,e){switch(this._point){case 0:{this._context.moveTo(n,e),this._point=1;break}case 1:{this._context.lineTo(n,e);break}default:{this._context.moveTo(n+this._radius,e),this._context.arc(n,e,this._radius,0,Yt);break}}},result:Zt};var fx=new Wn,dx,iV,oV,Kd,Qd,xy={point:Zt,lineStart:function(){xy.point=D7},lineEnd:function(){dx&&sV(iV,oV),xy.point=Zt},polygonStart:function(){dx=!0},polygonEnd:function(){dx=null},result:function(){var n=+fx;return fx=new Wn,n}};function D7(n,e){xy.point=sV,iV=Kd=n,oV=Qd=e}function sV(n,e){Kd-=n,Qd-=e,fx.add(Kn(Kd*Kd+Qd*Qd)),Kd=n,Qd=e}var hx=xy;var aV,Dy,cV,uV,Yd=class{constructor(e){this._append=e==null?lV:M7(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,t){switch(this._point){case 0:{this._append`M${e},${t}`,this._point=1;break}case 1:{this._append`L${e},${t}`;break}default:{if(this._append`M${e},${t}`,this._radius!==cV||this._append!==Dy){let r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,cV=r,Dy=this._append,uV=this._,this._=i}this._+=uV;break}}}result(){let e=this._;return this._="",e.length?e:null}};function lV(n){let e=1;this._+=n[0];for(let t=n.length;e<t;++e)this._+=arguments[e]+n[e]}function M7(n){let e=Math.floor(n);if(!(e>=0))throw new RangeError(`invalid digits: ${n}`);if(e>15)return lV;if(e!==aV){let t=10**e;aV=e,Dy=function(i){let o=1;this._+=i[0];for(let s=i.length;o<s;++o)this._+=Math.round(arguments[o]*t)/t+i[o]}}return Dy}function px(n,e){let t=3,r=4.5,i,o;function s(a){return a&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),Ho(a,i(o))),o.result()}return s.area=function(a){return Ho(a,i(ox)),ox.result()},s.measure=function(a){return Ho(a,i(hx)),hx.result()},s.bounds=function(a){return Ho(a,i(ou)),ou.result()},s.centroid=function(a){return Ho(a,i(lx)),lx.result()},s.projection=function(a){return arguments.length?(i=a==null?(n=null,qd):(n=a).stream,s):n},s.context=function(a){return arguments.length?(o=a==null?(e=null,new Yd(t)):new Iy(e=a),typeof r!="function"&&o.pointRadius(r),s):e},s.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(o.pointRadius(+a),+a),s):r},s.digits=function(a){if(!arguments.length)return t;if(a==null)t=null;else{let c=Math.floor(a);if(!(c>=0))throw new RangeError(`invalid digits: ${a}`);t=c}return e===null&&(o=new Yd(t)),s},s.projection(n).digits(t).context(e)}function Zd(n){return function(e){var t=new mx;for(var r in n)t[r]=n[r];return t.stream=e,t}}function mx(){}mx.prototype={constructor:mx,point:function(n,e){this.stream.point(n,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function gx(n,e,t){var r=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),r!=null&&n.clipExtent(null),Ho(t,n.stream(ou)),e(ou.result()),r!=null&&n.clipExtent(r),n}function yx(n,e,t){return gx(n,function(r){var i=e[1][0]-e[0][0],o=e[1][1]-e[0][1],s=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),a=+e[0][0]+(i-s*(r[1][0]+r[0][0]))/2,c=+e[0][1]+(o-s*(r[1][1]+r[0][1]))/2;n.scale(150*s).translate([a,c])},t)}function dV(n,e,t){return yx(n,[[0,0],e],t)}function fV(n,e,t){return gx(n,function(r){var i=+e,o=i/(r[1][0]-r[0][0]),s=(i-o*(r[1][0]+r[0][0]))/2,a=-o*r[0][1];n.scale(150*o).translate([s,a])},t)}function hV(n,e,t){return gx(n,function(r){var i=+e,o=i/(r[1][1]-r[0][1]),s=-o*r[0][0],a=(i-o*(r[1][1]+r[0][1]))/2;n.scale(150*o).translate([s,a])},t)}var pV=16,T7=We(30*ut);function vx(n,e){return+e?A7(n,e):S7(n)}function S7(n){return Zd({point:function(e,t){e=n(e,t),this.stream.point(e[0],e[1])}})}function A7(n,e){function t(r,i,o,s,a,c,l,d,f,p,g,v,b,_){var S=l-r,k=d-i,P=S*S+k*k;if(P>4*e&&b--){var U=s+p,H=a+g,q=c+v,I=Kn(U*U+H*H+q*q),w=qi(q/=I),C=ze(ze(q)-1)<Ve||ze(o-f)<Ve?(o+f)/2:zi(H,U),D=n(C,w),x=D[0],A=D[1],E=x-r,N=A-i,R=k*E-S*N;(R*R/P>e||ze((S*E+k*N)/P-.5)>.3||s*p+a*g+c*v<T7)&&(t(r,i,o,s,a,c,x,A,C,U/=I,H/=I,q,b,_),_.point(x,A),t(x,A,C,U,H,q,l,d,f,p,g,v,b,_))}}return function(r){var i,o,s,a,c,l,d,f,p,g,v,b,_={point:S,lineStart:k,lineEnd:U,polygonStart:function(){r.polygonStart(),_.lineStart=H},polygonEnd:function(){r.polygonEnd(),_.lineStart=k}};function S(w,C){w=n(w,C),r.point(w[0],w[1])}function k(){f=NaN,_.point=P,r.lineStart()}function P(w,C){var D=Xr([w,C]),x=n(w,C);t(f,p,d,g,v,b,f=x[0],p=x[1],d=w,g=D[0],v=D[1],b=D[2],pV,r),r.point(f,p)}function U(){_.point=S,r.lineEnd()}function H(){k(),_.point=q,_.lineEnd=I}function q(w,C){P(i=w,C),o=f,s=p,a=g,c=v,l=b,_.point=P}function I(){t(f,p,d,g,v,b,o,s,i,a,c,l,pV,r),_.lineEnd=U,U()}return _}}var P7=Zd({point:function(n,e){this.stream.point(n*ut,e*ut)}});function O7(n){return Zd({point:function(e,t){var r=n(e,t);return this.stream.point(r[0],r[1])}})}function N7(n,e,t,r,i){function o(s,a){return s*=r,a*=i,[e+n*s,t-n*a]}return o.invert=function(s,a){return[(s-e)/n*r,(t-a)/n*i]},o}function mV(n,e,t,r,i,o){if(!o)return N7(n,e,t,r,i);var s=We(o),a=et(o),c=s*n,l=a*n,d=s/n,f=a/n,p=(a*t-s*e)/n,g=(a*e+s*t)/n;function v(b,_){return b*=r,_*=i,[c*b-l*_+e,t-l*b-c*_]}return v.invert=function(b,_){return[r*(d*b-f*_+p),i*(g-f*b-d*_)]},v}function _x(n){return R7(function(){return n})()}function R7(n){var e,t=150,r=480,i=250,o=0,s=0,a=0,c=0,l=0,d,f=0,p=1,g=1,v=null,b=JI,_=null,S,k,P,U=qd,H=.5,q,I,w,C,D;function x(R){return w(R[0]*ut,R[1]*ut)}function A(R){return R=w.invert(R[0],R[1]),R&&[R[0]*gn,R[1]*gn]}x.stream=function(R){return C&&D===R?C:C=P7(O7(d)(b(q(U(D=R)))))},x.preclip=function(R){return arguments.length?(b=R,v=void 0,N()):b},x.postclip=function(R){return arguments.length?(U=R,_=S=k=P=null,N()):U},x.clipAngle=function(R){return arguments.length?(b=+R?K2(v=R*ut):(v=null,JI),N()):v*gn},x.clipExtent=function(R){return arguments.length?(U=R==null?(_=S=k=P=null,qd):ex(_=+R[0][0],S=+R[0][1],k=+R[1][0],P=+R[1][1]),N()):_==null?null:[[_,S],[k,P]]},x.scale=function(R){return arguments.length?(t=+R,E()):t},x.translate=function(R){return arguments.length?(r=+R[0],i=+R[1],E()):[r,i]},x.center=function(R){return arguments.length?(o=R[0]%360*ut,s=R[1]%360*ut,E()):[o*gn,s*gn]},x.rotate=function(R){return arguments.length?(a=R[0]%360*ut,c=R[1]%360*ut,l=R.length>2?R[2]%360*ut:0,E()):[a*gn,c*gn,l*gn]},x.angle=function(R){return arguments.length?(f=R%360*ut,E()):f*gn},x.reflectX=function(R){return arguments.length?(p=R?-1:1,E()):p<0},x.reflectY=function(R){return arguments.length?(g=R?-1:1,E()):g<0},x.precision=function(R){return arguments.length?(q=vx(I,H=R*R),N()):Kn(H)},x.fitExtent=function(R,$){return yx(x,R,$)},x.fitSize=function(R,$){return dV(x,R,$)},x.fitWidth=function(R,$){return fV(x,R,$)},x.fitHeight=function(R,$){return hV(x,R,$)};function E(){var R=mV(t,0,0,p,g,f).apply(null,e(o,s)),$=mV(t,r-R[0],i-R[1],p,g,f);return d=ZI(a,c,l),I=$d(e,$),w=$d(d,I),q=vx(I,H),N()}function N(){return C=D=null,x}return function(){return e=n.apply(this,arguments),x.invert=e.invert&&A,E()}}function My(n,e){return[n,N2(k2((Qt+e)/2))]}My.invert=function(n,e){return[n,2*fy(O2(e))-Qt]};function wx(){return k7(My).scale(961/Yt)}function k7(n){var e=_x(n),t=e.center,r=e.scale,i=e.translate,o=e.clipExtent,s=null,a,c,l;e.scale=function(f){return arguments.length?(r(f),d()):r()},e.translate=function(f){return arguments.length?(i(f),d()):i()},e.center=function(f){return arguments.length?(t(f),d()):t()},e.clipExtent=function(f){return arguments.length?(f==null?s=a=c=l=null:(s=+f[0][0],a=+f[0][1],c=+f[1][0],l=+f[1][1]),d()):s==null?null:[[s,a],[c,l]]};function d(){var f=Se*r(),p=e(z2(e.rotate()).invert([0,0]));return o(s==null?[[p[0]-f,p[1]-f],[p[0]+f,p[1]+f]]:n===My?[[Math.max(p[0]-f,s),a],[Math.min(p[0]+f,c),l]]:[[s,Math.max(p[1]-f,a)],[c,Math.min(p[1]+f,l)]])}return d()}var Xd=n=>()=>n;function Cx(n,{sourceEvent:e,target:t,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Tr(n,e,t){this.k=n,this.x=e,this.y=t}Tr.prototype={constructor:Tr,scale:function(n){return n===1?this:new Tr(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new Tr(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Jd=new Tr(1,0,0);bx.prototype=Tr.prototype;function bx(n){for(;!n.__zoom;)if(!(n=n.parentNode))return Jd;return n.__zoom}function Ty(n){n.stopImmediatePropagation()}function au(n){n.preventDefault(),n.stopImmediatePropagation()}function F7(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function V7(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function gV(){return this.__zoom||Jd}function L7(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function j7(){return navigator.maxTouchPoints||"ontouchstart"in this}function B7(n,e,t){var r=n.invertX(e[0][0])-t[0][0],i=n.invertX(e[1][0])-t[1][0],o=n.invertY(e[0][1])-t[0][1],s=n.invertY(e[1][1])-t[1][1];return n.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function Ex(){var n=F7,e=V7,t=B7,r=L7,i=j7,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,c=qI,l=Ed("start","zoom","end"),d,f,p,g=500,v=150,b=0,_=10;function S(N){N.property("__zoom",gV).on("wheel.zoom",w,{passive:!1}).on("mousedown.zoom",C).on("dblclick.zoom",D).filter(i).on("touchstart.zoom",x).on("touchmove.zoom",A).on("touchend.zoom touchcancel.zoom",E).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}S.transform=function(N,R,$,J){var ce=N.selection?N.selection():N;ce.property("__zoom",gV),N!==ce?H(N,R,$,J):ce.interrupt().each(function(){q(this,arguments).event(J).start().zoom(null,typeof R=="function"?R.apply(this,arguments):R).end()})},S.scaleBy=function(N,R,$,J){S.scaleTo(N,function(){var ce=this.__zoom.k,he=typeof R=="function"?R.apply(this,arguments):R;return ce*he},$,J)},S.scaleTo=function(N,R,$,J){S.transform(N,function(){var ce=e.apply(this,arguments),he=this.__zoom,ve=$==null?U(ce):typeof $=="function"?$.apply(this,arguments):$,Ae=he.invert(ve),Pe=typeof R=="function"?R.apply(this,arguments):R;return t(P(k(he,Pe),ve,Ae),ce,s)},$,J)},S.translateBy=function(N,R,$,J){S.transform(N,function(){return t(this.__zoom.translate(typeof R=="function"?R.apply(this,arguments):R,typeof $=="function"?$.apply(this,arguments):$),e.apply(this,arguments),s)},null,J)},S.translateTo=function(N,R,$,J,ce){S.transform(N,function(){var he=e.apply(this,arguments),ve=this.__zoom,Ae=J==null?U(he):typeof J=="function"?J.apply(this,arguments):J;return t(Jd.translate(Ae[0],Ae[1]).scale(ve.k).translate(typeof R=="function"?-R.apply(this,arguments):-R,typeof $=="function"?-$.apply(this,arguments):-$),he,s)},J,ce)};function k(N,R){return R=Math.max(o[0],Math.min(o[1],R)),R===N.k?N:new Tr(R,N.x,N.y)}function P(N,R,$){var J=R[0]-$[0]*N.k,ce=R[1]-$[1]*N.k;return J===N.x&&ce===N.y?N:new Tr(N.k,J,ce)}function U(N){return[(+N[0][0]+ +N[1][0])/2,(+N[0][1]+ +N[1][1])/2]}function H(N,R,$,J){N.on("start.zoom",function(){q(this,arguments).event(J).start()}).on("interrupt.zoom end.zoom",function(){q(this,arguments).event(J).end()}).tween("zoom",function(){var ce=this,he=arguments,ve=q(ce,he).event(J),Ae=e.apply(ce,he),Pe=$==null?U(Ae):typeof $=="function"?$.apply(ce,he):$,Oe=Math.max(Ae[1][0]-Ae[0][0],Ae[1][1]-Ae[0][1]),lt=ce.__zoom,dt=typeof R=="function"?R.apply(ce,he):R,cr=c(lt.invert(Pe).concat(Oe/lt.k),dt.invert(Pe).concat(Oe/dt.k));return function(Xt){if(Xt===1)Xt=dt;else{var ur=cr(Xt),pu=Oe/ur[2];Xt=new Tr(pu,Pe[0]-ur[0]*pu,Pe[1]-ur[1]*pu)}ve.zoom(null,Xt)}})}function q(N,R,$){return!$&&N.__zooming||new I(N,R)}function I(N,R){this.that=N,this.args=R,this.active=0,this.sourceEvent=null,this.extent=e.apply(N,R),this.taps=0}I.prototype={event:function(N){return N&&(this.sourceEvent=N),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(N,R){return this.mouse&&N!=="mouse"&&(this.mouse[1]=R.invert(this.mouse[0])),this.touch0&&N!=="touch"&&(this.touch0[1]=R.invert(this.touch0[0])),this.touch1&&N!=="touch"&&(this.touch1[1]=R.invert(this.touch1[0])),this.that.__zoom=R,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(N){var R=nn(this.that).datum();l.call(N,this.that,new Cx(N,{sourceEvent:this.sourceEvent,target:S,type:N,transform:this.that.__zoom,dispatch:l}),R)}};function w(N,...R){if(!n.apply(this,arguments))return;var $=q(this,R).event(N),J=this.__zoom,ce=Math.max(o[0],Math.min(o[1],J.k*Math.pow(2,r.apply(this,arguments)))),he=Ui(N);if($.wheel)($.mouse[0][0]!==he[0]||$.mouse[0][1]!==he[1])&&($.mouse[1]=J.invert($.mouse[0]=he)),clearTimeout($.wheel);else{if(J.k===ce)return;$.mouse=[he,J.invert(he)],qo(this),$.start()}au(N),$.wheel=setTimeout(ve,v),$.zoom("mouse",t(P(k(J,ce),$.mouse[0],$.mouse[1]),$.extent,s));function ve(){$.wheel=null,$.end()}}function C(N,...R){if(p||!n.apply(this,arguments))return;var $=N.currentTarget,J=q(this,R,!0).event(N),ce=nn(N.view).on("mousemove.zoom",Pe,!0).on("mouseup.zoom",Oe,!0),he=Ui(N,$),ve=N.clientX,Ae=N.clientY;OI(N.view),Ty(N),J.mouse=[he,this.__zoom.invert(he)],qo(this),J.start();function Pe(lt){if(au(lt),!J.moved){var dt=lt.clientX-ve,cr=lt.clientY-Ae;J.moved=dt*dt+cr*cr>b}J.event(lt).zoom("mouse",t(P(J.that.__zoom,J.mouse[0]=Ui(lt,$),J.mouse[1]),J.extent,s))}function Oe(lt){ce.on("mousemove.zoom mouseup.zoom",null),NI(lt.view,J.moved),au(lt),J.event(lt).end()}}function D(N,...R){if(n.apply(this,arguments)){var $=this.__zoom,J=Ui(N.changedTouches?N.changedTouches[0]:N,this),ce=$.invert(J),he=$.k*(N.shiftKey?.5:2),ve=t(P(k($,he),J,ce),e.apply(this,R),s);au(N),a>0?nn(this).transition().duration(a).call(H,ve,J,N):nn(this).call(S.transform,ve,J,N)}}function x(N,...R){if(n.apply(this,arguments)){var $=N.touches,J=$.length,ce=q(this,R,N.changedTouches.length===J).event(N),he,ve,Ae,Pe;for(Ty(N),ve=0;ve<J;++ve)Ae=$[ve],Pe=Ui(Ae,this),Pe=[Pe,this.__zoom.invert(Pe),Ae.identifier],ce.touch0?!ce.touch1&&ce.touch0[2]!==Pe[2]&&(ce.touch1=Pe,ce.taps=0):(ce.touch0=Pe,he=!0,ce.taps=1+!!d);d&&(d=clearTimeout(d)),he&&(ce.taps<2&&(f=Pe[0],d=setTimeout(function(){d=null},g)),qo(this),ce.start())}}function A(N,...R){if(this.__zooming){var $=q(this,R).event(N),J=N.changedTouches,ce=J.length,he,ve,Ae,Pe;for(au(N),he=0;he<ce;++he)ve=J[he],Ae=Ui(ve,this),$.touch0&&$.touch0[2]===ve.identifier?$.touch0[0]=Ae:$.touch1&&$.touch1[2]===ve.identifier&&($.touch1[0]=Ae);if(ve=$.that.__zoom,$.touch1){var Oe=$.touch0[0],lt=$.touch0[1],dt=$.touch1[0],cr=$.touch1[1],Xt=(Xt=dt[0]-Oe[0])*Xt+(Xt=dt[1]-Oe[1])*Xt,ur=(ur=cr[0]-lt[0])*ur+(ur=cr[1]-lt[1])*ur;ve=k(ve,Math.sqrt(Xt/ur)),Ae=[(Oe[0]+dt[0])/2,(Oe[1]+dt[1])/2],Pe=[(lt[0]+cr[0])/2,(lt[1]+cr[1])/2]}else if($.touch0)Ae=$.touch0[0],Pe=$.touch0[1];else return;$.zoom("touch",t(P(ve,Ae,Pe),$.extent,s))}}function E(N,...R){if(this.__zooming){var $=q(this,R).event(N),J=N.changedTouches,ce=J.length,he,ve;for(Ty(N),p&&clearTimeout(p),p=setTimeout(function(){p=null},g),he=0;he<ce;++he)ve=J[he],$.touch0&&$.touch0[2]===ve.identifier?delete $.touch0:$.touch1&&$.touch1[2]===ve.identifier&&delete $.touch1;if($.touch1&&!$.touch0&&($.touch0=$.touch1,delete $.touch1),$.touch0)$.touch0[1]=this.__zoom.invert($.touch0[0]);else if($.end(),$.taps===2&&(ve=Ui(ve,this),Math.hypot(f[0]-ve[0],f[1]-ve[1])<_)){var Ae=nn(this).on("dblclick.zoom");Ae&&Ae.apply(this,arguments)}}}return S.wheelDelta=function(N){return arguments.length?(r=typeof N=="function"?N:Xd(+N),S):r},S.filter=function(N){return arguments.length?(n=typeof N=="function"?N:Xd(!!N),S):n},S.touchable=function(N){return arguments.length?(i=typeof N=="function"?N:Xd(!!N),S):i},S.extent=function(N){return arguments.length?(e=typeof N=="function"?N:Xd([[+N[0][0],+N[0][1]],[+N[1][0],+N[1][1]]]),S):e},S.scaleExtent=function(N){return arguments.length?(o[0]=+N[0],o[1]=+N[1],S):[o[0],o[1]]},S.translateExtent=function(N){return arguments.length?(s[0][0]=+N[0][0],s[1][0]=+N[1][0],s[0][1]=+N[0][1],s[1][1]=+N[1][1],S):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},S.constrain=function(N){return arguments.length?(t=N,S):t},S.duration=function(N){return arguments.length?(a=+N,S):a},S.interpolate=function(N){return arguments.length?(c=N,S):c},S.on=function(){var N=l.on.apply(l,arguments);return N===l?S:N},S.clickDistance=function(N){return arguments.length?(b=(N=+N)*N,S):Math.sqrt(b)},S.tapDistance=function(N){return arguments.length?(_=+N,S):_},S}function Ix(n){return n}function Sy(n){if(n==null)return Ix;var e,t,r=n.scale[0],i=n.scale[1],o=n.translate[0],s=n.translate[1];return function(a,c){c||(e=t=0);var l=2,d=a.length,f=new Array(d);for(f[0]=(e+=a[0])*r+o,f[1]=(t+=a[1])*i+s;l<d;)f[l]=a[l],++l;return f}}function yV(n,e){for(var t,r=n.length,i=r-e;i<--r;)t=n[i],n[i++]=n[r],n[r]=t}function xx(n,e){return typeof e=="string"&&(e=n.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(t){return vV(n,t)})}:vV(n,e)}function vV(n,e){var t=e.id,r=e.bbox,i=e.properties==null?{}:e.properties,o=Dx(n,e);return t==null&&r==null?{type:"Feature",properties:i,geometry:o}:r==null?{type:"Feature",id:t,properties:i,geometry:o}:{type:"Feature",id:t,bbox:r,properties:i,geometry:o}}function Dx(n,e){var t=Sy(n.transform),r=n.arcs;function i(d,f){f.length&&f.pop();for(var p=r[d<0?~d:d],g=0,v=p.length;g<v;++g)f.push(t(p[g],g));d<0&&yV(f,v)}function o(d){return t(d)}function s(d){for(var f=[],p=0,g=d.length;p<g;++p)i(d[p],f);return f.length<2&&f.push(f[0]),f}function a(d){for(var f=s(d);f.length<4;)f.push(f[0]);return f}function c(d){return d.map(a)}function l(d){var f=d.type,p;switch(f){case"GeometryCollection":return{type:f,geometries:d.geometries.map(l)};case"Point":p=o(d.coordinates);break;case"MultiPoint":p=d.coordinates.map(o);break;case"LineString":p=s(d.arcs);break;case"MultiLineString":p=d.arcs.map(s);break;case"Polygon":p=c(d.arcs);break;case"MultiPolygon":p=d.arcs.map(c);break;default:return null}return{type:f,coordinates:p}}return l(e)}var G7=["mapContainer"],Ay=class n{constructor(e){this.perfumeService=e}mapContainer;activeCountry=null;countrySelected=new Ke;mapWidth=800;mapHeight=500;MAP_PADDING=20;svg;countries;availableCountries=[];tooltip;zoom;projection;path;ngOnInit(){this.checkScreenSize(),this.loadCountries()}onResize(e){this.checkScreenSize(),this.svg&&this.updateMapSize()}checkScreenSize(){window.innerWidth<=768?(this.mapWidth=450,this.mapHeight=500):(this.mapWidth=800,this.mapHeight=500)}loadCountries(){this.perfumeService.getCountries().subscribe({next:e=>{console.log("Available countries:",e),this.availableCountries=e,this.initializeMap()},error:e=>console.error("Failed to load countries:",e)})}initializeMap(){this.clearMapContainer(),this.createSvgContainer(),this.createTooltip(),this.loadMapData()}clearMapContainer(){this.mapContainer.nativeElement.innerHTML=""}createSvgContainer(){this.svg=nn(this.mapContainer.nativeElement).append("svg").attr("width",this.mapWidth).attr("height",this.mapHeight).style("background","#f9f5f2").style("border-radius","12px").style("box-shadow","0 10px 30px rgba(0, 0, 0, 0.08)")}createTooltip(){this.tooltip=nn(this.mapContainer.nativeElement).append("div").attr("class","map-tooltip").style("opacity",0).style("background","#5d4037").style("color","#f9f5f2").style("border-left","3px solid #d4af37")}loadMapData(){WI("assets/world-map/countries-50m.json").then(e=>{this.validateMapData(e),this.processMapData(e),this.renderMap(),this.setupZoom()}).catch(this.handleMapError.bind(this))}validateMapData(e){if(!e?.objects?.countries)throw new Error("Invalid map data structure")}processMapData(e){let t=xx(e,e.objects.countries);this.countries=t.features}renderMap(){this.projection=this.createProjection(),this.path=px().projection(this.projection);let t=this.svg.append("defs").append("filter").attr("id","glow").attr("width","150%").attr("height","150%");t.append("feGaussianBlur").attr("stdDeviation","3.5").attr("result","blur"),t.append("feComposite").attr("in","SourceGraphic").attr("in2","blur").attr("operator","over"),this.svg.selectAll(".country").data(this.countries).enter().append("path").attr("d",this.path).attr("class","country").attr("id",i=>this.getCountryId(i.properties.name)).style("fill",i=>this.getCountryColor(i.properties.name)).style("stroke","#ffffff").style("stroke-width",.8).on("mouseover",(i,o)=>this.onCountryHover(i,o)).on("mouseout",(i,o)=>this.onCountryHoverEnd(i,o)).on("click",(i,o)=>this.onCountryClick(i,o)),this.svg.append("rect").attr("width",this.mapWidth).attr("height",this.mapHeight).style("fill","url(#map-gradient)").style("pointer-events","none").lower();let r=this.svg.append("defs").append("linearGradient").attr("id","map-gradient").attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%");r.append("stop").attr("offset","0%").style("stop-color","#f9f5f2").style("stop-opacity",.8),r.append("stop").attr("offset","100%").style("stop-color","#d7ccc8").style("stop-opacity",.3)}createProjection(){return wx().scale(this.getScale()).translate([this.mapWidth/2,this.mapHeight/1.5])}getScale(){return window.innerWidth<=768?100:130}setupZoom(){this.zoom=Ex().scaleExtent([1,8]).on("zoom",e=>{this.svg.selectAll(".country").attr("transform",e.transform).attr("stroke-width",.8/e.transform.k)}),this.svg.call(this.zoom)}updateMapSize(){this.svg.attr("width",this.mapWidth).attr("height",this.mapHeight),this.projection=this.createProjection(),this.path.projection(this.projection),this.svg.selectAll(".country").attr("d",this.path),this.svg.select("rect").attr("width",this.mapWidth).attr("height",this.mapHeight)}updateMapColors(){!this.countries||!this.svg||this.svg.selectAll(".country").style("fill",e=>this.getCountryColor(e.properties.name))}getCountryId(e){return"country-"+e.replace(/\s+/g,"-").toLowerCase()}getCountryColor(e){return this.isActiveCountry(e)?"#d4af37":this.isAvailableCountry(e)?"#8d6e63":"#d7ccc8"}isActiveCountry(e){return!!this.activeCountry&&e.toLowerCase()===this.activeCountry.toLowerCase()}isAvailableCountry(e){return this.availableCountries.includes(e)}onCountryHover(e,t){let r=t.properties.name,i=this.isAvailableCountry(r);nn(e.target).style("stroke-width",1.5).style("filter",i?"url(#glow)":""),i&&(nn(e.target).style("fill","#5d4037").style("cursor","pointer"),this.showTooltip(e,r))}onCountryHoverEnd(e,t){nn(e.target).style("fill",()=>this.getCountryColor(t.properties.name)).style("stroke-width",.8).style("filter",null).style("cursor","default"),this.hideTooltip()}onCountryClick(e,t){this.isAvailableCountry(t.properties.name)&&(nn(e.target).style("transform","scale(0.95)").transition().duration(300).style("transform","scale(1)"),this.countrySelected.emit(t.properties.name))}showTooltip(e,t){this.tooltip.html(`<strong>${t}</strong><br>Click to explore fragrances`).style("left",e.pageX+15+"px").style("top",e.pageY-28+"px").transition().duration(200).style("opacity",1).style("transform","translateY(0)")}hideTooltip(){this.tooltip.transition().duration(200).style("opacity",0).style("transform","translateY(10px)")}handleMapError(e){console.error("Error loading map data:",e),this.displayErrorMessage()}displayErrorMessage(){this.svg.append("text").attr("x",this.mapWidth/2).attr("y",this.mapHeight/2).attr("text-anchor","middle").style("font-size","16px").style("fill","#5d4037").text("Could not load map data. Please try again later.")}ngOnChanges(){this.updateMapColors()}static \u0275fac=function(t){return new(t||n)(oe(mn))};static \u0275cmp=Nt({type:n,selectors:[["app-country-map"]],viewQuery:function(t,r){if(t&1&&q1(G7,7),t&2){let i;vp(i=_p())&&(r.mapContainer=i.first)}},hostBindings:function(t,r){t&1&&de("resize",function(o){return r.onResize(o)},!1,BS)},inputs:{activeCountry:"activeCountry"},outputs:{countrySelected:"countrySelected"},features:[Jn],decls:2,vars:0,consts:[["mapContainer",""],[1,"map-container"]],template:function(t,r){t&1&&se(0,"div",1,0)},styles:[".map-container[_ngcontent-%COMP%]{width:100%;height:auto;min-height:300px;aspect-ratio:16/9;position:relative;border-radius:12px;overflow:hidden;box-shadow:0 15px 35px #0000001a;background:#f9f5f2;margin:2rem 0;border:1px solid #e0e0e0}@media (max-width: 768px){.map-container[_ngcontent-%COMP%]{aspect-ratio:9/10}}.map-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:100%;height:100%;display:block}.country[_ngcontent-%COMP%]{transition:all .3s ease;stroke-linejoin:round}.country[_ngcontent-%COMP%]:hover{stroke-width:1.5px!important}.map-tooltip[_ngcontent-%COMP%]{font-family:Arial,sans-serif;box-shadow:0 4px 12px #0003;padding:8px 16px;border-radius:4px;font-size:14px;pointer-events:none;z-index:10;transition:opacity .3s,transform .3s;transform:translateY(10px);opacity:0;position:absolute}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:.8}50%{opacity:1}to{opacity:.8}}.country-available[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}@media (max-width: 992px){.map-container[_ngcontent-%COMP%]{margin:1.5rem 0}}@media (max-width: 576px){.map-tooltip[_ngcontent-%COMP%]{font-size:12px;padding:6px 12px}}"]})};function K7(n,e){n&1&&(M(0,"section",17),se(1,"div",18),M(2,"p"),B(3,"Loading fragrances..."),T()())}var Py=class n{constructor(e,t){this.perfumeService=e;this.router=t}featuredPerfumes=[];isLoading=!0;ngOnInit(){this.perfumeService.getFeaturedPerfumes().subscribe(e=>{this.featuredPerfumes=e,this.isLoading=!1}),this.router.events.pipe(at(e=>e instanceof Dn)).subscribe(()=>{window.scrollTo({top:0,behavior:"smooth"}),window.location.hash&&setTimeout(()=>{document.querySelector(window.location.hash)?.scrollIntoView({behavior:"smooth"})},0)})}onCountrySelected(e){this.router.navigate(["/country",e])}exploreCollection(){this.router.navigate(["/products"])}exploreCollectionFor(e){this.router.navigate(["/products"],{queryParams:{type:e}})}static \u0275fac=function(t){return new(t||n)(oe(mn),oe($t))};static \u0275cmp=Nt({type:n,selectors:[["app-home"]],decls:35,vars:1,consts:[[1,"landing-container"],[1,"background-image"],[1,"content"],[1,"heading"],[1,"subheading"],[1,"cta-button",3,"click"],[1,"home-container"],[1,"map-section"],[1,"section-description"],[1,"map-wrapper"],[3,"countrySelected"],[1,"gender-categories"],[1,"category-card","for-him"],[1,"category-content"],[1,"category-btn",3,"click"],[1,"category-card","for-her"],["class","loading-section",4,"ngIf"],[1,"loading-section"],[1,"spinner"]],template:function(t,r){t&1&&(M(0,"div",0),se(1,"div",1),M(2,"div",2)(3,"h1",3),B(4,"Discover the World of Scents"),T(),M(5,"p",4),B(6,"Premium fragrances from around the globe"),T(),M(7,"button",5),de("click",function(){return r.exploreCollection()}),B(8," Explore Collection "),T()()(),M(9,"div",6)(10,"section",7)(11,"h2"),B(12,"Explore by Country"),T(),M(13,"p",8),B(14,"Click on a highlighted country to discover its unique fragrances"),T(),M(15,"div",9)(16,"app-country-map",10),de("countrySelected",function(o){return r.onCountrySelected(o)}),T()()(),M(17,"section",11)(18,"div",12)(19,"div",13)(20,"h3"),B(21,"For Him"),T(),M(22,"p"),B(23,"Discover masculine scents that command attention"),T(),M(24,"button",14),de("click",function(){return r.exploreCollectionFor("men")}),B(25,"Shop Men's Fragrances"),T()()(),M(26,"div",15)(27,"div",13)(28,"h3"),B(29,"For Her"),T(),M(30,"p"),B(31,"Explore feminine fragrances that captivate"),T(),M(32,"button",14),de("click",function(){return r.exploreCollectionFor("woman")}),B(33,"Shop Women's Fragrances"),T()()()(),qe(34,K7,4,0,"section",16),T()),t&2&&(Q(34),pe("ngIf",r.isLoading))},dependencies:[ho,Ay],styles:['@import"https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css";.landing-container[_ngcontent-%COMP%], .home-container[_ngcontent-%COMP%]{position:relative;width:100%;overflow:hidden;color:#fff;text-align:center}.landing-container[_ngcontent-%COMP%]{height:100vh}.landing-container[_ngcontent-%COMP%]   .background-image[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:114%;background-image:url("./media/hero1-EFDDK7XE.jpg");background-size:cover;background-position:center;background-attachment:fixed;z-index:1;animation:_ngcontent-%COMP%_zoomEffect 15s ease infinite alternate}.content[_ngcontent-%COMP%]{position:relative;z-index:2;padding:20px;max-width:800px;margin:0 auto;display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%}.content[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font-size:4rem;font-weight:700;margin-bottom:1rem;text-shadow:2px 2px 8px rgba(0,0,0,.6);animation:fadeIn 2s ease-in-out}.content[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:15rem;text-shadow:1px 1px 4px rgba(0,0,0,.5);max-width:600px}.content[_ngcontent-%COMP%]   .cta-button[_ngcontent-%COMP%]{background:#fff3;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:2px solid white;color:#fff;padding:15px 40px;font-size:1.2rem;border-radius:50px;cursor:pointer;transition:all .3s ease}.content[_ngcontent-%COMP%]   .cta-button[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:translateY(-5px)}.map-section[_ngcontent-%COMP%]{padding:60px 20px;text-align:center;background:linear-gradient(135deg,#f5f7fa,#e4e8eb);border-radius:12px;margin:40px 20px;box-shadow:0 10px 30px #00000014;position:relative;overflow:hidden}.map-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#2c3e50;margin-bottom:15px;position:relative;z-index:1;font-weight:700}.map-section[_ngcontent-%COMP%]   .section-description[_ngcontent-%COMP%]{font-size:1.1rem;color:#7f8c8d;max-width:700px;margin:0 auto 40px;position:relative;z-index:1;line-height:1.6}.map-section[_ngcontent-%COMP%]   .map-wrapper[_ngcontent-%COMP%]{margin:40px auto;border:none;border-radius:12px;overflow:auto;box-shadow:0 8px 25px #00000026;max-width:1000px;position:relative;z-index:1;transition:transform .3s ease;background:#fff}.map-section[_ngcontent-%COMP%]   .map-wrapper[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.gender-categories[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:30px;padding:0 20px 60px;flex-wrap:wrap}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]{position:relative;width:100%;max-width:550px;height:400px;border-radius:16px;overflow:hidden;box-shadow:0 15px 35px #0000001a;transition:transform .4s ease,box-shadow .4s ease}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:0 20px 40px #00000026}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(to bottom,#0000001a,#000000b3);z-index:1}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%]{position:relative;z-index:2;height:100%;display:flex;flex-direction:column;justify-content:flex-end;padding:40px;text-align:left;color:#fff}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:10px;text-shadow:1px 1px 3px rgba(0,0,0,.5)}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:25px;text-shadow:1px 1px 2px rgba(0,0,0,.5)}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]   .category-btn[_ngcontent-%COMP%]{background:#fff3;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);border:1px solid white;color:#fff;padding:12px 30px;font-size:1rem;border-radius:30px;cursor:pointer;transition:all .3s ease;align-self:flex-start}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]   .category-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:translateY(-3px)}.gender-categories[_ngcontent-%COMP%]   .for-him[_ngcontent-%COMP%]{background:url("./media/mens-fragrances-XTLZYDQZ.jpg") center/cover no-repeat}.gender-categories[_ngcontent-%COMP%]   .for-her[_ngcontent-%COMP%]{background:url("./media/womens-fragrances-YR67AMWY.jpg") center/cover no-repeat}.loading-section[_ngcontent-%COMP%]{text-align:center;padding:60px 0}.loading-section[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{border:6px solid rgba(0,0,0,.1);border-radius:50%;border-top:6px solid #5F9EA0;width:60px;height:60px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_zoomEffect{0%{transform:scale(1)}to{transform:scale(1.1)}}@media (max-width: 1200px){.gender-categories[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]{max-width:700px}}@media (max-width: 768px){.content[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font-size:2.5rem!important}.content[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font-size:1.2rem}.content[_ngcontent-%COMP%]   .cta-button[_ngcontent-%COMP%]{padding:12px 30px;font-size:1rem}.map-section[_ngcontent-%COMP%]{margin:20px 10px;padding:30px 10px}.map-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]{height:350px}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%]{padding:30px}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2rem}}@media (max-width: 576px){.content[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font-size:2rem!important}.content[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{margin-bottom:10rem}.map-section[_ngcontent-%COMP%]{margin:15px 5px;padding:25px 5px}.map-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.map-section[_ngcontent-%COMP%]   .section-description[_ngcontent-%COMP%]{font-size:.9rem}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]{height:300px}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%]{padding:20px}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.8rem}.gender-categories[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}}']})};var TV=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(oe(vr),oe(xn))}}static{this.\u0275dir=Ct({type:n})}}return n})(),By=(()=>{class n extends TV{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Cs(n)))(i||n)}})()}static{this.\u0275dir=Ct({type:n,features:[tr]})}}return n})(),du=new X("");var Q7={provide:du,useExisting:Lr(()=>Uy),multi:!0};function Y7(){let n=jr()?jr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Z7=new X(""),Uy=(()=>{class n extends TV{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Y7())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(oe(vr),oe(xn),oe(Z7,8))}}static{this.\u0275dir=Ct({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&de("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[uo([Q7]),tr]})}}return n})();function Ko(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function SV(n){return n!=null&&typeof n.length=="number"}var Nx=new X(""),Rx=new X(""),X7=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,St=class{static min(e){return J7(e)}static max(e){return eW(e)}static required(e){return tW(e)}static requiredTrue(e){return nW(e)}static email(e){return rW(e)}static minLength(e){return iW(e)}static maxLength(e){return oW(e)}static pattern(e){return sW(e)}static nullValidator(e){return AV(e)}static compose(e){return FV(e)}static composeAsync(e){return LV(e)}};function J7(n){return e=>{if(Ko(e.value)||Ko(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function eW(n){return e=>{if(Ko(e.value)||Ko(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function tW(n){return Ko(n.value)?{required:!0}:null}function nW(n){return n.value===!0?null:{required:!0}}function rW(n){return Ko(n.value)||X7.test(n.value)?null:{email:!0}}function iW(n){return e=>Ko(e.value)||!SV(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function oW(n){return e=>SV(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function sW(n){if(!n)return AV;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Ko(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function AV(n){return null}function PV(n){return n!=null}function OV(n){return Es(n)?Me(n):n}function NV(n){let e={};return n.forEach(t=>{e=t!=null?Y(Y({},e),t):e}),Object.keys(e).length===0?null:e}function RV(n,e){return e.map(t=>t(n))}function aW(n){return!n.validate}function kV(n){return n.map(e=>aW(e)?e:t=>e.validate(t))}function FV(n){if(!n)return null;let e=n.filter(PV);return e.length==0?null:function(t){return NV(RV(t,e))}}function VV(n){return n!=null?FV(kV(n)):null}function LV(n){if(!n)return null;let e=n.filter(PV);return e.length==0?null:function(t){let r=RV(t,e).map(OV);return Yv(r).pipe(ie(NV))}}function jV(n){return n!=null?LV(kV(n)):null}function _V(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function BV(n){return n._rawValidators}function UV(n){return n._rawAsyncValidators}function Mx(n){return n?Array.isArray(n)?n:[n]:[]}function Ny(n,e){return Array.isArray(n)?n.includes(e):n===e}function wV(n,e){let t=Mx(e);return Mx(n).forEach(i=>{Ny(t,i)||t.push(i)}),t}function CV(n,e){return Mx(e).filter(t=>!Ny(n,t))}var Ry=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=VV(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=jV(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},aa=class extends Ry{get formDirective(){return null}get path(){return null}},Qo=class extends Ry{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},ky=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},cW={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},tpe=me(Y({},cW),{"[class.ng-submitted]":"isSubmitted"}),fu=(()=>{class n extends ky{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(oe(Qo,2))}}static{this.\u0275dir=Ct({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&pt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[tr]})}}return n})(),$V=(()=>{class n extends ky{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(oe(aa,10))}}static{this.\u0275dir=Ct({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&pt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[tr]})}}return n})();var ef="VALID",Oy="INVALID",cu="PENDING",tf="DISABLED",Yo=class{},Fy=class extends Yo{constructor(e,t){super(),this.value=e,this.source=t}},nf=class extends Yo{constructor(e,t){super(),this.pristine=e,this.source=t}},rf=class extends Yo{constructor(e,t){super(),this.touched=e,this.source=t}},uu=class extends Yo{constructor(e,t){super(),this.status=e,this.source=t}},Tx=class extends Yo{constructor(e){super(),this.source=e}},Sx=class extends Yo{constructor(e){super(),this.source=e}};function kx(n){return($y(n)?n.validators:n)||null}function uW(n){return Array.isArray(n)?VV(n):n||null}function Fx(n,e){return($y(e)?e.asyncValidators:n)||null}function lW(n){return Array.isArray(n)?jV(n):n||null}function $y(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function zV(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new ae(1e3,"");if(!r[t])throw new ae(1001,"")}function qV(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new ae(1002,"")})}var lu=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=el(()=>this.statusReactive()),this.statusReactive=Zu(void 0),this._pristine=el(()=>this.pristineReactive()),this.pristineReactive=Zu(!0),this._touched=el(()=>this.touchedReactive()),this.touchedReactive=Zu(!1),this._events=new tt,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Ci(this.statusReactive)}set status(e){Ci(()=>this.statusReactive.set(e))}get valid(){return this.status===ef}get invalid(){return this.status===Oy}get pending(){return this.status==cu}get disabled(){return this.status===tf}get enabled(){return this.status!==tf}get pristine(){return Ci(this.pristineReactive)}set pristine(e){Ci(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Ci(this.touchedReactive)}set touched(e){Ci(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(wV(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(wV(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(CV(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(CV(e,this._rawAsyncValidators))}hasValidator(e){return Ny(this._rawValidators,e)}hasAsyncValidator(e){return Ny(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(me(Y({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new rf(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new rf(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(me(Y({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new nf(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new nf(!0,r))}markAsPending(e={}){this.status=cu;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new uu(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(me(Y({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=tf,this.errors=null,this._forEachChild(i=>{i.disable(me(Y({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Fy(this.value,r)),this._events.next(new uu(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(me(Y({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ef,this._forEachChild(r=>{r.enable(me(Y({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(me(Y({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ef||this.status===cu)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Fy(this.value,t)),this._events.next(new uu(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(me(Y({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?tf:ef}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=cu,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=OV(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new uu(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ke,this.statusChanges=new Ke}_calculateStatus(){return this._allControlsDisabled()?tf:this.errors?Oy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(cu)?cu:this._anyControlsHaveStatus(Oy)?Oy:ef}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new nf(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new rf(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){$y(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=uW(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=lW(this._rawAsyncValidators)}},Vy=class extends lu{constructor(e,t,r){super(kx(t),Fx(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){qV(this,!0,e),Object.keys(e).forEach(r=>{zV(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Ax=class extends Vy{};var sf=new X("CallSetDisabledState",{providedIn:"root",factory:()=>af}),af="always";function HV(n,e){return[...e.path,n]}function Px(n,e,t=af){Vx(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),fW(n,e),pW(n,e),hW(n,e),dW(n,e)}function bV(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),jy(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Ly(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function dW(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Vx(n,e){let t=BV(n);e.validator!==null?n.setValidators(_V(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=UV(n);e.asyncValidator!==null?n.setAsyncValidators(_V(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Ly(e._rawValidators,i),Ly(e._rawAsyncValidators,i)}function jy(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=BV(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=UV(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return Ly(e._rawValidators,r),Ly(e._rawAsyncValidators,r),t}function fW(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&GV(n,e)})}function hW(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&GV(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function GV(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function pW(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function mW(n,e){n==null,Vx(n,e)}function gW(n,e){return jy(n,e)}function WV(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function yW(n){return Object.getPrototypeOf(n.constructor)===By}function vW(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function KV(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Uy?t=o:yW(o)?r=o:i=o}),i||r||t||null}function _W(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function EV(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function IV(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var of=class extends lu{constructor(e=null,t,r){super(kx(t),Fx(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),$y(t)&&(t.nonNullable||t.initialValueIsDefault)&&(IV(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){EV(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){EV(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){IV(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var wW=n=>n instanceof of;var CW={provide:Qo,useExisting:Lr(()=>ca)},xV=Promise.resolve(),ca=(()=>{class n extends Qo{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new of,this._registered=!1,this.name="",this.update=new Ke,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=KV(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),WV(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Px(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){xV.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Is(r);xV.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?HV(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(oe(aa,9),oe(Nx,10),oe(Rx,10),oe(du,10),oe(lo,8),oe(sf,8))}}static{this.\u0275dir=Ct({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[uo([CW]),tr,Jn]})}}return n})(),QV=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ct({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var bW={provide:du,useExisting:Lr(()=>Lx),multi:!0};var EW=(()=>{class n{constructor(){this._accessors=[]}add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t){this._accessors.splice(r,1);return}}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return t[0].control?t[0]._parent===r._control._parent&&t[1].name===r.name:!1}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Lx=(()=>{class n extends By{constructor(t,r,i,o){super(t,r),this._registry=i,this._injector=o,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=z(sf,{optional:!0})??af}ngOnInit(){this._control=this._injector.get(Qo),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}setDisabledState(t){(this.setDisabledStateFired||t||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",t),this.setDisabledStateFired=!0}fireUncheck(t){this.writeValue(t)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}static{this.\u0275fac=function(r){return new(r||n)(oe(vr),oe(xn),oe(EW),oe(kn))}}static{this.\u0275dir=Ct({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(r,i){r&1&&de("change",function(){return i.onChange()})("blur",function(){return i.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[uo([bW]),tr]})}}return n})();var YV=new X("");var IW={provide:aa,useExisting:Lr(()=>jx)},jx=(()=>{class n extends aa{get submitted(){return Ci(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=el(()=>this._submittedReactive()),this._submittedReactive=Zu(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Ke,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(jy(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return Px(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){bV(t.control||null,t,!1),_W(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),vW(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Tx(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new Sx(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(bV(r||null,t),wW(i)&&(Px(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);mW(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&gW(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Vx(this.form,this),this._oldForm&&jy(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(r){return new(r||n)(oe(Nx,10),oe(Rx,10),oe(sf,8))}}static{this.\u0275dir=Ct({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&de("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[uo([IW]),tr,Jn]})}}return n})();var xW={provide:Qo,useExisting:Lr(()=>Bx)},Bx=(()=>{class n extends Qo{set isDisabled(t){}static{this._ngModelWarningSentOnce=!1}constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new Ke,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=KV(this,o)}ngOnChanges(t){this._added||this._setUpControl(),WV(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return HV(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(r){return new(r||n)(oe(aa,13),oe(Nx,10),oe(Rx,10),oe(du,10),oe(YV,8))}}static{this.\u0275dir=Ct({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[uo([xW]),tr,Jn]})}}return n})(),DW={provide:du,useExisting:Lr(()=>hu),multi:!0};function ZV(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function MW(n){return n.split(":")[0]}var hu=(()=>{class n extends By{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=ZV(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=MW(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Cs(n)))(i||n)}})()}static{this.\u0275dir=Ct({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&de("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[uo([DW]),tr]})}}return n})(),zy=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(ZV(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(oe(xn),oe(vr),oe(hu,9))}}static{this.\u0275dir=Ct({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),TW={provide:du,useExisting:Lr(()=>XV),multi:!0};function DV(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function SW(n){return n.split(":")[0]}var XV=(()=>{class n extends By{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],l=this._getOptionValue(c.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=SW(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Cs(n)))(i||n)}})()}static{this.\u0275dir=Ct({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&de("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[uo([TW]),tr]})}}return n})(),qy=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(DV(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(DV(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(oe(xn),oe(vr),oe(XV,9))}}static{this.\u0275dir=Ct({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();var JV=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=wt({type:n})}static{this.\u0275inj=_t({})}}return n})(),Ox=class extends lu{constructor(e,t,r){super(kx(t),Fx(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){qV(this,!1,e),e.forEach((r,i)=>{zV(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function MV(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var eL=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return MV(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Vy(i,o)}record(t,r=null){let i=this._reduceControls(t);return new Ax(i,r)}control(t,r,i){let o={};return this.useNonNullable?(MV(r)?o=r:(o.validators=r,o.asyncValidators=i),new of(t,me(Y({},o),{nonNullable:!0}))):new of(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new Ox(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof of)return t;if(t instanceof lu)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var tL=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:sf,useValue:t.callSetDisabledState??af}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=wt({type:n})}static{this.\u0275inj=_t({imports:[JV]})}}return n})(),nL=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:YV,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:sf,useValue:t.callSetDisabledState??af}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=wt({type:n})}static{this.\u0275inj=_t({imports:[JV]})}}return n})();var Zo=class n{constructor(e){this.perfumeService=e}updateCart(e,t,r){if(!e.id){console.error("Cannot add to cart: Perfume has no ID.");return}let s=e,{id:i}=s,o=Dv(s,["id"]);this.perfumeService.updatePerfume(i,me(Y({},o),{[r]:t})).then(()=>{console.log("Perfume added to cart successfully.")}).catch(a=>{console.error("Error adding to cart:",a)})}addToWishlist(e){this.updateCart(e,!0,"inWishlist")}removeFromWishlist(e){this.updateCart(e,!1,"inWishlist")}static \u0275fac=function(t){return new(t||n)(K(mn))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})};var Hy={production:!1,firebase:{apiKey:"AIzaSyCJhh6RhbGA52js5L1blEEU0EF_pTy1-JU",authDomain:"graduation-project-704b9.firebaseapp.com",projectId:"republic-1612b",storageBucket:"graduation-project-704b9.appspot.com",messagingSenderId:"159614579205",appId:"1:159614579205:web:c0dfd56cf057d7635ce26c"},firebaseConfig:{apiKey:"AIzaSyCcB66Mhf54_4bF0eI3sTDZJMl9eCIooqc",authDomain:"republic-1612b.firebaseapp.com",projectId:"republic-1612b",storageBucket:"republic-1612b.firebasestorage.app",messagingSenderId:"813696737012",appId:"1:813696737012:web:8f37e6b4af9add5b9a08a1",measurementId:"G-5FYGYGMB2Z"}};var AW=()=>({standalone:!0});function PW(n,e){n&1&&(M(0,"div",8)(1,"div",9),bt(),M(2,"svg",10),se(3,"circle",11)(4,"circle",12)(5,"path",13),T()(),Rt(),M(6,"h2"),B(7,"Your Fragrance Wardrobe is Empty"),T(),M(8,"p"),B(9,"Discover our exquisite collection to find your signature scent"),T(),M(10,"a",14),bt(),M(11,"svg",15),se(12,"line",16)(13,"polyline",17),T(),B(14," Explore Our Collection "),T()())}function OW(n,e){if(n&1&&(M(0,"div",18)(1,"div",19)(2,"div",20),bt(),M(3,"svg",21),se(4,"path",22)(5,"polyline",23),T()(),Rt(),M(6,"h2"),B(7,"Your Order is Complete!"),T(),M(8,"p",24),B(9),T(),M(10,"p",25),B(11,"We've sent a confirmation to your email. Our fragrance specialists will contact you shortly to finalize delivery details."),T(),M(12,"div",26)(13,"a",27),B(14,"Track Your Order"),T(),M(15,"a",14),B(16,"Discover More Scents"),T()()()()),n&2){let t=Re();Q(9),en("Thank you for choosing our fragrances. Your order #",t.orderId," is being prepared.")}}function NW(n,e){if(n&1){let t=Fn();M(0,"div",82)(1,"div",83),se(2,"img",84),M(3,"button",85),de("click",function(){let i=Ze(t).$implicit,o=Re(2);return Xe(o.removeFromCart(i.perfume))}),bt(),M(4,"svg",15),se(5,"line",86)(6,"line",87),T()()(),Rt(),M(7,"div",88)(8,"h4",89),B(9),T(),M(10,"p",90),B(11),T(),M(12,"p",91),B(13),T(),M(14,"p",92),B(15),_r(16,"currency"),T()(),M(17,"div",93)(18,"button",94),B(19,"-"),T(),M(20,"span",95),B(21),T(),M(22,"button",96),B(23,"+"),T()(),M(24,"div",97),B(25),_r(26,"currency"),T()()}if(n&2){let t=e.$implicit;Q(2),pe("src",t.perfume.images[1],Yu)("alt",t.perfume.name),Q(7),rt(t.perfume.name),Q(2),rt(t.perfume.category),Q(2),en("",t.perfume.price||"100","ml"),Q(2),rt(Wa(16,9,t.perfume.price,"USD","symbol","1.2-2")),Q(3),pe("disabled",t.quantity<=1),Q(3),rt(t.quantity),Q(4),en(" ",Wa(26,14,t.perfume.price*t.quantity,"USD","symbol","1.2-2")," ")}}function RW(n,e){n&1&&(M(0,"div",98),B(1," Please enter your first name "),T())}function kW(n,e){n&1&&(M(0,"div",98),B(1," Please enter your last name "),T())}function FW(n,e){n&1&&(M(0,"div",98),B(1," Please enter a valid email address "),T())}function VW(n,e){n&1&&(M(0,"div",98),B(1," Please enter a valid phone number "),T())}function LW(n,e){n&1&&(M(0,"div",98),B(1," Please enter your delivery address "),T())}function jW(n,e){n&1&&(M(0,"div",98),B(1," Please enter your city "),T())}function BW(n,e){n&1&&(M(0,"div",98),B(1," Please enter your ZIP code "),T())}function UW(n,e){n&1&&(M(0,"span"),B(1,"Complete Your Order"),T())}function $W(n,e){n&1&&se(0,"span",99)}function zW(n,e){if(n&1){let t=Fn();M(0,"div",28)(1,"div",29)(2,"div",30)(3,"h3"),B(4,"Your Selected Fragrances"),T(),M(5,"div",31)(6,"span"),B(7,"Qty"),T(),M(8,"span"),B(9,"Total"),T()()(),M(10,"div",32),qe(11,NW,27,19,"div",33),T(),M(12,"div",34)(13,"a",35),bt(),M(14,"svg",15),se(15,"line",16)(16,"polyline",17),T(),B(17," Continue Exploring "),T()()(),Rt(),M(18,"div",36)(19,"div",37)(20,"h3",38),B(21,"Order Summary"),T(),M(22,"div",39)(23,"span"),B(24),T(),M(25,"span"),B(26),_r(27,"currency"),T()(),M(28,"div",39)(29,"span"),B(30,"Shipping"),T(),M(31,"span",40),B(32,"Complimentary"),T()(),M(33,"div",39)(34,"span"),B(35,"Estimated Tax"),T(),M(36,"span"),B(37),_r(38,"currency"),T()(),M(39,"div",41)(40,"span"),B(41,"Total"),T(),M(42,"span",42),B(43),_r(44,"currency"),T()(),M(45,"form",43),de("ngSubmit",function(){Ze(t);let i=Re();return Xe(i.onSubmit())}),M(46,"div",44)(47,"label",45),B(48,"First Name"),T(),se(49,"input",46),qe(50,RW,2,0,"div",47),T(),M(51,"div",44)(52,"label",48),B(53,"Last Name"),T(),se(54,"input",49),qe(55,kW,2,0,"div",47),T(),M(56,"div",44)(57,"label",50),B(58,"Email"),T(),se(59,"input",51),qe(60,FW,2,0,"div",47),T(),M(61,"div",44)(62,"label",52),B(63,"Phone Number"),T(),se(64,"input",53),qe(65,VW,2,0,"div",47),T(),M(66,"div",44)(67,"label",54),B(68,"Delivery Address"),T(),se(69,"input",55),qe(70,LW,2,0,"div",47),T(),M(71,"div",56)(72,"div",44)(73,"label",57),B(74,"City"),T(),se(75,"input",58),qe(76,jW,2,0,"div",47),T(),M(77,"div",44)(78,"label",59),B(79,"ZIP Code"),T(),se(80,"input",60),qe(81,BW,2,0,"div",47),T()(),M(82,"div",44)(83,"label",61),B(84,"Special Instructions (Optional)"),T(),se(85,"textarea",62),T(),M(86,"div",63)(87,"h4"),B(88,"Payment Method"),T(),M(89,"div",64)(90,"label",65)(91,"input",66),_i("ngModelChange",function(i){Ze(t);let o=Re();return co(o.paymentMethod,i)||(o.paymentMethod=i),Xe(i)}),T(),M(92,"div",67)(93,"span"),B(94,"Cash on Delivery"),T(),bt(),M(95,"svg",68),se(96,"circle",69)(97,"path",70)(98,"line",71)(99,"line",72),T()()(),Rt(),M(100,"label",73),se(101,"input",74),M(102,"div",67)(103,"span"),B(104,"Credit Card (Coming Soon)"),T(),bt(),M(105,"svg",68),se(106,"rect",75)(107,"line",76),T()()()()(),Rt(),M(108,"button",77),qe(109,UW,2,0,"span",78)(110,$W,1,0,"span",79),T(),M(111,"div",80),bt(),M(112,"svg",15),se(113,"path",81),T(),Rt(),M(114,"span"),B(115,"Secure Checkout"),T()()()()()()}if(n&2){let t,r,i,o,s,a,c,l,d,f,p,g,v,b,_=Re();Q(11),pe("ngForOf",_.cartItems)("ngForTrackBy",_.trackByPerfumeId),Q(13),en("Subtotal (",_.cartItems.length," items)"),Q(2),rt(Wa(27,35,_.totalPrice,"USD","symbol","1.2-2")),Q(11),rt(Wa(38,40,_.totalPrice*.08,"USD","symbol","1.2-2")),Q(6),rt(Wa(44,45,_.totalPrice*1.08,"USD","symbol","1.2-2")),Q(2),pe("formGroup",_.checkoutForm),Q(4),pt("invalid",((t=_.checkoutForm.get("firstName"))==null?null:t.invalid)&&((t=_.checkoutForm.get("firstName"))==null?null:t.touched)),Q(),pe("ngIf",((r=_.checkoutForm.get("firstName"))==null?null:r.invalid)&&((r=_.checkoutForm.get("firstName"))==null?null:r.touched)),Q(4),pt("invalid",((i=_.checkoutForm.get("lastName"))==null?null:i.invalid)&&((i=_.checkoutForm.get("lastName"))==null?null:i.touched)),Q(),pe("ngIf",((o=_.checkoutForm.get("lastName"))==null?null:o.invalid)&&((o=_.checkoutForm.get("lastName"))==null?null:o.touched)),Q(4),pt("invalid",((s=_.checkoutForm.get("email"))==null?null:s.invalid)&&((s=_.checkoutForm.get("email"))==null?null:s.touched)),Q(),pe("ngIf",((a=_.checkoutForm.get("email"))==null?null:a.invalid)&&((a=_.checkoutForm.get("email"))==null?null:a.touched)),Q(4),pt("invalid",((c=_.checkoutForm.get("phone"))==null?null:c.invalid)&&((c=_.checkoutForm.get("phone"))==null?null:c.touched)),Q(),pe("ngIf",((l=_.checkoutForm.get("phone"))==null?null:l.invalid)&&((l=_.checkoutForm.get("phone"))==null?null:l.touched)),Q(4),pt("invalid",((d=_.checkoutForm.get("address"))==null?null:d.invalid)&&((d=_.checkoutForm.get("address"))==null?null:d.touched)),Q(),pe("ngIf",((f=_.checkoutForm.get("address"))==null?null:f.invalid)&&((f=_.checkoutForm.get("address"))==null?null:f.touched)),Q(5),pt("invalid",((p=_.checkoutForm.get("city"))==null?null:p.invalid)&&((p=_.checkoutForm.get("city"))==null?null:p.touched)),Q(),pe("ngIf",((g=_.checkoutForm.get("city"))==null?null:g.invalid)&&((g=_.checkoutForm.get("city"))==null?null:g.touched)),Q(4),pt("invalid",((v=_.checkoutForm.get("zipCode"))==null?null:v.invalid)&&((v=_.checkoutForm.get("zipCode"))==null?null:v.touched)),Q(),pe("ngIf",((b=_.checkoutForm.get("zipCode"))==null?null:b.invalid)&&((b=_.checkoutForm.get("zipCode"))==null?null:b.touched)),Q(9),pt("selected",_.paymentMethod==="cash"),Q(),vi("ngModel",_.paymentMethod),pe("ngModelOptions",K1(50,AW)),Q(17),pe("disabled",_.checkoutForm.invalid||_.isLoading),Q(),pe("ngIf",!_.isLoading),Q(),pe("ngIf",_.isLoading)}}var Gy=class n{constructor(e,t){this.perfumeService=e;this.fb=t;this.checkoutForm=this.fb.group({firstName:["",[St.required,St.minLength(2),St.maxLength(50)]],lastName:["",[St.required,St.minLength(2),St.maxLength(50)]],email:["",[St.required,St.email,St.maxLength(100)]],phone:["",[St.required,St.pattern(/^[0-9]{10,15}$/)]],address:["",[St.required,St.maxLength(200)]],city:["",[St.required,St.maxLength(50)]],zipCode:["",[St.required,St.pattern(/^[0-9]{5}(?:-[0-9]{4})?$/)]],notes:["",[St.maxLength(500)]]})}cartItems=[];checkoutForm;paymentMethod="cash";orderSubmitted=!1;isLoading=!1;orderId="";formError=null;emailError=null;destroy$=new tt;router=z($t);productService=z(Zo);http=z(vw);firestore=z(ta);ngOnInit(){this.loadCartItems(),this.setupRouterScroll()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadCartItems(){this.perfumeService.getAllPerfumes().pipe(as(this.destroy$)).subscribe({next:e=>{this.cartItems=e.filter(t=>t.inCart).map(t=>({perfume:t,quantity:t?.quantity||1}))},error:e=>{console.error("Failed to load cart items:",e),this.formError="Failed to load your cart items. Please try again."}})}setupRouterScroll(){this.router.events.pipe(at(e=>e instanceof Dn),as(this.destroy$)).subscribe(()=>{window.scrollTo({top:0,behavior:"smooth"}),window.location.hash&&setTimeout(()=>{document.querySelector(window.location.hash)?.scrollIntoView({behavior:"smooth"})},0)})}trackByPerfumeId(e,t){return t.perfume.id||""}get totalPrice(){return this.cartItems.reduce((e,t)=>e+t.perfume.price*t.quantity,0)}get taxAmount(){return this.totalPrice*.08}get grandTotal(){return this.totalPrice+this.taxAmount}updateQuantity(e,t){if(t<1||t>99)return;let r=me(Y({},e),{quantity:t})}removeFromCart(e){return F(this,null,function*(){try{yield this.productService.updateCart(e,!1,"inCart")}catch(t){console.error("Failed to remove item:",t),this.formError="Failed to remove item. Please try again."}})}onSubmit(){return F(this,null,function*(){if(this.formError=null,this.emailError=null,this.checkoutForm.invalid){this.checkoutForm.markAllAsTouched(),this.formError="Please fill out all required fields correctly.";return}if(!this.isLoading){this.isLoading=!0;try{this.orderId=this.generateOrderId();let e=me(Y({id:this.orderId},this.checkoutForm.value),{items:this.cartItems.map(t=>({id:t.perfume.id,name:t.perfume.name,price:t.perfume.price,quantity:t.quantity,image:t.perfume.images[0],size:t.perfume.price||"100ml"})),subtotal:this.totalPrice,tax:this.taxAmount,total:this.grandTotal,paymentMethod:this.paymentMethod,status:"processing",timestamp:Sg()});yield this.firestore.collection("orders").doc(this.orderId).set(e),yield this.sendOrderNotifications(e),yield this.clearCart(),this.orderSubmitted=!0}catch(e){console.error("Order submission failed:",e),this.formError="Failed to submit your order. Please try again."}finally{this.isLoading=!1}}})}generateOrderId(){let e=Date.now().toString(36),t=Math.random().toString(36).substring(2,8);return`ORD-${e}-${t}`.toUpperCase()}sendOrderNotifications(e){return F(this,null,function*(){try{yield this.sendEmailNotification({to:"moustafaebrahin124@gmail.com",subject:`New Order Received - ${e.id}`,text:`You have received a new order from ${e.firstName} ${e.lastName}`,html:this.generateAdminEmailHtml(e)}),yield this.sendEmailNotification({to:e.email,subject:`Your Order Confirmation - ${e.id}`,text:`Thank you for your order ${e.firstName}!`,html:this.generateCustomerEmailHtml(e)})}catch(t){console.error("Email notification failed:",t),this.emailError="Order was placed but email notification failed. Please check your email for confirmation."}})}sendEmailNotification(e){return F(this,null,function*(){if(!Hy.production){console.log("Email would be sent in production:",e);return}})}clearCart(){return F(this,null,function*(){let e=this.cartItems.map(t=>this.productService.updateCart(t.perfume,!1,"inCart"));yield Promise.all(e)})}generateAdminEmailHtml(e){return`
      <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; color: #333;">
        <h2 style="color: #2c3e50;">New Order Notification</h2>
        <p><strong>Order ID:</strong> ${e.id}</p>
        <p><strong>Customer:</strong> ${e.firstName} ${e.lastName}</p>
        <p><strong>Email:</strong> ${e.email}</p>
        <p><strong>Phone:</strong> ${e.phone}</p>
        <p><strong>Date:</strong> ${new Date(e.date).toLocaleString()}</p>

        <h3 style="margin-top: 25px; color: #2c3e50; border-bottom: 1px solid #eee; padding-bottom: 8px;">Order Details</h3>
        <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">
          <thead>
            <tr style="background-color: #f8f9fa;">
              <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">Item</th>
              <th style="padding: 12px; text-align: right; border-bottom: 2px solid #ddd;">Price</th>
              <th style="padding: 12px; text-align: center; border-bottom: 2px solid #ddd;">Qty</th>
              <th style="padding: 12px; text-align: right; border-bottom: 2px solid #ddd;">Total</th>
            </tr>
          </thead>
          <tbody>
            ${e.items.map(t=>`
              <tr>
                <td style="padding: 12px; border-bottom: 1px solid #ddd; vertical-align: top;">
                  <div style="font-weight: 500;">${t.name}</div>
                  <div style="font-size: 0.9em; color: #666;">${t.size}</div>
                </td>
                <td style="padding: 12px; text-align: right; border-bottom: 1px solid #ddd; vertical-align: top;">
                  ${this.formatCurrency(t.price)}
                </td>
                <td style="padding: 12px; text-align: center; border-bottom: 1px solid #ddd; vertical-align: top;">
                  ${t.quantity}
                </td>
                <td style="padding: 12px; text-align: right; border-bottom: 1px solid #ddd; vertical-align: top;">
                  ${this.formatCurrency(t.price*t.quantity)}
                </td>
              </tr>
            `).join("")}
          </tbody>
          <tfoot>
            <tr>
              <td colspan="3" style="padding: 12px; text-align: right; font-weight: bold; border-top: 2px solid #ddd;">Subtotal</td>
              <td style="padding: 12px; text-align: right; border-top: 2px solid #ddd;">${this.formatCurrency(e.subtotal)}</td>
            </tr>
            <tr>
              <td colspan="3" style="padding: 12px; text-align: right; font-weight: bold;">Tax</td>
              <td style="padding: 12px; text-align: right;">${this.formatCurrency(e.tax)}</td>
            </tr>
            <tr>
              <td colspan="3" style="padding: 12px; text-align: right; font-weight: bold;">Total</td>
              <td style="padding: 12px; text-align: right; font-weight: bold;">${this.formatCurrency(e.total)}</td>
            </tr>
          </tfoot>
        </table>

        <h3 style="margin-top: 25px; color: #2c3e50; border-bottom: 1px solid #eee; padding-bottom: 8px;">Shipping Information</h3>
        <p>${e.address}</p>
        <p>${e.city}, ${e.zipCode}</p>

        <h3 style="margin-top: 25px; color: #2c3e50; border-bottom: 1px solid #eee; padding-bottom: 8px;">Payment Method</h3>
        <p>${e.paymentMethod==="cash"?"Cash on Delivery":"Credit Card"}</p>

        ${e.notes?`
          <h3 style="margin-top: 25px; color: #2c3e50; border-bottom: 1px solid #eee; padding-bottom: 8px;">Customer Notes</h3>
          <p>${e.notes}</p>
        `:""}

        <p style="margin-top: 30px; color: #666; font-size: 0.9em;">
          This is an automated notification. Please contact the customer if you need any additional information.
        </p>
      </div>
    `}generateCustomerEmailHtml(e){return`
      <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; color: #333;">
        <h2 style="color: #2c3e50;">Thank You For Your Order!</h2>
        <p>Hi ${e.firstName},</p>
        <p>We've received your order and it's now being processed. Here are your order details:</p>

        <p><strong>Order ID:</strong> ${e.id}</p>
        <p><strong>Order Date:</strong> ${new Date(e.date).toLocaleString()}</p>

        <h3 style="margin-top: 25px; color: #2c3e50; border-bottom: 1px solid #eee; padding-bottom: 8px;">Your Items</h3>
        <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">
          <thead>
            <tr style="background-color: #f8f9fa;">
              <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">Item</th>
              <th style="padding: 12px; text-align: right; border-bottom: 2px solid #ddd;">Price</th>
              <th style="padding: 12px; text-align: center; border-bottom: 2px solid #ddd;">Qty</th>
              <th style="padding: 12px; text-align: right; border-bottom: 2px solid #ddd;">Total</th>
            </tr>
          </thead>
          <tbody>
            ${e.items.map(t=>`
              <tr>
                <td style="padding: 12px; border-bottom: 1px solid #ddd; vertical-align: top;">
                  <div style="font-weight: 500;">${t.name}</div>
                  <div style="font-size: 0.9em; color: #666;">${t.size}</div>
                </td>
                <td style="padding: 12px; text-align: right; border-bottom: 1px solid #ddd; vertical-align: top;">
                  ${this.formatCurrency(t.price)}
                </td>
                <td style="padding: 12px; text-align: center; border-bottom: 1px solid #ddd; vertical-align: top;">
                  ${t.quantity}
                </td>
                <td style="padding: 12px; text-align: right; border-bottom: 1px solid #ddd; vertical-align: top;">
                  ${this.formatCurrency(t.price*t.quantity)}
                </td>
              </tr>
            `).join("")}
          </tbody>
          <tfoot>
            <tr>
              <td colspan="3" style="padding: 12px; text-align: right; font-weight: bold; border-top: 2px solid #ddd;">Subtotal</td>
              <td style="padding: 12px; text-align: right; border-top: 2px solid #ddd;">${this.formatCurrency(e.subtotal)}</td>
            </tr>
            <tr>
              <td colspan="3" style="padding: 12px; text-align: right; font-weight: bold;">Tax</td>
              <td style="padding: 12px; text-align: right;">${this.formatCurrency(e.tax)}</td>
            </tr>
            <tr>
              <td colspan="3" style="padding: 12px; text-align: right; font-weight: bold;">Total</td>
              <td style="padding: 12px; text-align: right; font-weight: bold;">${this.formatCurrency(e.total)}</td>
            </tr>
          </tfoot>
        </table>

        <h3 style="margin-top: 25px; color: #2c3e50; border-bottom: 1px solid #eee; padding-bottom: 8px;">Shipping Information</h3>
        <p>${e.address}</p>
        <p>${e.city}, ${e.zipCode}</p>

        <h3 style="margin-top: 25px; color: #2c3e50; border-bottom: 1px solid #eee; padding-bottom: 8px;">Payment Method</h3>
        <p>${e.paymentMethod==="cash"?"Cash on Delivery":"Credit Card"}</p>

        <h3 style="margin-top: 25px; color: #2c3e50; border-bottom: 1px solid #eee; padding-bottom: 8px;">What's Next?</h3>
        <p>Our team is preparing your order. You'll receive another email when your order ships.</p>
        <p>If you have any questions about your order, please reply to this email.</p>

        <p style="margin-top: 30px; color: #666; font-size: 0.9em;">
          Thank you for shopping with us!
        </p>
      </div>
    `}formatCurrency(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}static \u0275fac=function(t){return new(t||n)(oe(mn),oe(eL))};static \u0275cmp=Nt({type:n,selectors:[["app-cart"]],decls:20,vars:3,consts:[[1,"cart-container"],[1,"cart-header"],[1,"cart-steps"],[1,"step","active"],[1,"step"],["class","empty-cart",4,"ngIf"],["class","order-confirmation",4,"ngIf"],["class","cart-content",4,"ngIf"],[1,"empty-cart"],[1,"empty-cart-icon"],["xmlns","http://www.w3.org/2000/svg","width","80","height","80","viewBox","0 0 24 24","fill","none","stroke","#d1a054","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["cx","10","cy","20.5","r","1"],["cx","18","cy","20.5","r","1"],["d","M2.5 2.5h3l2.7 12.4a2 2 0 0 0 2 1.6h7.7a2 2 0 0 0 2-1.6l1.6-8.4H7.1"],["routerLink","/products",1,"continue-shopping-btn"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x1","19","y1","12","x2","5","y2","12"],["points","12 19 5 12 12 5"],[1,"order-confirmation"],[1,"confirmation-card"],[1,"confirmation-icon","success"],["xmlns","http://www.w3.org/2000/svg","width","60","height","60","viewBox","0 0 24 24","fill","none","stroke","#4CAF50","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M22 11.08V12a10 10 0 1 1-5.93-9.14"],["points","22 4 12 14.01 9 11.01"],[1,"confirmation-text"],[1,"confirmation-details"],[1,"confirmation-actions"],["routerLink","/orders",1,"view-orders-btn"],[1,"cart-content"],[1,"cart-items-section"],[1,"cart-items-header"],[1,"header-details"],[1,"cart-items-list"],["class","cart-item-card",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cart-continue-shopping"],["routerLink","/products",1,"continue-shopping-link"],[1,"checkout-summary"],[1,"summary-card"],[1,"summary-title"],[1,"summary-row"],[1,"free-shipping"],[1,"summary-total"],[1,"total-amount"],[1,"checkout-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","firstName"],["type","text","id","firstName","formControlName","firstName"],["class","error-message",4,"ngIf"],["for","lastName"],["type","text","id","lastName","formControlName","lastName"],["for","email"],["type","email","id","email","formControlName","email"],["for","phone"],["type","tel","id","phone","formControlName","phone"],["for","address"],["type","text","id","address","formControlName","address"],[1,"form-row"],["for","city"],["type","text","id","city","formControlName","city"],["for","zipCode"],["type","text","id","zipCode","formControlName","zipCode"],["for","notes"],["id","notes","formControlName","notes","rows","3"],[1,"payment-methods"],[1,"payment-options"],[1,"payment-option"],["type","radio","name","payment","value","cash",3,"ngModelChange","ngModel","ngModelOptions"],[1,"payment-content"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["cx","12","cy","12","r","10"],["d","M8 14s1.5 2 4 2 4-2 4-2"],["x1","9","y1","9","x2","9.01","y2","9"],["x1","15","y1","9","x2","15.01","y2","9"],[1,"payment-option","disabled"],["type","radio","name","payment","value","card","disabled",""],["x","1","y","4","width","22","height","16","rx","2","ry","2"],["x1","1","y1","10","x2","23","y2","10"],["type","submit",1,"checkout-btn",3,"disabled"],[4,"ngIf"],["class","loading-spinner",4,"ngIf"],[1,"secure-checkout"],["d","M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"],[1,"cart-item-card"],[1,"item-image-container"],[1,"item-image",3,"src","alt"],["aria-label","Remove item",1,"remove-item-btn",3,"click"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"item-details"],[1,"item-name"],[1,"item-brand"],[1,"item-size"],[1,"item-price"],[1,"item-quantity-control"],[1,"quantity-btn","minus",3,"disabled"],[1,"quantity-value"],[1,"quantity-btn","plus"],[1,"item-total-price"],[1,"error-message"],[1,"loading-spinner"]],template:function(t,r){t&1&&(M(0,"div",0)(1,"div",1)(2,"h1"),B(3,"Your Fragrance Collection"),T(),M(4,"div",2)(5,"div",3)(6,"span"),B(7,"1"),T(),B(8," Your Selection"),T(),M(9,"div",4)(10,"span"),B(11,"2"),T(),B(12," Checkout"),T(),M(13,"div",4)(14,"span"),B(15,"3"),T(),B(16," Confirmation"),T()()(),qe(17,PW,15,0,"div",5)(18,OW,17,1,"div",6)(19,zW,116,51,"div",7),T()),t&2&&(Q(17),pe("ngIf",r.cartItems.length===0&&!r.orderSubmitted),Q(),pe("ngIf",r.orderSubmitted),Q(),pe("ngIf",r.cartItems.length>0&&!r.orderSubmitted))},dependencies:[fo,ho,sc,QV,Uy,Lx,fu,$V,ca,jx,Bx,Np],styles:['.cart-container[_ngcontent-%COMP%]{max-width:1200px;margin:2rem auto;padding:0 1.5rem;font-family:Poppins,sans-serif;color:#5d4037}.cart-header[_ngcontent-%COMP%]{text-align:center;margin:6rem}.cart-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.8rem;font-weight:600;margin-bottom:1.5rem;letter-spacing:-.5px;color:#5d4037;text-transform:uppercase;font-family:Playfair Display,serif}.cart-steps[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:3rem;position:relative}.cart-steps[_ngcontent-%COMP%]:before{content:"";position:absolute;top:16px;left:50%;right:50%;height:1px;background:#e0e0e0;z-index:1}.cart-steps[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:0 3rem;position:relative;z-index:2;color:#999}.cart-steps[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:36px;height:36px;border-radius:50%;background:#f8f8f8;color:#999;margin-bottom:.75rem;font-weight:600;border:2px solid #e0e0e0;transition:all .3s ease}.cart-steps[_ngcontent-%COMP%]   .step.active[_ngcontent-%COMP%]{color:#5d4037}.cart-steps[_ngcontent-%COMP%]   .step.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#d4af37;color:#fff;border-color:#d4af37;box-shadow:0 4px 8px #d4af3733}.cart-steps[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]:not(:last-child):after{content:"";position:absolute;top:18px;right:0;width:6rem;height:1px;background:#e0e0e0}.empty-cart[_ngcontent-%COMP%]{text-align:center;padding:5rem 0;max-width:600px;margin:0 auto}.empty-cart[_ngcontent-%COMP%]   .empty-cart-icon[_ngcontent-%COMP%]{margin-bottom:2rem;opacity:.8}.empty-cart[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:1rem;color:#5d4037;font-weight:500}.empty-cart[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:1.2rem;margin-bottom:2.5rem;line-height:1.6}.continue-shopping-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:1rem 2rem;background:#d4af37;color:#fff;text-decoration:none;border-radius:30px;font-weight:500;transition:all .3s ease;font-size:1.1rem;box-shadow:0 4px 12px #d4af3733}.continue-shopping-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-right:.75rem;transition:transform .3s ease}.continue-shopping-btn[_ngcontent-%COMP%]:hover{background:#ba9828;transform:translateY(-2px);box-shadow:0 6px 16px #d4af374d}.continue-shopping-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:translate(-4px)}.order-confirmation[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:5rem 0;animation:_ngcontent-%COMP%_fadeIn .5s ease}.confirmation-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:4rem;text-align:center;max-width:700px;width:100%;box-shadow:0 15px 40px #00000014;border:1px solid rgba(212,175,55,.2)}.confirmation-card[_ngcontent-%COMP%]   .confirmation-icon[_ngcontent-%COMP%]{margin-bottom:2rem}.confirmation-card[_ngcontent-%COMP%]   .confirmation-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke-width:1.5}.confirmation-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.2rem;margin-bottom:1.5rem;color:#5d4037;font-weight:600}.confirmation-card[_ngcontent-%COMP%]   .confirmation-text[_ngcontent-%COMP%]{font-size:1.2rem;color:#444;margin-bottom:1rem;line-height:1.6}.confirmation-card[_ngcontent-%COMP%]   .confirmation-details[_ngcontent-%COMP%]{color:#666;margin-bottom:3rem;line-height:1.6;font-size:1.1rem}.confirmation-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1.5rem;margin-top:2rem}.confirmation-actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:.9rem 2rem;border-radius:30px;font-weight:500;text-decoration:none;transition:all .3s ease;font-size:1.05rem}.confirmation-actions[_ngcontent-%COMP%]   .view-orders-btn[_ngcontent-%COMP%]{background:#5d4037;color:#fff;box-shadow:0 4px 12px #5d403733}.confirmation-actions[_ngcontent-%COMP%]   .view-orders-btn[_ngcontent-%COMP%]:hover{background:#432e28;transform:translateY(-2px);box-shadow:0 6px 16px #5d40374d}.confirmation-actions[_ngcontent-%COMP%]   .continue-shopping-btn[_ngcontent-%COMP%]{background:#fff;color:#5d4037;border:1px solid #5d4037}.confirmation-actions[_ngcontent-%COMP%]   .continue-shopping-btn[_ngcontent-%COMP%]:hover{background:#5d40370d;transform:translateY(-2px)}.cart-content[_ngcontent-%COMP%]{display:flex;gap:3rem;animation:_ngcontent-%COMP%_fadeIn .5s ease}@media (max-width: 992px){.cart-content[_ngcontent-%COMP%]{flex-direction:column}}.cart-items-section[_ngcontent-%COMP%]{flex:2}.cart-items-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem 0;border-bottom:1px solid rgba(93,64,55,.1);margin-bottom:1rem}.cart-items-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:600;color:#5d4037}.cart-items-header[_ngcontent-%COMP%]   .header-details[_ngcontent-%COMP%]{display:flex;gap:4rem}.cart-items-header[_ngcontent-%COMP%]   .header-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#666;font-size:.95rem;min-width:70px;text-align:center;font-weight:500}.cart-items-list[_ngcontent-%COMP%]{margin-bottom:3rem}.cart-item-card[_ngcontent-%COMP%]{display:flex;align-items:center;padding:2rem 0;border-bottom:1px solid rgba(93,64,55,.05);transition:all .3s ease}.cart-item-card[_ngcontent-%COMP%]:hover{background:#d4af3708}.cart-item-card[_ngcontent-%COMP%]:last-child{border-bottom:none}.item-image-container[_ngcontent-%COMP%]{width:120px;height:120px;margin-right:2rem;position:relative;flex-shrink:0;border-radius:12px;overflow:hidden;background:#f9f9f9}.item-image-container[_ngcontent-%COMP%]   .item-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;mix-blend-mode:multiply;padding:1rem}.item-image-container[_ngcontent-%COMP%]   .remove-item-btn[_ngcontent-%COMP%]{position:absolute;top:-6px;right:-6px;width:28px;height:28px;background:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 3px 10px #0000001a;border:none;cursor:pointer;transition:all .2s ease;z-index:2}.item-image-container[_ngcontent-%COMP%]   .remove-item-btn[_ngcontent-%COMP%]:hover{background:#f8f8f8;transform:scale(1.1)}.item-image-container[_ngcontent-%COMP%]   .remove-item-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{stroke:#5d4037}.item-image-container[_ngcontent-%COMP%]   .remove-item-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px;stroke:#666;transition:stroke .2s ease}.item-details[_ngcontent-%COMP%]{flex:1;min-width:0}.item-details[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;margin-bottom:.5rem;color:#5d4037;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.item-details[_ngcontent-%COMP%]   .item-brand[_ngcontent-%COMP%]{color:#666;font-size:.95rem;margin-bottom:.75rem;text-transform:uppercase;letter-spacing:.5px}.item-details[_ngcontent-%COMP%]   .item-size[_ngcontent-%COMP%], .item-details[_ngcontent-%COMP%]   .item-price[_ngcontent-%COMP%]{color:#888;font-size:.95rem;margin-bottom:.25rem}.item-quantity-control[_ngcontent-%COMP%]{display:flex;align-items:center;margin:0 2rem}.item-quantity-control[_ngcontent-%COMP%]   .quantity-btn[_ngcontent-%COMP%]{width:36px;height:36px;background:#fff;border:1px solid #e0e0e0;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;font-size:1.1rem;font-weight:500}.item-quantity-control[_ngcontent-%COMP%]   .quantity-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#f8f8f8;border-color:#ccc}.item-quantity-control[_ngcontent-%COMP%]   .quantity-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.item-quantity-control[_ngcontent-%COMP%]   .quantity-btn.minus[_ngcontent-%COMP%]{color:#999}.item-quantity-control[_ngcontent-%COMP%]   .quantity-btn.plus[_ngcontent-%COMP%]{color:#d4af37;border-color:#d4af3780}.item-quantity-control[_ngcontent-%COMP%]   .quantity-value[_ngcontent-%COMP%]{margin:0 1rem;min-width:24px;text-align:center;font-weight:500;font-size:1.1rem}.item-total-price[_ngcontent-%COMP%]{min-width:100px;text-align:right;font-weight:600;color:#5d4037;font-size:1.1rem}.cart-continue-shopping[_ngcontent-%COMP%]{margin-top:3rem;text-align:center}.cart-continue-shopping[_ngcontent-%COMP%]   .continue-shopping-link[_ngcontent-%COMP%]{display:inline-flex;align-items:center;color:#d4af37;text-decoration:none;font-weight:500;font-size:1.1rem;transition:all .2s ease;padding:.5rem 1rem;border-radius:4px}.cart-continue-shopping[_ngcontent-%COMP%]   .continue-shopping-link[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-right:.75rem;transition:transform .2s ease}.cart-continue-shopping[_ngcontent-%COMP%]   .continue-shopping-link[_ngcontent-%COMP%]:hover{color:#b29126;background:#d4af371a}.cart-continue-shopping[_ngcontent-%COMP%]   .continue-shopping-link[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:translate(-5px)}.checkout-summary[_ngcontent-%COMP%]{flex:1;position:relative}.summary-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:2rem;box-shadow:0 10px 30px #0000000d;position:sticky;top:1rem;border:1px solid rgba(93,64,55,.1)}.summary-title[_ngcontent-%COMP%]{color:#5d4037;font-size:1.5rem;font-weight:600;margin-bottom:1.5rem;padding-bottom:1.5rem;border-bottom:1px solid rgba(93,64,55,.1)}.summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:1rem;color:#666;font-size:1rem}.summary-row[_ngcontent-%COMP%]   .free-shipping[_ngcontent-%COMP%]{color:#4caf50;font-weight:500}.summary-total[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:2rem 0;padding-top:1.5rem;border-top:1px solid rgba(93,64,55,.1);font-weight:600;font-size:1.1rem;color:#5d4037}.summary-total[_ngcontent-%COMP%]   .total-amount[_ngcontent-%COMP%]{font-size:1.3rem;color:#8d6e63}.checkout-form[_ngcontent-%COMP%]{margin-top:2rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem;position:relative}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.75rem;color:#5d4037;font-size:.95rem;font-weight:500}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.9rem 1.2rem;border:1px solid #e0e0e0;border-radius:8px;font-family:inherit;font-size:1rem;transition:all .3s ease;background:#f9f9f9}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#d4af37;box-shadow:0 0 0 3px #d4af371a;background:#fff}.form-group[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea.invalid[_ngcontent-%COMP%]{border-color:#e74c3c}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.form-row[_ngcontent-%COMP%]{display:flex;gap:1.5rem}.form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1}.error-message[_ngcontent-%COMP%]{color:#e74c3c;font-size:.85rem;margin-top:.5rem;animation:_ngcontent-%COMP%_fadeIn .3s ease}.payment-methods[_ngcontent-%COMP%]{margin:2.5rem 0}.payment-methods[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#5d4037;font-size:1.1rem;margin-bottom:1rem;font-weight:600}.payment-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.payment-option[_ngcontent-%COMP%]{position:relative;cursor:pointer}.payment-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{position:absolute;opacity:0;width:0;height:0}.payment-option[_ngcontent-%COMP%]   .payment-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.5rem;border:1px solid #e0e0e0;border-radius:8px;transition:all .3s ease;background:#f9f9f9}.payment-option[_ngcontent-%COMP%]   .payment-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#555;font-weight:500}.payment-option[_ngcontent-%COMP%]   .payment-content[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#999;transition:all .3s ease}.payment-option[_ngcontent-%COMP%]:hover   .payment-content[_ngcontent-%COMP%]{border-color:#ccc;background:#fff}.payment-option.selected[_ngcontent-%COMP%]   .payment-content[_ngcontent-%COMP%]{border-color:#d4af37;background:#d4af370d}.payment-option.selected[_ngcontent-%COMP%]   .payment-content[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#d4af37}.payment-option.disabled[_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed}.payment-option.disabled[_ngcontent-%COMP%]   .payment-content[_ngcontent-%COMP%]{background:#f5f5f5}.checkout-btn[_ngcontent-%COMP%]{width:100%;padding:1.2rem;background:#d4af37;color:#fff;border:none;border-radius:8px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:all .3s ease;margin-top:1rem;position:relative;overflow:hidden;box-shadow:0 4px 12px #d4af374d}.checkout-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#ba9828;transform:translateY(-2px);box-shadow:0 6px 16px #d4af3766}.checkout-btn[_ngcontent-%COMP%]:disabled{background:#ddd;cursor:not-allowed;box-shadow:none}.loading-spinner[_ngcontent-%COMP%]{display:inline-block;width:20px;height:20px;border:3px solid rgba(255,255,255,.3);border-radius:50%;border-top-color:#fff;animation:_ngcontent-%COMP%_spin 1s ease-in-out infinite}.secure-checkout[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;color:#666;font-size:.9rem;margin:1.5rem 0;padding-top:1.5rem;border-top:1px solid rgba(93,64,55,.1)}.secure-checkout[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-right:.5rem;color:#4caf50}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media (max-width: 768px){.cart-header[_ngcontent-%COMP%]{margin:2rem 0 3rem}.cart-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.2rem}.cart-steps[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]{padding:0 1.5rem;font-size:.9rem}.cart-steps[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:30px;height:30px}.cart-steps[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]:not(:last-child):after{width:3rem}.cart-item-card[_ngcontent-%COMP%]{flex-wrap:wrap;padding:1.5rem 0;position:relative}.item-image-container[_ngcontent-%COMP%]{width:80px;height:80px;margin-right:1rem}.item-details[_ngcontent-%COMP%]{flex:1 0 calc(100% - 100px);margin-bottom:1rem}.item-quantity-control[_ngcontent-%COMP%]{margin:.5rem 0 0;order:3;width:100%;justify-content:flex-start}.item-total-price[_ngcontent-%COMP%]{position:absolute;right:0;bottom:1.5rem}.confirmation-card[_ngcontent-%COMP%]{padding:2rem}.confirmation-actions[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}}@media (max-width: 576px){.cart-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem}.cart-steps[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]{padding:0 1rem}.cart-steps[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]:not(:last-child):after{width:2rem}.summary-card[_ngcontent-%COMP%], .confirmation-card[_ngcontent-%COMP%]{padding:1.5rem}.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}}']})};var Wy=class n{constructor(e,t){this.firestore=e;this.auth=t;this.loadCart()}cartSubject=new Ut([]);cart$=this.cartSubject.asObservable();loadCart(){this.auth.user.pipe(nt(e=>e?this.firestore.collection(`users/${e.uid}/cart`).valueChanges({idField:"id"}):ue([]))).subscribe(e=>{this.cartSubject.next(e)})}getItems(){return this.cart$}addItem(e,t="standard"){return F(this,null,function*(){let r=yield this.auth.currentUser;if(r){let i=this.firestore.collection(`users/${r.uid}/cart`),s=yield i.ref.where("perfume.id","==",e.id).where("size","==",t).get();if(s.empty)yield i.add({perfume:e,quantity:1,size:t});else{let a=s.docs[0],c=a.data().quantity;yield a.ref.update({quantity:c+1})}}else{let i=this.cartSubject.value,o=i.find(s=>s.perfume.id===e.id&&s.size===t);o?o.quantity+=1:i.push({perfume:e,quantity:1,size:t}),this.cartSubject.next(i),localStorage.setItem("guestCart",JSON.stringify(i))}})}updateQuantity(e,t,r="standard"){return F(this,null,function*(){let i=yield this.auth.currentUser;if(i){let a=yield this.firestore.collection(`users/${i.uid}/cart`).ref.where("perfume.id","==",e).where("size","==",r).get();a.empty||(yield a.docs[0].ref.update({quantity:t}))}else{let o=this.cartSubject.value,s=o.find(a=>a.perfume.id===e&&a.size===r);s&&(s.quantity=t,this.cartSubject.next(o),localStorage.setItem("guestCart",JSON.stringify(o)))}})}removeItem(e,t="standard"){return F(this,null,function*(){let r=yield this.auth.currentUser;if(r){let s=yield this.firestore.collection(`users/${r.uid}/cart`).ref.where("perfume.id","==",e).where("size","==",t).get();s.empty||(yield s.docs[0].ref.delete())}else{let i=this.cartSubject.value.filter(o=>!(o.perfume.id===e&&o.size===t));this.cartSubject.next(i),localStorage.setItem("guestCart",JSON.stringify(i))}})}clearCart(){return F(this,null,function*(){let e=yield this.auth.currentUser;if(e){let r=yield this.firestore.collection(`users/${e.uid}/cart`).ref.get(),i=this.firestore.firestore.batch();r.docs.forEach(o=>{i.delete(o.ref)}),yield i.commit()}else this.cartSubject.next([]),localStorage.removeItem("guestCart")})}getTotalItems(){return this.cart$.pipe(ie(e=>e.reduce((t,r)=>t+r.quantity,0)))}static \u0275fac=function(t){return new(t||n)(K(ta),K(fm))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})};function qW(n,e){if(n&1){let t=Fn();M(0,"div",29),de("click",function(){let i=Ze(t).$implicit,o=Re();return Xe(o.selectImage(i))}),T()}if(n&2){let t=e.$implicit,r=Re();Xu("background-image","url("+t+")"),pt("active",t===r.selectedImage)}}function HW(n,e){if(n&1&&(M(0,"span",30),se(1,"i",31),B(2),T()),n&2){let t=e.$implicit;Q(2),en(" ",t," ")}}function GW(n,e){if(n&1){let t=Fn();M(0,"button",32),de("click",function(){let i=Ze(t).$implicit,o=Re();return Xe(o.selectSize(i))}),B(1),T()}if(n&2){let t=e.$implicit,r=Re();pt("selected",r.selectedSize===t),Q(),en(" ",t,"ml ")}}var Ky=class n{perfume;isOpen=!1;closed=new Ke;addedToCart=new Ke;selectedImage="";selectedSize="";productSerivce=z(Zo);ngOnInit(){this.perfume&&this.perfume.images&&this.perfume.images.length>0&&(this.selectedImage=this.perfume.images[0]),this.perfume&&this.perfume.sizes&&this.perfume.sizes.length>0&&(this.selectedSize=this.perfume.sizes[0])}closeDetails(){this.closed.emit()}selectImage(e){this.selectedImage=e}prevImage(){let t=(this.perfume.images.indexOf(this.selectedImage)-1+this.perfume.images.length)%this.perfume.images.length;this.selectedImage=this.perfume.images[t]}nextImage(){let t=(this.perfume.images.indexOf(this.selectedImage)+1)%this.perfume.images.length;this.selectedImage=this.perfume.images[t]}selectSize(e){this.selectedSize=e}addToCart(){this.addedToCart.emit(me(Y({},this.perfume),{selectedSize:this.selectedSize}))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Nt({type:n,selectors:[["app-perfume-details"]],inputs:{perfume:"perfume",isOpen:"isOpen"},outputs:{closed:"closed",addedToCart:"addedToCart"},decls:41,vars:16,consts:[[1,"perfume-details-overlay",3,"click"],[1,"perfume-details-container",3,"click"],["aria-label","Close details",1,"close-button",3,"click"],["viewBox","0 0 24 24"],["d","M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"],[1,"perfume-images"],[1,"main-image"],[1,"image-nav"],["aria-label","Previous image",1,"nav-button","prev",3,"click"],["d","M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"],["aria-label","Next image",1,"nav-button","next",3,"click"],["d","M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"],[1,"thumbnail-container"],["class","thumbnail",3,"backgroundImage","active","click",4,"ngFor","ngForOf"],[1,"perfume-info"],[1,"perfume-header"],[1,"perfume-name"],[1,"perfume-brand"],[1,"perfume-description"],[1,"perfume-specs"],[1,"features"],["class","feature-tag",4,"ngFor","ngForOf"],[1,"price-section"],[1,"price"],[1,"size-options"],["class","size-option",3,"selected","click",4,"ngFor","ngForOf"],[1,"action-buttons"],[1,"add-to-cart",3,"click"],["d","M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"],[1,"thumbnail",3,"click"],[1,"feature-tag"],[1,"feature-icon"],[1,"size-option",3,"click"]],template:function(t,r){t&1&&(M(0,"div",0),de("click",function(){return r.closeDetails()}),M(1,"div",1),de("click",function(o){return o.stopPropagation()}),M(2,"button",2),de("click",function(){return r.closeDetails()}),bt(),M(3,"svg",3),se(4,"path",4),T()(),Rt(),M(5,"div",5)(6,"div",6)(7,"div",7)(8,"button",8),de("click",function(){return r.prevImage()}),bt(),M(9,"svg",3),se(10,"path",9),T()(),Rt(),M(11,"button",10),de("click",function(){return r.nextImage()}),bt(),M(12,"svg",3),se(13,"path",11),T()()()(),Rt(),M(14,"div",12),qe(15,qW,1,4,"div",13),T()(),M(16,"div",14)(17,"div",15)(18,"h1",16),B(19),_r(20,"uppercase"),T(),M(21,"p",17),B(22),T()(),M(23,"div",18)(24,"p"),B(25),T()(),se(26,"hr"),M(27,"div",19)(28,"div",20),qe(29,HW,3,1,"span",21),T()(),M(30,"div",22)(31,"div",23),B(32),_r(33,"currency"),T(),M(34,"div",24),qe(35,GW,2,3,"button",25),T()(),M(36,"div",26)(37,"button",27),de("click",function(){return r.addToCart()}),bt(),M(38,"svg",3),se(39,"path",28),T(),B(40," Add to Cart "),T()()()()()),t&2&&(pt("open",r.isOpen),Q(6),Xu("background-image","url("+r.selectedImage+")"),Q(9),pe("ngForOf",r.perfume.images),Q(4),rt(wp(20,11,r.perfume.name)),Q(3),rt(r.perfume.category),Q(3),rt(r.perfume.details),Q(4),pe("ngForOf",r.perfume.features),Q(3),rt(Q1(33,13,r.perfume.price,"EGP")),Q(3),pe("ngForOf",r.perfume.sizes))},dependencies:[fo,Op,Np],styles:[".perfume-details-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#000c;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);z-index:1050;display:flex;justify-content:center;align-items:center;opacity:0;visibility:hidden;transition:all .4s cubic-bezier(.22,1,.36,1)}.perfume-details-overlay.open[_ngcontent-%COMP%]{opacity:1;visibility:visible}.perfume-details-container[_ngcontent-%COMP%]{position:relative;width:90%;max-width:1200px;max-height:90vh;background:linear-gradient(145deg,#fff,#f8f8f8);border-radius:20px;box-shadow:0 20px 50px #0000004d;display:grid;grid-template-columns:1fr 1fr;overflow:hidden;transform:translateY(20px);transition:transform .4s cubic-bezier(.22,1,.36,1)}.open[_ngcontent-%COMP%]   .perfume-details-container[_ngcontent-%COMP%]{transform:translateY(0)}@media (max-width: 992px){.perfume-details-container[_ngcontent-%COMP%]{grid-template-columns:1fr;max-height:95vh;overflow-y:auto}}.close-button[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;width:40px;height:40px;background:#0000001a;border:none;border-radius:50%;display:flex;justify-content:center;align-items:center;cursor:pointer;z-index:10;transition:all .3s ease}.close-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;fill:#333}.close-button[_ngcontent-%COMP%]:hover{background:#0003;transform:rotate(90deg)}.perfume-images[_ngcontent-%COMP%]{position:relative;padding:40px;display:flex;flex-direction:column;align-items:center;justify-content:center;background:linear-gradient(135deg,#f5f5f5,#e9e9e9)}@media (max-width: 992px){.perfume-images[_ngcontent-%COMP%]{padding:20px}}.main-image[_ngcontent-%COMP%]{width:100%;height:400px;background-size:contain;background-position:center;background-repeat:no-repeat;position:relative;transition:background-image .5s ease-in-out;box-shadow:0 4px 20px #0000001a;border-radius:20px}@media (max-width: 768px){.main-image[_ngcontent-%COMP%]{height:300px}}.main-image[_ngcontent-%COMP%]:hover{box-shadow:0 8px 30px #0003;transform:scale(1.02)}.image-nav[_ngcontent-%COMP%]{position:absolute;top:50%;left:0;right:0;display:flex;justify-content:space-between;transform:translateY(-50%);padding:0 20px}.image-nav[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]{width:50px;height:50px;background:#fffc;border:none;border-radius:50%;display:flex;justify-content:center;align-items:center;cursor:pointer;box-shadow:0 4px 10px #0000001a;transition:all .3s ease}.image-nav[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;fill:#333}.image-nav[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]:hover{background:#fff;transform:scale(1.1)}.image-nav[_ngcontent-%COMP%]   .nav-button.prev[_ngcontent-%COMP%]{margin-left:-25px}.image-nav[_ngcontent-%COMP%]   .nav-button.next[_ngcontent-%COMP%]{margin-right:-25px}.thumbnail-container[_ngcontent-%COMP%]{display:flex;gap:15px;margin-top:30px;flex-wrap:wrap;justify-content:center;max-width:100%;overflow-x:auto;padding:10px 0}@media (max-width: 768px){.thumbnail-container[_ngcontent-%COMP%]{gap:10px;margin-top:20px}}.thumbnail[_ngcontent-%COMP%]{width:80px;height:80px;background-size:cover;background-position:center;border-radius:8px;cursor:pointer;border:2px solid transparent;transition:all .3s ease;box-shadow:0 4px 8px #0000001a}@media (max-width: 768px){.thumbnail[_ngcontent-%COMP%]{width:60px;height:60px}}.thumbnail[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 8px 15px #00000026}.thumbnail.active[_ngcontent-%COMP%]{border:2px solid #9b59b6;transform:scale(1.05)}.perfume-info[_ngcontent-%COMP%]{padding:40px;overflow-y:auto;display:flex;flex-direction:column}@media (max-width: 992px){.perfume-info[_ngcontent-%COMP%]{padding:30px}}@media (max-width: 768px){.perfume-info[_ngcontent-%COMP%]{padding:20px}}.perfume-header[_ngcontent-%COMP%]{margin-bottom:30px;border-bottom:1px solid #eee;padding-bottom:20px}.perfume-header[_ngcontent-%COMP%]   .perfume-name[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:700;color:#2c3e50;margin:0 0 5px;line-height:1.2}@media (max-width: 768px){.perfume-header[_ngcontent-%COMP%]   .perfume-name[_ngcontent-%COMP%]{font-size:1.8rem}}.perfume-header[_ngcontent-%COMP%]   .perfume-brand[_ngcontent-%COMP%]{position:absolute;background:#d4af37;color:#fff;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:1px;box-shadow:0 2px 8px #0000001a}.perfume-header[_ngcontent-%COMP%]   .perfume-origin[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#7f8c8d;font-size:.9rem}.perfume-header[_ngcontent-%COMP%]   .perfume-origin[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px;fill:#7f8c8d}.perfume-description[_ngcontent-%COMP%]{margin-bottom:30px;line-height:1.6;color:#555}.perfume-specs[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:30px}.perfume-specs[_ngcontent-%COMP%]   .features[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin:16px 0}.perfume-specs[_ngcontent-%COMP%]   .features[_ngcontent-%COMP%]   .feature-tag[_ngcontent-%COMP%]{display:flex;align-items:center;background:#f9f5f2;padding:6px 12px;border-radius:20px;font-size:.75rem;color:#5d4037}.perfume-specs[_ngcontent-%COMP%]   .features[_ngcontent-%COMP%]   .feature-tag[_ngcontent-%COMP%]   .feature-icon[_ngcontent-%COMP%]{margin-right:6px;font-size:.8rem}@media (max-width: 768px){.perfume-specs[_ngcontent-%COMP%]{grid-template-columns:1fr}}.perfume-specs[_ngcontent-%COMP%]   .spec-item[_ngcontent-%COMP%]   .spec-label[_ngcontent-%COMP%]{display:block;font-size:.8rem;text-transform:uppercase;color:#7f8c8d;letter-spacing:.5px;margin-bottom:5px}.perfume-specs[_ngcontent-%COMP%]   .spec-item[_ngcontent-%COMP%]   .spec-value[_ngcontent-%COMP%]{font-size:1rem;color:#2c3e50;font-weight:500}.price-section[_ngcontent-%COMP%]{margin-bottom:30px;display:flex;justify-content:space-between;align-items:center}.price-section[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#333}.price-section[_ngcontent-%COMP%]   .size-options[_ngcontent-%COMP%]{display:flex;gap:10px}.price-section[_ngcontent-%COMP%]   .size-options[_ngcontent-%COMP%]   .size-option[_ngcontent-%COMP%]{padding:8px 15px;background:#f5f5f5;border:none;border-radius:20px;cursor:pointer;transition:all .3s ease;font-size:.9rem}.price-section[_ngcontent-%COMP%]   .size-options[_ngcontent-%COMP%]   .size-option[_ngcontent-%COMP%]:hover{background:#e0e0e0}.price-section[_ngcontent-%COMP%]   .size-options[_ngcontent-%COMP%]   .size-option.selected[_ngcontent-%COMP%]{background:#9b59b6;color:#fff}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:15px;margin-top:auto}.action-buttons[_ngcontent-%COMP%]   .add-to-cart[_ngcontent-%COMP%]{flex:1;padding:15px;background:#5d4037;color:#fff;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:10px;transition:all .3s ease;box-shadow:0 4px 15px #9b59b64d}.action-buttons[_ngcontent-%COMP%]   .add-to-cart[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;fill:#fff}.action-buttons[_ngcontent-%COMP%]   .add-to-cart[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px #9b59b666}.action-buttons[_ngcontent-%COMP%]   .add-to-cart[_ngcontent-%COMP%]:active{transform:translateY(0)}.action-buttons[_ngcontent-%COMP%]   .wishlist[_ngcontent-%COMP%]{width:50px;background:#f5f5f5;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center}.action-buttons[_ngcontent-%COMP%]   .wishlist[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;fill:#7f8c8d;transition:fill .3s ease}.action-buttons[_ngcontent-%COMP%]   .wishlist[_ngcontent-%COMP%]:hover{background:#e0e0e0}.action-buttons[_ngcontent-%COMP%]   .wishlist[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{fill:#e74c3c}"]})};function KW(n,e){n&1&&(M(0,"div",29),B(1,"New"),T())}function QW(n,e){if(n&1&&(M(0,"span",30),se(1,"i",31),B(2),T()),n&2){let t=e.$implicit,r=Re(2);Q(),F1(r.getFeatureIcon(t)),Q(),en(" ",t," ")}}function YW(n,e){if(n&1){let t=Fn();M(0,"div")(1,"select",32),_i("ngModelChange",function(i){Ze(t);let o=Re(2);return co(o.selectedSize,i)||(o.selectedSize=i),Xe(i)}),M(2,"option",33),B(3),T()(),M(4,"button",34),de("click",function(){Ze(t);let i=Re(2);return Xe(i.addToCart(i.perfume))}),se(5,"i",35),B(6," Add to Cart "),T()()}if(n&2){let t=Re(2);Q(),vi("ngModel",t.selectedSize),Q(),pe("value",t.availableSizes[1]),Q(),en("",t.availableSizes[1],"ml")}}function ZW(n,e){if(n&1){let t=Fn();M(0,"button",36),de("click",function(){Ze(t);let i=Re(2);return Xe(i.navigateToCart())}),se(1,"i",35),B(2," Added! Go to Cart "),T(),M(3,"button",37),de("click",function(){Ze(t);let i=Re(2);return Xe(i.removeFromCart(i.perfume))}),B(4,"Remove From the Cart"),T()}}function XW(n,e){if(n&1){let t=Fn();M(0,"div",3)(1,"div",4),de("click",function(){Ze(t);let i=Re();return Xe(i.openDetails(i.perfume))}),se(2,"div",5),M(3,"span"),B(4,"open"),T(),se(5,"img",6),qe(6,KW,2,0,"div",7),T(),M(7,"div",8)(8,"div",9)(9,"div",10)(10,"h3"),B(11),_r(12,"uppercase"),T(),M(13,"div",11)(14,"div",12),B(15),T(),M(16,"button",13),de("click",function(){Ze(t);let i=Re();return Xe(i.toggleWishlist(i.perfume))}),bt(),M(17,"svg",14),se(18,"path",15),T()()()()(),Rt(),M(19,"p",16),B(20),T(),M(21,"div",17),qe(22,QW,3,3,"span",18),T(),M(23,"div",19)(24,"div",20),de("click",function(){Ze(t);let i=Re();return Xe(i.toggleNotes())}),M(25,"h4"),B(26,"Fragrance Notes "),M(27,"i",21),B(28),T()(),M(29,"div",22)(30,"div",23)(31,"span",24),B(32,"Top:"),T(),M(33,"span",25),B(34),T()(),M(35,"div",23)(36,"span",24),B(37,"Middle:"),T(),M(38,"span",25),B(39),T()(),M(40,"div",23)(41,"span",24),B(42,"Base:"),T(),M(43,"span",25),B(44),T()()()()(),M(45,"div",26)(46,"span",27),B(47),T(),qe(48,YW,7,3,"div",28)(49,ZW,5,0,"ng-template",null,0,Y1),T()()()}if(n&2){let t=H1(50),r=Re();Q(5),pe("src",r.perfume.images[0],Yu)("alt",r.perfume.name),Q(),pe("ngIf",r.perfume.isNew),Q(5),rt(wp(12,18,r.perfume.name)),Q(4),rt(r.perfume.category),Q(),pt("filled",r.perfume.inWishlist),Q(4),rt(r.perfume.description),Q(2),pe("ngForOf",r.perfume.features),Q(6),rt(r.showNotes?"\u25B2":"\u25BC"),Q(),pt("expanded",r.showNotes),Q(5),rt(r.perfume.notes.top.join(", ")),Q(5),rt(r.perfume.notes.middle.join(", ")),Q(5),rt(r.perfume.notes.base.join(", ")),Q(3),rt(r.perfume.price.toFixed(2)),Q(),pe("ngIf",!r.addedToCart)("ngIfElse",t)}}var Qy=class n{perfume;showDetails=!1;showNotes=!1;addedToCart=!1;selectedSize="50";availableSizes=["30","50","100"];router=z($t);cartService=z(Wy);perfumeService=z(mn);productSerivce=z(Zo);ngOnInit(){this.addedToCart=this.perfume?.inCart||!1}toggleNotes(){this.showNotes=!this.showNotes}removeFromCart(e){this.productSerivce.updateCart(e,!1,"inCart")}addToCart(e){this.productSerivce.updateCart(e,!0,"inCart")}toggleWishlist(e){e.id&&(e.inWishlist=!e.inWishlist,e.inWishlist?this.productSerivce.addToWishlist(e):this.productSerivce.removeFromWishlist(e))}navigateToCart(){this.router.navigate(["/cart"])}getFeatureIcon(e){return{Lemon:"icon-droplet",top:"icon-clock",Unisex:"icon-genderless",Organic:"icon-leaf",Vegan:"icon-seedling","Limited Edition":"icon-star"}[e]||"icon-circle"}openDetails(e){this.showDetails=!this.showDetails}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Nt({type:n,selectors:[["perfume-card"]],inputs:{perfume:"perfume"},decls:2,vars:3,consts:[["addedState",""],["class","perfume-card",4,"ngIf"],[3,"closed","addedToCart","perfume","isOpen"],[1,"perfume-card"],[1,"perfume-image",3,"click"],[1,"image-overlay"],["loading","lazy",3,"src","alt"],["class","perfume-badge",4,"ngIf"],[1,"perfume-details"],[1,"header-section"],[1,"perfume-type"],[1,"category","d-flex","align-items-center","gap-2"],[1,"category-badge"],[1,"wishlist",3,"click"],["viewBox","0 0 24 24"],["d",`M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5
         2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81
         14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55
         11.54L12 21.35z`],[1,"description"],[1,"features"],["class","feature-tag",4,"ngFor","ngForOf"],[1,"notes-accordion"],[1,"note-section",3,"click"],[1,"toggle-icon"],[1,"note-content"],[1,"note-group"],[1,"note-label"],[1,"note-values"],[1,"price-section"],[1,"price"],[4,"ngIf","ngIfElse"],[1,"perfume-badge"],[1,"feature-tag"],[1,"feature-icon"],[1,"size-select",3,"ngModelChange","ngModel"],["disabled","",3,"value"],[1,"add-to-cart",3,"click"],[1,"cart-icon"],[1,"go-to-cart",3,"click"],[1,"btn","removeButton",3,"click"]],template:function(t,r){t&1&&(qe(0,XW,51,20,"div",1),M(1,"app-perfume-details",2),de("closed",function(){return r.showDetails=!1})("addedToCart",function(o){return r.addToCart(o)}),T()),t&2&&(pe("ngIf",r.perfume),Q(),pe("perfume",r.perfume)("isOpen",r.showDetails))},dependencies:[fo,ho,zy,qy,hu,fu,ca,Ky,Op],styles:[".perfume-card[_ngcontent-%COMP%]{width:320px;background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 8px 24px #00000014;transition:all .3s cubic-bezier(.25,.8,.25,1);position:relative;margin:16px}.perfume-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 12px 32px #0000001f}.perfume-image[_ngcontent-%COMP%]{position:relative;max-height:350px;overflow:hidden}.perfume-image[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;top:36%;background-color:#0000007a;width:100%;text-align:center;color:#eee;padding:20px;font-size:1.2rem;font-weight:600;text-transform:uppercase;letter-spacing:1px;animation:_ngcontent-%COMP%_fadeIn .3s ease forwards}.perfume-image[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.1)}.perfume-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .6s ease}.perfume-image[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(to bottom,#0003 60%,#000000e6)}.perfume-image[_ngcontent-%COMP%]   .perfume-badge[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px;background:#d4af37;color:#fff;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:1px;box-shadow:0 2px 8px #0000001a}.perfume-details[_ngcontent-%COMP%]{padding:20px}.perfume-details[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]{margin-bottom:12px}.perfume-details[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.4rem;font-weight:600;color:#5d4037;letter-spacing:.5px}.perfume-details[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .perfume-type[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:6px}.perfume-details[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .perfume-type[_ngcontent-%COMP%]   .category-badge[_ngcontent-%COMP%]{background:#5d4037;color:#fff;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:1px;box-shadow:0 2px 8px #0000001a}.perfume-details[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .perfume-type[_ngcontent-%COMP%]   .wishlist[_ngcontent-%COMP%]{width:50px;height:35px;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center}.perfume-details[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .perfume-type[_ngcontent-%COMP%]   .wishlist[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;fill:none;stroke:#5d4037;stroke-width:2;transition:fill .3s,stroke .3s}.perfume-details[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .perfume-type[_ngcontent-%COMP%]   .wishlist.filled[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#e74c3c;stroke:#e74c3c}.perfume-details[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .perfume-type[_ngcontent-%COMP%]   .wishlist[_ngcontent-%COMP%]:hover{background:#f0f0f0}.perfume-details[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#333;font-size:.9rem;line-height:1.5;margin:12px 0}.perfume-details[_ngcontent-%COMP%]   .features[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin:16px 0}.perfume-details[_ngcontent-%COMP%]   .features[_ngcontent-%COMP%]   .feature-tag[_ngcontent-%COMP%]{display:flex;align-items:center;background:#f9f5f2;padding:6px 12px;border-radius:20px;font-size:.75rem;color:#5d4037}.perfume-details[_ngcontent-%COMP%]   .features[_ngcontent-%COMP%]   .feature-tag[_ngcontent-%COMP%]   .feature-icon[_ngcontent-%COMP%]{margin-right:6px;font-size:.8rem}.perfume-details[_ngcontent-%COMP%]   .notes-accordion[_ngcontent-%COMP%]{margin:16px 0;border-top:1px solid #e0e0e0;padding-top:12px}.perfume-details[_ngcontent-%COMP%]   .notes-accordion[_ngcontent-%COMP%]   .note-section[_ngcontent-%COMP%]{cursor:pointer}.perfume-details[_ngcontent-%COMP%]   .notes-accordion[_ngcontent-%COMP%]   .note-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin:0 0 8px;font-size:.9rem;color:#5d4037}.perfume-details[_ngcontent-%COMP%]   .notes-accordion[_ngcontent-%COMP%]   .note-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%]{font-size:.8rem;transition:transform .3s ease}.perfume-details[_ngcontent-%COMP%]   .notes-accordion[_ngcontent-%COMP%]   .note-section[_ngcontent-%COMP%]   .note-content[_ngcontent-%COMP%]{max-height:0;overflow:hidden;transition:max-height .3s ease}.perfume-details[_ngcontent-%COMP%]   .notes-accordion[_ngcontent-%COMP%]   .note-section[_ngcontent-%COMP%]   .note-content.expanded[_ngcontent-%COMP%]{max-height:200px}.perfume-details[_ngcontent-%COMP%]   .notes-accordion[_ngcontent-%COMP%]   .note-section[_ngcontent-%COMP%]   .note-content[_ngcontent-%COMP%]   .note-group[_ngcontent-%COMP%]{margin-bottom:8px}.perfume-details[_ngcontent-%COMP%]   .notes-accordion[_ngcontent-%COMP%]   .note-section[_ngcontent-%COMP%]   .note-content[_ngcontent-%COMP%]   .note-group[_ngcontent-%COMP%]   .note-label[_ngcontent-%COMP%]{font-weight:500;font-size:.8rem;color:#5d4037;margin-right:6px}.perfume-details[_ngcontent-%COMP%]   .notes-accordion[_ngcontent-%COMP%]   .note-section[_ngcontent-%COMP%]   .note-content[_ngcontent-%COMP%]   .note-group[_ngcontent-%COMP%]   .note-values[_ngcontent-%COMP%]{font-size:.8rem;color:#777}.perfume-details[_ngcontent-%COMP%]   .price-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:.5rem}.perfume-details[_ngcontent-%COMP%]   .price-section[_ngcontent-%COMP%]   .size-select[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #ddd;border-radius:4px;margin-right:.5rem}.perfume-details[_ngcontent-%COMP%]   .price-section[_ngcontent-%COMP%]   .add-to-cart[_ngcontent-%COMP%]{background:#5d4037;color:#fff;border:none;padding:.5rem 1rem;border-radius:4px;cursor:pointer;transition:background .3s}.perfume-details[_ngcontent-%COMP%]   .price-section[_ngcontent-%COMP%]   .add-to-cart[_ngcontent-%COMP%]:hover{background:#3d2a24}.perfume-details[_ngcontent-%COMP%]   .price-section[_ngcontent-%COMP%]   .removeButton[_ngcontent-%COMP%]{background:#5d4037;color:#fff;border:none;padding:.5rem 1rem;border-radius:4px;width:100%;text-align:center;cursor:pointer;transition:background .3s}.perfume-details[_ngcontent-%COMP%]   .price-section[_ngcontent-%COMP%]   .removeButton[_ngcontent-%COMP%]:hover{background:#6f574e}.perfume-details[_ngcontent-%COMP%]   .price-section[_ngcontent-%COMP%]   .go-to-cart[_ngcontent-%COMP%]{background:#d4af37;color:#fff;border:none;padding:.5rem 1rem;border-radius:4px;cursor:pointer;transition:background .3s;animation:_ngcontent-%COMP%_pulse .5s}.perfume-details[_ngcontent-%COMP%]   .price-section[_ngcontent-%COMP%]   .go-to-cart[_ngcontent-%COMP%]:hover{background:#c2b1aa}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1)}50%{transform:scale(1.05)}to{transform:scale(1)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.note-content.expanded[_ngcontent-%COMP%]   .note-group[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease forwards;opacity:0}.note-content.expanded[_ngcontent-%COMP%]   .note-group[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.note-content.expanded[_ngcontent-%COMP%]   .note-group[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.note-content.expanded[_ngcontent-%COMP%]   .note-group[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}"]})};function eK(n,e){if(n&1&&(M(0,"option",48),B(1),T()),n&2){let t=e.$implicit;pe("value",t),Q(),rt(t)}}function tK(n,e){if(n&1&&(M(0,"option",48),B(1),T()),n&2){let t=e.$implicit;pe("value",t),Q(),rt(t)}}function nK(n,e){if(n&1){let t=Fn();M(0,"div",16)(1,"div",17),de("click",function(){Ze(t);let i=Re();return Xe(i.toggleShowFilter())}),M(2,"h2",18),bt(),M(3,"svg",19),se(4,"path",20)(5,"path",21),T(),Rt(),M(6,"span"),B(7,"Filter & Sort"),T()(),M(8,"button",22),de("click",function(i){Ze(t);let o=Re();return Xe(o.resetFilters(i))}),bt(),M(9,"svg",23),se(10,"path",24),T(),B(11," Reset All "),T()(),Rt(),M(12,"div",25)(13,"div",26)(14,"div",27)(15,"div",28),bt(),M(16,"svg",29),se(17,"path",30),T()(),Rt(),M(18,"label",31),B(19,"Fragrance Family"),T()(),M(20,"div",32)(21,"select",33),_i("ngModelChange",function(i){Ze(t);let o=Re();return co(o.selectedCategory,i)||(o.selectedCategory=i),Xe(i)}),de("change",function(){Ze(t);let i=Re();return Xe(i.applyFilters())}),qe(22,eK,2,2,"option",34),T(),se(23,"div",35),T()(),M(24,"div",26)(25,"div",27)(26,"div",28),bt(),M(27,"svg",29),se(28,"path",36)(29,"circle",37),T()(),Rt(),M(30,"label",38),B(31,"Origin Country"),T()(),M(32,"div",32)(33,"select",39),_i("ngModelChange",function(i){Ze(t);let o=Re();return co(o.selectedCountry,i)||(o.selectedCountry=i),Xe(i)}),de("change",function(){Ze(t);let i=Re();return Xe(i.applyFilters())}),qe(34,tK,2,2,"option",34),T(),se(35,"div",35),T()(),M(36,"div",26)(37,"div",27)(38,"div",28),bt(),M(39,"svg",29),se(40,"path",40),T()(),Rt(),M(41,"label",41),B(42,"Sort Options"),T()(),M(43,"div",32)(44,"select",42),_i("ngModelChange",function(i){Ze(t);let o=Re();return co(o.sortOption,i)||(o.sortOption=i),Xe(i)}),de("change",function(){Ze(t);let i=Re();return Xe(i.applyFilters())}),M(45,"option",43),B(46,"Featured"),T(),M(47,"option",44),B(48,"Price: Low to High"),T(),M(49,"option",45),B(50,"Price: High to Low"),T(),M(51,"option",46),B(52,"Name: A-Z"),T(),M(53,"option",47),B(54,"Name: Z-A"),T()(),se(55,"div",35),T()()()()}if(n&2){let t=Re();Q(3),pt("open",t.showFilter),Q(9),pt("open",t.showFilter),Q(9),vi("ngModel",t.selectedCategory),Q(),pe("ngForOf",t.categories),Q(11),vi("ngModel",t.selectedCountry),Q(),pe("ngForOf",t.countries),Q(10),vi("ngModel",t.sortOption)}}function rK(n,e){n&1&&(M(0,"div",49),se(1,"div",50),M(2,"p"),B(3,"Loading fragrances..."),T()())}function iK(n,e){if(n&1&&(M(0,"div"),se(1,"perfume-card",53),T()),n&2){let t=e.$implicit;Q_("aria-labelledby","product-",t.id,"-title"),Q(),pe("perfume",t)}}function oK(n,e){if(n&1&&(M(0,"div",51),qe(1,iK,2,3,"div",52),T()),n&2){let t=Re();Q(),pe("ngForOf",t.displayedProducts)}}function sK(n,e){if(n&1){let t=Fn();M(0,"div",54)(1,"div",55),B(2,"\u{1F615}"),T(),M(3,"h3",56),B(4,"No fragrances match your filters"),T(),M(5,"p",57),B(6,"Try adjusting your search criteria"),T(),M(7,"button",22),de("click",function(i){Ze(t);let o=Re();return Xe(o.resetFilters(i))}),B(8," Reset All Filters "),T()()}}function aK(n,e){if(n&1){let t=Fn();M(0,"nav",58)(1,"button",59),de("click",function(){Ze(t);let i=Re();return Xe(i.previousPage())}),M(2,"span",60),B(3,"\u2190"),T(),B(4," Previous "),T(),M(5,"span",61),B(6),T(),M(7,"button",62),de("click",function(){Ze(t);let i=Re();return Xe(i.nextPage())}),B(8," Next "),M(9,"span",63),B(10,"\u2192"),T()()()}if(n&2){let t=Re();Q(),pe("disabled",t.currentPage===1),Q(5),Y_(" Page ",t.currentPage," of ",t.totalPages," "),Q(),pe("disabled",t.currentPage===t.totalPages)}}var Yy=class n{constructor(e){this.route=e}allProducts=[];displayedProducts=[];filteredProducts=[];isLoading=!0;categories=[];countries=[];currentPage=1;productsPerPage=4;totalPages=1;selectedCategory="all";selectedCountry="all";sortOption="featured";showFilter=!1;perfumeService=z(mn);ngOnInit(){this.route.queryParamMap.subscribe(e=>{e.has("type")&&(this.selectedCategory=e.get("type")||"all"),this.loadProducts()})}loadProducts(){this.isLoading=!0,setTimeout(()=>{this.perfumeService.getAllPerfumes().subscribe(e=>{this.allProducts=e,this.filteredProducts=[...this.allProducts],this.categories=["All",...new Set(this.allProducts.map(t=>t.category))],this.countries=["All",...new Set(this.allProducts.map(t=>t.country))],this.applyFilters(),this.isLoading=!1}),this.filteredProducts=[...this.allProducts],this.categories=["all",...new Set(this.allProducts.map(e=>e.category))],this.countries=["all",...new Set(this.allProducts.map(e=>e.country))],this.applyFilters(),this.isLoading=!1},1e3)}applyFilters(){let e=this.allProducts;switch(this.selectedCategory!=="all"&&(e=e.filter(t=>t.category===this.selectedCategory)),this.selectedCountry!=="all"&&(e=e.filter(t=>t.country===this.selectedCountry)),this.sortOption){case"price-low":e.sort((t,r)=>t.price-r.price);break;case"price-high":e.sort((t,r)=>r.price-t.price);break;case"name-asc":e.sort((t,r)=>t.name.localeCompare(r.name));break;case"name-desc":e.sort((t,r)=>r.name.localeCompare(t.name));break;default:break}this.filteredProducts=e,this.currentPage=1,this.updatePagination(),this.updateDisplayedProducts()}updatePagination(){this.totalPages=Math.ceil(this.filteredProducts.length/this.productsPerPage),this.currentPage>this.totalPages&&this.totalPages>0&&(this.currentPage=this.totalPages)}updateDisplayedProducts(){let e=(this.currentPage-1)*this.productsPerPage;this.displayedProducts=this.filteredProducts.slice(e,e+this.productsPerPage)}nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.updateDisplayedProducts())}previousPage(){this.currentPage>1&&(this.currentPage--,this.updateDisplayedProducts())}addToCart(e){console.log("Added to cart:",e)}toggleShowFilter(){this.showFilter=!this.showFilter}resetFilters(e){e.stopPropagation(),this.selectedCategory="all",this.selectedCountry="all",this.sortOption="featured",this.applyFilters()}scrollToContent(){window.scrollTo({top:0,behavior:"smooth"})}static \u0275fac=function(t){return new(t||n)(oe(Ti))};static \u0275cmp=Nt({type:n,selectors:[["app-products"]],decls:19,vars:5,consts:[[1,"products-page"],["aria-label","Fragrance Collection Introduction",1,"products-hero"],[1,"img-overlay"],[1,"hero-overlay"],[1,"hero-content","container"],[1,"hero-title"],[1,"hero-subtitle"],["class","filter-controls",4,"ngIf"],[1,"products-main-content"],[1,"container-fluid"],["aria-labelledby","products-grid-heading"],["id","products-grid-heading",1,"sr-only"],["class","loading-state","aria-live","polite","aria-busy","true",4,"ngIf"],["class","products-grid",4,"ngIf"],["class","empty-state","aria-live","polite",4,"ngIf"],["class","pagination","aria-label","Products pagination",4,"ngIf"],[1,"filter-controls"],[1,"filter-header",3,"click"],[1,"filter-title"],["viewBox","0 0 24 24","aria-hidden","true",1,"toggle-icon"],["d","M12 5v14",1,"vertical"],["d","M5 12h14",1,"horizontal"],["aria-label","Reset all filters",1,"reset-filters-button",3,"click"],["viewBox","0 0 24 24","aria-hidden","true"],["d","M19 7l-.867 12.142A2 2 0 0 1 16.138 21H7.862a2 2 0 0 1-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v3m4.5-3.5l-5 5m5-5l-5-5"],[1,"filter-grid"],[1,"filter-group"],[1,"filter-label"],[1,"filter-icon-container"],["viewBox","0 0 24 24","aria-hidden","true",1,"filter-icon"],["d","M4 6h16M4 12h16M4 18h16","stroke-width","2","stroke-linecap","round"],["for","category-filter"],[1,"select-wrapper"],["id","category-filter",1,"styled-select",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"select-arrow"],["d","M12 2a8 8 0 0 0-8 8c0 7 8 12 8 12s8-5 8-12a8 8 0 0 0-8-8z","stroke-width","2"],["cx","12","cy","10","r","3","stroke-width","2"],["for","country-filter"],["id","country-filter",1,"styled-select",3,"ngModelChange","change","ngModel"],["d","M3 6h18M7 12h10M5 18h14","stroke-width","2","stroke-linecap","round"],["for","sort-filter"],["id","sort-filter",1,"styled-select",3,"ngModelChange","change","ngModel"],["value","featured"],["value","price-low"],["value","price-high"],["value","name-asc"],["value","name-desc"],[3,"value"],["aria-live","polite","aria-busy","true",1,"loading-state"],["aria-hidden","true",1,"spinner"],[1,"products-grid"],[4,"ngFor","ngForOf"],[3,"perfume"],["aria-live","polite",1,"empty-state"],["aria-hidden","true",1,"empty-state-icon"],[1,"empty-state-title"],[1,"empty-state-message"],["aria-label","Products pagination",1,"pagination"],["aria-label","Go to previous page",1,"pagination-button","pagination-prev",3,"click","disabled"],["aria-hidden","true",1,"pagination-icon","pagination-icon-prev"],["aria-live","polite",1,"pagination-status"],["aria-label","Go to next page",1,"pagination-button","pagination-next",3,"click","disabled"],["aria-hidden","true",1,"pagination-icon","pagination-icon-next"]],template:function(t,r){t&1&&(M(0,"div",0)(1,"section",1),se(2,"div",2),M(3,"div",3)(4,"div",4)(5,"h1",5),B(6,"Our Fragrance Collection"),T(),M(7,"p",6),B(8,"Discover exquisite scents from around the world"),T()()()(),qe(9,nK,56,9,"div",7),M(10,"main",8)(11,"div",9)(12,"section",10)(13,"h2",11),B(14,"Fragrance Products"),T(),qe(15,rK,4,0,"div",12)(16,oK,2,1,"div",13)(17,sK,9,0,"div",14),T(),qe(18,aK,11,4,"nav",15),T()()()),t&2&&(Q(9),pe("ngIf",!r.isLoading),Q(6),pe("ngIf",r.isLoading),Q(),pe("ngIf",!r.isLoading&&r.displayedProducts.length>0),Q(),pe("ngIf",!r.isLoading&&r.filteredProducts.length===0),Q(),pe("ngIf",!r.isLoading&&r.filteredProducts.length>0))},dependencies:[fo,ho,zy,qy,hu,fu,ca,Qy],styles:[`.products-page[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;color:#333;background-color:#f9f5f2}.products-page[_ngcontent-%COMP%]   .img-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(to bottom,#0000004d 60%,#000000e6);z-index:1}.products-hero[_ngcontent-%COMP%]{height:400px;background:linear-gradient(#0006,#0006),url("./media/hero1-EFDDK7XE.jpg") center/cover;display:flex;align-items:center;position:relative;margin-bottom:3rem}.products-hero[_ngcontent-%COMP%]   .hero-overlay[_ngcontent-%COMP%]{width:100%;padding:0 2rem}.products-hero[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;color:#fff;text-align:center}.products-hero[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%]{font-size:3.5rem;font-weight:300;margin-bottom:1rem;letter-spacing:2px;text-transform:uppercase}.products-hero[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]   .hero-subtitle[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:300;letter-spacing:1px}.filter-controls[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#f9f9f9);border-radius:16px;padding:2rem;margin:1rem;box-shadow:0 8px 32px #00000014;border:1px solid rgba(255,255,255,.3);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);position:relative;overflow:hidden}.filter-controls[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,#e67e22,#e74c3c,#9b59b6,#3498db);background-size:300% 300%;animation:_ngcontent-%COMP%_gradientBG 8s ease infinite}.filter-controls[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:0;cursor:pointer;transition:margin-bottom .3s ease}.filter-controls[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]:hover   .toggle-icon[_ngcontent-%COMP%]   .horizontal[_ngcontent-%COMP%], .filter-controls[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]:hover   .toggle-icon[_ngcontent-%COMP%]   .vertical[_ngcontent-%COMP%]{stroke:#9b59b6}.filter-controls[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   .filter-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#2c3e50;margin:0;display:flex;align-items:center;gap:.75rem}.filter-controls[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   .filter-title[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%]{width:24px;height:24px;stroke-width:2;stroke-linecap:round;transition:transform .4s cubic-bezier(.68,-.55,.27,1.55)}.filter-controls[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   .filter-title[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%]   .vertical[_ngcontent-%COMP%]{stroke:#7f8c8d;transition:opacity .3s ease,stroke .2s ease}.filter-controls[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   .filter-title[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%]   .horizontal[_ngcontent-%COMP%]{stroke:#7f8c8d;transition:transform .4s cubic-bezier(.68,-.55,.27,1.55),stroke .2s ease}.filter-controls[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   .filter-title[_ngcontent-%COMP%]   .toggle-icon.open[_ngcontent-%COMP%], .filter-controls[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   .filter-title[_ngcontent-%COMP%]   .toggle-icon.open[_ngcontent-%COMP%]   .horizontal[_ngcontent-%COMP%]{transform:rotate(90deg)}.filter-controls[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   .reset-filters-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background:#e74c3c1a;border:none;color:#e74c3c;font-size:.9rem;font-weight:600;cursor:pointer;padding:.5rem 1rem;border-radius:8px;transition:all .3s cubic-bezier(.25,.8,.25,1);position:relative;z-index:2}.filter-controls[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   .reset-filters-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px;stroke:currentColor;stroke-width:2}.filter-controls[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   .reset-filters-button[_ngcontent-%COMP%]:hover{background:#e74c3c33;transform:translateY(-1px);box-shadow:0 2px 8px #e74c3c26}.filter-controls[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   .reset-filters-button[_ngcontent-%COMP%]:active{transform:translateY(0)}.filter-controls[_ngcontent-%COMP%]   .filter-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1.75rem;max-height:0;overflow:hidden;transition:max-height .5s cubic-bezier(.22,1,.36,1),padding-top .4s ease,opacity .3s ease;opacity:0}.filter-controls[_ngcontent-%COMP%]   .filter-grid.open[_ngcontent-%COMP%]{max-height:500px;padding-top:2rem;margin-bottom:1rem;opacity:1}@media (max-width: 768px){.filter-controls[_ngcontent-%COMP%]   .filter-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.filter-controls[_ngcontent-%COMP%]   .filter-grid.open[_ngcontent-%COMP%]{max-height:800px}}.filter-controls[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.filter-controls[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-label[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:.75rem}.filter-controls[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-label[_ngcontent-%COMP%]   .filter-icon-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px;background:linear-gradient(135deg,#3498db1a,#9b59b61a);border-radius:8px;margin-right:12px}.filter-controls[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-label[_ngcontent-%COMP%]   .filter-icon-container[_ngcontent-%COMP%]   .filter-icon[_ngcontent-%COMP%]{width:18px;height:18px;stroke:#9b59b6;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;fill:none}.filter-controls[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-label[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;color:#7f8c8d;text-transform:uppercase;letter-spacing:.5px}.filter-controls[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .select-wrapper[_ngcontent-%COMP%]{position:relative}.filter-controls[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .select-wrapper[_ngcontent-%COMP%]   .styled-select[_ngcontent-%COMP%]{width:100%;padding:1rem 1.25rem;border:1px solid rgba(189,195,199,.5);border-radius:12px;background-color:#fff;font-size:.95rem;transition:all .3s cubic-bezier(.25,.8,.25,1);appearance:none;cursor:pointer;box-shadow:0 2px 8px #0000000d;color:#2c3e50;font-weight:500}.filter-controls[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .select-wrapper[_ngcontent-%COMP%]   .styled-select[_ngcontent-%COMP%]:hover{border-color:#3498db;box-shadow:0 4px 12px #3498db26}.filter-controls[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .select-wrapper[_ngcontent-%COMP%]   .styled-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#9b59b6;box-shadow:0 0 0 3px #9b59b633}.filter-controls[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .select-wrapper[_ngcontent-%COMP%]   .select-arrow[_ngcontent-%COMP%]{position:absolute;top:50%;right:1.25rem;transform:translateY(-50%);width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:6px solid #7f8c8d;pointer-events:none;transition:all .3s ease}.filter-controls[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .select-wrapper[_ngcontent-%COMP%]:hover   .select-arrow[_ngcontent-%COMP%]{border-top-color:#3498db}@keyframes _ngcontent-%COMP%_gradientBG{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.reset-filters-button[_ngcontent-%COMP%]{pointer-events:auto}.products-main-content[_ngcontent-%COMP%]{padding-bottom:4rem}.products-main-content[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:2rem;margin-bottom:3rem}.products-main-content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;overflow:hidden;transition:transform .3s ease,box-shadow .3s ease;position:relative;box-shadow:0 2px 8px #00000014}.products-main-content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 20px #0000001f}.products-main-content[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]:hover   .quick-view-button[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}.products-main-content[_ngcontent-%COMP%]   .product-image-container[_ngcontent-%COMP%]{position:relative;overflow:hidden;aspect-ratio:1/1}.products-main-content[_ngcontent-%COMP%]   .product-image-figure[_ngcontent-%COMP%]{margin:0;height:100%;width:100%}.products-main-content[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .5s ease;cursor:pointer}.products-main-content[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.products-main-content[_ngcontent-%COMP%]   .quick-view-button[_ngcontent-%COMP%]{position:absolute;bottom:1rem;left:50%;transform:translate(-50%) translateY(20px);background-color:#5d4037e6;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:50px;font-weight:500;cursor:pointer;opacity:0;transition:all .3s ease;z-index:2;white-space:nowrap}.products-main-content[_ngcontent-%COMP%]   .quick-view-button[_ngcontent-%COMP%]:hover{background-color:#5d4037}.products-main-content[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]{padding:1.5rem}.products-main-content[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:500;margin:0 0 .5rem;cursor:pointer;transition:color .2s ease}.products-main-content[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]:hover{color:#5d4037}.products-main-content[_ngcontent-%COMP%]   .product-country[_ngcontent-%COMP%]{color:#666;font-size:.9rem;margin:0 0 1rem}.products-main-content[_ngcontent-%COMP%]   .price-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.products-main-content[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:600;color:#5d4037}.products-main-content[_ngcontent-%COMP%]   .add-to-cart-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background-color:#5d4037;color:#fff;border:none;padding:.75rem 1.25rem;border-radius:6px;font-weight:500;cursor:pointer;transition:all .3s ease}.products-main-content[_ngcontent-%COMP%]   .add-to-cart-button[_ngcontent-%COMP%]:hover{background-color:#3d2a24;transform:translateY(-2px)}.products-main-content[_ngcontent-%COMP%]   .add-to-cart-button[_ngcontent-%COMP%]   .cart-icon[_ngcontent-%COMP%]{display:inline-block;width:16px;height:16px;background-image:url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3ccircle cx='9' cy='21' r='1'%3e%3c/circle%3e%3ccircle cx='20' cy='21' r='1'%3e%3c/circle%3e%3cpath d='M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6'%3e%3c/path%3e%3c/svg%3e");background-repeat:no-repeat;background-position:center}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem;text-align:center}.loading-state[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:4px solid rgba(93,64,55,.2);border-radius:50%;border-top-color:#5d4037;animation:_ngcontent-%COMP%_spin 1s ease-in-out infinite;margin-bottom:1rem}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:1.1rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;background:#fff;border-radius:8px;box-shadow:0 4px 12px #0000000d}.empty-state[_ngcontent-%COMP%]   .empty-state-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1.5rem}.empty-state[_ngcontent-%COMP%]   .empty-state-title[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem;color:#333}.empty-state[_ngcontent-%COMP%]   .empty-state-message[_ngcontent-%COMP%]{color:#666;margin-bottom:1.5rem}.empty-state[_ngcontent-%COMP%]   .reset-filters-button[_ngcontent-%COMP%]{background-color:#5d4037;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:6px;font-weight:500;cursor:pointer;transition:all .3s ease}.empty-state[_ngcontent-%COMP%]   .reset-filters-button[_ngcontent-%COMP%]:hover{background-color:#3d2a24}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:1.5rem;margin-top:3rem}.pagination[_ngcontent-%COMP%]   .pagination-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background-color:#fff;color:#333;border:1px solid #e0e0e0;padding:.75rem 1.5rem;border-radius:6px;font-weight:500;cursor:pointer;transition:all .3s ease}.pagination[_ngcontent-%COMP%]   .pagination-button[_ngcontent-%COMP%]:hover:not([disabled]){border-color:#5d4037;color:#5d4037}.pagination[_ngcontent-%COMP%]   .pagination-button[disabled][_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.pagination[_ngcontent-%COMP%]   .pagination-status[_ngcontent-%COMP%]{font-size:.9rem;color:#666}@media (max-width: 992px){.container-fluid[_ngcontent-%COMP%]{padding:0}.filter-controls[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.filter-controls[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]{min-width:auto}.products-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(240px,1fr))!important}}@media (max-width: 768px){.products-hero[_ngcontent-%COMP%]{height:300px}.products-hero[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%]{font-size:1.5rem!important;margin-top:3rem}.products-hero[_ngcontent-%COMP%]   .hero-subtitle[_ngcontent-%COMP%]{font-size:1rem!important}.products-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(200px,1fr))!important;gap:1.5rem!important}}@media (max-width: 576px){.filter-controls[_ngcontent-%COMP%]{padding:1rem}.filter-controls[_ngcontent-%COMP%]   .filters-wrapper[_ngcontent-%COMP%]{grid-template-columns:1fr}}`]})};var cK=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:Py},{path:"products",component:Yy},{path:"cart",component:Gy},{path:"**",redirectTo:""}],Zy=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=wt({type:n});static \u0275inj=_t({imports:[dC.forRoot(cK),dC]})};var Xy=class n{cartItemCount=0;router=z($t);perfumeService=z(mn);ngOnInit(){this.getCartItemCount()}collapseNavbar(){let e=document.getElementById("navbarNav");e?.classList.contains("show")&&new window.bootstrap.Collapse(e).hide()}openCart(){this.router.navigate(["/cart"])}getCartItemCount(){this.perfumeService.getAllPerfumes().subscribe(e=>{this.cartItemCount=e.filter(t=>t.inCart).length})}exploreCollectionFor(e){this.router.navigate(["/products"],{queryParams:{type:e}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Nt({type:n,selectors:[["custom-navbar"]],decls:28,vars:1,consts:[[1,"navbar","navbar-expand-sm","bg-transparent","shadow-lg","custom-navbar","fixed-top"],[1,"container-fluid"],["src","assets/images/logo.jpg","alt","RePublic",1,"logo"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon","custom-navbar-toggler-icon",3,"click"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","mb-2","mb-lg-0"],[1,"nav-item"],["routerLink","/home","routerLinkActive","active",1,"nav-link","active",3,"click"],["routerLink","/products","routerLinkActive","active",1,"nav-link",3,"click"],[1,"dropdown","me-3"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","dropdown-toggle"],["aria-labelledby","dropdownMenuButton1",1,"dropdown-menu"],[3,"click"],["routerLink","/home","routerLinkActive","active",1,"dropdown-item",3,"click"],[1,"cart-icon","ms-2","m-2"],[1,"btn","position-relative",3,"click"],[1,"bi","bi-cart3","fs-4","text-light"],[1,"position-absolute","top-0","start-100","translate-middle","badge","rounded-pill","bg-danger"]],template:function(t,r){t&1&&(M(0,"nav",0)(1,"div",1),se(2,"img",2),M(3,"button",3)(4,"span",4),de("click",function(){return r.collapseNavbar()}),T()(),M(5,"div",5)(6,"ul",6)(7,"li",7)(8,"a",8),de("click",function(){return r.collapseNavbar()}),B(9,"Home"),T()(),M(10,"li",7)(11,"a",9),de("click",function(){return r.collapseNavbar()}),B(12,"Products"),T()()(),M(13,"div",10)(14,"button",11),B(15," Categories "),T(),M(16,"ul",12)(17,"li",13),de("click",function(){return r.exploreCollectionFor("men")}),M(18,"a",14),de("click",function(){return r.collapseNavbar()}),B(19,"For Him"),T()(),M(20,"li",13),de("click",function(){return r.exploreCollectionFor("woman")}),M(21,"a",14),de("click",function(){return r.collapseNavbar()}),B(22,"For Her"),T()()()()(),M(23,"div",15)(24,"button",16),de("click",function(){return r.openCart()}),se(25,"i",17),M(26,"span",18),B(27),T()()()()()),t&2&&(Q(27),en(" ",r.cartItemCount," "))},dependencies:[sc,VP],styles:[".custom-navbar[_ngcontent-%COMP%]{background-color:#000000a6!important;-webkit-backdrop-filter:blur(10px)!important;backdrop-filter:blur(10px)!important;box-shadow:0 4px 12px #0000001a!important}.custom-navbar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;margin:0 20px;border-radius:50%;transition:all .3s ease-in-out}.custom-navbar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.custom-navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 10px;font-size:16px;font-weight:500;text-transform:uppercase;transition:all .3s ease-in-out}.custom-navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.custom-navbar[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{color:#f8f9fa!important;transform:scale(1.1)}.custom-navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .custom-navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#f8f9fa!important;text-decoration:none}.custom-navbar[_ngcontent-%COMP%]   .navbar-toggler[_ngcontent-%COMP%]{border:none!important}.custom-navbar[_ngcontent-%COMP%]   .navbar-toggler[_ngcontent-%COMP%]:focus{outline:none!important;box-shadow:none!important}.custom-navbar[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000!important;background-color:#f8f9fa!important}.dropdown-toggle[_ngcontent-%COMP%]{color:beige!important}.dropdown-toggle[_ngcontent-%COMP%]   .dropdown-item.active[_ngcontent-%COMP%]{background-color:#000!important;color:#f8f9fa!important}.custom-navbar-toggler-icon[_ngcontent-%COMP%]{border:1px solid wheat}.cart-icon[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{color:#f8f9fa;padding:.3rem .6rem}.cart-icon[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .3s ease}.cart-icon[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.2)}.cart-icon[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.6rem}@media (max-width: 768px){.custom-navbar[_ngcontent-%COMP%]   #navbarNav[_ngcontent-%COMP%]{padding:20px;border-radius:15px}.logo[_ngcontent-%COMP%]{display:none}}"]})};var Jy=class n{currentYear=new Date().getFullYear();router=z($t);exploreCollectionFor(e){this.router.navigate(["/products"],{queryParams:{type:e}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Nt({type:n,selectors:[["custom-footer"]],decls:29,vars:1,consts:[[1,"site-footer"],[1,"footer-container"],[1,"footer-main"],[1,"footer-brand"],[1,"footer-logo"],[1,"footer-tagline"],[1,"social-links"],["href","https://www.facebook.com/share/19D416MMYu/","target","_blank","aria-label","Facebook"],[1,"bi","bi-facebook"],["href","https://www.instagram.com/republic_fragrances_?igsh=YXVid3B2MHN4N3k1","target","_blank","aria-label","Instagram"],[1,"bi","bi-instagram"],["href","https://www.tiktok.com/@republic.fragranc?_t=ZS-8u55Lb146it&_r=1","target","_blank","aria-label","Instagram"],[1,"bi","bi-tiktok"],[1,"footer-links"],[1,"links-column"],[1,"links-title"],[3,"click"],[1,"footer-bottom"],[1,"copyright"]],template:function(t,r){t&1&&(M(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),B(5,"Scents of the World"),T(),M(6,"p",5),B(7,"Discover premium fragrances from every corner of the globe"),T(),M(8,"div",6)(9,"a",7),se(10,"i",8),T(),M(11,"a",9),se(12,"i",10),T(),M(13,"a",11),se(14,"i",12),T()()(),M(15,"div",13)(16,"div",14)(17,"h4",15),B(18,"Shop"),T(),M(19,"ul")(20,"li",16),de("click",function(){return r.exploreCollectionFor("men")}),M(21,"a"),B(22,"For Men"),T()(),M(23,"li",16),de("click",function(){return r.exploreCollectionFor("woman")}),M(24,"a"),B(25,"For Women"),T()()()()()(),M(26,"div",17)(27,"div",18),B(28),T()()()()),t&2&&(Q(28),en(" \xA9 ",r.currentYear," Scents of the World. All rights reserved. "))},styles:['.footer-brand[_ngcontent-%COMP%]   .footer-logo[_ngcontent-%COMP%]{color:#fff;font-size:1.8rem;font-weight:300;margin-bottom:15px;letter-spacing:1px}.footer-brand[_ngcontent-%COMP%]   .footer-logo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#b8860b;font-weight:600}.footer-brand[_ngcontent-%COMP%]   .footer-tagline[_ngcontent-%COMP%]{font-size:.95rem;line-height:1.6;margin-bottom:25px;color:#aaa}.footer-brand[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{display:flex;gap:15px}.footer-brand[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#ccc;width:36px;height:36px;border-radius:50%;border:1px solid #444;display:flex;align-items:center;justify-content:center;transition:all .3s ease}.footer-brand[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff;background:#b8860b;border-color:#b8860b;transform:translateY(-3px)}.footer-links[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:30px}.links-column[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;font-size:1.1rem;font-weight:600;margin-bottom:20px;letter-spacing:.5px;position:relative;padding-bottom:10px}.links-column[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;width:40px;height:2px;background:#b8860b}.links-column[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.links-column[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:12px}.links-column[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#aaa;text-decoration:none;font-size:.9rem;transition:color .3s ease}.links-column[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#b8860b;padding-left:5px}.footer-newsletter[_ngcontent-%COMP%]   .newsletter-title[_ngcontent-%COMP%]{color:#fff;font-size:1.1rem;font-weight:600;margin-bottom:15px;letter-spacing:.5px}.footer-newsletter[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#aaa;font-size:.9rem;margin-bottom:20px;line-height:1.6}.footer-newsletter[_ngcontent-%COMP%]   .newsletter-form[_ngcontent-%COMP%]{display:flex}.footer-newsletter[_ngcontent-%COMP%]   .newsletter-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:12px 15px;border:1px solid #444;background:#2a2a2a;color:#fff;font-size:.9rem;border-radius:4px 0 0 4px}.footer-newsletter[_ngcontent-%COMP%]   .newsletter-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#777}.footer-newsletter[_ngcontent-%COMP%]   .newsletter-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#b8860b}.footer-newsletter[_ngcontent-%COMP%]   .newsletter-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#b8860b;color:#fff;border:none;padding:0 20px;font-size:.9rem;font-weight:600;cursor:pointer;transition:background .3s ease;border-radius:0 4px 4px 0}.footer-newsletter[_ngcontent-%COMP%]   .newsletter-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#daa520}.footer-bottom[_ngcontent-%COMP%]{border-top:1px solid #333;padding:25px 0;display:flex;flex-direction:column;align-items:center;gap:20px;text-align:center}.footer-bottom[_ngcontent-%COMP%]   .payment-methods[_ngcontent-%COMP%]{display:flex;gap:15px;font-size:1.8rem;color:#777}.footer-bottom[_ngcontent-%COMP%]   .payment-methods[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:color .3s ease}.footer-bottom[_ngcontent-%COMP%]   .payment-methods[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:#b8860b}.footer-bottom[_ngcontent-%COMP%]   .legal-links[_ngcontent-%COMP%]{display:flex;gap:20px}.footer-bottom[_ngcontent-%COMP%]   .legal-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#aaa;font-size:.8rem;text-decoration:none;transition:color .3s ease}.footer-bottom[_ngcontent-%COMP%]   .legal-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#b8860b}.footer-bottom[_ngcontent-%COMP%]   .copyright[_ngcontent-%COMP%]{font-size:.8rem;color:#777}@media (max-width: 768px){.footer-main[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:30px}.footer-links[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.footer-newsletter[_ngcontent-%COMP%]   .newsletter-form[_ngcontent-%COMP%]{flex-direction:column}.footer-newsletter[_ngcontent-%COMP%]   .newsletter-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:4px;margin-bottom:10px}.footer-newsletter[_ngcontent-%COMP%]   .newsletter-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:4px;padding:12px}.footer-bottom[_ngcontent-%COMP%]   .legal-links[_ngcontent-%COMP%]{flex-direction:column;gap:10px}}.site-footer[_ngcontent-%COMP%]{background:#1a1a1a;color:#e0e0e0;padding:60px 0 0;font-family:Helvetica Neue,Arial,sans-serif;position:relative}.site-footer[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:2px;background:linear-gradient(90deg,#b8860b,#8b6914,#b8860b)}.footer-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 20px}.footer-main[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:40px;margin-bottom:60px}']})};var ev=class n{title="perfume-brand";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Nt({type:n,selectors:[["app-root"]],decls:4,vars:0,template:function(t,r){t&1&&(se(0,"custom-navbar"),M(1,"div"),se(2,"router-outlet"),T(),se(3,"custom-footer"))},dependencies:[oC,Xy,Jy]})};var tv=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=wt({type:n,bootstrap:[ev]});static \u0275inj=_t({imports:[WA,Zy,LA,tL,nL,iO.initializeApp(Hy.firebaseConfig),$k]})};GA().bootstrapModule(tv,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
